import{j as t,r as f,a as Ve}from"./node_modules/react-ca38e57f.js";import{a as Cs,c as fi}from"./node_modules/react-dom-890ad6eb.js";import{L as bi,H as hi}from"./node_modules/react-router-dom-c61215f4.js";import{c as j}from"./node_modules/classnames-8c216fbe.js";import{c as Ti,u as gi,a as xi,b as _i,d as V,e as vi,f as Ci,W as Mi,g as Si}from"./node_modules/wagmi-2ead49f5.js";import{p as Ai,I as wi,q as ji,r as ki,t as Di,u as Cn}from"./node_modules/@wagmi-6bf1e8d1.js";import{Q as Mn,k as Ei,h as Ii}from"./node_modules/react-toastify-aabdd2df.js";import{b as St,O as Ms,a as Ss,d as Pi,e as We,f as Bi}from"./node_modules/react-router-f2494c00.js";import{S as Ni,c as Ri}from"./node_modules/react-select-60a7e7c9.js";import{W as Li}from"./node_modules/react-tooltip-fe768ac8.js";import{E as Oi}from"./node_modules/react-error-boundary-20af25a3.js";import{u as Fi,a as Ui,b as Oe,c as $i,d as Ae}from"./node_modules/react-use-a5fc3a83.js";import{R as Sn}from"./node_modules/react-modal-7cc663bd.js";import{i as U,u as we}from"./node_modules/swr-51cbfeda.js";import{B as Ft,A as Hi,W as Wi,C as Ut,z as An,D as wn,E as qi}from"./node_modules/@ethersproject-ea9767f3.js";import{_ as Vi}from"./node_modules/react-fast-marquee-e7efdec2.js";import{I as Gi}from"./node_modules/react-icons-e121cffb.js";import{f as Ie}from"./node_modules/date-fns-003c5fae.js";import"./node_modules/@uniswap-8e2529d3.js";import{A as Yi,a as Qi}from"./node_modules/@szhsin-39f56cb6.js";import{r as Ki}from"./node_modules/swiper-4105a6d8.js";import{u as zi}from"./node_modules/ethers-2bda0d05.js";import{S as Xi}from"./node_modules/rc-slider-42d258a3.js";import{R as Zi,A as Ji,X as er,Y as tr,T as nr,a as sr,b as rs,C as ar}from"./node_modules/recharts-23c46484.js";import"https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs";import{T as ir}from"./node_modules/lightweight-charts-068b394f.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-fdf7e714.js";import"./node_modules/use-sync-external-store-15ecd965.js";import"./node_modules/eventemitter3-a38f4d11.js";import"./node_modules/zustand-8d5a2766.js";import"./node_modules/@noble-6164e8b7.js";import"./node_modules/isows-b4181a00.js";import"./node_modules/vite-plugin-node-polyfills-daa009c6.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/@babel-0a888fcc.js";import"./node_modules/@emotion-74247dfa.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-074b7f0c.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/prop-types-a4c5eb58.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-0e7c4f51.js";import"./node_modules/bech32-1d669b1d.js";import"./node_modules/js-sha3-e84ce763.js";import"./node_modules/bn.js-3937607a.js";import"./node_modules/hash.js-4eeb40e8.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-e14fc069.js";import"./node_modules/scrypt-js-0f05ed13.js";import"./node_modules/jsbi-a35364a5.js";import"./node_modules/tiny-invariant-bee4f299.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/big.js-da9df5c5.js";import"./node_modules/toformat-08bb593b.js";import"./node_modules/react-transition-state-c0a2e1a9.js";import"./node_modules/rc-util-8ad4eab6.js";import"./node_modules/react-resize-detector-d08699b7.js";import"./node_modules/lodash-688e0b9b.js";import"./node_modules/react-smooth-d1d94400.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-f69a62d9.js";import"./node_modules/css-unit-converter-9e08bb2c.js";import"./node_modules/fancy-canvas-250c9c40.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const rr="/sf_draft/assets/Logo-258738bb.svg",As=({className:e})=>t.jsx("div",{className:j("Logo",e),children:t.jsx("a",{className:"Logo__link",href:"/index.html",children:t.jsx("img",{src:rr,alt:"Sharwa.Finance"})})});const $t=({className:e,links:n,type:s})=>{const a=j(e,s&&`_${s}`);return t.jsx("div",{className:j("Links",a),children:n.map((i,o)=>{var p;const r=j("Links__item",i.isActive&&"active");return((p=i.to)==null?void 0:p.startsWith("http"))?t.jsx("a",{className:r,href:i.to,rel:"noreferrer",target:"_blank",children:i.name},i.to):t.jsx(bi,{to:i.to,className:r,disabled:i.isDisabled,onClick:i.isDisabled&&(c=>c.preventDefault()),children:i.name},i.to??o)})})};const ws=e=>{const[n,s]=f.useState(!1),a=f.useCallback(()=>{document.removeEventListener("click",a),s(!1),e&&e()},[]);return{isOpen:n,openPopup:()=>{n||(s(!0),setTimeout(()=>{document.addEventListener("click",a)},10))},closePopup:a}},or="/sf_draft/assets/wallet-8f98d05f.svg",js="/sf_draft/assets/link-597331d6.svg",lr="/sf_draft/assets/cross_white-42eb5050.svg",ur="/sf_draft/assets/Arbitrum-299bccbf.svg",cr="/sf_draft/assets/Arbitrum-299bccbf.svg",Se=42161,jn=10,kn=[Se],Ht={[Se]:{name:"Arbitrum",icon:ur},[jn]:{name:"Optimism",icon:cr,isDisabled:!0}},pr=e=>{var s;let n=e.reason??e.message;return n==="Internal JSON-RPC error."&&(n=(s=e.data)==null?void 0:s.message),n},dr=e=>e?e.includes("User rejected the request")?"User rejected the request.":e.includes("user rejected transaction")?"User rejected transaction.":e.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":e.includes("Connector already connected")?"Wallet is already connected.":e.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":e.includes("Too little received")?"Slippage set too low. Please consider increasing it for successful strategy purchase.":e:"Unknown error",je=e=>{if(typeof e!="bigint")throw new TypeError(`Invalid BigInt: ${e}`)},ks=e=>{if(typeof e!="number"&&typeof e!="string")throw new TypeError(`Invalid amount: ${e}`)},yr=e=>{if(typeof e!="string")throw new TypeError(`Invalid String: ${e}`)},mr=(e,n,s)=>{n=Ds(n);const a=Ns(e)+"/tx/"+s;console.log(n.text,`
`,a),Mn.success(t.jsxs("div",{children:[t.jsx("div",{children:n.node}),t.jsx("br",{}),s&&t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},Ds=e=>{if(typeof e=="string"){const n=e;e={text:n,node:n}}return e},fr=e=>{e=Ds(e),console.log(e.text),Mn.success(e.node)},ut=(e,n)=>{let s;if(typeof e=="string")s=e;else{const a=pr(e);s=dr(a)}console.error(e),Mn.error(t.jsx("div",{children:s})),n&&n(!1)},dt=.003,br=.005,ie=["USDC","ETH","WBTC"],hr="/sf_draft/assets/ETH-fb1e5539.svg",Es="/sf_draft/assets/ETH_circled-dc6cb60f.svg",Tr="/sf_draft/assets/BTC-b739bd63.svg",gr="/sf_draft/assets/WETH-2ba67e25.svg",xr="/sf_draft/assets/WBTC-f0287338.svg",Is="/sf_draft/assets/WBTC_circled-48bbc65b.svg",_r="/sf_draft/assets/LINK-728e8697.svg",vr="/sf_draft/assets/ARB-fc2e28d1.svg",Cr="/sf_draft/assets/GMX-f911f5cf.svg",Mr="/sf_draft/assets/MAGIC-5214f6ce.svg",os="/sf_draft/assets/USDC-5a7f3d86.svg",Ps="/sf_draft/assets/USDC_circled-cda21ca8.svg",Sr="/sf_draft/assets/USDT-2e53b5e9.svg",Ar="/sf_draft/assets/DAI-b460716b.svg",nt={[Se]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",oracleAddress:"0x639fe6ab55c921f74e7fac1ee960c0b6293ba612",url:"https://www.coingecko.com/en/coins/ethereum",isAsset:!0,isETH:!0,icon:hr,icon_circled:Es,isSwappable:!0,isWrappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",oracleAddress:"0x6ce185860a4963106506c203335a2910413708e9",url:"https://www.coingecko.com/en/coins/bitcoin",isAsset:!0,icon:Tr,isWrappable:!0},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:gr,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:xr,icon_circled:Is,isSwappable:!0},{name:"Chainlink Token",symbol:"LINK",decimals:18,address:"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4",oracleAddress:"0x86e53cf1b870786351da77a57575e79cb55812cb",url:"https://www.coingecko.com/en/coins/chainlink",icon:_r},{name:"Arbitrum Token",symbol:"ARB",decimals:18,address:"0x912CE59144191C1204E64559FE8253a0e49E6548",oracleAddress:"0xb2a824043730fe05f3da2efafa1cbbe83fa548d6",url:"https://www.coingecko.com/en/coins/arbitrum",icon:vr},{name:"GMX Token",symbol:"GMX",decimals:18,address:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",oracleAddress:"0xdb98056fecfff59d032ab628337a4887110df3db",url:"https://www.coingecko.com/en/coins/gmx",icon:Cr},{name:"MAGIC",symbol:"MAGIC",decimals:18,address:"0x539bdE0d7Dbd336b79148AA742883198BBF60342",oracleAddress:"0x47e55ccec6582838e173f252d08afd8116c2202d",url:"https://www.coingecko.com/en/coins/magic",icon:Mr},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:Ar,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:os,icon_circled:Ps,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:os,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:Sr,isSwappable:!0,isStable:!0}]},Pt={},Bt={},ls=Object.keys(nt);for(let e=0;e<ls.length;e++){const n=ls[e];Pt[n]={},Bt[n]={};let s=nt[n];for(let a=0;a<s.length;a++){const i=s[a];i.address=i.address.toLowerCase(),Pt[n][i.symbol]=i,Bt[n][i.address]=i}}const Wt={};for(let e=0;e<nt[Se].length;e++){const n=nt[Se][e];Wt[n.symbol]=n.decimals}const qt=nt[Se].filter(e=>e.isAsset).map(e=>e.symbol),J=(e,n)=>{if(!Pt[e])throw new Error(`No tokens found for chainId ${e}`);const a=Pt[e][n];if(!a)throw new Error(`Incorrect symbol "${n}" for chainId ${e}`);return a},us=(e,n)=>{if(!Bt[e])throw new Error(`No tokens found for chainId ${e}`);const a=Bt[e][n.toLowerCase()];if(!a)throw new Error(`Incorrect address "${n}" for chainId ${e}`);return a},Bs=(e,n)=>J(e,n).address,wr=e=>{const n=nt[e];if(!n)throw new Error(`No tokens found for chainId ${e}`);return n.filter(a=>a.isSwappable)},Dn=e=>J(e,"USDC").address,Nt=e=>J(Se,e).icon,ge=(e,n,s=[],a,i,o=()=>{})=>(i&&i(!0),n(...s).then(r=>{console.log("Submitting:",r),r.wait().then(l=>{typeof a=="function"&&(a=a(l)),mr(e,a,r.hash),i&&i(!1),o&&o(l)},l=>{ut(l,i)})},r=>{ut(r,i)})),jr=()=>{const e=[ji];if(e.length!==kn.length)throw new Error("Invalid number of wagmi chains.");const{chains:n,publicClient:s,webSocketPublicClient:a}=Ai(e,[ki()]);return Ti({autoConnect:!0,publicClient:s,webSocketPublicClient:a,connectors:[new wi({chains:n,options:{name:"Injected",shimDisconnect:!0}})]})},Ns=e=>{switch(e){case Se:return"https://arbiscan.io";case jn:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}},yt=e=>ie.map(s=>J(e,s));const z=f.forwardRef(function({children:n,className:s,style:a,isDisabled:i,isGreen:o,onClick:r,type:l},u){const p=j(s,l&&`Button_${l}`,o&&"_green"),c=l==="complex";return t.jsx("button",{className:j("Button",p),ref:u,disabled:i,onClick:r,"data-text":n,style:a,children:c?t.jsx("span",{children:n.toString()}):n})}),Rs=f.createContext(null),kr=({children:e})=>{const{godEyeAddress:n}=Er();return t.jsx(Rs.Provider,{value:n,children:e})},Dr="AEZAKMI=",te=()=>{var i;const e=f.useContext(Rs),{address:n,isConnected:s}=gi();return{userAddress:(i=e??n)==null?void 0:i.toLowerCase(),isConnected:s}},Er=()=>{const[e,n]=f.useState(),s=St(),a=o=>{n(o),console.log("GOD EYE MODE ENABLED:",o)},i=o=>{n(null),console.log(`GOD EYE MODE DISABLED${o?` (${o})`:""}`)};return f.useEffect(()=>{const o=s.pathname.split("/"),r=o[o.length-1];if(r.startsWith(Dr)){const l=r.split("=")[1];Di(l)?a(l):i("Invalid wallet address")}},[s.pathname]),{godEyeAddress:e}};function Vt(){const{connect:e,connectors:n}=xi({onError:i=>{ut(i)}}),{disconnect:s}=_i(),a=n[0];return{connectWallet:()=>e({connector:a}),disconnectWallet:s}}const Ir=()=>{const{isOpen:e,openPopup:n,closePopup:s}=ws(),a=j(e&&"open"),i=V(),{isConnected:o,userAddress:r}=te(),{connectWallet:l,disconnectWallet:u}=Vt(),p=m=>m.slice(0,9)+"..."+m.slice(-15),c=()=>t.jsx(z,{type:"complex",onClick:l,children:"Connect Wallet"}),d=()=>t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"Wallet__header",onClick:n,children:t.jsxs("div",{className:"Wallet__address",children:[t.jsx("img",{src:or,alt:"Wallet icon"}),t.jsx("span",{children:p(r)})]})}),t.jsxs("div",{className:"Wallet__body",onClick:m=>m.stopPropagation(),children:[t.jsx("button",{className:"close-btn",onClick:s,children:t.jsx("img",{src:lr,alt:"x"})}),t.jsxs("a",{className:"Wallet__link",href:`${Ns(i)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[t.jsx("img",{src:js,alt:"external link"}),t.jsx("span",{children:"View on explorer"})]}),t.jsx("div",{className:"Wallet__inner-address",children:"("+p(r)+")"}),t.jsx(z,{className:"Wallet__button",onClick:u,children:"Disconnect wallet"})]})]});return t.jsx("div",{className:j("Wallet",a),children:o?d():c()})};const Pr=()=>t.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M1 3L5 5.73504L9 3",stroke:"white",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),he=({className:e,options:n,defaultValue:s,defaultOption:a,isDisabled:i,onChange:o,iconNode:r,iconTextNode:l,...u})=>{const p=r||l,c=!n.length,d=({children:T,...b})=>t.jsxs(Ri.Control,{...b,children:[r&&t.jsx("div",{className:"Selector__icon",children:r}),l&&t.jsx("div",{className:"Selector__icon Selector__icon_text",children:l}),T]}),m=T=>{let b;const g=v=>v.value===T;return n.find(v=>v.options)?n.forEach(v=>{if(b)return;b=(v.options??[v]).find(g)}):b=n.find(g),b},y=j(e,p&&"Selector_with-icon"),h=e==null?void 0:e.split(" ")[0];return t.jsx("div",{className:j("Selector__wrapper",h&&`${h}-wrapper`),"data-tooltip-id":c&&"Tooltip_bottom","data-tooltip-content":c?"No options":"",place:"bottom-end",children:t.jsx(Ni,{...u,options:n,defaultValue:a??m(s),onChange:o,className:j("Selector",y),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:T,innerProps:b})=>t.jsx("div",{ref:T,...b,className:"Selector__indicator Selector__dropdown-indicator",children:t.jsx(Pr,{})}),Control:d},isDisabled:c||i})})};const Re="#46956A",ce="#C75E4B",cs="#D99445",Rt="#6988FF",gt="#747FA6",ps="rgba(58, 68, 102, 0.5)",xt="#3A4466",ds="#181A3C",Br="#0D0F29",En="rgba(56, 66, 99, 0.25)",Nr="≈",bn={positive:"+",negative:"–",neutral:""},ne=({children:e,hasDelay:n=!0,...s})=>t.jsx(Li,{place:"bottom-start",delayShow:n?150:0,delayHide:n?150:0,border:`1px solid ${En}`,...s,children:e}),Ls=()=>{const{switchNetworkAsync:e}=vi();return n=>{if(typeof n!="number"&&typeof n!="string")throw new TypeError(`Invalid chainId type: ${n} (${typeof n})`);const s=Ht[n].name;e(n).then(()=>{fr(`Network switched to ${s} (${n})`)},a=>{ut(a)})}},Rr=()=>{const e=V(),n=Ls(),s=kn.map(i=>{const{name:o,icon:r,isDisabled:l}=Ht[i];return{value:i,label:t.jsxs("div",{className:"flex gap-x-7",children:[t.jsx("img",{src:r,alt:`${o} icon`}),t.jsx("span",{children:o})]}),isCurrent:i===e,isDisabled:l}}),a=s.find(i=>i.isCurrent);return t.jsxs("div",{className:"NetworkSwitcher",children:[t.jsx(he,{options:s,value:a,onChange:i=>{n(i.value)},isDisabled:!0}),t.jsx(ne,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},Lr=()=>{const{isConnected:e}=te();return t.jsxs("div",{className:"CryptoGateway",children:[e&&t.jsx(Rr,{}),t.jsx(Ir,{})]})},Or=()=>{const e=St(),n=[{name:"Option Trading",to:"/options"},{name:"Margin Trading",to:"/margin"},{name:"Earn",to:"/earn"}];return n.forEach(s=>{e.pathname.startsWith(s.to)&&(s.isActive=!0)}),t.jsxs("header",{className:"Header _container",children:[t.jsx(As,{}),t.jsx($t,{links:n}),t.jsx(Lr,{})]})};const Fr=()=>{const e=Ii({enter:"jellyIn",exit:"jellyOut"});return t.jsx(Ei,{limit:3,transition:e,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const Ur=300,$r=e=>{const n=Fi();f.useEffect(()=>{const s=window.innerWidth>1025?n:0;e?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${s}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},Ur)},[e,n])};Sn.setAppElement("#root");Sn.defaultStyles={};const ys=300,xe=({children:e,className:n,isOpen:s,setIsOpen:a,isObligatory:i,reset:o})=>($r(s),f.useEffect(()=>{!s&&o&&setTimeout(o,ys)},[s]),t.jsx(Sn,{className:j(n,"App-box"),isOpen:s,onRequestClose:()=>{i||a(!1)},overlayElement:(r,l)=>t.jsxs("div",{...r,children:[l,!i&&t.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:ys,children:e})),Hr=e=>{const{chainId:n}=e,[s]=f.useState(!0),a=Ls();return t.jsxs(xe,{className:"UnsupportedChainErrorModal",isOpen:s,isObligatory:!0,children:[t.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",n," is not supported."]}),t.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:kn.map(i=>{const o=Ht[i],{name:r,icon:l,isDisabled:u}=o;return t.jsxs(z,{isDisabled:u,type:"stroke",onClick:()=>{a(i)},children:[t.jsx("img",{src:l,alt:`${r} icon`}),"Switch to ",r]},i)})})]})},Wr="/margin",ke=600,De="Please, wait...";const Os="/sf_draft/assets/graph-b6757e0e.svg";const X=({className:e,children:n,isLarge:s=!1,symbol:a="USDC",isHlight:i=!1,style:o,...r})=>{const l=V(),u=J(l,a).icon,p=n,c=j(i&&"_hlight",s&&"_large",e);return t.jsxs("div",{className:j("Currency",c),style:o,...r,children:[t.jsx("img",{src:u,alt:`${a} icon`}),t.jsx("span",{children:p})]})},re=18,ms=18,fs=8,ct=6,qr=8,Vr=8,qe=6,Gr={ETH:ms,WETH:ms,BTC:fs,WBTC:fs,USDC:ct},Fs=2,Us=4,Me=(e,n=",")=>{ks(e);const s=e.toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),s.join(".")},Yr=e=>{if(ks(e),!$s(e))return 0;const n=e.toString(),s=n.indexOf("."),a=n.match(/[1-9]/)[0];return n.indexOf(a,s)-s},At=(e,n=0,s=!1)=>{if(!$s(e))return e;let a=e.toString(),i=a;const o=a.indexOf(".");if(a.length-o-1>n&&(i=bs(e,n),s&&Number(i)===0)){const l=Yr(e);i=bs(e,l)}return i},$s=e=>e.toString().indexOf(".")!==-1,Hs=(e,n)=>{let s=e.toString();const a=s.indexOf("."),i=a!==-1,o=i?s.length-a-1:0;return o<n&&(s+=+i?"":".",s+="0".repeat(n-o)),s},Qr=e=>{const n=e.toString();return n.indexOf(".")!==-1?parseFloat(n):e},Kr=e=>{const n=e.toString(),[s,a]=n.split(".");return a==="0".repeat(a==null?void 0:a.length)?s:n},zr=(e,n)=>{var i;let s=e.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((i=s.match(/\./g))==null?void 0:i.length)>1&&(s=(r=>r.replace(/\.$/,""))(s)),s=At(s,n?0:qe),s},pt=(e,n,s)=>Me(zr(e,s),n),Pe=(e,n=",")=>(yr(e),Number(e.split(n).join(""))),bs=(e,n=0)=>Math.floor(e*10**n)/10**n,fe=(e,n=0)=>Math.round(e*10**n)/10**n,Xr=(e,n=0)=>Math.ceil(e*10**n)/10**n,q=(e,n=re,s)=>{je(e);let a=Number(e)/10**n;return U(s)||(a=fe(a,s)),String(a).includes("e")?0:a},Gt=(e,n)=>(je(e),e*BigInt(10**n)),In=(e,n)=>(je(e),e/BigInt(10**n)),ue=(e,n=re)=>{const s=Math.min(qe,n),a=Math.round(Number(e)*10**s);return Gt(BigInt(a),n-s)},me=(e,n=Fs,s=re,a=!1)=>{je(e);let i=q(e,s);return i=At(i,n),i=Hs(i,n),a||(i=Kr(i)),i=Me(i),String(i)},Fe=(e,n=Us,s=re,a)=>{je(e);let i=q(e,s);return i=At(i,n,a),i=Qr(i),i=Me(i),String(i)},le=(e,n,s=n?Fs:Us,a=re)=>(je(e),(n?me:Fe)(e,s,a,!n)),Ws=(e,n,s)=>{je(e);const a=s-n;return(a<0?In:Gt)(e,Math.abs(a))},ae=(e,n)=>Ws(e,n,re),Ue=(e,n)=>Ws(e,re,n),Pn=(e,n,s=re)=>{je(e);const a=q(e,s)*n;return ue(a,s)},Ze=(e,n,s=re)=>(e=Gt(e,s),e/n),Zr=(e,n,s=re)=>{const a=e*n;return In(a,s)},Ge=e=>(je(e),e<0n?-e:e),Jr=e=>-Ge(e),eo=(e,n,s=re)=>{je(e);const a=s-n,i=In(e,a);return Gt(i,a)},qs=(e,n=0,s=re)=>ue(fe(q(e,s),n),s),to=(e,n=qe,s=re)=>{let a=q(e,s);return a===0&&e!==0n&&(a=+`0.${"0".repeat(n-1)}1`),ue(Xr(a,n),s)},hn=e=>{if(typeof e!="object")throw new Error(`Invalid bigNumberData: ${e}`);const n={};for(const s in e){let a=e[s];Ft.isBigNumber(a)&&(a=a.toBigInt()),n[s]=a}return n},Q=e=>{const n=Pe(e);return ue(n)},Yt=e=>{const n=q(e);return pt(n)},no="/sf_draft/assets/url-c5832e95.svg",so=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],ao=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],io=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],ro=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"},{internalType:"address",name:"_buildManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"buildManager",outputs:[{internalType:"contract IBuildManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract IExchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],oo=[{inputs:[{internalType:"address",name:"_proxySeller",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premium",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],lo=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],uo=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_weth9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth9",outputs:[{internalType:"contract IWETH9",name:"",type:"address"}],stateMutability:"view",type:"function"}],co=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[],name:"Lock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!0,internalType:"address",name:"tokenIn",type:"address"},{indexed:!0,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"timelock",type:"uint256"}],name:"Unlock",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc20",type:"address[]"}],name:"UpdateAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc721",type:"address[]"}],name:"UpdateAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableTokenToLiquidityPool",type:"address[]"}],name:"UpdateAvailableTokenToLiquidityPool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"UpdateErc721Limit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"UpdateLiquidatorFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"UpdateTokenToLiquidityPool",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc20",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableTokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"checkERC20Amount",outputs:[{internalType:"bool",name:"currectBalance",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721Value",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721tokenID",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"checkLiquidityPool",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721Limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"erc721Token",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAvailableErc20",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableErc721",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableTokenToLiquidityPool",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc20ByContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc721ByContract",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc20",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc721",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"address",name:"marginAccountOwner",type:"address"},{internalType:"address",name:"liquidator",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc20",type:"address[]"}],name:"setAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc721",type:"address[]"}],name:"setAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableTokenToLiquidityPool",type:"address[]"}],name:"setAvailableTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"setErc721Limit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"setLiquidatorFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"setTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"swapID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"timelock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],po=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"CreateMarginAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"createMarginAccount",outputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],yo=[{inputs:[{internalType:"address",name:"_positionsManager",type:"address"},{internalType:"address",name:"_baseToken",type:"address"},{internalType:"address",name:"_portfolioLendingStorage",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProvideERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"ProvideERC721",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"UpdateRedCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"UpdateYellowCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"WithdrawERC721",type:"event"},{inputs:[],name:"BASE_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtSizeInUSDC",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateMarginAccountValue",outputs:[{internalType:"uint256",name:"marginAccountValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getMarginAccountRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParams",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParamsByDebt",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"redCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"setRedCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"setYellowCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"yellowCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],mo=[{inputs:[{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"calculateAmountInERC20",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculateAmountOutERC20",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"calculateAmountOutERC721",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculatePositionValue",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"calculateTotalPositionValue",outputs:[{internalType:"uint256",name:"totalValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"checkValidityERC721",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"exercise",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getModuleAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"liquidate",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setTokenInToTokenOutToExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"swapOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"tokenInToTokenOutToExchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],fo=[{inputs:[{internalType:"contract IMarginAccountManager",name:"_marginAccountManager",type:"address"},{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"},{internalType:"contract IPositionsManager",name:"_hegicPositionManager",type:"address"},{internalType:"contract IProxySeller",name:"_proxySeller",type:"address"},{internalType:"contract IMarginAccount",name:"_marginAccount",type:"address"},{internalType:"contract ILiquidityPool",name:"_wethLiquidityPool",type:"address"},{internalType:"address",name:"_hegicTokenIn",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"borrowSwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicPositionManager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicTokenIn",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"provideETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"provideETHToPool",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"contract IProxySeller",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setUniswapExchangeModules",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapRepay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"transferBuyProvideERC721",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"uniswapExchangeModules",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"wethLiquidityPool",outputs:[{internalType:"contract ILiquidityPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"withdrawBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],bo=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],ho=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],To=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],go=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],xo=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],_o=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],vo=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Co=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!0,internalType:"int24",name:"tickSpacing",type:"int24"}],name:"FeeAmountEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!1,internalType:"int24",name:"tickSpacing",type:"int24"},{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolCreated",type:"event"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"}],name:"createPool",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],name:"enableFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"",type:"uint24"}],name:"feeAmountTickSpacing",outputs:[{internalType:"int24",name:"",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint24",name:"",type:"uint24"}],name:"getPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"parameters",outputs:[{internalType:"address",name:"factory",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}],Mo=e=>({VITE_ALCHEMY_API_KEY_42161:"mhe3YiD3ZPbVYOgV3rNzb5oJXKsGCKDR",VITE_PREMIA_API_KEY_42161:"sharwa_3ZgugmeGTvPgPXmuxuEeho4J",VITE_SUBGRAPH_API_KEY_42161:"4d7d37cf3bc9fc7cae70d943fb30a47e",BASE_URL:"/sf_draft",MODE:"production",DEV:!1,PROD:!0,SSR:!1})[`VITE_ALCHEMY_API_KEY_${e}`],Qt=e=>{const n=Mo(e);if(!n)throw new Error(`No Alchemy api key found for chainId ${e}`);return new Hi(e,n)},Bn=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new Wi(window.ethereum).getSigner()},_t={[Se]:{Pool_USDC:{address:"0x1cD7629981881e80A6fe046AF0556369FbA3C09c",abi:so},Pool_WBTC:{address:"0x9D8625f596d52523bAf775dB597b5429838177Bd",abi:ao},Pool_ETH:{address:"0x033258f67eD89043D3ea4E4f322aDcBd00152cf1",abi:io},TxBuilder:{address:"0x9daA79Dbf6CD067D207194661779677B5Ee29DCF",abi:ro},TxBuilderOpen_Hegic:{address:"0xb94fe302bF6B707027706996887299120449B6ec",abi:oo},Exchanger:{address:"0x03E34a4d1F2B88579521086876E781479A544610",abi:uo},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:lo},MarginAccount:{address:"0x7Ce77Aebd1AD2Bd629Ed35e74ceF3d108d8bF28a",abi:co},MarginAccountManager:{address:"0x3AD2F7207ad004fa658041Bc180Ad6c21072eBc7",abi:po},MarginTrading:{address:"0xcB6010751Ab1282b3777484f91F6E7728888AF58",abi:yo},ModularSwapRouter:{address:"0x565112dd17Ae251703e93441Ab04D8c5B884Fa72",abi:mo},MarginOneClick:{address:"0x2E9dD4A5C662acDF58699a917d4f225CccE24EB2",abi:fo},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:bo},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:ho},Hegic_Strategy:{abi:To},Hegic_PriceCalculator:{abi:go},Hegic_Option:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5"},ChainlinkOracle:{abi:_o},UniswapQuoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:vo},UniswapFactory:{address:"0x1F98431c8aD98523631AE4a59f267346ea31F984",abi:Co}},[jn]:{}},So=()=>{for(const e in _t){const n=_t[e],s=nt[e];s&&(s.forEach(a=>{n[a.symbol]={address:a.address,abi:xo}}),_t[e]={...n})}};So();const Nn=(e,n)=>{if(!_t[e])throw new Error(`Unknown chainId ${e}`);const s=_t[e][n];if(!s)throw new Error(`Unknown contract "${n}" for chainId ${e}`);return[s.address,s.abi]},$e=(e,n)=>Nn(e,n)[0],Rn=(e,n)=>Nn(e,n)[1],Vs=(e,n,s)=>new Ut(...Nn(e,n),s?Bn():Qt(e)),ee=(e,n)=>Vs(e,n,!1),be=(e,n)=>Vs(e,n,!0),Ao=async(e,n)=>{const a=(await wo(e,n).latestAnswer()).toBigInt();return ae(a,Vr)},wo=(e,n)=>{const s=Rn(e,"ChainlinkOracle"),a=J(e,n).oracleAddress;if(!a)throw new Error(`No oracle address set for asset ${n}`);return new Ut(a,s,Qt(e))},Gs=f.createContext(null),jo=({children:e})=>{const n=ko();return t.jsx(Gs.Provider,{value:n,children:e})},Kt=()=>f.useContext(Gs),ko=()=>{const e=V(),{data:n,error:s}=we("useTokenPricesSetup",{fetcher:async()=>{const a={},i=[];return qt.forEach(o=>{i.push(Ao(e,o).then(r=>{a[o]=r}))}),await Promise.all(i),a},refreshInterval:60*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return s?(console.log(s),null):n},Je=e=>{const n=Kt();return(n==null?void 0:n[e])??0n},Ys=()=>{var c;const e=V(),n=Kt(),[s,a]=f.useState(!1),i=f.useRef(null),o=f.useRef(null),r=f.useRef(null),l=d=>{var T,b,g;const m=(T=r.current)==null?void 0:T.clientWidth,y=((b=i.current)==null?void 0:b.clientWidth)-m;return(d??((g=o.current)==null?void 0:g.clientWidth))>y},u=Ui();f.useEffect(()=>{var d,m;if(s){const y=((m=(d=o.current)==null?void 0:d.querySelector(".rfm-marquee"))==null?void 0:m.clientWidth)/2;a(l(y))}else a(l())},[(c=o.current)==null?void 0:c.width,u]);const p=()=>qt.map(d=>{if(!n)return null;const m=n[d],y=me(m,void 0,void 0,!0),h=J(e,d);return t.jsx("div",{className:"AssetPricesPanel__item",children:t.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer","data-tooltip-id":"Tooltip_Asset","data-tooltip-content":h.name,children:[t.jsx(X,{isHlight:!0,symbol:d,children:t.jsxs("span",{children:["$",y]})}),t.jsx("img",{className:"icon-url",src:no,alt:"External url"})]})},d)});return t.jsxs("div",{className:j("AssetPricesPanel",s&&"marquee_rendered"),ref:i,children:[t.jsx("div",{className:"AssetPricesPanel__icon",ref:r,children:t.jsx("img",{src:Os,alt:"Graph icon"})}),t.jsx("div",{className:"AssetPricesPanel__items",ref:o,children:s?t.jsx(Vi,{pauseOnHover:!0,autoFill:!0,children:p()}):p()})]})},se=1e3,Le=60,Ye=60,vt=24,wt=e=>e*vt*Ye*Le*se,zt=e=>Math.floor(e/se/Le/Ye/vt),Ln=e=>Math.floor(e/se),On=(e,n)=>{if(e<0)return`0d:0h${n?":0m":""}`;const s=e/se/Le/Ye,a=Math.floor(s%vt),i=Math.floor(s/vt),o=Math.floor((s-Math.floor(s))*Ye);return n?`${i}d:${a}h:${o}m`:a===0&&i===0?`${o}m`:`${i}d:${a}h`},Do={[Se]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},Eo={[Se]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},Fn=e=>{const n=Do[e];if(!n)throw new Error(`No Hegic strategies found for chainId ${e}`);return n},Io=(e,n)=>{const s=Fn(e),a=zt(n);if(a<7||a>90)return;let i;return a<14?i=s.short:a<30?i=s.medShort:a<60?i=s.medLong:a<=90&&(i=s.long),i},Po=e=>{const n={},s=Fn(e);return Object.values(s).forEach((a,i)=>{const o=Object.keys(n)[i];for(const r in a){const l=a[r];n[`${r}_${o}`]=l}}),n},Qs=e=>{const n=Fn(e),s=[];return Object.values(n).forEach(a=>{s.push(...Object.values(a))}),s},Bo=(e,n)=>{const s=Eo[e];if(!s)throw new Error(`No Hegic Price Calculator address found for chainId ${e}`);const a=s[n];if(!a)throw new Error(`No Hegic Price Calculator address found for strategy key ${n}`);return a},Ks=(e,n,s)=>{const a=Rn(e,`Hegic_${s}`);return new Ut(n,a,Qt(e))},No=(e,n)=>{const s=Bo(e,n);return Ks(e,s,"PriceCalculator")},Un=(e,n)=>Ks(e,n,"Strategy"),Ro=e=>{const n=e.reduce((a,i)=>i<a?i:a,e[0]),s=e.reduce((a,i)=>i>a?i:a,e[0]);return{min:n,max:s}},jt=(e,n,s=1)=>{const a=e,i=n;if(a>i)return s;if(a==i)return 0;if(a<i)return-s},zs=e=>e.filter(n=>n),Xt=e=>e.filter(Lo),Lo=(e,n,s)=>s.indexOf(e)===n,Oo=e=>{e.splice(0,e.length)},Lt=e=>e[e.length-1],Fo=(e,n)=>e.reduce((s,a)=>{const i=Ge(n-s);return Ge(n-a)<i?a:s},e[0]),Uo=e=>{const n=[];return e.forEach(s=>{n.push(...s)}),n},$n=async(e,n,s,a)=>{const i=s%n;if(a+1>s-i&&(n=i),e.length>=n){const r=await Promise.all(e).catch(console.log);return Oo(e),r}else return[]},Ot=async(e,n,s)=>{const a=e.map(r=>$o(r,n,s)),i=await Promise.all(a);return e.filter((r,l)=>{if(i[l])return!0})},$o=async(e,n,s)=>{const a=await s.getBlock(e.blockNumber),i=Date.now()-n-wt(1);if(a.timestamp*se>i)return!0},Xs=e=>e.filter(n=>n.status==="fulfilled").map(n=>n.value),Zs=async(e,n)=>{const s={address:e.adress,topics:[An("Transfer(address,address,uint256)"),null,wn(n,32)]};return await e.queryFilter(s)},Tn=["delta","vega","gamma","theta"],hs=8,Ho=[7,14,30,60,90],Qe=Ho.map(wt),Wo=20*se,qo=(e,n,s,a,i,o)=>{const r=Ue(a,n.decimals),l=be(e,n.symbol);ge(e,l.approve,[s,Ft.from(r)],`${n.symbol} approved.`,i,o)},Vo=async(e,n,s,a,i)=>{je(i);const o=ee(e,n.symbol),r=Ue(i,n.decimals);return(await o.allowance(s,a)).toBigInt()>=r},Ne=(e,n)=>{const s=n.symbol??n,a=Wt[s];return Ue(e,a)},Ke=(e,n)=>{const s=n.symbol??n,a=Wt[s];return ae(e,a)},Go=e=>e.startsWith("W"),Js=(e,n)=>{const s=e.address!==n.address,a=e.isETH!==n.isETH;return s||a},Yo=e=>{const n={};return e.forEach(s=>n[s.symbol]=s),n},Hn=(e,n,s,a)=>{const[i,o]=s.split(".");let r=e[i],l=n[i];return o&&(r=r&&r[o],l=l&&l[o]),jt(r,l,a)},ea=(e,n)=>(s,a)=>Hn(s,a,e,n),Zt=(e,n,s)=>{if(!e||!Object.keys(e).length)return{...n};if(!n)return;const a={...e};s||(s=Object.keys(e));for(let i=0;i<s.length;i++){const[o,r]=s[i].split("."),l=r?e[o][r]:e[o],u=r?n[o][r]:n[o],p=l+u;r?(a[o]||(a[o]={}),a[o][r]=p):a[o]=p}return a},Qo=e=>Uo(Object.values(e));const ye=e=>{const{style:n,hasLeftMargin:s}=e;return t.jsx("div",{className:"Spinner",children:t.jsx(Gi,{className:"Spinner__icon",style:{marginLeft:s?7:0,...n}})})},mt=(e,n,s=t.jsx(ye,{}))=>n?s:e,de=(e,n,s=t.jsx(ye,{}))=>n?s:e(),Z=(e="—",n,s)=>t.jsx("span",{className:j("muted",s&&"muted_light"),style:{fontSize:n?13:"inherit"},children:e}),ta=e=>!U(e)&&!isNaN(e)&&e!==null,Jt=(e,n)=>`${e?"Long":"Short"} ${n?"Call":"Put"}`,Wn=(e,n,s)=>e?s>n:s<n,Ct=(e,n,s=re)=>Pn(e,1+n,s),Ts=(e,n,s=re)=>Pn(e,1-n,s),qn=(e,n,s)=>{if(s===0n)return 0n;const a=Ze(n,Ge(s))*100n,i=ue(-100),o=ue(100);return e===null?a:e?a<i?i:a:a>o?o:a},na=(e,n)=>{const s=Zt(e,n);for(const a in s){const i=s[a];s[a]=ta(i)?fe(i,3):void 0}return s},sa=(e,n=re)=>q(e,n,1),aa=(e,n)=>{const s=()=>{const o=g=>(1+r(g/Math.sqrt(2)))/2,r=g=>{const x=.254829592,v=-.284496736,_=1.421413741,M=-1.453152027,k=1.061405429,P=.3275911,S=Math.sign(g);g=Math.abs(g);const B=1/(1+P*g),E=1-((((k*B+M)*B+_)*B+v)*B+x)*B*Math.exp(-g*g);return S*E},l=(g,x,v,_,M)=>{const k=(Math.log(g/x)+(_+.5*M**2)*v)/(M*Math.sqrt(v)),P=k-M*Math.sqrt(v);return g*o(k)-x*Math.exp(-_*v)*o(P)},u=(g,x,v,_,M)=>{const k=(Math.log(g/x)+(_+.5*M**2)*v)/(M*Math.sqrt(v)),P=k-M*Math.sqrt(v);return x*Math.exp(-_*v)*o(-P)-g*o(-k)},p=(g,x,v,_,M,k)=>{const P=k?l:u;let S=.2,B=.001,E=1;const F=1e-5;let I=P(g,x,v,_,S),O=0;const N=1e3;for(;Math.abs(I-M)>F&&O<N;)I<M?B=S:E=S,S=(B+E)/2,I=P(g,x,v,_,S),O++;return S},c=q(n),d=q(e.strike),m=(e.expiry-Date.now())/se/Le/Ye/vt/365,y=q(e.premiumData.inUSDC),h=.01,{isCall:T}=e;return p(c,d,m,h,y,T)},a=o=>`${Math.floor(o*100)}%`,i=s();return{value:i,formatted:a(i)}},ia=e=>{if(!e.length)return null;const n={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},s=e.reduce((o,r,l)=>{var p;const u=Zt(o,r,["premium","pnl.inUSDC"]);return u.greeks=na(o.greeks,r.greeks),(p=r.collateral)!=null&&p.inUSDC&&(u.collateral.inUSDC+=r.collateral.inUSDC),u},n),a=()=>qn(null,s.pnl.inUSDC,s.premium),i=e.length===1;return s.pnl.inPercentage=i?e[0].pnl.inPercentage:a(),s};class Ko{constructor(n,s){this.getMarketToken=a=>J(a,s),this.getId=(a,i)=>{i=i.toLowerCase();const{strike:o,isCall:r,isLong:l,expiry:u}=a,p=q(BigInt(o)),c=Ie(Number(u),"dd-MMM-yy");return`${n}_${p}_${l?"LONG":"SHORT"}_${r?"CALL":"PUT"}_${c}_${i}`}}}class zo extends Ko{constructor(){super("Hegic","USDC.e")}calcDeltaByAssetPrice(n,s){const{isCall:a,strike:i,amount:o}=n,r=q(o);return a?i<s?r:0:i>s?-r:0}calcDeltaByStrikeScale(n,s){const{isCall:a,amount:i}=n;return a?Number(s)<100?i:0:Number(s)>100?-i:0}}const en=new zo,ra=f.createContext(null),Xo=({children:e})=>{const n=el();return t.jsx(ra.Provider,{value:n,children:e})},oa=()=>{const e=ua();return e===null?null:e==null?void 0:e.accounts},la=()=>{const e=ua();return e===null?null:e==null?void 0:e.mutate},ua=()=>{const{isConnected:e,userAddress:n}=te(),s=V(),a=ee(s,"MarginTrading"),{data:i,error:o,mutate:r}=we(e&&[n,"useMarginAccounts"],async()=>{const l=await Zo(s,n),u=[],p=[],c=await Jo(a);l.forEach(m=>{const y={id:m,ratioCoeffs:c},h=a.callStatic.calculateMarginAccountValue(m).then(g=>{const x=ae(BigInt(g),ct);y.balance=x}).catch(console.log),T=a.callStatic.getMarginAccountRatio(m).then(g=>{const x=ae(BigInt(g),5);y.ratio=x}).catch(console.log),b=Promise.all([h,T]).then(()=>u.push(y)).catch(console.log);p.push(b)}),await Promise.all(p);const d=u.sort((m,y)=>m.id<y.id?-1:1);return console.log("marginAccounts updated"),{accounts:d,mutate:r}},{revalidateOnFocus:!1,refreshInterval:300*se});return o?(console.log(o),null):i},Zo=async(e,n)=>{const s=ee(e,"MarginAccountManager");return(await Zs(s,n)).map(o=>o.args.tokenId.toBigInt())},Jo=async e=>{const[n,s]=await Promise.all([e.redCoeff(),e.yellowCoeff()]).then(a=>a.map(i=>ae(BigInt(i),5)));return{red:n,yellow:s}},et=()=>{const{isConnected:e}=te();return e?f.useContext(ra):null},el=()=>{const e=oa(),n=Oe("MarginAccount_selected-id",-1n,{serializer:l=>JSON.stringify(Number(l)),deserializer:l=>BigInt(JSON.parse(l))}),[s,a]=n,[i,o]=f.useState(!0);f.useEffect(()=>{const l=e==null?void 0:e.find(c=>c.id===s),u=e==null?void 0:e.length;u&&!l&&a(e[0].id),!U(e)?(o(!1),u||a(-1n)):o(!0)},[e,s]);const r={accounts:e,selectedAccountIdState:n,isLoading:i,utils:{}};return tl(r),r},tl=e=>(Object.keys(gs).forEach(n=>{const s=gs[n];e.utils[n]=s.bind(e)}),e),gs={getSelectedAccount:function(){return this.accounts?this.accounts.find(n=>n.id===this.selectedAccountIdState[0]):null}},ft=()=>{const e=et();if(!e)return;const n=e.selectedAccountIdState[0];if(n!==-1n)return n},nl=()=>{const e=et();if(!e)return null;const n=e.utils.getSelectedAccount();return n?n.ratioCoeffs:null},ca=13,sl=(e=void 0,n=void 0)=>{const{isConnected:s,userAddress:a}=te();e=e??a;const i=V(),o=Kt(),[r,l]=f.useState(void 0),u=()=>{r&&l(void 0)},p=ee(i,"Hegic_PositionManager"),{error:c,mutate:d}=we(s&&o&&[e,"useHegicPositions"],async()=>{const m=[],y=Qs(i),h=Qe[Qe.length-1],T=p.provider,g=(await Zs(p,e).then(x=>Ot(x,h,T)).catch(console.log)).map(x=>x.args.tokenId);if(g.length){const x=[];for(let v=0;v<y.length;v++){const _=y[v],M=Un(i,_),k=pa(_,g),P=M.queryFilter(k).then(E=>Ot(E,h,T)).catch(console.log),S=E=>da(i,E,e,o),B=P.then(E=>{const F=E.map(S);return Promise.all(F).catch(console.log)}).then(E=>{m.push(...zs(E))}).catch(console.log);x.push(B),await $n(x,ca,y.length,v)}}l(m??[]),n&&n()},{refreshInterval:Wo,refreshWhenHidden:!1});return f.useEffect(()=>{u(),e&&d()},[e,s]),c&&console.log(`Fetching Hegic positions error:
`,c),r},al=()=>{const e=V(),{isConnected:n}=te(),s=Kt(),a=ft(),i=ee(e,"MarginTrading"),o=Qs(e),r=ee(e,"Hegic_PositionManager"),l=Qe[Qe.length-1],u=r.provider,{data:p,error:c}=we(n&&s&&[a,"useHegicPositionsForMarginId"],async()=>{const d=[],m=il(i.address,a),h=(await i.queryFilter(m).catch(console.log)).map(T=>T.args.collateralTokenID.toBigInt());if(h.length){const T=[];for(let b=0;b<o.length;b++){const g=o[b],x=Un(e,g),v=pa(g,h),_=x.queryFilter(v).then(P=>Ot(P,l,u)).catch(console.log),M=P=>da(e,P,i.address,s),k=_.then(P=>{const S=P.map(M);return Promise.all(S).catch(console.log)}).then(P=>{d.push(...zs(P))}).catch(console.log);T.push(k),await $n(T,ca,o.length,b)}}return d.forEach(T=>{T.actions.close=async()=>{const b=Bn(),g=$e(e,"Hegic_Option");return i.connect(b).exercise(a,g,T.id)}}),d},{refreshInterval:60*se});return c?(console.log(c),null):p},il=(e,n)=>{const s=[An("ProvideERC721(uint256,address,address,uint256)"),wn(n,32)];return{address:e,topics:s}},pa=(e,n)=>{const s=[An("Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])"),n.map(i=>wn(i,32))];return{address:e,topics:s}},da=async(e,n,s,a)=>{const i=n.address,o=hn(n.decode(n.data,n.topics));o.data=hn(o.data);const r=ee(e,"Hegic_OperationalTreasury"),l=await r.lockedLiquidity(o.id),u=l.expiration*se;if(Date.now()>u||l.state===0)return;const{asset:d,isCall:m,isSpread:y,isLong:h,strikeScale:T}=rl(e,i);Object.assign(o,{asset:d,isCall:m,isSpread:y,isLong:h});const b=Ke(o.data.amount,d),g=a[d],x=ol(o,T);Object.assign(o,{strike:x});const{premium:v,pnl:_}=await ll(e,o,i),M=Ze(Ge(v),b),k=_.inPercentage===ue(-100),P=ul(o,g);return{market:"Hegic",id:Number(o.id),asset:d,amount:b,strike:x,isCall:m,isSpread:y,isLong:h,premium:v,pnl:_,entryPrice:M,expiry:u,greeks:P,utils:{calcPnl:async()=>new Promise(B=>{B(_)})},actions:{close:async()=>{const B=Bn();return r.connect(B).payOff(o.id,s)},isClosingDisabled:k}}},rl=(e,n)=>{const s=Po(e),a=Object.keys(s).find(p=>s[p]===n),[i,o,r]=a.split("_"),l=i.includes("CALL"),u=i.includes("SPREAD");return{asset:r,isCall:l,isSpread:u,isLong:!0,strikeScale:o}},ol=(e,n)=>{const s=ae(e.data.strike,qr);let a=qs(s/100n*BigInt(n));return e.isSpread&&(a=s),a},ll=async(e,n,s)=>{const a=Un(e,s),i=Jr(ae(n.positivepnl,ct)),r=ae(BigInt(await a.payOffAmount(n.id)),ct)+i,l={inUSDC:r,inPercentage:qn(n.isLong,r,i)};return{premium:i,pnl:l}},ul=(e,n)=>{const s={strike:e.strike,isCall:e.isCall,amount:e.data.amount};return{delta:en.calcDeltaByAssetPrice(s,n),vega:void 0,gamma:void 0,theta:void 0,rho:void 0}},ya=f.createContext(null),cl=({children:e})=>{const n=f.useState(pl());return t.jsx(ya.Provider,{value:n,children:e})},kt=()=>f.useContext(ya),pl=()=>({opening:[],closing:[]}),dl=(e,n)=>{const[s,a]=e;for(const i in s){const o=s[i];if(o.length){const r=o.filter(l=>l.market!==n);s[i]=r,a({...s})}}},yl=e=>{const n=kt(),a={Hegic:sl(void 0,(c=>()=>{dl(n,c)})("Hegic"))},i=ml(a),{isConnected:o}=te();if(!o)return{};const[r,l]=e;return Object.values(i).every(c=>!U(c))&&!r&&l(!0),i},ml=e=>{const n={};for(const s in e){const a=e[s],i=a&&a.filter(o=>!(Date.now()>o.expiry&&o.pnl.inPercentage===ue(-100)));n[s]=i}return n},ma=()=>f.useContext(fa),fl=()=>{const[e,n]=f.useState(!1),s=yl([e,n]),a=bl(s),i=ia(a),{userAddress:o}=te();return f.useEffect(()=>{n(!1)},[o]),{positions:a,positionsByMarket:s,positionsTotalData:i,arePositionsLoaded:e}},bl=e=>Object.values(e).reduce((s,a)=>(a&&s.push(...a),s),[]),fa=f.createContext(null),hl=({children:e})=>{const n=fl();return t.jsx(fa.Provider,{value:n,children:e})},Tl=()=>{const{data:e,error:n}=we("_useDates",async()=>{let s;try{s=[...gl()]}catch(a){console.log(a)}return s?Xt(s).sort(jt):null},{refreshInterval:5*Le*se,revalidateOnFocus:!1});return n?(console.log(n),null):e},gl=()=>Qe.map((n,s)=>{const a=new Date(Date.now()+n),i=s===0,o=s===Qe.length-1,r=a.getUTCHours()>=hs,l=a.getUTCDate();return i&&r&&a.setUTCDate(l+1),o&&!r&&a.setUTCDate(l-1),a.setUTCHours(hs),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0),a.getTime()}),Ee=()=>f.useContext(ba),xl=()=>{const e=Tl(),n=Oe("chosen-date",null),[s,a]=n;return e&&U(e.find(o=>o===s))&&a(e[0]),{dates:e,chosenDateState:n}},ba=f.createContext(null),_l=({children:e})=>{const n=xl();return t.jsx(ba.Provider,{value:n,children:e})},vl=()=>f.useContext(ha),Cl=()=>{const[e,n]=f.useReducer(Ml,{});return[e,n]},Ml=(e,n)=>{switch(n.type){case"added":{const{asset:s,dateMs:a,strikesForDate:i}=n;return e[s]||(e[s]={}),e[s][a]||(e[s][a]=i),{...e}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},ha=f.createContext(null),Ta=f.createContext(null),Sl=({children:e})=>{const[n,s]=Cl();return t.jsx(ha.Provider,{value:n,children:t.jsx(Ta.Provider,{value:s,children:e})})},Al=()=>t.jsx(hl,{children:t.jsx(_l,{children:t.jsx(Sl,{children:t.jsx(wl,{})})})}),wl=()=>{const e=St(),n=[{name:"Option Strategies",to:"/options/builder"},{name:"Option-Chain",to:"/options/option-chain"}];return n.forEach(s=>{e.pathname.endsWith(s.to)&&(s.isActive=!0)}),t.jsxs("div",{className:"OptionsPage",children:[t.jsx(Ys,{}),t.jsx($t,{links:n,type:"border"}),t.jsx(Ms,{})]})};function tn(e,n={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},s=[pt,Pe]){const[a,i]=e,{maxValue:o,placeholder:r,isDisabled:l,isFocused:u}=n,[p,c]=s,[d,m]=f.useState(!1),y=f.useRef(null);return{node:t.jsx("input",{autoFocus:u,type:"text",ref:y,value:a,disabled:l,placeholder:r,onChange:h=>{o&&c(h.target.value)>o?i(p(o)):i(p(h.target.value))},onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),hasFocus:d,ref:y}}const nn=({value:e,setValue:n,maxValue:s,maxValueDisplayed:a,maxLabel:i=void 0,formatInputStringFns:o=[pt,Pe],hasError:r,errorMsg:l,isDisabled:u,unitStr:p,placeholder:c,className:d})=>{typeof s=="bigint"&&(s=q(s));const m=tn([e,n],{maxValue:s,placeholder:c,isDisabled:u},o),y=j(d,m.hasFocus&&"hlight",r&&"error",u&&"disabled");return t.jsxs("div",{className:j("InputFamily Input",y),onClick:()=>{m.ref.current.focus()},children:[m.node,t.jsx("div",{className:"Input__unit",children:p}),!U(s)&&t.jsxs("button",{className:j("InputFamily__max-btn",l&&"invisible"),disabled:u,onClick:h=>{h.stopPropagation(),n(o[0](s))},children:[i??"Max",a?": ":"",a?t.jsx("div",{className:"InputFamily__max-btn-value",children:a}):""]}),l&&t.jsx("div",{className:"InputFamily__error-msg",children:l})]})},pe="Limited",Ce="Unlimited",lt="Bullish",gn="Bearish",Be="Neutral",oe={"Long Call":{stats:{outlooks:[lt],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:Re,isCollection:!0},"Short Call":{stats:{outlooks:[gn],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:ce,isCollection:!0},"Covered Call":{stats:{outlooks:[lt],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:ce},"Long Put":{stats:{outlooks:[gn],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:Re,isCollection:!0},"Short Put":{stats:{outlooks:[lt],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:ce,isCollection:!0},"Long Strangle":{stats:{outlooks:[Be],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:cs},"Short Strangle":{stats:{outlooks:[Be],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:ce},"Covered Strangle":{stats:{outlooks:[Be,lt],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:ce},"Long Straddle":{stats:{outlooks:[Be],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:cs},"Short Straddle":{stats:{outlooks:[Be],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:ce},"Covered Straddle":{stats:{outlooks:[Be,lt],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:ce},"Iron Butterfly":{stats:{outlooks:[Be],profit:pe,loss:pe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:Rt,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[Be],profit:pe,loss:pe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:Rt},"Bull Call Spread":{color:Re},"Bear Put Spread":{color:ce}};Object.keys(oe).forEach(e=>{oe[e].name=e});const jl={[lt]:Re,[Be]:Rt,[gn]:ce},ga=Object.keys(oe).filter(e=>{const n=oe[e];return!U(n.key)}),kl=ga.filter(e=>!oe[e].isHidden),Dl={Hegic:2},xa={HEAD:"Head",COMMON:"Common",LEG:"Leg"},El=e=>{const{amountStrState:n,strategy:s}=e,[a,i]=n,o=oe[s].plural??`${s}s`;return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),t.jsx("div",{className:"BuilderForm__field-body",children:t.jsx(nn,{value:a,setValue:i,unitStr:o})})]})},Il="/sf_draft/assets/strategy-1e15875d.svg",Pl=e=>{const{strategyState:n,isDisabled:s}=e,[a,i]=n,o=kl.map(r=>({value:r,label:r}));return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[t.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",t.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),t.jsx("div",{className:"BuilderForm__field-body",children:t.jsx(he,{options:o,defaultValue:a,onChange:r=>{i(r.value)},iconNode:t.jsx("img",{src:Il,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:s})})]})},tt=e=>{const n=Math.abs(e)===1,s=e>0;return{isCall:n,isLong:s}},Vn=e=>!!e.find(n=>{const{isLong:s}=tt(n);return!s}),Bl=e=>!!e.find(n=>{const{isLong:s}=tt(n);return s}),Nl=e=>!!e.find(n=>n),Rl=(e,n,s)=>{let a;const i=`W${s}`,o=n.split(" ")[0],{isCall:r}=tt(e);return!r||o==="Short"?a=["USDC.e"]:o==="Covered"?a=[i]:o==="Iron"&&(a=["USDC.e",i]),a},Ll=e=>{const n=e.includes("Straddle"),s=e==="Iron Butterfly";if(n)return[0,1];if(s)return[1,2]},Ol=(e,n)=>{if(!(e!=null&&e[0].market))return;if(e.length>1){const a=e.find(i=>i.market===n);if(a)return a}return e[0]},Fl=(e,n)=>ee(e,`TxBuilderOpen_${n}`),Ul=e=>({Hegic:ee(e,"TxBuilderOpen_Hegic")}),$l=(e,n,s)=>{if(!n)return s;let a=0,i=0;return e.map(r=>{const{isLong:l}=tt(r);return l?n[a++]:s[i++]})},Hl=e=>{const n=Object.keys(e);return n?!!n.find(a=>!e[a][0].isAbsent):!1},_a=(e,n)=>{var a;return(a=e==null?void 0:e.decomposition)!=null&&a.length?!!e.decomposition.find(i=>{if(!i)return;const o=i.marketToken,r=n??e.paymentToken;return!o||!r?!1:Js(o,r)}):!1};const Wl=e=>{const{strategyStructure:n,chosenDateState:s,resetTriggers:a,isDisabled:i,updateUnstableField:o}=e,{userAddress:r}=te(),[l,u]=s,c=Ee().dates??[],d=()=>{u(null)};f.useEffect(()=>{d()},a),f.useEffect(()=>{r&&c.length&&!l&&u(c[0])},[r,c]);const m=(T,b="d MMM")=>{const g=T-Date.now();return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"BuilderForm__date-value",children:Ie(T,b)}),t.jsx("div",{className:"BuilderForm__date-period",children:On(g)})]})},y=c.map(T=>({value:T,label:m(T)})),h=l&&y.find(T=>T.value===l);return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),t.jsx("div",{className:"BuilderForm__field-body",children:n.map((T,b)=>{const{isCall:g,isLong:x}=tt(T),v=mt(t.jsx(he,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:i||!r,options:y,value:h,formatOptionLabel:({value:_},{selectValue:M,context:k})=>{var B;if(k==="menu")return m(_);const S=((B=M[0])==null?void 0:B.value)===_?"d MMM hh a":"d MMM";return m(_,S)},onChange:_=>{u(_.value)},iconTextNode:t.jsxs("span",{className:j({positive:x,negative:!x},"block"),style:{width:25},children:[x?"Buy":"Sell",t.jsx("br",{}),g?"Call":"Put"]})},b),U(c),t.jsx(ye,{},b));return o(b,v),v})})]})};function xs(){const{innerWidth:e,innerHeight:n}=window;return{width:e,height:n}}function ql(){const[e,n]=f.useState(xs());return f.useEffect(()=>{function s(){n(xs())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}const _e=(e=768)=>{const{width:n}=ql();return n<e},Vl=({getParentNode:e,getChildNodes:n})=>{const[s,a]=$i(!1),i=j(s&&"expanded"),o=e(i,a),r=n(i);return t.jsxs(t.Fragment,{children:[o,...r]})};const va=({children:e,transitionTimeout:n=250,renderHeader:s=({state:a})=>a.isEnter?"Hide":"Show"})=>t.jsx("div",{className:"Accordion",children:t.jsx(Yi,{transition:!0,transitionTimeout:n,children:t.jsx(Qi,{header:s,children:e})})});const Te=({isVertical:e,marginValue:n})=>{const s=e?{marginLeft:n,marginRight:n}:{marginTop:n,marginBottom:n};return t.jsx("div",{className:j("Divider",e&&"_vertical"),style:U(n)?{}:s})};class Ca{constructor(n){const{titleData:s,itemsData:a}=n,i=Object.keys(s);this.titleData=s,this.itemsData=a,this.dataKeys=i}}class Gl extends Ca{constructor(n){super(n),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const n=this._getCells(this.titleData,!0);return t.jsxs("tr",{children:[...n]})}getItemsRows(){const n=this.itemsData.map(s=>{const a=this._getItemRow(s);return t.jsx(Ve.Fragment,{children:a},s.id)});return t.jsx(Ve.Fragment,{children:n},"rows")}_getCells(n,s){return this.dataKeys.map(a=>{const i=n[a]??Z();return s?t.jsx("th",{children:i},a):t.jsx("td",{children:i},a)})}_getItemRow(n){const s=!!n.children,a=this._getCells(n),i=(r,l)=>{const u=[r,n.className];return t.jsxs("tr",{className:j("Table__item",s&&"expandable",u),onClick:l,children:[...a]})};return s?this._getExpandableRow(n,i):i()}_getExpandableRow(n,s){const a=i=>n.children.map(r=>{const l=this._getCells(r);return t.jsxs("tr",{className:j("Table__child-item",i),children:[...l]},r.id)});return t.jsx(Vl,{getParentNode:s,getChildNodes:a},n.id)}}class Yl extends Ca{constructor(n){super(n),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(n){const s=n.omittedKeys;return this.dataKeys.map(i=>{const o=n[i];return s&&!!s.find(l=>i===l)||U(o)?null:t.jsxs("div",{className:j("Table__item-row info-row",i),children:[t.jsx("div",{className:"info-row__title",children:this.titleData[i]}),t.jsx("div",{className:"info-row__value",children:o===null?Z():o})]})})}_getItem(n){const s=n.className;return t.jsxs("div",{className:j("Table__item App-box",s),children:[this._renderItemRows(n),n.children&&t.jsxs(t.Fragment,{children:[t.jsx(Te,{}),t.jsx(va,{transitionTimeout:500,renderHeader:({state:a})=>`${a.isEnter?"Hide":"Show"} full strategy`,children:n.children.map(a=>t.jsxs(t.Fragment,{children:[t.jsx(Te,{}),t.jsx("div",{className:"Table__child-item",children:this._renderItemRows(a)})]}))})]})]})}}const Ma=({structureData:e,className:n,children:s})=>{const a=_e(576),i=l=>{if(!l){const u=new Gl(e),{getTitleRow:p,getItemsRows:c}=u;l=[t.jsx("thead",{children:p()},"head"),t.jsx("tbody",{children:c()},"body")]}return t.jsx("div",{className:"Table__desktop",children:t.jsx("table",{children:l})})},o=()=>{const u=new Yl(e).getItems();return t.jsx("div",{className:"Table__mobile",children:u})},r=()=>a?o():i();return t.jsx("div",{className:j("Table",n),children:s!=null&&s.length?i(s):r()})};const Sa="/sf_draft/assets/direction_up-3632497a.svg",Aa="/sf_draft/assets/direction_down-6f961d86.svg",Ql="/sf_draft/assets/Hegic-a7e6545a.svg",Kl="/sf_draft/assets/Hegic_circled-26df614a.svg",zl="/sf_draft/assets/Hegic_circled-light-9256df54.svg",sn={Hegic:{common:Ql,circled:Kl,circledLight:zl}},wa=({strikeData:e,priceNode:n,isPriceHlight:s,isSmall:a})=>{const{market:i,isCall:o,isLong:r}=e,l=sn[i].circled,u=r?Sa:Aa;return t.jsxs("div",{className:j("Brief","PriceBrief",a&&"small"),children:[t.jsxs("div",{className:"PriceBrief__icons Brief__icons",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:l,alt:`${i}`})}),t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:u,alt:`${r?"Long":"Short"}`})})]}),t.jsx("div",{className:j("PriceBrief__info-card",{positive:r,negative:!r}),children:o?"Call":"Put"}),t.jsx("div",{className:j("PriceBrief__price",s&&"hlight"),children:n})]})},Xl=e=>{const{id:n,amountStr:s,strikeMarketsDataArr:a,chosenStrikeData:i,setChosenStrikeData:o,isOpen:r,close:l}=e,[u,p]=f.useState([]),c=()=>{const b=[];a.forEach((g,x)=>{const v=ue(Pe(s));g.utils.calcPremium(v).then(_=>{g.premiumData=_,b[x]=_,p([...b])})})};if(f.useEffect(()=>{p([]),a&&c()},[a,s]),!a)return null;const d=23,y=80-d,T=200-d;return t.jsx("div",{className:j("StrikeInfoBox",r&&"open"),style:{zIndex:9-n*2},children:t.jsxs(Ma,{onClick:b=>b.stopPropagation(),children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:t.jsx("div",{style:{minWidth:T},children:"Market"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Source"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Delta"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Vega"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Gamma"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Theta"})}),t.jsx("th",{children:t.jsx("div",{style:{width:y},children:"Rho"})})]})}),t.jsx("tbody",{children:a.sort(ea("premiumData.inUSDC")).map((b,g)=>{const{greeks:x,source:v}=b,_=u[g],M=!_||_.isDisabled,k=b===i;return t.jsxs("tr",{className:j("StrikeInfoBox__strike-option",M&&"disabled",k&&"chosen"),children:[t.jsxs("td",{children:[t.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{o(b),l()},disabled:M}),t.jsx(wa,{strikeData:b,priceNode:de(()=>_===null?Z("No liquidity",!0):`$${me(_.inUSDC)}`,U(_)),isPriceHlight:!0})]}),t.jsx("td",{children:v??"AMM"}),Object.keys(x).map(P=>{const S=x[P];return t.jsx("td",{children:S??Z()},P)})]},b.market)})})]})})};const ze=({fontSize:e,children:n})=>t.jsx("div",{className:"InnerWarning",style:{fontSize:e??""},children:n});Ki();const ja=({id:e,className:n,isUnited:s,spaceBetween:a,isDraggable:i,breakpoints:o,handleInit:r,slideClassName:l,children:u})=>{const p=f.useRef(null),c=`${s?`.${n}`:`#${e}`}`,d={spaceBetween:a,allowTouchMove:i,breakpoints:o,navigation:{enabled:!0,prevEl:`${c} .Carousel__nav-btn_prev`,nextEl:`${c} .Carousel__nav-btn_next`},on:{init:m=>{m.el.style.overflow="clip visible",r&&r(m)}}};return f.useEffect(()=>{const m=p.current;m&&(Object.assign(m,d),m.initialize())},[p,d]),t.jsxs("div",{className:j("Carousel",n),id:e,children:[t.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),t.jsx("swiper-container",{init:!1,ref:p,children:u==null?void 0:u.map((m,y)=>t.jsx("swiper-slide",{class:l,children:m},y))}),t.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const Zl=({children:e,slideType:n="lg"})=>t.jsx(ja,{breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:6,grid:{fill:"row",rows:2}},520:{slidesPerView:5,grid:{fill:"row",rows:2}},380:{slidesPerView:4,grid:{fill:"row",rows:2}},0:{slidesPerView:3,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${n}`,children:e}),Gn=e=>Object.keys(e).map(BigInt),Jl=e=>{const n={},s=e.map(i=>i.strike);return Xt(s).forEach(i=>{const o=e.filter(r=>r.strike===i);n[i]=o}),n},eu=e=>{const n=[];return e.forEach(a=>{const i=Gn(a);n.push(...i)}),Xt(n)},tu=e=>{const n=eu(e);return e.map(a=>{const i=Gn(a),o={...a};return n.forEach(r=>{i.indexOf(r)===-1&&(o[r]=[{strike:r,isAbsent:!0}])}),o})};const nu=e=>{const{currentPrice:n,isFirst:s}=e;return t.jsx("div",{className:j("StrikeCurrentPriceItem","StrikeChooser__item",s&&"StrikeCurrentPriceItem_first"),children:t.jsxs("span",{children:["$",Fe(n)]})})};const su="/sf_draft/assets/cross_grey-42dbd9c5.svg",au=e=>{const{isITM:n}=e;return t.jsx("div",{className:j("StrikeAbsentItem","StrikeChooser__item",n&&"StrikeChooser__item_ITM"),children:t.jsx("img",{src:su,alt:"Absent"})})},iu=({className:e,id:n,isAutoSelectEnabled:s,structureKey:a,asset:i,amountStr:o,strikesData:r,chosenStrikeData:l,setChosenStrikeData:u})=>{const{isConnected:p}=te(),c=Je(i),d=q(c),m=ue(fe(d,d<10?2:0)),y=n===0,h=_e(),[T,b]=f.useState(null),g=I=>{const O={};for(const N in I){const C=I[N][0],{isCurrentPrice:A,isAbsent:w}=C;A&&w||(O[N]=I[N])}return O},x=()=>{const I=g(r);let O;for(const N in r){const D=r[N][0];if(D.isCurrentPrice||m===D.strike){D.isCurrentPrice=!0,O=D;break}}return O||(I[m]=[{strike:m,isCurrentPrice:!0,isAbsent:!0}]),I},v=()=>{if(r){if(!Hl(r))return{strikes:[],dataArr:[]};let I=x();const O=Gn(I).sort(jt),N=Object.values(I).sort((D,C)=>{const A=D[0],w=C[0];return Hn(A,w,"strike")});return{strikes:O,dataArr:N}}return{}},{strikes:_,dataArr:M}=v(),k=!!(_!=null&&_.length);f.useEffect(()=>{if(s&&r&&!l){const I=M.find(N=>!N[0].isAbsent);if(!I)return;const O=I[0];u(O)}},[r]);const{openPopup:P,closePopup:S,isOpen:B}=ws(()=>b(null)),E=()=>{const I=q(M[0][0].strike);let O;return I<10**2?O="xs":I<10**3?O="sm":I<10**4?O="md":I<10**5?O="lg":O="xl",t.jsx(Zl,{slideType:O,children:_.map((N,D)=>{const C=M[D],A=C[0],{isCurrentPrice:w,isAbsent:L}=A;if(w&&L)return t.jsx(nu,{currentPrice:N,isFirst:y},"current_price");const{isCall:H}=tt(a),W=Wn(H,N,m);if(L)return t.jsx(au,{isITM:W},D);const R=l&&l.strike===N,Y=R&&l.market,G=T===C;return t.jsxs(z,{className:j("StrikeChooser__item",W&&"StrikeChooser__item_ITM",R&&"chosen",G&&"open",w&&j("StrikeCurrentPriceItem",y&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:$=>{B&&$.stopPropagation(),b(C),P()},children:[R&&t.jsx("div",{className:"StrikeChooser__item-market",children:t.jsx("img",{src:sn[Y].circledLight,alt:`${Y} icon`})}),t.jsxs("span",{children:["$",Fe(N,0)]})]},N)})})},F=()=>r?k?t.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-n*2},children:E()}):t.jsx(ze,{children:"No Liquidity"}):t.jsxs(ze,{children:[p?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return t.jsxs("div",{className:j("StrikeChooser",e,h&&!r&&"hidden"),children:[F(),t.jsx(Xl,{id:n,amountStr:o,strikeMarketsDataArr:T,chosenStrikeData:l,setChosenStrikeData:u,isOpen:B,close:S})]})},ka=.005*10**5,Yn=async(e,n,s,a)=>{const i=us(e,n),o=us(e,s),r=Ue(a,i.decimals);return n===s||r===0n||i.isStable&&o.isStable?new Promise(p=>{p(a)}):await ee(e,"UniswapQuoter").callStatic.quoteExactInput(Da(n,s),r).then(p=>{const c=p.toBigInt();return ae(c,o.decimals)}).catch(p=>{console.log(`Swapping ${i.symbol} to ${o.symbol} error!

`,p)})},Qn=(e,n,s)=>{const a=Dn(e);return Yn(e,n,a,s)},ru=(e,n,s)=>{const a=Dn(e);return Yn(e,a,n,s)},Da=(e,n)=>zi.solidityPack(["address","uint24","address"],[e,ka,n]),Ea={PROTOCOL_NAME:"Hegic"},ou=async(e,n,s)=>{if(!lu(n))return[];const{assetPrice:i}=s,{expiry:o}=n,r=o-Date.now();n={...n,period:r};const l=Io(e,r);return l?await uu(e,l,n,i):[]},lu=e=>{const{isLong:n}=e;if(n)return!0},uu=async(e,n,s,a)=>{const{amount:i,asset:o,isCall:r}=s,l=[],u=Object.keys(n);for(let c=0;c<u.length;c++){const d=u[c],m=n[d],y={strategyKey:d,strategyAddress:m},h=cu(d,o,r),T=await pu(e,m,s),b=T>=i;if(!h||!b)continue;const g=du(e,y,s,a),x=g.utils.calcPremium(i).then(v=>({...g,liquidity:T,premiumData:v})).catch();l.push(x)}return await Promise.all(l).then(bu)},cu=(e,n,s)=>{const[a,,i]=e.split("_");return!(a.includes("SPREAD")||s!==(a==="CALL")||i!==n)},pu=async(e,n,s)=>{const{asset:a,period:i}=s,o=new Ut(n,Rn(e,"Hegic_Strategy"),Qt(e)),r=Ln(i);let l=0n;try{const u=(await o.getAvailableContracts(r,[])).toBigInt();l=ae(u,Wt[a])}catch{}return l},du=(e,n,s,a)=>{const{isCall:i,asset:o,expiry:r}=s,{strategyKey:l}=n,[,u]=l.split("_"),p=fu(u,a),c=yu(e,n,s),d=en.calcDeltaByStrikeScale(s,u);return{market:"Hegic",protocolName:Ea.PROTOCOL_NAME,asset:o,strike:qs(p),expiry:r,isCurrentPrice:u==="100",isCall:i,isLong:!0,greeks:{delta:d,vega:void 0,gamma:void 0,theta:void 0,rho:void 0},utils:c}},yu=(e,n,s)=>{const{strategyKey:a,strategyAddress:i}=n,{asset:o,period:r}=s;return{calcPremium:async c=>mu(e,a,s,c),getBuilderParams:async(c,d,m)=>{const y=Ne(c,o),h=d.premiumData.inMarketToken,T=eo(h,m);return Fl(e,Ea.PROTOCOL_NAME).encodeFromHegic(i,y,Ln(r),T,[])},getStrategyAddress:()=>i}},mu=async(e,n,s,a)=>{const{asset:i,period:o}=s,r=en.getMarketToken(e),l=Ne(a,i),u=No(e,n),p=Ln(o),c=await u.calculatePremium(p,l,0).then(BigInt),d=ae(c,r.decimals);return{inUSDC:await Qn(e,r.address,d),inMarketToken:d,marketToken:r}},fu=(e,n)=>{const s=q(n),a=Math.floor(s*(e/100));return ue(a)},bu=e=>e.filter(n=>n&&n.premiumData),Kn=(e,n)=>{var d;const s=vl(),a=f.useContext(Ta),i=V(),{userAddress:o}=te(),r=Je(e),[l,u]=f.useState((d=s==null?void 0:s[e])==null?void 0:d[n]),{data:p,error:c}=we(n&&r&&[s,n,e,r,"fetchStrikesForDate"],async()=>await hu(i,e,n,{userAddress:o,assetPrice:r}),{refreshInterval:300*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var m;u((m=s==null?void 0:s[e])==null?void 0:m[n])},[e,n]),f.useEffect(()=>{p&&(u(p),a({type:"added",asset:e,dateMs:n,strikesForDate:p}))},[p]),c?(console.log(c),null):l},hu=async(e,n,s,a)=>{const i={asset:n,expiry:s,amount:ue(1)},o=[{...i,isCall:!0,isLong:!0,strategy:"Long Call"},{...i,isCall:!1,isLong:!0,strategy:"Long Put"},{...i,isCall:!0,isLong:!1,strategy:"Short Call"},{...i,isCall:!1,isLong:!1,strategy:"Short Put"}],r={},l=[];return o.forEach(p=>{const c=Promise.allSettled([ou(e,p,a)]).then(Xs).then(d=>{const m={strategy:p.strategy,strikes:[]};return d.forEach(y=>{m.strikes.push(...y)}),m}).catch(console.log);l.push(c)}),(await Promise.all(l)).forEach(p=>{r[p.strategy]=Jl(p.strikes)}),r},Tu=e=>{const{asset:n,strategy:s,amountStr:a,chosenDate:i,strategyStructure:o,hasSell:r,strikesDataArrState:l,chosenStrikesState:u,areStrikesLoadingState:p,updateTriggers:c,resetTriggers:d,updateUnstableField:m}=e,[y,h]=l,[T,b]=u,[g,x]=p,v=Kn(n,i),_=()=>{if(x(!0),M(),o.forEach((P,S)=>{y[S]=[];const{isCall:B,isLong:E}=tt(P),F=Jt(E,B);v!=null&&v[F]&&(y[S]={...v[F]})}),v){const P=tu(y);h([...P]),x(!1)}},M=()=>{b([])},k=()=>{h([])};return f.useEffect(()=>{M(),k()},d),f.useEffect(()=>{i&&_()},[...c,v]),t.jsxs("div",{className:j("BuilderForm__field","BuilderForm__field_strike",!r&&"col-span-2"),children:[t.jsx("div",{className:"BuilderForm__field-header",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),t.jsx("div",{className:"BuilderForm__field-body",children:o.map((P,S)=>{const B=Ll(s),E=B&&B.indexOf(S)!==-1,F=mt(t.jsx(iu,{id:S,isAutoSelectEnabled:o.length===1&&!g,structureKey:P,asset:n,amountStr:a,strikesData:y[S],chosenStrikeData:T[S],setChosenStrikeData:I=>{if(T[S]=I,E){const O=q(I.strike),N=I.market;B.filter(C=>C!==S).forEach(C=>{const A=Ol(y[C][O],N);T[C]=A})}b([...T])}},S),g,t.jsx(ye,{},S));return m(S,F),F})})]})};const gu=e=>{const{liqPrice:n,isLiqPriceLoading:s,isInLastHalf:a}=e,i=t.jsx("span",{className:"muted_light",children:"..."}),o=t.jsx("span",{className:"muted_light",children:"—"}),r=()=>`$${me(n)}`;return t.jsxs("div",{className:j("CollateralLiqPrice",a&&"CollateralLiqPrice_down"),children:["Liq. Price:",t.jsxs("span",{className:"CollateralLiqPrice__val",children:[s&&i,!s&&(n?r():o)]})]})};const xu=({min:e,max:n,collateralData:s,handleClick:a})=>t.jsx("div",{className:"CollateralRangeBtns",children:[e,n].map((i,o)=>{const r=s.isBase,l=Me(fe(q(i),qe)),u=le(i,s.marketToken.isStable),p=o===0;return t.jsxs(Ve.Fragment,{children:[t.jsxs("button",{onClick:()=>a(l),children:[r?"":"$",u]},o),p?"—":""]},o)})});const _u=({collateralData:e,collateralAmountStr:n,onChange:s})=>{const{isBase:a}=e,i=a?1:0,o=q(e.min,re,i),r=q(e.max,re,i),l=Pe(n),u=a?.01:1;return t.jsx("div",{className:"CollateralSlider",children:t.jsx(Xi,{defaultValue:0,value:l,min:o,max:r,step:u,onChange:s})})},vu=e=>{const{isInLastHalf:n,getCollateralData:s,collateralData:a,setCollateralData:i,collateralTokens:o,chosenStrike:r,updateTriggers:l,resetTriggers:u}=e,[p,c]=f.useState(""),[d,m]=f.useState(o[0]),[y,h]=f.useState(!1),[T,b]=f.useState(!1),g=()=>{c(""),m(o[0]),i(null)},x=()=>{c(""),i(null)};f.useEffect(()=>{g()},u),f.useEffect(()=>{r&&(h(!0),x(),v(!0))},[r,d]);const v=S=>{let B;if(!S&&p){const E=Pe(p);B=ue(E)}s(d,B).then(E=>{i(E),h(!1),b(!1)})};Ae(()=>{y||(b(!0),v())},ke,[p,...l]);const _=tn([p,c],{placeholder:"0"}),M=o.map(S=>({value:S,label:t.jsx(X,{symbol:S,isHlight:!0,children:S})})),k=j(_.hasFocus&&"hlight"),P=()=>t.jsxs(t.Fragment,{children:[a&&t.jsx(gu,{liqPrice:a.liquidationPrice,isLiqPriceLoading:T,isInLastHalf:n}),de(()=>t.jsxs("div",{className:"CollateralChooser__input-container",children:[t.jsx("div",{className:"CollateralChooser__input",children:_.node}),a&&t.jsx(xu,{min:a.min,max:a.max,collateralData:a,handleClick:S=>{c(S)}}),a&&t.jsx(_u,{collateralData:a,collateralAmountStr:p,onChange:S=>{const B=pt(S);c(B)}})]}),y),t.jsx("div",{className:"CollateralChooser__token-selector",children:t.jsx(he,{options:M,defaultValue:d,isDisabled:M.length===1,onChange:S=>{m(S.value)}},`CollateralChooser__token-selector_${d}`)})]});return t.jsx("div",{className:j("CollateralChooser",k),children:r?r.isComingSoon?t.jsxs(ze,{children:[r.market," is coming soon"]}):P():t.jsx(ze,{children:"Strike required"})})},Cu=e=>{const{asset:n,amountStr:s,strategy:a,strategyStructure:i,hasSell:o,chosenStrikes:r,collateralDataArrState:l,updateTriggers:u,resetTriggers:p,updateUnstableField:c}=e,[d,m]=l,y=()=>{m([])};f.useEffect(()=>{y()},p);const h=(b,g)=>{d[b]=g,m([...d])},T=(b,g,x)=>{const v=r[b];if(!v||!v.utils.getCollateralData)return new Promise(()=>{});const _=ue(Pe(s)),M=Go(g),k=Ft.from(x??0);return v.utils.getCollateralData(_,{isBaseCollateral:M,setToCollateral:k})};return o?t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[t.jsx("div",{className:"BuilderForm__field-header",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),t.jsx("div",{className:"BuilderForm__field-body",children:i.map((b,g)=>{const{isLong:x}=tt(b);if(x)return t.jsx("div",{className:"BuilderForm__field-empty-row",children:Z()},g);const v=r[g],_=Rl(b,a,n),M=g>(i.length-1)/2,k=t.jsx(vu,{isInLastHalf:M,collateralTokens:_,collateralData:d[g],setCollateralData:P=>h(g,P),getCollateralData:(P,S)=>T(g,P,S),chosenStrike:v,updateTriggers:u,resetTriggers:p},g);return c(g,k),k})})]}):null};const Mu=e=>{const{strategyStructure:n,unstableFields:s,chosenStrikes:a,strikesDataArr:i,areStrikesLoading:o}=e;return _e()?t.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),t.jsx("div",{className:"BuilderForm__field-body",children:n.map((l,u)=>{const p=o||!!i[u],c=!!a[u],d=!!s.collateral[u],m=u===n.length-1;return t.jsxs("div",{className:"BuilderMobileContainer__item",children:[t.jsx("div",{className:j("BuilderMobileContainer__item-date",p&&"mb-7"),children:s.date[u]}),t.jsx("div",{className:"BuilderMobileContainer__item-strike",children:s.strike[u]}),d&&c&&t.jsxs("div",{className:j("BuilderMobileContainer__item-collateral"),children:[t.jsx("div",{className:"BuilderMobileContainer__item-title",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),s.collateral[u]]}),p&&!m&&t.jsx(Te,{})]},u)})})]}):null};const an=({title:e,className:n,children:s})=>t.jsxs("div",{className:j("OptionController",n),children:[t.jsx("div",{className:"OptionController__title",children:e}),t.jsx("div",{className:"OptionController__content",children:s})]}),zn=({asset:e,setAsset:n,isDisabled:s})=>{const a=qt.map(i=>({value:i,label:t.jsx(X,{symbol:i,isHlight:!0,children:i})}));return t.jsx(an,{className:"AssetController",title:"Asset",children:t.jsx(he,{options:a,defaultValue:e,isDisabled:s,onChange:i=>{n(i.value)}})})},Su=e=>{const{assetState:n,strategyState:s,amountStrState:a,chosenDateState:i,strikesDataArrState:o,chosenStrikesState:r,collateralDataArrState:l}=e,[u,p]=n,[c]=s,[d]=a,[m]=i,y=oe[c].structure,h=Vn(y),T=f.useState(!1),[b]=T,[g]=r,[x]=o,v={strike:[m],collateral:[d]},_={date:[c],strike:[u,c,m],collateral:[u,c,m],unstableFields:[c]},[M,k]=f.useState({date:[],strike:[],collateral:[]}),P=(S,B,E)=>{M[S][B]=E};return f.useEffect(()=>{k({date:[],strike:[],collateral:[]})},_.unstableFields),t.jsxs("div",{className:"BuilderForm__fields",children:[t.jsx(zn,{asset:u,setAsset:p,isDisabled:b}),t.jsx(Pl,{strategyState:s,isDisabled:b}),t.jsx(El,{amountStrState:a,strategy:c}),t.jsx(Wl,{strategyStructure:y,chosenDateState:i,updateTriggers:v.date,resetTriggers:_.date,isDisabled:b,updateUnstableField:(S,B)=>{P("date",S,B)}}),t.jsx(Tu,{asset:u,strategy:c,amountStr:d,chosenDate:m,strategyStructure:y,hasSell:h,strikesDataArrState:o,chosenStrikesState:r,areStrikesLoadingState:T,updateTriggers:v.strike,resetTriggers:_.strike,updateUnstableField:(S,B)=>{P("strike",S,B)}}),t.jsx(Cu,{asset:u,strategy:c,amountStr:d,strategyStructure:y,hasSell:h,chosenStrikes:g,collateralDataArrState:l,updateTriggers:v.collateral,resetTriggers:_.collateral,updateUnstableField:(S,B)=>{P("collateral",S,B)}}),t.jsx(Mu,{strategyStructure:y,unstableFields:M,chosenStrikes:g,strikesDataArr:x,areStrikesLoading:b})]})};const Au=({strategy:e})=>t.jsxs("div",{className:"BuilderTooltips",children:[t.jsx(wu,{}),t.jsx(ju,{strategy:e}),t.jsx(ku,{}),t.jsx(Du,{}),t.jsx(Eu,{}),t.jsx(Iu,{}),t.jsx(Pu,{})]}),wu=()=>t.jsxs(ne,{id:"BuilderForm_StrikeTooltip",children:[t.jsx("h6",{children:"Hegic Options (American options)"}),t.jsxs("p",{className:"my-5",children:["They require manual exercise before ",t.jsx("br",{}),"the expiration date. ",t.jsx("br",{}),"There are no secondary markets; out-",t.jsx("br",{}),"of-the-money options can't be sold."]})]}),ju=({strategy:e})=>{const n=oe[e],{outlooks:s,profit:a,loss:i,description:o}=n.stats;return t.jsxs(ne,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[t.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[t.jsx("h2",{className:"WhenPurchaseTooltip__title",children:e}),t.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:s.map(r=>{const l=jl[r];return t.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:l},children:r},r)})})]}),t.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[t.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),t.jsx("p",{className:"WhenPurchaseTooltip__description",children:o}),t.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[a,i].map((r,l)=>{const u=l===0?"Profit":"Loss";return t.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[t.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:u}),t.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:r})]},`${u}_${r}`)})})]})]})},ku=()=>t.jsxs(ne,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",t.jsx("br",{}),"you’re setting aside ",t.jsx("br",{}),"as collateral for selling options"]}),Du=()=>t.jsxs(ne,{id:"Builder_PremiumTooltip",children:[t.jsx("h6",{children:"Negative Premium"}),t.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",t.jsx("br",{}),"have paid as an option buyer."]}),t.jsx("h6",{children:"Positive Premium"}),t.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",t.jsx("br",{}),"have received as an option seller."]})]}),Eu=()=>t.jsxs(ne,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",t.jsx("br",{}),"you’ll pay for buying options. ",t.jsx("br",{}),"If the option price rises ",t.jsx("br",{}),"beyond this, your transaction ",t.jsx("br",{}),"will be reverted."]}),Iu=()=>t.jsxs(ne,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",t.jsx("br",{}),"assured to receive when ",t.jsx("br",{}),"selling options. If the option ",t.jsx("br",{}),"price drops beyond this point, ",t.jsx("br",{}),"your transaction will ",t.jsx("br",{}),"be reverted."]}),Pu=()=>t.jsxs(ne,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",t.jsx("br",{}),"is too small. This may result in instant ",t.jsx("br",{}),"liquidation of the position."]});const at=(e,n=2,s,a)=>{const i=q(e,s);return It(i,n,a)},Bu=(e,n=2,s)=>at(e,n,s,!0),It=(e,n=2,s)=>{const a=s?"+":"",i=e<0?"–":e>0?a:"";return e=Math.abs(e),e=fe(e,n),e=Hs(e,n),`${i}$${Me(e)}`},Nu=({strategy:e,amountStr:n,chosenStrikesState:s,collateralDataArrState:a,youPayState:i,swapSlippageState:o,shouldSwapState:r,setIsCostLoading:l})=>{const u=oe[e].structure,p=Vn(u),c=Bl(u),[d,m]=i,[y,h]=s,[T,b]=a,[g]=o,[x,v]=r,[_,M]=f.useState(null),[k,P]=f.useState(null),[S,B]=f.useState(null),[E,F]=f.useState(null),I=Nl(y),O=!!T.find(R=>R),N=R=>{y[R]=null,T[R]=null,h([...y]),b([...T])};f.useEffect(()=>{!!(d!=null&&d.inPaymentToken)&&v(_a(d)),l(!1)},[d]);const D={sum:R=>R.reduce((G,$,ve)=>{if(ve===0)return{inUSDC:$.inUSDC,decomposition:[$]};const is=G.decomposition;return is[ve]={marketToken:$.marketToken,inMarketToken:$.inMarketToken,inUSDC:$.inUSDC},{inUSDC:G.inUSDC+$.inUSDC,decomposition:is}},R[0]),separateBuyFromSell:R=>{const Y=[],G=[];return R.forEach($=>{$&&($.isLong?Y.push($):G.push($))}),{buyCosts:Y,sellCosts:G}},getArgsForHandler:R=>{const{reset:Y}=C[R],{isAllowed:G,update:$}=w[R];return[Y,G,$]}},C={collateral:{reset:()=>{F({inUSDC:0n})}},trade:{reset:()=>{M(null),P(null),B(null)}},youPay:{reset:()=>{m(null)}}},A={collateral:{calc:()=>{const R=T.filter(G=>G);return D.sum(R)}},trade:{calc:()=>{if(!n)return;const R=[],Y=ue(Pe(n));return y.forEach((G,$)=>{G&&R.push(G.utils.calcPremium(Y).then(ve=>ve?(G.premiumData=ve,G.amount=Y,ve.isLong=G.isLong,ve):(N($),null)))}),Promise.all(R).then(G=>{const{buyCosts:$,sellCosts:ve}=D.separateBuyFromSell(G);return{maxCost:D.sum($),minReceived:D.sum(ve)}})}},youPay:{calc:()=>p?(()=>{if(E!=null&&E.inUSDC)return{inUSDC:E.inUSDC+((_==null?void 0:_.inUSDC)??0n),decomposition:$l(u,_==null?void 0:_.decomposition,E.decomposition),shouldSwap:x}})():(()=>({inUSDC:_.inUSDC,decomposition:_.decomposition}))()}},w={collateral:{triggers:[T],isAllowed:O&&I,update:()=>{const R=A.collateral.calc();F(R)}},trade:{triggers:[y],debouncedTriggers:[n],isAllowed:I,update:()=>{A.trade.calc().then(R=>{const{maxCost:Y,minReceived:G}=R;M(Y),P(G);const $={inUSDC:((G==null?void 0:G.inUSDC)??0n)-((Y==null?void 0:Y.inUSDC)??0n)};B($)})}},youPay:{triggers:[S,E,g],isAllowed:!!(p?S!=null&&S.inUSDC&&(E!=null&&E.inUSDC):S!=null&&S.inUSDC),update:()=>{const R=A.youPay.calc();m(R)}}},L=(R,Y,G)=>{R(),Y&&(l(!0),G())};Object.keys(w).forEach(R=>{const Y=()=>{L(...D.getArgsForHandler(R))},G=[...w[R].triggers],$=w[R].debouncedTriggers&&[...w[R].debouncedTriggers];$&&Ae(Y,ke,$),f.useEffect(Y,G)});const W=()=>{const R=[];return c&&R.push({name:"Max. Cost",value:_==null?void 0:_.inUSDC}),p&&R.push({name:"Min. Received",value:k==null?void 0:k.inUSDC},{name:"Collateral",value:E==null?void 0:E.inUSDC}),R};return t.jsx("div",{className:j("BuilderCost",p&&"has-sell"),children:t.jsx(ne,{id:"BuilderForm_YouPayTooltip",className:"YouPayTooltip",place:"bottom-end",children:W().map(R=>t.jsxs("div",{className:"YouPayTooltip__item",children:[t.jsx("div",{className:"YouPayTooltip__item-name",children:R.name}),t.jsx("div",{className:"YouPayTooltip__item-value",children:R.value?at(R.value):Z()})]},R.name))})})};const Ru=({id:e,decompositionArr:n,...s})=>t.jsx(ne,{className:"TooltipDecomposition",id:e,place:"bottom-end",...s,children:n.map((a,i)=>{const o=i===n.length-1;return t.jsxs(Ve.Fragment,{children:[t.jsxs("div",{className:"TooltipDecomposition__item",children:[t.jsx("div",{className:"TooltipDecomposition__item-name",children:a.nameNode}),t.jsx("div",{className:"TooltipDecomposition__item-value",children:a.valueNode})]}),!o&&t.jsx(Te,{})]},i)})}),rn=e=>e.charAt(0).toUpperCase()+e.slice(1),Lu=e=>e[e.length-1],Ou=({decompositionData:e})=>t.jsx("div",{className:"GreeksDecompositionTooltips",children:Tn.map(n=>{const s=e[n];if(!s||!s.length)return null;const i=`BuilderForm_${rn(n)}DecompositionTooltip`;return t.jsx(Ru,{id:i,decompositionArr:s},i)})});const Ia="/sf_draft/assets/pen-7561a00e.svg",Fu="/sf_draft/assets/confirm-d9cebec0.svg",Xn=({title:e="Slippage",slippage:n,setSlippage:s})=>{var T;const a=b=>`${fe(b*100,6)}`,[i,o]=f.useState(a(n)),[r,l]=f.useState(!1),{node:u,ref:p,hasFocus:c}=tn([i,o],{maxValue:100}),d=()=>{const b=a(dt);o(b)},m=()=>{const b=Number(i)/100;s(b)},y=()=>{const b=p.current,g=b.value.includes(".");let x=(b.value.length+1)*8.5;g&&(x-=4),b.style.width=x+"px"},h=()=>{(!i||Number(i)===0)&&d(),m(),r||(l(!0),setTimeout(()=>{l(!1)},200))};return f.useEffect(()=>{y()},[i]),f.useEffect(()=>{c||h()},[c]),(T=p.current)==null||T.addEventListener("keyup",b=>{b.keyCode===13&&c&&p.current.blur()}),t.jsxs("div",{className:"SlippageInput",onClick:()=>{var b;r||(b=p.current)==null||b.focus()},children:[t.jsx("div",{className:"SlippageInput__title",children:e}),t.jsxs("div",{className:"SlippageInput__content",children:[t.jsxs("div",{className:j("SlippageInput__input-container",c&&"focused"),children:[u,t.jsx("span",{className:"SlippageInput__unit",children:"%"})]}),t.jsx("button",{className:"SlippageInput__btn",children:t.jsx("img",{src:c?Fu:Ia,alt:"Edit slippage"})})]})]})},Uu=({swapSlippageState:e})=>{const[n,s]=e,a=_e();return t.jsx("div",{className:"SwapSlippageField",children:t.jsx(Xn,{title:a?"Uniswap Slippage":"Slippage",slippage:n,setSlippage:s})})},$u=({chosenStrikes:e,swapSlippageState:n,shouldSwapState:s})=>{const[a]=s,i={};Tn.forEach(c=>{i[c]=[]});const o=(c,d)=>{const m=c.greeks[d],y=sa(c.strike),h={nameNode:t.jsx(wa,{strikeData:c,priceNode:`$${Me(y)}`}),valueNode:m??Z()};i[d].push(h)},r=()=>t.jsx("div",{className:"BuilderCalculations__items",children:Tn.map(c=>{const d=rn(c),m=e.reduce((h,T)=>{if(!T)return h;o(T,c);const b=T.greeks[c];return(h??0)+b},void 0),y=m||m===0;return y||(i[c]=null),t.jsxs("div",{className:"BuilderCalculations__item",children:[t.jsx("div",{className:"BuilderCalculations__item-name",children:d}),t.jsx("div",{className:j("BuilderCalculations__item-value",y&&"tip"),"data-tooltip-id":`BuilderForm_${d}DecompositionTooltip`,children:y?At(m,3):Z()})]},c)})}),l=()=>t.jsx(va,{renderHeader:({state:c})=>`${c.isEnter?"Hide":"Show"} greeks`,children:r()}),p=_e(576);return t.jsxs("div",{className:"BuilderGreeks",children:[t.jsxs("div",{className:"BuilderGreeks__content",children:[p?l():r(),a&&t.jsx(Uu,{swapSlippageState:n})]}),t.jsx(Ou,{decompositionData:i})]})};const Pa=e=>{const{userAddress:n}=te();return e.map(a=>{let{data:i}=Ci({address:n,token:a.isETH?null:a.address,watch:!0});return i||(i={value:0n,decimals:0}),{...i,address:a.address,symbol:a.symbol,icon:a.icon,isETH:a.isETH,isStable:a.isStable,value1eToken:i.value,value:ae(i.value,i.decimals)}})},Hu=e=>{const{isConnected:n,userAddress:s}=te(),a=V(),i=Pa(e),{data:o}=we(n&&[s,"useTokenBalancesUSDC",i],async()=>{const r=[];return i.forEach(u=>{if(!u)return;u.inTokenDecimals=u.value1eToken,u.inDefaultDecimals=u.value;const p=Qn(a,u.address,u.inDefaultDecimals).then(c=>({...u,inUSDC:c})).catch(c=>(console.log(`Swapping ${u.symbol} to USDC error.

`+c),null));r.push(p)}),await Promise.allSettled(r).then(Xs)});return o??[]};const Wu=({className:e,options:n,defaultOption:s,defaultValue:a,onChange:i,...o})=>t.jsx(he,{className:j("SelectorInline",e),options:n,defaultOption:s,defaultValue:a,onChange:i,...o});const qu=({paymentTokenState:e,isDisabled:n=!1})=>{const s=V(),{isConnected:a,userAddress:i}=te(),o=wr(s),r=Hu(o),[l,u]=e,p=()=>{const y=r.find(h=>h.symbol===l.symbol);y!==l.balance&&u({...l,balance:y})};f.useEffect(()=>{p()},[l,r,i]);const c=y=>a?y===null?Z("Error"):U(y)||U(y.inUSDC)?t.jsx(ye,{}):`$${me(y.inUSDC,0)}`:Z(),d=o.map((y,h)=>{const T=r[h],b=c(T);return{label:t.jsxs("div",{className:"PaymentTokenSelector__item",children:[t.jsx("div",{className:"PaymentTokenSelector__item-name",children:t.jsx(X,{symbol:y.symbol,isHlight:!0,children:y.symbol})}),t.jsx("div",{className:"PaymentTokenSelector__item-value",children:b})]}),value:y.symbol,balance:T}}),m=[{label:t.jsxs("div",{className:"PaymentTokenSelector__item",children:[t.jsx("div",{children:"Asset"}),t.jsx("div",{children:"Balance, $"})]}),options:d}];return t.jsx(Wu,{className:"PaymentTokenSelector",options:m,defaultValue:l.symbol,isDisabled:n,onChange:y=>{const h=J(s,y.value);u({...h,balance:y.balance})}},[i,l.symbol])},Vu=({youPayState:e,paymentToken:n,isCostLoading:s,tooltipId:a,swapSlippage:i})=>{const o=V(),[r,l]=e,u=()=>r.inUSDC<0?new Promise(y=>{y(null)}):ru(o,n.address,r.inUSDC),p={triggers:[r],isAllowed:!!(r&&n&&U(r.inPaymentToken)),update:()=>{(T=>{const b=M=>Ct(M,i??dt),g=M=>Ct(M,br),{inUSDC:x}=T,v=b(x),_=g(v);return T.inUSDC=_,T})(r);const h=()=>{setTimeout(()=>{l({...r})},1e3)};u().then(T=>{r.paymentToken=n,r.inPaymentToken=T,h()})}},c={triggers:[n.symbol],isAllowed:!!r,reset:()=>{r.inPaymentToken=void 0,l({...r})}};f.useEffect(()=>{p.isAllowed&&p.update()},[...p.triggers]),f.useEffect(()=>{c.isAllowed&&c.reset()},[...c.triggers]);const d={getNegativeValueNode:()=>t.jsx(X,{children:t.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:me(r.inUSDC,0)})}),getPaymentTokenNode:()=>le(r.inPaymentToken,r.paymentToken.isStable),getUsdcNode:()=>r.inUSDC===0n?"$0":at(r.inUSDC),getApproximatelySymbolNode:()=>t.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:Nr})};return(()=>s?t.jsx(ye,{}):!r||!n?Z():U(r.inPaymentToken)?t.jsx(ye,{}):r.inPaymentToken===null?d.getNegativeValueNode():t.jsxs(X,{isHlight:!0,symbol:n.symbol,"data-tooltip-id":a,className:j(a&&"tip"),children:[d.getPaymentTokenNode(),!a&&t.jsxs(t.Fragment,{children:[d.getApproximatelySymbolNode(),d.getUsdcNode()]})]}))()},Gu=({paymentToken:e})=>{const{isConnected:n}=te();if(!n)return Z();if(e.balance===null)return Z("Error");if(U(e.balance))return t.jsx(ye,{});const s=e.balance.value===0n?0:void 0;return t.jsx(X,{symbol:e.symbol,isHlight:!0,children:le(e.balance.inDefaultDecimals,e.isStable,s)})},Ba=f.createContext(null),Yu=({children:e})=>{const n=Oe("swap-slippage",dt);return t.jsx(Ba.Provider,{value:n,children:e})},Dt=()=>f.useContext(Ba),Na=({paymentTokenState:e,youPayState:n,youPayTooltipId:s,isCostLoading:a,isSelectorDisabled:i=!1})=>{const[o]=Dt(),[r]=e;return t.jsxs("div",{className:"PaymentMethodPanel",children:[t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Select Payment method"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(qu,{paymentTokenState:e,isDisabled:i})})]}),t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"You pay"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(Vu,{youPayState:n,paymentToken:r,isCostLoading:a,tooltipId:s,swapSlippage:o})})]}),t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Balance"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(Gu,{paymentToken:r})})]})]})},Qu=({paymentToken:e,setPaymentToken:n,youPayState:s,confirmButtonNode:a,isCostLoading:i})=>t.jsxs("div",{className:"BuilderSwap",children:[t.jsx(Na,{paymentTokenState:[e,n],youPayState:s,youPayTooltipId:"BuilderForm_YouPayTooltip",isCostLoading:i}),a]}),Ku=(e,n,s,a,i,o,r)=>{const{isConnected:l}=te(),{connectWallet:u}=Vt(),p=Vn(n),c=s.length!==n.length||!s.every(x=>x),d=!!a.find(x=>x&&x.inMarketToken===0n),m=s.find(x=>x==null?void 0:x.isComingSoon),y=()=>{if(!e)return"Enter Amount";if(c)return"Fill out the Strike fields";if(p&&d)return"Fill out the Collateral fields";if(!i)return De;if(i>o)return"Insufficient balance"},h=()=>!l||m?!0:!y(),T=()=>{const x="Buy Strategy";return l?m?`Visit ${m.market} app`:y()??x:"Connect wallet"},b=()=>{if(!l){u();return}if(m){window.open(m.marketLink);return}r()};return t.jsx(z,{className:"BuilderForm__button",onClick:b,isDisabled:!h(),children:T()})},zu=({strategy:e,amountStr:n,youPayState:s,chosenStrikesState:a,collateralDataArrState:i,openBuyModal:o,swapSlippageState:r})=>{var _;const l=V(),[u,p]=Oe("payment-token","ETH"),[c,d]=f.useState(J(l,u)),m=f.useState(!1),[y,h]=f.useState(!1);f.useEffect(()=>{if(p(c.symbol),!c.address){const M=J(l,c.symbol);d({...c,...M})}},[c]);const[T]=a,[b]=i,[g]=s,x=oe[e].structure,v=Ku(n,x,T,b,g==null?void 0:g.inPaymentToken,(_=c.balance)==null?void 0:_.inDefaultDecimals,o);return t.jsxs("div",{className:"BuilderCalculations",children:[t.jsx($u,{chosenStrikes:T,swapSlippageState:r,shouldSwapState:m}),t.jsx(Nu,{strategy:e,amountStr:n,chosenStrikesState:a,collateralDataArrState:i,youPayState:s,swapSlippageState:r,shouldSwapState:m,setIsCostLoading:h}),t.jsx(Qu,{youPayState:s,paymentToken:c,setPaymentToken:d,confirmButtonNode:v,isCostLoading:y})]})};const Ra=({stagesArr:e})=>t.jsx("div",{className:"Stages",children:e.map(n=>t.jsx("div",{className:j("Stages__item",n.isActive&&"active"),children:n.name},n.name))}),La=(e,n,s,a,i=dt,o={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}},r=null)=>{const l=V(),u=oe[e],[p,c]=f.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:BigInt(u.key)}),[d,m]=f.useState([]);if(!(a!=null&&a.inPaymentToken))return null;const{setIsLoading:y,closeModal:h,addPendingPosition:T}=o,{paymentToken:b,decomposition:g}=a,x=b.isETH;if(r!==null)return()=>Xu(l,n[0],r,u,y,h);const v=()=>d.reduce((F,I)=>F+I,0n),_=be(l,"TxBuilder"),M=(E,F)=>{const I=Dl[E.protocolName];return _.module(I).then(O=>{p.moduleArr[F]=O})},k=async(E,F)=>{const{isLong:I}=E;let O;I&&(O=g[F]);const N=s[F],D={setToCollateral:N&&Ft.from(N.inMarketToken),isBaseCollateral:N==null?void 0:N.isBase,premiumData:O};return E.utils.getBuilderParams(E.amount,D,b.decimals).then(w=>{p.parametersArr[F]=w})},P=(E,F)=>{const I=ee(l,"Exchanger"),O=g[F],N=O.marketToken,D=Da(b.address,N.address),C=O.inMarketToken,A=Js(b,N);return Yn(l,N.address,b.address,C).then(w=>Ct(w,i)).then(w=>{const L=Ue(w,b.decimals),H=Ue(C,N.decimals);return x&&(d.push(L),m([...d])),I.encodeFromExchange({path:D,tokenIn:b.address,tokenOut:N.address,amountIn:L,amountOutMinimum:H,isETH:x,swap:A}).then(W=>{p.swapDataArr[F]=W})})},S=()=>{const E=[];return n.forEach((F,I)=>{E.push(M(F,I),k(F,I),P(F,I))}),Promise.all(E).then(()=>{c({...p})}).catch(F=>{throw console.log(F),y(!1),new Error("Something went wrong")})};return()=>{y(!0);const{amount:E,asset:F}=n[0];return S().then(()=>{const I=Oa(u,E,F);return ge(l,_.consolidationOfTransactions,[p.moduleArr,p.parametersArr,p.swapDataArr,p.productType,d.length?{value:v()}:{}],I,y,h)}).then(()=>{m([])}).catch(ut)}},Xu=async(e,n,s,a,i,o)=>{if(U(s)){ut(`MarginId is undefined.
This is likely a bug, please report about it.`,i);return}const r=be(e,"MarginOneClick"),l=n.premiumData.marketToken.address,u=n.utils.getStrategyAddress(),p=Ne(n.amount,n.asset),c=n.premiumData.inMarketToken,d=Math.floor((n.expiry-Date.now())/se),m=[],y=Oa(a,n.amount,n.asset);return ge(e,r.transferBuyProvideERC721,[s,l,u,p,c,d,m],y,i,o)},Oa=(e,n,s,a=void 0)=>{const{name:i,isHidden:o}=e,r=q(n),l=r!==1,u=e.plural??`${i}s`,p=l?u:i,c=!U(a),d=` and deposited into Margin Account #${Number(a)}.`,m=o?`${s} ${p} opened${c?d:"."}`:`${r} ${s} ${p} opened${c?d:"."}`,y=t.jsxs(X,{symbol:s,children:[o?"":`${r} `,p," opened",c?d:"."]});return{text:m,node:y}},it=(e,n,s,a=i=>{})=>{const{userAddress:i}=te(),o=V(),r=J(o,e);return{check:async()=>r.isETH?new Promise(u=>u(!0)).then(a):Vo(o,r,i,n,s).then(a),approve:async(u,p)=>{if(r.isETH)throw new Error("Trying to approve ETH");return qo(o,r,n,s,u,p)}}},Zu=({isOpen:e,setIsOpen:n,asset:s,strategy:a,amountStr:i,chosenStrikes:o,collateralDataArr:r,youPay:l,swapSlippage:u})=>{const p=V(),c=oe[a],[d,m]=f.useState(!1),[y,h]=f.useState(null),[T,b]=kt(),g=La(a,o,r,l,u,{setIsLoading:m,closeModal:()=>n(!1),addPendingPosition:A=>{A.isOpening=!0,T.opening.push(A),b({...T})}}),x=_a(l),_=["Approve","Buy"].map(A=>({name:A,isActive:y===A})),{paymentToken:M,inPaymentToken:k}=l,P=le(k,M.isStable),S=M.symbol,B=`${P} ${S}`,E={Approve:`Approve ${B}`,Buy:`Pay ${B}`},F=be(p,"Exchanger"),I=it(S,F.address,k,A=>{h(A?"Buy":"Approve")}),O=()=>{h(null),I.check()};f.useEffect(()=>{e&&O()},[e,l]);const N=()=>{if(!y)return De;if(d){if(y==="Approve")return`Approving ${S}...`;if(y==="Buy")return`Buying ${a}...`}},D={approve:()=>{I.approve(m,O)},buy:g},C={getBtnText:()=>N()??E[y],getIsBtnEnabled:()=>!N(),getBtnOnClick:()=>{switch(y){case"Approve":return D.approve;case"Buy":return D.buy}}};return t.jsxs(xe,{className:"BuyBuildModal",isOpen:e,setIsOpen:n,children:[t.jsx(Ra,{stagesArr:_}),t.jsx("h1",{className:"BuyBuildModal__title",children:y??t.jsx(ye,{})}),t.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",t.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[t.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:c.color},children:a}),t.jsx(Te,{isVertical:!0}),t.jsx(X,{className:"BuyBuildModal__strategy-amount",symbol:s,isHlight:!0,children:i})]})]}),x&&t.jsx("div",{className:"BuyBuildModal__footer",children:t.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",B," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),t.jsx(z,{className:"BuyBuildModal__button",isDisabled:!C.getIsBtnEnabled(),onClick:C.getBtnOnClick(),children:C.getBtnText()})]})},Ju=({assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r})=>{const l=f.useState(null),[u]=l,[p,c]=f.useState(!1),d=Dt(),[m,y]=d;ec(m)||y(dt);const[h]=e,[T]=n,[b]=s,[g]=o,[x]=r,v=()=>{c(!0)};return t.jsxs("div",{className:"BuilderForm App-box",children:[t.jsx(Su,{assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),t.jsx(zu,{strategy:T,amountStr:b,youPayState:l,chosenStrikesState:o,collateralDataArrState:r,openBuyModal:v,swapSlippageState:d}),(u==null?void 0:u.inPaymentToken)&&t.jsx(Zu,{isOpen:p,setIsOpen:c,asset:h,strategy:T,amountStr:b,chosenStrikes:g,collateralDataArr:x,youPay:u,swapSlippage:m}),t.jsx(Au,{strategy:T})]})},ec=e=>!(typeof e!="number"||e>1||e<0);const tc=({asset:e,strategy:n,amountStr:s,chosenStrikes:a,collateralDataArr:i})=>{var N;const o=oe[n].structure,r=f.useRef(null),l=Pe(s),u={amount:l,strikes:a.map(D=>q((D==null?void 0:D.strike)??0n)),premiums:a.map(D=>{var A;const C=(A=D==null?void 0:D.premiumData)==null?void 0:A.inUSDC;return C&&q(C)}),strategies:o,collaterals:i,isReady:l&&a.length===o.length&&a.every(D=>D)},p=e==="ETH",c=p?.3:.2,d=p?5:10,m=100,y=Je(e),h=q(y),T=h&&Math.round(h/d)*d,b=(D,C)=>{const A=u.strategies[D],w=u.premiums[D],L=u.strikes[D],H=u.amount,W=u.collaterals[D],R=(W==null?void 0:W.liquidationPrice)&&q(W.liquidationPrice),Y=W&&q(W.inMarketToken),G=W==null?void 0:W.isBase;let $;if(w){switch(A){case 1:C<L?$=-w:$=(C-L)*H-w;break;case 2:C>L?$=-w:$=(L-C)*H-w;break;case-1:if(R&&C>R)G?$=-(Y*R)+w:$=-Y+w;else if(G){const ve=(L-h)*H+w;C>L?$=ve:$=(C-h)*H+w}else C<L?$=w:$=(L-C)*H+w;break;case-2:R&&C<R?G?$=-(Y*R)+w:$=-Y+w:C>L?$=w:$=(C-L)*H+w;break}if($)return Number($)}},x=(()=>{if(!u)return;const D=u.strikes.reduce((W,R)=>(W+R)/2,u.strikes[0]),C=window.innerWidth>480?c:c-.05,A=Math.round(D*(1-C)/100)*100,w=Math.round(D*(1+C)/100)*100,L=[];for(let W=0;W<(w-A)/d;W++){const R=A+W*d;L.push(R)}const H=[];return u.strategies.forEach((W,R)=>{L.forEach((Y,G)=>{const $=b(R,Y);R===0?H.push({closePrice:Y,pnl:$}):H[G].pnl=H[G].pnl+$})}),H})(),v=(N=x.reduce((D,C)=>C.pnl>D.pnl?C:D,x[0]))==null?void 0:N.pnl,_=v&&Me(v.toFixed(0)),k=(()=>{if(!x)return;const D=Math.max(...x.map(w=>w.pnl)),C=Math.min(...x.map(w=>w.pnl));if(D<=0)return 0;if(C>=0)return 1;const A=D/(D-C);return isNaN(A)?0:A})(),P=({value:D,cx:C,cy:A})=>{const w=D[1];let L;return w<0?L=ce:w>0?L=Re:L=gt,t.jsx("circle",{cx:C,cy:A,r:5,style:{opacity:"0.9"},fill:L})},S=D=>{const{active:C,payload:A,label:w}=D,L=C&&A&&A.length&&Number(A[0].value.toFixed(2));return C&&A&&A.length?t.jsxs("div",{className:"react-tooltip",children:[t.jsxs(X,{symbol:e,isHlight:!0,children:["$",Me(w)]}),t.jsxs("p",{children:["PnL ",t.jsx("span",{className:j({positive:L>0,negative:L<0}),children:`${L!==0?L>0?"+":"-":""}$${Me(Math.abs(L))}`})]})]}):null},B=D=>Me(D),E={fill:gt,fontSize:13},F=xt,[I,O]=f.useState(null);return f.useEffect(()=>{if(r.current&&x){let D;const C=Math.round(m/(r.current.clientWidth/x.length));C<20?D=19:D=Math.floor(C/20)*20-1,O(D)}},[r.current,x,window.innerWidth]),t.jsx("div",{className:"BuilderPositionChart App-box",ref:r,children:u.isReady?t.jsx(Zi,{children:t.jsxs(Ji,{data:x,margin:{left:(_==null?void 0:_.length)*7.5-40,right:15,top:15},children:[t.jsx(er,{dataKey:"closePrice",interval:I,tickFormatter:B,tick:E,stroke:F}),t.jsx(tr,{dataKey:"pnl",tickFormatter:B,tick:E,stroke:F,padding:{bottom:15}}),t.jsx(nr,{cursor:{stroke:gt},content:t.jsx(S,{})}),t.jsx(sr,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:t.jsx(P,{}),fill:"url(#splitColorTransparent)"}),t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:k,stopColor:Re,stopOpacity:1}),t.jsx("stop",{offset:k,stopColor:ce,stopOpacity:1})]}),t.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:k,stopColor:Re,stopOpacity:.3}),t.jsx("stop",{offset:k,stopColor:ce,stopOpacity:.3})]})]}),t.jsx(rs,{x:T,stroke:xt,strokeDasharray:"3 3",label:{value:"Current Price",fill:xt,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),u.collaterals.length&&u.collaterals.map(D=>{if(!D||!D.liquidationPrice)return;const C=q(D.liquidationPrice),A=Math.round(C/d)*d;return t.jsx(rs,{x:A,stroke:ce,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:ce,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},C)}),t.jsx(ar,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):t.jsx(ze,{children:"Fill out the Strike fields to view position chart"})})},nc=({assetState:e})=>{const n=f.useState("Long Call"),s=f.useState("1"),a=f.useState(null),i=f.useState([]),o=f.useState([]),r=f.useState([]),[l]=e,[u]=n,[p]=s,[c]=o,[d]=r;return t.jsxs("div",{className:"BuilderDashboard",children:[t.jsx(Ju,{assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),t.jsx(tc,{asset:l,strategy:u,amountStr:p,chosenStrikes:c,collateralDataArr:d})]})},sc=6,ac=()=>{const{isConnected:e,userAddress:n}=te(),s=V(),a=ee(s,"TxBuilder"),{data:i,error:o}=we(e&&[n,"useBuilderPositionsStructure"],async()=>{var d;const r=[],l={},u={},p=await rc(a,n),c=[];for(let m=0;m<p.length;m++){const y=p[m],{buildID:h,productType:T}=hn(y.args),b=ga.find(k=>oe[k].key===Number(T)),g={strategy:b,buildId:h,legsStructure:[]},x=(d=oe[b])==null?void 0:d.isCollection,v=ic(s,h),_=[];for(const k in v)v[k].forEach(S=>{S.then(B=>{const E=oc(B,k);g.legsStructure.push(...E),uc(E,h,l)}),_.push(S)});const M=Promise.all(_).then(()=>{r.push(g),x&&pc(g,u)}).catch(console.log);c.push(M),await $n(c,sc,p.length,m)}return cc(r,l),dc(r,u),r},{refreshInterval:2e4});return o?(console.log(`Builder Positions error:
`,o),null):i},ic=(e,n)=>{const{Hegic:s}=Ul(e),{OpenPositionByHegic:a}=s.filters;return{Hegic:[s.queryFilter(a(n))]}},rc=async(e,n)=>{const{CreateBuild:s}=e.filters,a=await e.queryFilter(s(null,n)),i=Qe[Qe.length-1];return(await Ot(a,i,e.provider)).reverse()},oc=(e,n)=>e.map(a=>{const i=lc(n,a);return{market:n,id:i}}),lc=(e,n)=>{switch(e){case"Hegic":return Number(n.args.tokenID);default:throw new Error`Invalid market: ${e}`}},uc=(e,n,s)=>{e.forEach(a=>{const{id:i}=a;s[i]=s[i]??[],s[i].push(n)})},cc=(e,n)=>{const s=[];for(const a in n)n[a].length>1&&s.push(a);s.forEach(a=>{const i=e.filter(r=>{if(r.legsStructure.find(u=>u.id===a))return!0}),o=i.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,i[0]);i.forEach(r=>{if(r.buildId===o.buildId)return;const l=r.legsStructure.findIndex(p=>p.id===a);r.legsStructure.splice(l,1);const u=n[a].findIndex(p=>p===r.buildId);n[a].splice(u,1)})})},pc=(e,n)=>{const s=yc(e.legsStructure[0].id);n[s]=n[s]??[],n[s].push(e)},dc=(e,n)=>{for(const s in n){const a=n[s].filter(r=>r.legsStructure.length);if(a.length<=1)continue;const i=a.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,a[0]),o=e.find(r=>r.buildId===i.buildId);a.forEach(r=>{if(r.buildId===o.buildId)return;o.legsStructure.push(...r.legsStructure);const l=e.findIndex(u=>u.buildId===r.buildId);e.splice(l,1)})}},yc=e=>{let n;try{n=e.split("_").slice(1).join("_")}catch{n=e}return n},{HEAD:mc,COMMON:fc,LEG:Fa}=xa,Ua=()=>{const e=ma(),{positionsByMarket:n}=e,s=ac();if(!s||!n)return;const i=s.map(r=>{var m;const{legsStructure:l,strategy:u}=r,p=[],c=(m=oe[u])==null?void 0:m.isCollection;for(let y=0;y<l.length;y++){const{id:h,market:T}=l[y],b=n[T];if(!b)return;const g=b.findIndex(v=>v.id===h),x=b[g];x&&(p.push(x),b[g].role=Fa)}const d=l.length===1||c&&p.length===1;if(p.length)if(d){const y={...p[0]};return{...r,...y,role:fc}}else{const y=hc(p),h=p[0].asset;return{...r,legs:p,asset:h,...y,role:mc}}}).filter(r=>!U(r));return bc(i,n)},bc=(e,n)=>{const s=[],a=[];Object.values(n).forEach(r=>{r&&a.push(...r)});const o=a.filter(r=>r.role!==Fa).map(r=>{const{isCall:l,isSpread:u,isLong:p}=r;return{strategy:`${u?l?"Bull":"Bear":p?"Long":"Short"} ${l?"Call":"Put"} ${u?"Spread":""}`.trim(),...r}});return s.push(...e,...o),s},hc=e=>{const n=e.reduce((s,a)=>{const i=Zt(s,a,["amount","premium","pnl.inUSDC"]);return i.greeks=na(s.greeks,a.greeks),i.collaterals=a.collateral?[...s.collaterals,a.collateral]:s.collaterals,i},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return n.pnl.inPercentage=qn(null,n.pnl.inUSDC,n.premium),n.expiry=e[0].expiry,n};const Tc=({position:e,openCloseModal:n})=>{const[s]=kt();if(!e.actions)return null;const{isClosingDisabled:a}=e.actions,i=s.closing.find(l=>l.id===e.id),o=()=>{n(e)},r=_e(576);return t.jsx("div",{className:"PositionCloseBtn",children:mt(r?t.jsx(xc,{isDisabled:a,handleClick:o}):t.jsx(gc,{isDisabled:a,handleClick:o}),i)})},gc=({isDisabled:e,handleClick:n})=>t.jsx("button",{className:"close-btn _cross",disabled:e,onClick:n,children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[t.jsx("g",{id:"icon-close",clipPath:"url(#clip0_294_4433)",children:t.jsx("path",{id:"Vector",d:"M13.6899 0.320713C13.5917 0.222272 13.475 0.144172 13.3465 0.090885C13.2181 0.0375978 13.0803 0.010169 12.9413 0.010169C12.8022 0.010169 12.6645 0.0375978 12.536 0.090885C12.4076 0.144172 12.2909 0.222272 12.1926 0.320713L7 5.50274L1.80736 0.310093C1.70905 0.211782 1.59233 0.133796 1.46388 0.0805904C1.33543 0.0273845 1.19776 1.03588e-09 1.05873 0C0.919692 -1.03588e-09 0.78202 0.0273845 0.653569 0.0805904C0.525118 0.133796 0.408405 0.211782 0.310093 0.310093C0.211782 0.408405 0.133796 0.525118 0.0805904 0.653569C0.0273845 0.78202 -1.03588e-09 0.919692 0 1.05873C1.03588e-09 1.19776 0.0273845 1.33543 0.0805904 1.46388C0.133796 1.59233 0.211782 1.70905 0.310093 1.80736L5.50274 7L0.310093 12.1926C0.211782 12.291 0.133796 12.4077 0.0805904 12.5361C0.0273845 12.6646 0 12.8022 0 12.9413C0 13.0803 0.0273845 13.218 0.0805904 13.3464C0.133796 13.4749 0.211782 13.5916 0.310093 13.6899C0.408405 13.7882 0.525118 13.8662 0.653569 13.9194C0.78202 13.9726 0.919692 14 1.05873 14C1.19776 14 1.33543 13.9726 1.46388 13.9194C1.59233 13.8662 1.70905 13.7882 1.80736 13.6899L7 8.49726L12.1926 13.6899C12.291 13.7882 12.4077 13.8662 12.5361 13.9194C12.6646 13.9726 12.8022 14 12.9413 14C13.0803 14 13.218 13.9726 13.3464 13.9194C13.4749 13.8662 13.5916 13.7882 13.6899 13.6899C13.7882 13.5916 13.8662 13.4749 13.9194 13.3464C13.9726 13.218 14 13.0803 14 12.9413C14 12.8022 13.9726 12.6646 13.9194 12.5361C13.8662 12.4077 13.7882 12.291 13.6899 12.1926L8.49726 7L13.6899 1.80736C14.0934 1.40384 14.0934 0.724231 13.6899 0.320713Z",fill:"#6988FF"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_294_4433",children:t.jsx("rect",{width:"14",height:"14",fill:"white"})})})]})}),xc=({isDisabled:e,handleClick:n})=>t.jsx(z,{className:"close-btn",type:"micro",isDisabled:e,onClick:n,children:"Close"}),_c=({handleClick:e})=>t.jsx("button",{onClick:e,className:"shrink-0",children:t.jsx("img",{src:Ia,alt:"Update Collateral"})}),vc="/sf_draft/assets/multi-626e9c45.svg";const Cc=({expiry:e})=>{const n=e-Date.now(),s=n<=0,i=On(n,!0).split(":");return t.jsxs("div",{className:j("ExpirationTimer",s&&"expired"),children:[t.jsx("div",{className:"ExpirationTimer__text",children:"Left until expiration"}),t.jsx("div",{className:"ExpirationTimer__timer",children:i.map((o,r)=>{const l=r===i.length-1,u=Lu(o);return t.jsxs(Ve.Fragment,{children:[t.jsx("div",{className:"ExpirationTimer__timer-value",children:o}),!l&&t.jsx("span",{className:"ExpirationTimer__timer-separator",children:":"})]},u)})})]})};const xn=({market:e,strikeParams:n,isSmall:s})=>{const{strike:a,isCall:i,isLong:o,expiry:r}=n,l=Date.now()>r,u=e?sn[e].circled:vc,p=o?Sa:Aa,c=Ie(r,"dMMMyy").toUpperCase(),d=sa(a),y=`${c}-${d}-${i?"C":"P"}`,h=Cs(t.jsx(Cc,{expiry:r}));return t.jsxs("div",{className:j("Brief","InstrumentBrief",s&&"small",l&&"expired"),children:[t.jsxs("div",{className:"Brief__icons",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:u,alt:`${e}`})}),t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:p,alt:`${o?"Long":"Short"}`})})]}),t.jsx("div",{className:"InstrumentBrief__string tip","data-tooltip-id":"Tooltip_Expiration","data-tooltip-html":h,children:y})]})},{HEAD:Mc,LEG:Sc}=xa,Ac={strategy:"Strategy",amount:"Amount",instrument:"Instrument",collateral:t.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",entryPrice:"Entry Price",closePrice:"Close Price",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",closeBtn:""},$a=({positions:e,openCollateralModal:n,openCloseModal:s,isLoadingComplete:a})=>{const{isConnected:i}=te(),o=d=>{const{role:m,isOpening:y,isTotal:h,expiry:T}=d,b=m===Mc,g=m===Sc,x=Date.now()>T,v=()=>{if(g)return"";if(h)return Z("Total",!1,!0);let{strategy:C}=d;if(!C){const{isCall:H,isLong:W}=d;C=Jt(W,H)}const A=oe[C],w=A==null?void 0:A.color,L=t.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:t.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:w,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return t.jsxs("span",{className:"flex items-center gap-x-4",style:{color:w},children:[y&&t.jsx(ye,{}),C,b&&L]})},_=()=>{const{asset:C,amount:A}=d;if(A)return t.jsx(X,{symbol:C,children:q(A)})},M=()=>{const{market:C,strike:A,strategy:w,legs:L}=d;if(b){const H=oe[w],{isCollection:W}=H;return W?t.jsx(xn,{strikeParams:L[0]}):t.jsx("div",{className:"PositionsTable__strike-msg",children:Z("Click to see strikes")})}if(A)return t.jsx(xn,{market:C,strikeParams:d})},k=()=>{const{premium:C}=d,A=C<0n,w=me(Ge(C)),L=`${A?"–":"+"}$${w}`;return t.jsx("span",{className:j({positive:!A,negative:A}),children:L})},P=()=>{const{collateral:C,collaterals:A,actions:w}=d;if(!C&&(!A||!A.length))return;const L=H=>h?H.inUSDC?t.jsxs("span",{children:["$",me(H.inUSDC)]}):void 0:t.jsx(X,{symbol:H.marketToken.symbol,children:le(H.inMarketToken,H.marketToken.isStable)},H.isBase);return b?S(A,L):w&&!w.isAddingToCollateralDisabled?t.jsxs("div",{className:"flex items-center gap-x-3",children:[L(C),t.jsx(_c,{handleClick:()=>n(d)})]}):L(C)},S=(C,A)=>{const w={base:{},stable:{}},L=W=>{const{isBase:R}=W,Y=R?"base":"stable";w[Y]={...Zt(w[Y],W,["inMarketToken","inUSDC"]),isBase:R}};C.forEach(L);const H=Object.values(w).map(A);return t.jsx("div",{className:"flex flex-col gap-y-5",children:H})},B=()=>{if(!d.pnl)return;const{inUSDC:C,inPercentage:A}=d.pnl,w=C<0?bn.negative:"",L=Ge(A),H=q(L)<1?1:0,W=me(L,H);return t.jsxs("div",{className:j({positive:C>0n,negative:C<0n,muted:C===0n}),children:[t.jsx("span",{style:{color:gt,marginRight:5},children:at(C)}),`(${w}${W}%)`]})},E=()=>{const{entryPrice:C}=d;if(!U(C))return`$${me(C)}`},F=()=>{const{closePrice:C}=d;if(!U(C))return`$${me(C)}`},I=()=>{const{collateral:C}=d;if(!(!C||!C.liquidationPrice))return`$${me(C.liquidationPrice)}`},O=()=>{const{greeks:C}=d;if(h)for(const A in C){const w=C[A];ta(w)||(C[A]=void 0)}return C},N=()=>b?d.legs.map(o):void 0,D=()=>y?"":t.jsx(Tc,{openCloseModal:s,position:d});return{id:`${d.buildId}_${d.id}`,strategy:v(),amount:_(),instrument:M(),premium:k(),collateral:P(),pnl:B(),entryPrice:E(),closePrice:F(),liqPrice:I(),...O(),children:N(),closeBtn:D(),omittedKeys:(b||h)&&["instrument","closeBtn"],className:j(x&&"expired")}},r=Ac,l=e==null?void 0:e.map(o),u={titleData:r,itemsData:l},p=[{name:"Active",isActive:!0}],c=()=>{let d;return i?!e||!a?d="Loading...":e.length||(d="No open positions"):d="No wallet connected",t.jsx("div",{className:"App-box PositionsTable__message",style:a?{}:{marginBottom:10},children:Z(d)})};return t.jsxs("div",{className:"PositionsTable",children:[t.jsx("div",{className:"PositionsTable__header",children:t.jsx($t,{links:p,type:"border"})}),e!=null&&e.length?t.jsxs(t.Fragment,{children:[!a&&c(),t.jsx(Ma,{structureData:u})]}):c()]})};const Ha=e=>{const{value:n,setValue:s,maxValue:a,placeholder:i,isDisabled:o,isFocused:r,hasError:l,formatInputStringFns:u=[pt,Pe],title:p,presentedValue:c,presentedValueTitle:d,iconData:m,unitStr:y}=e,h=tn([n,s],{maxValue:a,placeholder:i,isDisabled:o,isFocused:r},u),T=j(e.className,h.hasFocus&&"hlight",l&&"error",o&&"disabled"),b=u[0];return t.jsxs("div",{className:j("InputFamily InputComplexNumeric",T),onClick:()=>{h.ref.current.focus()},children:[t.jsxs("div",{className:"InputComplexNumeric__header",children:[t.jsx("div",{className:"InputComplexNumeric__title",children:p}),c&&t.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:g=>{g.stopPropagation(),s(b(c))},children:[t.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[d,":"]}),b(c)]}),m&&t.jsx("div",{className:"InputComplexNumeric__icon",children:t.jsx("img",{src:m.src,alt:m.alt??"icon"})})]}),t.jsxs("div",{className:"InputComplexNumeric__body",children:[t.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:h.node}),t.jsxs("div",{className:"InputComplexNumeric__helper",children:[a&&t.jsx("button",{className:"InputFamily__max-btn",disabled:o,onClick:g=>{g.stopPropagation(),s(pt(a))},children:"Max"}),y&&t.jsx("div",{className:"InputComplexNumeric__unit",children:y})]})]})]})};const rt=({className:e,children:n,value:s,symbol:a="USDC",isHlight:i=!0,style:o,...r})=>{const l=V(),u=J(l,a).icon,p=n,c=j(i&&"_hlight",e);return t.jsxs("div",{className:j("CurrencyWithText",c),style:o,...r,children:[t.jsx("img",{src:u,alt:`${a} icon`}),t.jsx("span",{className:"CurrencyWithText__value",children:s}),t.jsx("span",{className:"CurrencyWithText__text",children:p})]})},wc=({position:e,isOpen:n,setIsOpen:s})=>{var x;const a=V(),[i,o]=f.useState(""),[r,l]=f.useState(!1),[u,p]=f.useState(null),c=((x=e==null?void 0:e.collateral)==null?void 0:x.marketToken)??{symbol:"ETH"},d=Nt(c.symbol),m=it(c==null?void 0:c.symbol,qi,Q(i),p),y=()=>{p(null),m.check()};if(f.useEffect(()=>{p(null)},[i]),Ae(()=>{i&&y()},ke,[i]),!e||!e.collateral)return null;const h=()=>{if(!i)return"Enter Amount";if(u===null)return De;if(r)return u?"Updating Collateral...":`Approving ${c.symbol}...`},T=()=>!h(),b=()=>{const v=u?"Add Collateral":`Approve ${i} ${c.symbol}`;return h()??v},g=()=>{if(!u){m.approve(l,y);return}const v=Q(i);ge(a,e.actions.addToCollateral,[v],{text:`${i} ${c.symbol} added.`,node:t.jsx(rt,{value:i,symbol:c.symbol,children:"added to collateral."})},l,()=>s(!1))};return t.jsxs(xe,{className:"PositionCollateralModal",isOpen:n,setIsOpen:s,reset:()=>{o(""),p(null)},children:[t.jsx("h1",{children:"Edit Collateral"}),t.jsx(Ha,{value:i,setValue:o,title:"Add Amount",iconData:{src:d},isFocused:!0}),t.jsx(z,{isDisabled:!T(),onClick:g,children:b()})]})};const Wa=({position:e,isOpen:n,setIsOpen:s})=>{const a=V(),[i,o]=f.useState(""),[r,l]=f.useState(void 0),[u,p]=f.useState(!1),[c,d]=kt(),m=()=>{const C=Yt(e.amount);o(C)},y=C=>{l(void 0),e.utils.calcPnl(C).then(l)};if(f.useEffect(()=>{n&&e&&m()},[n]),Ae(()=>{e&&i&&y(Q(i))},ke,[i]),!e||!e.actions)return null;const h=C=>{if(C)c.closing.push({id:e.id,market:e.market});else{const A=c.closing.findIndex(w=>w.id===e.id);A!==-1&&c.closing.splice(A,1)}d({...c})},{close:T}=e.actions,{asset:b,amount:g,strategy:x,isCall:v,isLong:_}=e,M=x??`${_?"Long":"Short"} ${v?"Call":"Put"}`,k=t.jsxs(X,{symbol:b,children:[i," ",M," closed."]}),S={text:`${i} ${b} ${M} closed.`,node:k},B=Q(i),E=r==null?void 0:r.inUSDC,F=()=>{ge(a,T,[B],S,p,()=>{h(!0),s(!1)})},I=()=>{if(!i)return"Enter Amount";if(u)return"Closing Strategy..."},O=()=>I()??"Close Strategy",N=()=>!I(),D=Nt(b);return t.jsxs(xe,{className:"ClosePositionModal",isOpen:n,setIsOpen:s,reset:()=>{o(""),l(void 0)},children:[t.jsxs("div",{className:"ClosePositionModal__body",children:[t.jsx("h1",{children:"Close Strategy"}),t.jsxs("div",{className:"info-row",children:[t.jsx("div",{className:"info-row__title",children:"Instrument"}),t.jsx("div",{className:"info-row__value",children:t.jsx(xn,{market:e.market,strikeParams:e})})]}),e.market!=="Hegic"&&t.jsx(Ha,{value:i,setValue:o,title:"Amount",iconData:{src:D},isFocused:!0,maxValue:q(g)})]}),t.jsxs("div",{className:"ClosePositionModal__footer",children:[t.jsxs("div",{className:"info-row",children:[t.jsx("div",{className:"info-row__title",children:"PnL"}),t.jsx("div",{className:j("info-row__value",{positive:E>0n,negative:E<0n}),children:de(()=>Bu(E),U(E))})]}),t.jsx(z,{isDisabled:!N(),onClick:F,children:O()})]})]})},qa=({positions:e})=>{const n=ma(),{arePositionsLoaded:s,positionsTotalData:a}=n,i=kt(),o=e==null?void 0:e.sort((b,g)=>g.isTotal?-1:b.isTotal?1:Hn(b,g,"pnl.inUSDC",-1));o==null||o.forEach(b=>{b.legs&&b.legs.sort(ea("pnl.inUSDC",-1))});const r=o&&a?[...o,a]:o,[l,u]=f.useState(null),[p,c]=f.useState(!1),[d,m]=f.useState(!1),y=b=>{u(b),c(!0)},h=b=>{u(b),m(!0)},[T]=i;return T.opening&&r&&[...T.opening,...r],t.jsxs("div",{className:"Positions",children:[t.jsx("h1",{className:"Positions__title",children:"My Positions"}),t.jsx($a,{positions:r,isLoadingComplete:s,openCollateralModal:y,openCloseModal:h}),t.jsx(wc,{isOpen:p,setIsOpen:c,position:l}),t.jsx(Wa,{isOpen:d,setIsOpen:m,position:l})]})},Va=f.createContext(null),jc=({children:e})=>{const n=Oe("asset","ETH");return t.jsx(Va.Provider,{value:n,children:e})},on=()=>f.useContext(Va),kc=()=>{const e=on(),n=Ua();return t.jsxs("div",{className:"Builder",children:[t.jsx(nc,{assetState:e}),t.jsx(qa,{positions:n})]})},Zn=()=>f.useContext(Ga),K=e=>{const n=Zn();return e.endsWith("State")?n[e]:n[`${e}State`][0]},Dc=()=>{const e=Oe("asset","ETH"),n=Oe("OptionChain-isDistanceEnabled",!1),s=f.useState(null),a=f.useState(!0),i=f.useState(!0),o=f.useState(!1),r=f.useState(!1),l=f.useState(null),u=f.useState(!1);return{assetState:e,isDistanceEnabledState:n,strikePriceState:s,isCallState:a,isLongState:i,isModalOpenState:o,isDepositedIntoMarginState:r,marginIdState:l,isApproveTipShownState:u}},Ga=f.createContext(null),Ec=({children:e})=>{const n=Dc();return t.jsx(Ga.Provider,{value:n,children:e})};const Ic="/sf_draft/assets/date-1ea6323e.svg",Ya=({chosenDate:e,setChosenDate:n,type:s="Selector",shouldRenderCarousel:a=!1})=>{const{dates:i}=Ee();f.useEffect(()=>{i&&!e&&n(i[0])},[i]);const o=_e(1100)||!a;return t.jsx(an,{className:j("DateController",`_${s}`),title:"Expiration Date",children:t.jsx("div",{className:"DateController__items",children:de(()=>o?t.jsx(Pc,{chosenDate:e,setChosenDate:n,type:s}):t.jsx(Rc,{chosenDate:e,setChosenDate:n}),U(i))})})},Pc=({chosenDate:e,setChosenDate:n,type:s})=>{const{dates:a}=Ee(),i=a.map(l=>{const u=Bc(s,l);return{value:l,label:t.jsx(Nc,{date:l,expiryStr:u})}}),o=e&&i.find(l=>l.value===e),r=s==="Selector"?t.jsx("img",{src:Ic,alt:"Strategy selector icon"}):null;return t.jsx(he,{className:r?"Selector_thin-options":"",placeholder:"Choose Date",options:i,value:o,onChange:l=>{n(l.value)},iconNode:r})},Bc=(e,n)=>{const s=n-Date.now();switch(e){case"Selector":return On(s);case"Selector_no-icon":return`Expires in ${zt(s)} days`;default:return""}},Nc=({date:e,expiryStr:n})=>t.jsxs("div",{className:"DateController__selector-date",children:[t.jsx("div",{className:"DateController__selector-date-value",children:Ie(e,"d MMM yy")}),t.jsx("div",{className:"DateController__selector-date-expiry",children:n})]}),Rc=({chosenDate:e,setChosenDate:n})=>{const{dates:s}=Ee(),a=s.map(i=>{const o=Ie(i,"d MMM yy"),r=zt(i-Date.now()),l=e===i;return t.jsxs(z,{className:j("DateController__item",l&&"chosen"),type:"stroke",onClick:()=>n(i),children:[t.jsx("div",{className:"DateController__item-date",children:o}),t.jsxs("div",{className:"DateController__item-expiry",children:[r," days"]})]},i)});return t.jsx(ja,{id:"DateControllerCarousel",spaceBetween:8,isDraggable:!1,breakpoints:{992:{slidesPerView:7},1200:{slidesPerView:8},1300:{slidesPerView:"auto"}},children:a})};const Qa=({isCheckedState:e,text:n,className:s,...a})=>{const[i,o]=e,r=l=>{const u=l.target;o(u.checked)};return t.jsxs("div",{className:j("Checker",s),...a,children:[t.jsx("input",{type:"checkbox",checked:i,onChange:r}),t.jsx("label",{children:n})]})},Lc=()=>{const e=Zn(),{assetState:n,isDistanceEnabledState:s}=e,[a,i]=n,[o,r]=Ee().chosenDateState;return t.jsxs("div",{className:"OptionChainControllers",children:[t.jsx(Ya,{chosenDate:o,setChosenDate:r,type:"Selector_no-icon",shouldRenderCarousel:!0}),t.jsx(zn,{asset:a,setAsset:i}),t.jsx(Qa,{isCheckedState:s,text:"Distance"})]})};const Oc=e=>Object.keys(e).map(BigInt).sort(jt),Jn=e=>{const n=[];Object.values(e).forEach(i=>{n.push(...Object.keys(i))});const s=n.map(BigInt);return Xt(s).sort(jt)},Fc=e=>Qo(e),Uc=({asset:e,chosenDate:n,strikes:s,isDistanceEnabled:a})=>{const i=Jn(s),o=Je(e),r=Ie(n??0,"d MMM yy"),l=_e();return t.jsxs("div",{className:j("OptionChainStrikeList",a&&"_distance"),children:[!l&&t.jsx("div",{className:"OptionChainStrikeList__cell _title whitespace-nowrap",children:r}),t.jsx("div",{className:"OptionChainStrikeList__cell _title",children:"Strike"}),t.jsx($c,{assetPrice:o,strikePrices:i,isDistanceEnabled:a})]})},$c=({assetPrice:e,strikePrices:n,isDistanceEnabled:s})=>{const a=n.filter(r=>{const l=Pn(e,.001);return Ge(r-e)<l}),i=Fo(a,e);let o;return i||(o=n.reduce((r,l,u)=>{if(r)return r;if(e<l||u===n.length-1)return l},void 0)),t.jsx(t.Fragment,{children:n.map(r=>{const l=r===i,u=!l&&r===o,p=`$${Fe(r,0)}`;return t.jsxs("div",{className:j("OptionChainStrikeList__cell",l&&"_assetPrice"),children:[u&&t.jsx(Wc,{assetPrice:e,strikePrices:n}),t.jsxs("div",{className:"OptionChainStrikeList__strike",children:[p,s&&t.jsx(Hc,{assetPrice:e,strikePrice:r})]})]},r)})})},Hc=({assetPrice:e,strikePrice:n})=>{const s=q(Ze(n,e))*100-100,a=fe(s,s>0&&s<1?1:0);return t.jsxs("span",{className:j("OptionChainStrikeList__distance",{negative:a<0,positive:a>0,neutral:a===0}),children:["(",a,"%)"]})},Wc=({assetPrice:e,strikePrices:n})=>{if(!e)return null;const s=j("OptionChainStrikeList__assetPrice",e>Lt(n)&&"_last"),a=q(e),i=at(e,a<100?2:0);return t.jsx("div",{className:s,children:i})};const Xe=({style:e})=>t.jsx("div",{className:"SpinnerBig",style:e,children:t.jsxs("svg",{viewBox:"0 0 100 100",children:[t.jsx("defs",{}),t.jsx("circle",{className:"SpinnerBig__circle",style:{fill:"transparent",stroke:"#fff",strokeWidth:"7px",strokeLinecap:"round"},cx:"50",cy:"50",r:"45"})]})});const Ka="/sf_draft/assets/arrow-up_green-2d5f573c.svg",za="/sf_draft/assets/arrow-down_red-ed33cd18.svg",Xa=({strikes:e,isCall:n,renderStrikeList:s})=>{const a=K("asset"),i=K("isDistanceEnabled"),o=Je(a),r=_e(),l=f.useRef(null);return f.useEffect(()=>{if(r){const u=document.querySelector(".OptionChainStrikeList");l.current&&(l.current.style.paddingRight=`${u.clientWidth}px`)}else l.current.style.paddingRight&&(l.current.style.paddingRight="")},[r,i]),t.jsx("div",{className:"OptionChainTable__wrapper",children:t.jsxs("div",{className:"OptionChainTable",children:[t.jsx(qc,{isCall:n}),t.jsxs("div",{className:"OptionChainTable__scrollable",ref:l,children:[t.jsx(Vc,{}),t.jsx(Gc,{strikes:e,isCall:n,assetPrice:o})]}),r&&s()]})})},qc=({isCall:e})=>{const n=_e(),[s]=Ee().chosenDateState,a=Ie(s,"d MMM yy"),i=()=>t.jsxs("div",{className:"OptionChainTable__cell-content",children:[e?"Calls":"Puts",t.jsx("img",{src:e?Ka:za,alt:e?"Arrow up":"Arrow down"})]});return t.jsxs("div",{className:j("OptionChainTable__cell _title _main-title",e?"positive":"negative"),children:[i(),n&&t.jsx("span",{className:"text-white",children:a})]})},Vc=()=>t.jsxs("div",{className:"OptionChainTable__head",children:[t.jsxs("div",{className:"OptionChainTable__head-group",children:[t.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),t.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"IV Bid"}),t.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"Bid"})]}),t.jsxs("div",{className:"OptionChainTable__head-group",children:[t.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),t.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"IV Ask"}),t.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"Ask"})]})]}),Gc=({strikes:e,isCall:n,assetPrice:s})=>{const a=Zn(),[,i]=a.isModalOpenState,o=Jn(e),r=u=>{const p=Jt(u,n),c=Fc(e[p]);return o.map(d=>{const m=`${d}_${u}`,y=Wn(n,d,s),h=c.filter(M=>M.strike===d);if(!h.length)return l(m,y);const T=h.reduce((M,k)=>{const P=M.premiumData.inUSDC,S=k.premiumData.inUSDC;if(u){if(S<P)return k}else if(S>P)return k;return M},h[0]),b=h.reduce((M,k)=>M+(k.liquidity??0n),0n),g=b?me(b,1):Z(),x=aa(T,s).formatted,v=de(()=>at(T.premiumData.inUSDC),!T.premiumData);return l(m,y,{size:g,IV:x,price:v},()=>{const[,M]=a.isCallState,[,k]=a.isLongState,[,P]=a.strikePriceState;M(n),k(u),P(d),i(!0)})})},l=(u,p,c,d=()=>{})=>{const m=!c;return t.jsxs("button",{className:j("OptionChainTable__strikes-item",p&&"_ITM"),disabled:m,onClick:d,children:[t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.size)??Z()}),t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.IV)??Z()}),t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.price)??Z()})]},u)};return t.jsxs("div",{className:"OptionChainTable__strikes",children:[t.jsx("div",{className:"OptionChainTable__strikes-long",children:r(!1)}),t.jsx("div",{className:"OptionChainTable__strikes-short",children:r(!0)})]})};const Yc=()=>{const e=K("asset"),n=K("isDistanceEnabled"),[s]=Ee().chosenDateState,a=Kn(e,s),i=!s||!a,o=_e();if(!i&&!Jn(a).length)return t.jsx("div",{className:"OptionChainOptions",children:t.jsx(ze,{children:"No Liquidity"})});const l=()=>t.jsx(Uc,{asset:e,chosenDate:s,strikes:a,isDistanceEnabled:n});return mt(t.jsxs("div",{className:"OptionChainOptions",children:[t.jsx(Qc,{asset:e,strikes:a,renderStrikeList:l,isDistanceEnabled:n}),!o&&l(),t.jsx(Kc,{asset:e,strikes:a,renderStrikeList:l,isDistanceEnabled:n})]}),i,t.jsx(Xe,{style:{margin:"50px auto 70px"}}))},Qc=({strikes:e,renderStrikeList:n})=>t.jsx(Xa,{strikes:e,renderStrikeList:n,isCall:!0}),Kc=({strikes:e,renderStrikeList:n})=>t.jsx(Xa,{strikes:e,renderStrikeList:n,isCall:!1}),zc=()=>t.jsxs("div",{className:"OptionChainDashboard App-box",children:[t.jsx(Lc,{}),t.jsx(Yc,{})]});const es=({oppositeLabels:e,isOn:n,setIsOn:s})=>t.jsxs("div",{className:"Switcher",children:[t.jsx("button",{className:j("Switcher__button","positive",n&&"chosen"),onClick:()=>s(!0),children:e[0]}),t.jsx("button",{className:j("Switcher__button","negative",!n&&"chosen"),onClick:()=>s(!1),children:e[1]})]});const Xc=({isCall:e,setIsCall:n})=>{const s=[t.jsxs("div",{className:"CallPutController__label",children:[t.jsx("img",{src:Ka,alt:"arrow up"}),"Call"]}),t.jsxs("div",{className:"CallPutController__label",children:[t.jsx("img",{src:za,alt:"arrow down"}),"Put"]})];return t.jsx(an,{className:"CallPutController",title:"Strategy",children:t.jsx(es,{oppositeLabels:s,isOn:e,setIsOn:n})})};const Zc=({strikePrices:e,chosenStrikePrice:n,setChosenStrikePrice:s,asset:a,isCall:i})=>{f.useEffect(()=>{e.find(p=>p===n)||s(null)},[e]);const o=Je(a),r=e.map(u=>{const p=Wn(i,u,o);return{value:u,label:t.jsx("div",{className:j("StrikeController__item",p&&"_ITM"),children:t.jsx("span",{children:`$${Fe(u,0)}`})})}}),l=t.jsx("img",{src:Os,alt:"graph icon"});return t.jsx(an,{title:"Strike",className:"StrikeController",children:t.jsx(he,{className:"Selector_thin-options",placeholder:"Choose Strike",options:r,value:r.find(u=>u.value===n),onChange:u=>{s(u.value)},iconNode:l},e)})};const Jc=({contentType:e,market:n})=>{const s={Hegic:t.jsx(ep,{contentType:e})};return t.jsx("div",{className:"MarketInfoTooltip",children:s[n]})},ep=({contentType:e})=>{const n=()=>t.jsxs("div",{children:[t.jsxs("ul",{children:[t.jsx("li",{children:"You can't close your position if your option is OTM (Out of the money)"}),t.jsx("li",{children:"You can exercise only the Intrinsic Value of your option (the difference between the strike price and the settlement price)"})]}),t.jsxs("div",{className:"MarketInfoTooltip__important-note",children:["You must exercise your ",t.jsx("br",{}),"option before the expiration date; otherwise, it will expire worthless."]})]}),s=()=>t.jsx("div",{children:"Zero fees 🔥"}),a=()=>t.jsx("div",{children:"The payoff for both call and put options is in USDC.e"});return t.jsx(tp,{Overall:n(),Fees:s(),PayoffAsset:a(),contentType:e})},tp=({Overall:e,Fees:n,PayoffAsset:s,contentType:a})=>({"2Market":e,Fees:n,"Payoff Asset":s})[a],np=({marketStrikeData:e})=>{const{market:n}=e,s=sn[n].circled,a=["2Market","Fees","Payoff Asset"];return t.jsxs("div",{className:"Brief MarketBrief",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:s,alt:n})}),a.map(i=>{const o=Cs(t.jsx(Jc,{market:n,contentType:i}));return t.jsx("div",{className:"MarketBrief__tooltip-trigger","data-tooltip-id":"Tooltip_MarketInfo","data-tooltip-html":o,children:t.jsx("span",{className:"tip",children:i})},i)})]})},sp=({isLong:e,setIsLong:n})=>t.jsx(es,{oppositeLabels:["Buy","Sell"],isOn:e,setIsOn:n});const ap="/sf_draft/assets/confirm_white-d15a05bc.svg";const Za=f.createContext(null),ip=({children:e})=>{const n=rp();return t.jsx(Za.Provider,{value:n,children:e})},ln=()=>f.useContext(Za),rp=()=>{const e=V(),n=Ss(),s=la(),a=f.useState(!1),i=f.useState(!1),o=f.useState(!1),r=f.useState(!1),[,l]=a,[,u]=i,[,p]=o,[,c]=r;return{isIntroModalOpenState:a,isCreateModalOpenState:i,isWelcomeModalOpenState:o,isCreatingState:r,actions:{openIntro:()=>{l(!0)},skipIntro:()=>{l(!1),u(!0)},createAccount:async g=>{const x=be(e,"MarginAccountManager");await ge(e,x.createMarginAccount,[],v=>{try{let _=v.events[0].args.tokenId.toString();return _.length===1&&(_=`0${_}`),`Margin Account #${_} created.`}catch(_){return console.log(_),"Margin Account created."}},c,()=>{s(void 0),g&&g()})},goToWelcomeModal:()=>{u(!1),p(!0)},startTrading:()=>{p(!1),n("/margin/trading")}}}},op="Create new margin account",un=({label:e})=>{const n=et(),s=ln(),{isConnected:a}=te(),{connectWallet:i}=Vt(),{isCreatingState:o}=s,[r]=o,{openIntro:l,createAccount:u}=s.actions,p=()=>{var d;(d=n==null?void 0:n.accounts)!=null&&d.length?u():l()},c=()=>r?"Creating...":e??op;return a?t.jsx(t.Fragment,{children:t.jsx(z,{className:"CreateMarginAccountBtn",type:"stroke",isDisabled:r,onClick:p,children:c()})}):t.jsx(z,{className:"ConnectWalletBtn",onClick:i,children:"Connect wallet"})};const st={formatRatio:lp,getRatioClass:up,queryRatioAfterPositionOpen:cp,queryRatioAfterDeposit:pp,queryRatioAfterWithdraw:dp,queryRatioAfterRepay:yp};function lp(e){return`${Math.floor(q(e*100n))}%`}function up(e,n){const{red:s,yellow:a}=n;return e<s?"_low":e<a?"_medium":"_high"}async function cp(e,n,s,a){const i=await cn(e,a,s);return pn(n.balance+i,n.debt+i)}async function pp(e,n,s,a){const i=await cn(e,a,s);return pn(n.balance+i,n.debt)}async function dp(e,n,s,a){const i=await cn(e,a,s);return pn(n.balance-i,n.debt)}async function yp(e,n,s,a){const i=await cn(e,a,s);return pn(n.balance-i,n.debt-i)}const cn=async(e,n,s)=>{let a=s;const i=J(e,"USDC");return n.address!==i.address&&(a=await ee(e,"ModularSwapRouter").callStatic.calculatePositionValue(n.address,i.address,Ne(s,n)).then(BigInt).then(r=>Ke(r,i)).catch(console.log)),a},pn=(e,n)=>n==0n?Cn:Ze(e,n),Ja=()=>t.jsx("svg",{width:"15",height:"10",viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("g",{id:"icon-eternity",children:t.jsx("path",{id:"Vector",d:"M14.9777 4.8961C14.8355 3.68253 14.0771 2.69856 12.9554 2.23937C11.7704 1.76378 10.4433 2.00978 9.51113 2.86255L8.0102 4.22372L8.76856 4.9125L10.1589 3.63333C10.8225 3.02655 11.7546 2.86255 12.6078 3.19055C13.3819 3.50214 13.9033 4.19092 13.9981 5.0109C14.0139 5.12569 14.0139 5.24049 14.0139 5.35529C14.0139 5.47009 13.9981 5.58488 13.9981 5.69968C13.9033 6.53606 13.3819 7.20844 12.6078 7.52003C11.7704 7.84802 10.8541 7.68403 10.1905 7.11004C10.1747 7.09364 10.1747 7.09364 10.1589 7.07724L5.92471 3.25614L5.49813 2.86255C4.55017 2.00978 3.23884 1.76378 2.0381 2.23937C0.932154 2.69856 0.157992 3.68253 0.0315984 4.8961C0.0157992 5.0601 0 5.20769 0 5.37169C0 5.51928 0.0157992 5.68328 0.0315984 5.83088C0.173791 7.04444 0.932154 8.04482 2.0539 8.48761C3.23884 8.96319 4.56597 8.7172 5.51393 7.86442L6.99905 6.50326L6.24069 5.83088L4.85036 7.09364C4.18679 7.70043 3.25464 7.86442 2.40148 7.53643C1.62732 7.22484 1.10594 6.55246 1.01115 5.71608C0.995351 5.60128 0.995351 5.48649 0.995351 5.37169C0.995351 5.25689 1.01115 5.12569 1.01115 5.0273C1.10594 4.20732 1.62732 3.51854 2.40148 3.20695C2.68587 3.09215 2.98605 3.04295 3.27044 3.04295C3.83921 3.04295 4.40798 3.25614 4.83456 3.64973L5.26114 4.04332L9.46373 7.86442L9.49533 7.88082C10.1115 8.45481 10.9015 8.75 11.7072 8.75C12.118 8.75 12.5446 8.668 12.9396 8.50401C14.0613 8.06122 14.8197 7.06084 14.9619 5.84728C14.9777 5.69968 14.9935 5.53568 14.9935 5.38809C15.0093 5.20769 14.9935 5.0601 14.9777 4.8961Z",fill:"white"})})}),Mt=({ratio:e,ratioCoeffs:n=void 0,className:s})=>{if(n=n??nl(),!n||U(e))return t.jsx(ye,{});const a=st.getRatioClass(e,n),i=e>=Cn?t.jsx(Ja,{}):st.formatRatio(e);return t.jsx("div",{className:j("MarginRatio",a,s),children:i})},ts=({isCreateButtonIncluded:e=!1,isSmall:n=!1,outOfContextData:s=void 0})=>{const a=et(),i=!U(s);if(a===null&&!i)return null;const{accounts:o,selectedAccountIdState:r,isLoading:l}=i?s:a,[u,p]=r;if(l)return t.jsx(ye,{});const c=o.map(d=>{const m=d.id===u;return{value:d.id,label:t.jsx(mp,{account:d,isSelected:m})}});return e&&c.push({value:null,label:t.jsx(un,{label:"Create new account"}),isDisabled:!0}),t.jsx(he,{className:j("MarginAccountSelector",e&&"_with-create-btn",n&&"_small"),isDisabled:c.length<=1,options:c,defaultValue:u,onChange:d=>{p(d.value)}},a)},mp=({account:e,isSelected:n})=>{const s=V();if(!e||U(e.balance))return t.jsx(ye,{});const{id:a,balance:i,ratio:o}=e,r=a<10n?`0${String(a)}`:String(a),l=me(i,0),p=`https://arbiscan.io/nft/${$e(s,"MarginAccountManager")}/${String(a)}`;return t.jsxs("div",{className:"MarginAccountSelector__option",children:[t.jsxs("div",{className:"MarginAccountSelector__option-head",children:[t.jsxs("div",{className:"MarginAccountSelector__option-id",children:[r,t.jsx("a",{href:p,rel:"noreferrer",target:"_blank",onClick:c=>c.stopPropagation(),onMouseDown:c=>{n&&c.stopPropagation()},children:t.jsx("img",{src:js,alt:"link"})})]}),t.jsx(z,{className:"MarginAccountSelector__option-button",type:"micro",children:n?t.jsx("img",{src:ap,alt:"v"}):"Select"})]}),t.jsx(Te,{marginValue:10}),t.jsx("div",{className:"MarginAccountSelector__option-body",children:t.jsxs("div",{className:"MarginAccountSelector__option-stats",children:[t.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Balance"}),t.jsx("div",{className:"info-row__value MarginAccountSelector__option-balance",children:t.jsx(X,{isHlight:!0,children:l})})]}),t.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Margin Level"}),t.jsx(Mt,{className:"info-row__value MarginAccountSelector__option-ratio",ratio:o,ratioCoeffs:(e==null?void 0:e.ratioCoeffs)??void 0})]})]})})]})},fp=({isDeposited:e,setIsDeposited:n,marginId:s,setMarginId:a})=>t.jsxs("div",{className:"DepositIntoMarginCheck",children:[t.jsx(Qa,{className:"DepositIntoMarginCheck__checker",isCheckedState:[e,n],text:"Deposit into margin account","data-tooltip-id":"DepositIntoMarginCheckTooltip"}),e&&t.jsx(bp,{marginId:s,setMarginId:a}),t.jsx(hp,{})]}),bp=({marginId:e,setMarginId:n})=>{const s=oa();f.useEffect(()=>{U(s)?n(void 0):s&&n(s[0].id)},[s]);const a=[e,n];return t.jsx("div",{className:"MarginAccountsList",children:t.jsx(ts,{outOfContextData:{accounts:s,selectedAccountIdState:a,isLoading:U(s)}})})},hp=()=>t.jsx(ne,{id:"DepositIntoMarginCheckTooltip",clickable:!0,place:"top",children:t.jsxs("div",{className:"text-inline",children:["By clicking this box, the purchased option ",t.jsx("br",{}),"will be transferred to your margin account ",t.jsx("br",{}),"and used as collateral. Read more about ",t.jsx("br",{}),"how Portfolio Margining works ",t.jsx("a",{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",rel:"noreferrer",target:"_blank",children:"here"})]})}),bt=f.createContext(null),Tp=()=>{var B;const[e]=Ee().chosenDateState,[n,s]=K("isModalOpenState"),a=K("asset"),i=K("strikePrice"),o=K("isCall"),r=K("isLong"),[l,u]=K("isDepositedIntoMarginState"),[p,c]=K("marginIdState"),d=_e(),m=V(),y=f.useState({}),h=f.useState(null),T=f.useState(J(m,JSON.parse(localStorage.getItem("payment-token"))??"ETH")),[b]=T;f.useEffect(()=>{localStorage.setItem("payment-token",JSON.stringify(b.symbol))},[b]);const g=Kn(a,e),x=Jt(r,o),v=Oc((g==null?void 0:g[x])??{}),_=(B=g==null?void 0:g[x])==null?void 0:B[i],M=f.useState([]),k=f.useState(!1),S={amountsState:y,availableMarkets:_,errorMarketsState:M,areStrikesLoading:!g,isCostLoadingState:k};return t.jsx(bt.Provider,{value:S,children:t.jsxs(xe,{className:j("OptionChainModal",d&&"_scrollable"),isOpen:n,setIsOpen:s,children:[t.jsx(gp,{strikePrices:v}),t.jsx(Te,{}),t.jsx(xp,{availableMarkets:_,strikePrices:v}),t.jsx(fp,{isDeposited:l,setIsDeposited:u,marginId:p,setMarginId:c}),t.jsx(Ap,{}),t.jsx(wp,{paymentTokenState:T,youPayState:h})]})})},gp=({strikePrices:e})=>{const[n,s]=Ee().chosenDateState,{areStrikesLoading:a}=f.useContext(bt),[i,o]=K("assetState"),[r,l]=K("strikePriceState"),[u,p]=K("isCallState");return t.jsxs("div",{className:"OptionChainModal__controllers",children:[t.jsx(Xc,{isCall:u,setIsCall:p}),t.jsx(Ya,{chosenDate:n,setChosenDate:s}),de(()=>t.jsx(Zc,{strikePrices:e,chosenStrikePrice:r,setChosenStrikePrice:l,asset:i,isCall:u}),a),t.jsx(zn,{asset:i,setAsset:o})]})},xp=({availableMarkets:e,strikePrices:n})=>{const[s,a]=K("isLongState"),{areStrikesLoading:i}=f.useContext(bt);return t.jsxs("div",{className:"OptionChainModal__markets",children:[t.jsx(_p,{isLong:s,setIsLong:a}),mt(t.jsx(vp,{availableMarkets:e,isLong:s,strikePrices:n}),i,t.jsx(Xe,{}))]})},_p=({isLong:e,setIsLong:n})=>t.jsxs("div",{className:"OptionChainModal__markets-header",children:[t.jsxs("h1",{className:"OptionChainModal__markets-title",children:[e?"Buy":"Sell"," Options"]}),t.jsx("div",{className:"OptionChainModal__markets-long-controller",children:t.jsx(sp,{isLong:e,setIsLong:n})})]}),vp=({availableMarkets:e,isLong:n,strikePrices:s})=>{const a=K("asset"),i=Je(a);return t.jsx("div",{className:"OptionChainModal__markets-table-overflow",children:t.jsxs("table",{className:"OptionChainModal__markets-table",cellPadding:0,cellSpacing:0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Instrument"}),t.jsx("th",{children:"Available size"}),t.jsx("th",{children:"Price"}),t.jsx("th",{children:"IV"}),t.jsxs("th",{children:["Amount to ",n?"buy":"sell"]})]})}),t.jsx("tbody",{children:e?e.map(o=>t.jsx(Cp,{marketStrikeData:o,assetPrice:i},o.market)):t.jsx(Mp,{strikePrices:s})})]})})},Cp=({marketStrikeData:e,assetPrice:n})=>{const{market:s,premiumData:a,priceForAmount:i,liquidity:o}=e,r=at(i??a.inUSDC),l=o?Fe(o,1):Z("Will be available soon",!0),u=aa(e,n).formatted;return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(np,{marketStrikeData:e})}),t.jsx("td",{children:l}),t.jsx("td",{children:r}),t.jsx("td",{children:u}),t.jsx("td",{children:t.jsx(Sp,{marketStrikeData:e})})]},s)},Mp=({strikePrices:e})=>{const n=e.length?"Choose strike to view available markets":"No Liquidity";return t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"_no-liquidity",children:t.jsx(ze,{fontSize:15,children:n})})})},Sp=({marketStrikeData:e})=>{const{market:n,liquidity:s}=e,a=Ee().chosenDateState,i=K("strikePrice"),o=K("isCall"),r=K("isLong"),l=K("isModalOpen"),{amountsState:u,errorMarketsState:p}=f.useContext(bt),[c,d]=u,[m]=p,[y,h]=f.useState("");f.useEffect(()=>{c[n]=y?Q(y):0n,d({...c})},[y]),f.useEffect(()=>{h(""),d({})},[o,r,a,i,l]);const T=!!m.find(v=>v===n),b=T&&c[n]>ue(.1)?"Try reducing your size":"",{isComingSoon:g}=e,x=g?`${r?"Buying":"Selling"} ${n} options will be available soon`:"";return t.jsx("div",{className:"OptionChainModal__amount-input","data-tooltip-id":g&&"Tooltip_bottom","data-tooltip-content":x,children:t.jsx(nn,{className:j("OptionChainModal__markets-table-input"),hasError:T,errorMsg:b,value:y,setValue:h,maxValue:s?q(s):void 0,placeholder:"0",isDisabled:g})})},Ap=()=>{const[e,n]=Dt(),s=K("isApproveTipShown");return t.jsxs("div",{className:"OptionChainModal__details",children:[t.jsx("div",{className:"OptionChainModal__details-slippage-input",children:t.jsx(Xn,{slippage:e,setSlippage:n})}),s&&t.jsx(ei,{})]})},wp=({paymentTokenState:e,youPayState:n})=>{const s=V(),a=K("isCall"),i=K("isLong"),o=K("strikePrice"),[r]=Ee().chosenDateState,[l]=Dt(),{amountsState:u,availableMarkets:p,errorMarketsState:c,isCostLoadingState:d}=f.useContext(bt),[m]=u,[y,h]=c,[T,b]=n,[g,x]=d,[v,_]=e,M=K("isDepositedIntoMargin"),k=K("isApproveTipShown");f.useEffect(()=>{if(M){const O=en.getMarketToken(s);_(O)}},[M]);const P=O=>{h([...y,O])},S=O=>{h(y.filter(N=>N!==O))},B=()=>{h([])},E=()=>{p==null||p.forEach(O=>{O.priceForAmount=null})},F=()=>{b(null),E(),B()},I=async(O=!1)=>{if(!p||mn(m)){F();return}const N=ti(T,g);x(!0);const D=p.map(async w=>{const{market:L}=w,{calcPremium:H}=w.utils,W=m[L];if(!W)return w.priceForAmount=null,N?new Promise(async G=>{await H(ue(.1)).catch(),setTimeout(()=>{w.priceForAmount=null,G()},1700)}):0n;const R=await H(W);return R?(O&&(w.priceForAmount=Ze(R.inUSDC,W)),S(L),R):(P(L),w.priceForAmount=null,0n)}).filter(w=>w),C=(await Promise.all(D)).filter(w=>w),A=C.reduce((w,L)=>w+L.inUSDC,0n);b(mn(m)?null:{inUSDC:A,decomposition:[...C]}),x(!1)};return Ae(()=>{I(!0)},ke,[m,p]),f.useEffect(()=>{I()},[l]),f.useEffect(()=>{mn(m)&&F()},[T]),f.useEffect(()=>{b(null),h([])},[a,i,r,o]),t.jsxs("div",{className:"OptionChainModal__payment-panel",children:[t.jsx(Na,{paymentTokenState:e,youPayState:n,isCostLoading:g,isSelectorDisabled:M}),t.jsx(jp,{youPay:T,isCostLoading:g,paymentToken:v}),k&&t.jsx(ei,{})]})},jp=({youPay:e,isCostLoading:n,paymentToken:s})=>{const a=V(),{isConnected:i}=te(),{connectWallet:o}=Vt(),r=K("isLong"),l=K("isCall"),[,u]=K("isModalOpenState"),{availableMarkets:p,amountsState:c,errorMarketsState:d,areStrikesLoading:m}=f.useContext(bt),[y]=c,[h,T]=f.useState(null),[b]=d,[g,x]=f.useState(!1),[v,_]=f.useState(!1),M=K("isDepositedIntoMargin"),k=K("marginId"),[,P]=K("isApproveTipShownState"),S=$e(a,"Exchanger"),B=$e(a,"MarginOneClick"),E=it((s==null?void 0:s.symbol)??"ETH",M?B:S,(e==null?void 0:e.inPaymentToken)??0n,x),I=La(`${r?"Long":"Short"} ${l?"Call":"Put"}`,h,[],e,dt,{setIsLoading:_,closeModal:()=>u(!1)},M?k:void 0);f.useEffect(()=>{if(p){const A=[];for(const w in y){const L=y[w];if(L){const H=p.find(W=>W.market===w);A.push({...H,amount:L})}}T(A)}},[y,p]);const O=ti(e,n);f.useEffect(()=>{O?x(void 0):e?e.inUSDC===0n?x(!1):E.check():x(!1)},[e,n]),f.useEffect(()=>{e&&(x(void 0),E.check())},[M]),f.useEffect(()=>{P(!1)},[y,M]);const N=()=>{if(!i)return!1;if(m||O||U(g)||!(s!=null&&s.balance)||M&&U(k))return De;if(v)return g?"Submitting...":`Approving ${s.symbol}...`;if(!p)return"Empty strike";if(b.length)return"Invalid input";const w=Object.values(y).every(H=>!H);if(!e||e.inUSDC===0n||w)return"Enter amount";const L=s.balance.inDefaultDecimals;if(L&&L<e.inPaymentToken)return"Insufficient balance"},D=()=>{if(!i)return"Connect Wallet";const A=N();if(A)return A;if(!g){const w=le(e.inPaymentToken,s.isStable);return P(!0),`Approve ${w} ${s.symbol}`}return`${r?"Buy":"Sell"} options`},C=()=>{if(!i){o();return}if(!g){E.approve(_,E.check);return}I()};return t.jsx(z,{isDisabled:N(),onClick:C,children:D()})},ei=()=>{const n=K("isDepositedIntoMargin")?"Click “Approve” to enable One-Click option trading with a margin account":"Click “Approve” to enable purchasing options in any token";return t.jsx("div",{className:"OptionChainModal__approve-tip",children:n})},ti=(e,n)=>n||e&&U(e.inPaymentToken),mn=e=>Object.values(e).every(n=>!n),kp=()=>{const e=Ua();return t.jsx(Ec,{children:t.jsxs("div",{className:"OptionChain",children:[t.jsx(zc,{}),t.jsx(Tp,{}),t.jsx(qa,{positions:e})]})})};const Et=e=>{const n=Pa(e),s={};return n.forEach(a=>{s[a.symbol]=a}),s};const ht=({amountStr:e,setAmountStr:n,chosenTokenSymb:s,setChosenTokenSymb:a,tokens:i,maxValueOverride:o=void 0,maxLabelOverride:r=void 0})=>{const l=i.map(y=>({value:y.symbol,label:t.jsx(X,{symbol:y.symbol,isHlight:!0,children:y.symbol})})),u=Yo(i),p=Et(i),c=(o==null?void 0:o[s])??p[s].value,d=le(c,u[s].isStable),m=t.jsx(X,{symbol:s,isHlight:!0,children:d});return t.jsxs("div",{className:"TokenAmountInput",children:[t.jsx("div",{className:"TokenAmountInput__title",children:"Amount"}),t.jsxs("div",{className:"TokenAmountInput__content",children:[t.jsx(nn,{value:e,setValue:n,maxValue:c,maxValueDisplayed:m,maxLabel:r,placeholder:"0"}),t.jsx(he,{options:l,defaultValue:s,onChange:y=>{n(""),a(y.value)}})]})]})},dn={repay:Dp,deposit:Ep,withdraw:Ip};function Dp(e,n,s,a,i,o=void 0){const r=be(e,"MarginTrading"),l=Ue(s,a.decimals),u=Yt(s);ge(e,r.repay,[n,a.address,l],{text:`${u} ${a.symbol} were repayed.`,node:t.jsx(rt,{value:u,symbol:a.symbol,children:"were repayed."})},i,o)}function Ep(e,n,s,a,i,o){const r=be(e,"MarginTrading"),l=be(e,"MarginOneClick"),u=Ue(s,a.decimals),p=Yt(s);ge(e,a.isETH?l.provideETH:r.provideERC20,a.isETH?[n,{value:u}]:[n,a.address,u],{text:`${p} ${a.symbol} were deposited to your margin account.`,node:t.jsx(rt,{value:p,symbol:a.symbol,children:"were deposited to your margin account."})},i,o)}function Ip(e,n,s,a,i,o){const r=be(e,"MarginTrading"),l=Ue(s,a.decimals),u=Yt(s);ge(e,r.withdrawERC20,[n,a.address,l],{text:`${u} ${a.symbol} were withdrawn.`,node:t.jsx(rt,{value:u,symbol:a.symbol,children:"were withdrawn."})},i,o)}const Pp=()=>{const e=V(),n=ln(),{isCreateModalOpenState:s,isCreatingState:a}=n,{createAccount:i,goToWelcomeModal:o}=n.actions,[r,l]=s,[u]=a,p=[{name:"Create",title:"Create Account",content:t.jsx(Bp,{createAccount:i,isCreating:u,callback:()=>d("Enable")})},{name:"Enable",title:"Enable One-Click Trading",content:t.jsx(Np,{callback:()=>d("Deposit")})},{name:"Deposit",content:t.jsx(Rp,{callback:o})}],[c,d]=f.useState(p[0].name),m={};p.forEach(h=>{h.isActive=c===h.name,m[h.name]=h});const y=ft();return f.useEffect(()=>{if(U(y))return;const h=ee(e,"MarginAccountManager"),T=$e(e,"MarginOneClick");h.isApprovedOrOwner(T,y).then(b=>{b||(d("Enable"),l(!0))})},[y]),t.jsxs(xe,{className:"MarginAccountCreateModal",isOpen:r,setIsOpen:l,children:[t.jsx("h1",{className:"MarginAccountCreateModal__title",children:m[c].title??m[c].name}),t.jsx(Ra,{stagesArr:p}),m[c].content]})},Bp=({createAccount:e,isCreating:n,callback:s})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Welcome to Sharwa! Follow these simple steps to start using our unique trading products. First, create a margin account. The whole process will take less than 60 seconds!"}),t.jsx(z,{className:"MarginAccountCreateModal__button",onClick:()=>e(s),isDisabled:n,children:n?"Creating...":"Create Margin account"})]}),Np=({callback:e})=>{const n=V(),s=ft(),[a,i]=f.useState(!1),o=()=>{i(!0);const u=be(n,"MarginAccountManager"),p=$e(n,"MarginOneClick");ge(n,u.approve,[p,s],"One-Click Trading enabled.",i,e)},r=()=>{if(U(s))return De;if(a)return"Enabling..."},l=()=>{const u=r();return u||"Enable One-Click Trading"};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"To streamline your experience, enable One-Click Trading to reduce the number of transactions you need to sign."}),t.jsx(z,{className:"MarginAccountCreateModal__button",isGreen:!0,isDisabled:!!r(),onClick:o,children:l()})]})},Rp=({callback:e})=>{const[n,s]=f.useState(""),a=V(),i=yt(a),[o,r]=f.useState("USDC"),u=Et(i)[o],p=ft(),[c,d]=f.useState(void 0),[m,y]=f.useState(!1),h=$e(a,"MarginAccount"),T=it(o,h,Q(n),d);f.useEffect(()=>{d(void 0)},[n]),Ae(()=>{d(void 0),T.check()},ke,[n]);const b=()=>n===""?"Enter amount":n==="0"?"Insufficient amount":Q(n)>u.value?"Insufficient balance":U(c)?De:m?c?"Depositing...":"Approving...":null,g=()=>{const _=b();return _||(c?"Deposit":"Approve")},x=()=>{y(!0),T.approve(y,()=>{d(void 0),T.check()})},v=()=>{if(!c)x();else{const _=Q(n);dn.deposit(a,p,_,u,y,e)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Now, deposit your tokens into your margin account. Remember, when you trade on Sharwa, only the tokens in your margin account are at risk. If your margin account is undergoing liquidation, only the assets in this account are affected."}),t.jsx(Te,{marginValue:15}),t.jsx(ht,{amountStr:n,setAmountStr:s,chosenTokenSymb:o,setChosenTokenSymb:r,tokens:i}),t.jsx(z,{className:"MarginAccountCreateModal__button",isDisabled:!!b(),isGreen:!b()&&!c,onClick:v,children:g()})]})};const Lp="/sf_draft/assets/uniswap-leverage-6599cd28.svg",Op="/sf_draft/assets/interest-rate-bd5539c1.svg",Fp="/sf_draft/assets/interest-rate_mobile-bff5408a.svg",Up="/sf_draft/assets/options-a96927ae.svg",$p="/sf_draft/assets/options_mobile-63c68d57.svg",Hp="/sf_draft/assets/options-profit-2b09f575.svg",Wp="/sf_draft/assets/toolkits-6c59efc3.svg",qp="/sf_draft/assets/toolkits_mobile-fb7128d1.svg",Vp="/sf_draft/assets/LINK_circled-d3ed9518.svg",Gp=()=>{const e=ln(),{isIntroModalOpenState:n}=e,{skipIntro:s}=e.actions,[a,i]=n,[o,r]=f.useState(0),l=[t.jsx(Yp,{}),t.jsx(Qp,{}),t.jsx(Kp,{}),t.jsx(zp,{}),t.jsx(Xp,{})];return f.useEffect(()=>{if(a){const u=l.length-1;o>u&&s();const p=setInterval(()=>{const c=o+1;r(c)},10*1e3);return()=>clearInterval(p)}},[a,o]),t.jsxs(xe,{className:"MarginAccountIntroModal",isOpen:a,setIsOpen:i,reset:()=>r(0),children:[t.jsx("div",{className:"MarginAccountIntroModal__content",children:l[o]}),t.jsx("button",{className:"MarginAccountIntroModal__skip-btn",onClick:s,children:"Skip introduction"}),t.jsxs("div",{className:"MarginAccountIntroModal__steps-container",children:[t.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _prev",onClick:()=>r(o-1),disabled:o===0}),t.jsx("div",{className:"MarginAccountIntroModal__steps",children:l.map((u,p)=>{const c=p<=o;return t.jsx("button",{className:j("MarginAccountIntroModal__step",c&&"_passed"),onClick:()=>r(p),children:p+1},p)})}),t.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _next",onClick:()=>r(o+1)})]})]})},Yp=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic",children:[t.jsx("dotlottie-player",{id:"MarginAccountIntroModal__animation-1",src:"https://lottie.host/a3afd567-a7f7-4306-ba85-d1c8712283a0/PSgo2GIw16.lottie",mode:"normal",loop:!0,autoplay:!0}),t.jsx("img",{src:Lp,alt:"Uniswap illustration"})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"10x Leverage on Uniswap"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"All long and short positions are routed through Uniswap v3. Traders benefit from the deep liquidity and fair pricing of Uniswap."})]}),Qp=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountIntroModal__pic",children:t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:Fp}),t.jsx("img",{src:Op,alt:"Interest rate illustration"})]})}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Cheap Leverage"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Sharwa offers lower cost of leverage compared to traditional derivative protocols. This is because traders are supported by liquidity providers who supply up to 10x leverage, rather than trading directly against them."})]}),Kp=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic _options",children:[t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:$p}),t.jsx("img",{src:Up,alt:"Options Scheme"})]}),t.jsx("div",{className:"_animation_glare",children:t.jsx("img",{src:Hp,alt:"Glaring profit"})})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title _options",children:t.jsx("a",{href:"https://www.hegic.co/",target:"_blank",rel:"noreferrer",children:"American-Style Options"})}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Trade American-style options to effectively hedge your risks. The Margin Account uses the intrinsic value of your option positions as collateral, ensuring you won’t face liquidations, even with 10x leverage, if you’re properly hedged with options."})]}),zp=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountIntroModal__pic _collateral",children:t.jsxs("div",{className:"icon-group _animation_jumping-coins",children:[t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:Ps,alt:"USDC logo"})}),t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:Es,alt:"ETH logo"})}),t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:Is,alt:"WBTC logo"})})]})}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Multi-Collateral"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"The total value of all your tokens in the margin accounts is summed in USDC, allowing you to trade with up to 10x leverage without needing to sell your holdings."})]}),Xp=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic _toolkits",children:[t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:qp}),t.jsx("img",{src:Wp,alt:"Stop Order graph"})]}),t.jsx("div",{className:"animation-wrapper",children:t.jsx("div",{className:"_animation_glare",children:t.jsx("img",{src:Vp,alt:"Chainlink Token icon"})})})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Trading Toolkits"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Soon, we will offer stop-market orders, trailing stop-market orders, auto delta-hedging, and personalized risk profiles for each margin account. Stay tuned!"})]});const Zp="/sf_draft/assets/trading-4b0d0849.png",Jp=()=>{const e=ln(),{isWelcomeModalOpenState:n}=e,{startTrading:s}=e.actions,[a,i]=n;return t.jsxs(xe,{className:"MarginAccountWelcomeModal",isOpen:a,setIsOpen:i,children:[t.jsx("div",{className:"MarginAccountWelcomeModal__pic",children:t.jsx("img",{src:Zp,alt:"Graphs illustration"})}),t.jsxs("h1",{className:"MarginAccountWelcomeModal__title",children:["You’re ready to start trading ",t.jsx("br",{}),"on Sharwa"]}),t.jsxs("div",{className:"MarginAccountWelcomeModal__text text-inline",children:["Enjoy the benefits of leverage, ",t.jsx("br",{}),"portfolio margining and other features!"]}),t.jsx(z,{className:"MarginAccountWelcomeModal__button",onClick:s,children:"Go to Trade"})]})};const ed=()=>{const e=al();if(!(e!=null&&e.length))return e;const n=ia(e);return[...e,n]},td=()=>{const[e,n]=f.useState(!1),[s,a]=f.useState(null),i=ed(),o=r=>{a(r),n(!0)};return t.jsxs("div",{className:"MarginPositions",children:[t.jsx("h1",{className:"MarginPositions__title",children:"Margin Account Positions"}),t.jsx($a,{positions:i,isLoadingComplete:!U(i),openCloseModal:o}),t.jsx(Wa,{position:s,isOpen:e,setIsOpen:n})]})},nd=()=>t.jsx(Xo,{children:t.jsxs(ip,{children:[t.jsx(sd,{}),t.jsx(ad,{})]})}),sd=()=>{var a;const e=et(),n=St(),s=[{name:"Trading Terminal",to:"/margin/trading"},{name:"Margin Account",to:"/margin/account",isDisabled:!e}];return s.forEach(i=>{n.pathname.endsWith(i.to)&&(i.isActive=!0)}),t.jsxs("div",{className:"MarginPage",children:[t.jsxs("div",{className:"MarginPage__head",children:[t.jsx(Ys,{}),(a=e==null?void 0:e.accounts)!=null&&a.length?t.jsx(ts,{isCreateButtonIncluded:!0}):""]}),t.jsx($t,{links:s,type:"border"}),t.jsx(Ms,{}),t.jsx(td,{})]})},ad=()=>t.jsxs(t.Fragment,{children:[t.jsx(Gp,{}),t.jsx(Pp,{}),t.jsx(Jp,{})]});const ni=f.createContext(null),si=f.createContext(null),ai=({children:e})=>{const[n,s]=rd();return t.jsx(ni.Provider,{value:n,children:t.jsx(si.Provider,{value:s,children:e})})},id=()=>f.useContext(ni),rd=()=>{const[e,n]=f.useReducer(od,{});return[e,n]},od=(e,n)=>{switch(n.type){case"added":{const{asset:s,dataFrequency:a,ohlcvData:i}=n;return e[s]||(e[s]={}),e[s][a]||(e[s][a]=i),{...e}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},ot={SERVER_URL:"https://cors-anywhere.herokuapp.com/https://omni.icarus.tools",LIQUIDITY_DEPTH_PERCENTAGE_RANGE:.025,CHART_DATA_FREQUENCIES:[5*Le*se,1*Ye*Le*se,4*Ye*Le*se,wt(1)],SUPERSEDING_POOLS:{}},ns={queryOhlcvData:async(e,n,s,a)=>{const i=ud(n,s,a);return _s(e,i)},queryLiquidityData:async(e,n)=>{const s=cd(n);return _s(e,s)},getPriceData:dd,getChartOptions:e=>{var n;return{width:(n=e.current)==null?void 0:n.clientWidth,height:400,rightPriceScale:{borderColor:En},layout:{background:{color:Br},textColor:gt,fontFamily:"Gantari"},grid:{vertLines:{color:ps,style:4},horzLines:{color:ps,style:4}},crosshair:{vertLine:{color:xt,labelBackgroundColor:ds},horzLine:{color:xt,labelBackgroundColor:ds}},localization:{locale:"en-US",timeFormatter:s=>{const a=s*se;return Ie(a,"dd MMM yyyy, h:mm a")},priceFormatter:s=>"$"+fe(s,2)},timeScale:{timeVisible:!0,tickMarkFormatter:(s,a)=>{const i=s*se;return a===2||a===1?Ie(i,"d MMM"):Ie(i,"HH:mm")}}}}},_s=async(e,n)=>{const s=ld(e),a=pd(n);return fetch(s,a).then(i=>i.json()).catch(console.log)},ld=e=>{const n=Ht[e];if(!n)throw new Error(`Unknown chainId: ${e}`);const s=n.name.toLowerCase();return`${ot.SERVER_URL}/${s}`},ud=(e,n,s,a=void 0)=>(a=a??Date.now(),{jsonrpc:"2.0",method:"cush_ohlcvTradingView",params:[e,n,a-s,a],id:0}),cd=e=>({jsonrpc:"2.0",method:"cush_orderBook",params:[e,0,{max_orders_per_side:10,granularity_index:2}],id:1}),pd=e=>({headers:{},body:JSON.stringify(e),method:"POST"});function dd(e){if(!e)return null;const n=()=>{const i=Number(Lt(e).close)-Number(e[0].close),o=i/Number(e[0].close)*100;return{inUSDC:fe(i,qe),inPercentage:fe(o,qe)}},s=()=>{const i=e.map(o=>fe(Number(o.close),qe));return Ro(i)},a=()=>{const i=Number(Lt(e).close);return fe(i,qe)};return{priceChange:n(),...s(),currentPrice:a()}}const vs=ot.CHART_DATA_FREQUENCIES[0],yd=wt(31),ii=(e,n=vs,s=yd)=>{var y;const a=id(),i=f.useContext(si),[o,r]=f.useState((y=a==null?void 0:a[e])==null?void 0:y[n]),l=V(),u=ee(l,"UniswapFactory"),p=Bs(l,e),c=Je(e),{error:d,data:m}=we(c&&[l,e,n,"useOhlcvForAsset"],async()=>{const h=ot.SUPERSEDING_POOLS[e]??await u.getPool(p,Dn(l),ka),T=await ns.queryOhlcvData(l,h,n,s);if(T!=null&&T.result){const b=q(c);return T.result.candles.push({open:b,high:b,low:b,close:b,time:Date.now()}),T.result.candles.forEach(g=>{g.time=g.time/se}),T.result.candles}else return console.log((T==null?void 0:T.error)??T),null},{refreshInterval:vs,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var h;r((h=a==null?void 0:a[e])==null?void 0:h[n])},[e,n]),f.useEffect(()=>{m&&(r(m),i({type:"added",asset:e,dataFrequency:n,ohlcvData:m}))},[m]),d?(console.log(d),null):o},md=e=>{const n=ot.CHART_DATA_FREQUENCIES[0];return ii(e,n,wt(1))},fd=()=>{const[e,n]=on();return t.jsx(ai,{children:t.jsx(bd,{asset:e,setAsset:n})})},bd=({asset:e,setAsset:n})=>{const s=md(e),a=ns.getPriceData(s),i=qt.map(o=>{const r=Nt(o),l=Nt("USDC");return{value:o,label:t.jsxs("div",{className:"Asset24hChange__selector-option",children:[t.jsxs("div",{className:"Asset24hChange__selector-option-icons",children:[t.jsx("div",{className:"Asset24hChange__selector-option-icon",children:t.jsx("img",{src:r,alt:`${o} icon`})}),t.jsx("div",{className:"Asset24hChange__selector-option-icon",children:t.jsx("img",{src:l,alt:"USDC icon"})})]}),t.jsxs("div",{className:"Asset24hChange__selector-option-name",children:[o,"/USDC"]})]})}});return t.jsxs("div",{className:"Asset24hChange",children:[t.jsx(he,{className:"Asset24hChange__selector",options:i,defaultValue:e,onChange:o=>{n(o.value)}},e),t.jsxs("div",{className:"Asset24hChange__data",children:[t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name tip","data-tooltip-id":"CurrentPriceTooltip",children:"Current Price"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.currentPrice,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Change"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>t.jsx(hd,{assetChangeData:a}),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h High"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.max,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Low"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.min,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"Interest Rate"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:Z()})]})]}),t.jsx(Td,{})]})},hd=({assetChangeData:e})=>{const{inPercentage:n}=e.priceChange,s=n>0,a=n<0,i=s?bn.positive:a?bn.negative:"",o=At(e.priceChange.inPercentage,2,!0),r=`${i}${Math.abs(o)}%`;return t.jsx("span",{className:j({positive:s,negative:a,neutral:n===0}),children:r})},Td=()=>t.jsx(ne,{id:"CurrentPriceTooltip",clickable:!0,children:t.jsxs("div",{className:"text-inline",children:["This price is sourced from the ",t.jsx("br",{}),"Uniswap v3 pool. Price data is ",t.jsx("br",{}),"powered by ",t.jsx("a",{href:"https://oku.trade/",target:"_blank",rel:"noreferrer",children:"Oku.Trade"})]})});ot.CHART_DATA_FREQUENCIES[0];const gd=({type:e,chartData:n,chartContainerRef:s,chartOptions:a,seriesOptions:i,className:o,header:r,callback:l=()=>{}})=>(f.useEffect(()=>{if(!n)return;const u=()=>{p.applyOptions({width:s.current.clientWidth})},p=ir(s.current,a);return p[`add${rn(e)}Series`](i).setData(n),window.addEventListener("resize",u),l(p),()=>{window.removeEventListener("resize",u),p.remove()}},[n]),t.jsxs("div",{className:j("App-box","Chart--container",`${o}--container`),children:[r&&t.jsx("div",{className:j("Chart__header",`${o}__header`),children:r}),mt(t.jsx("div",{className:j("Chart",o),ref:s}),!n,t.jsx(Xe,{}))]})),xd=({chartData:e,chartContainerRef:n,chartOptions:s,seriesOptions:a=_d,className:i,header:o,callback:r=()=>{}})=>t.jsx(gd,{type:"Candlestick",chartData:e,chartContainerRef:n,chartOptions:s,seriesOptions:a,className:i,header:o,callback:r}),_d={priceLineColor:Rt,downColor:ce,wickDownColor:ce,upColor:Re,wickUpColor:Re,borderVisible:!1},vd=()=>{const[e]=on();return t.jsx(ai,{children:t.jsx(Cd,{asset:e})})},Cd=({asset:e})=>{const[n,s]=Oe("AssetPriceChart-dataFrequency",ot.CHART_DATA_FREQUENCIES[0]),a=ii(e,n),[i,o]=f.useState(null),r=f.useRef(),l=f.useCallback(p=>{if(!p.time){o(null);return}const c=a.find(d=>d.time===p.time);o(c)},[o,a]),u=p=>{p.timeScale().applyOptions({borderColor:En}),p.subscribeCrosshairMove(l)};return t.jsx(xd,{className:"AssetPriceChart",header:t.jsx(Md,{dataFrequency:n,setDataFrequency:s,candle:i??(a==null?void 0:a[a.length-1])}),chartData:a,chartContainerRef:r,chartOptions:ns.getChartOptions(r),callback:u})},Md=({dataFrequency:e,setDataFrequency:n,candle:s})=>t.jsxs("div",{className:"AssetPriceChart__header",children:[t.jsx(Sd,{dataFrequency:e,setDataFrequency:n}),t.jsx(Ad,{candle:s})]}),Sd=({dataFrequency:e,setDataFrequency:n})=>{const{CHART_DATA_FREQUENCIES:s}=ot;return t.jsx("div",{className:"AssetPriceChart__data-frequency",children:s.map(a=>{const i=a===e,o=zt(a),r=Math.floor(a/se/Le),l=Math.floor(r/Ye),u=o>0?`${o}D`:l>0?`${l}h`:`${r}m`;return t.jsx(z,{className:j("AssetPriceChart__data-frequency-btn",i&&"_chosen"),type:"stroke",onClick:()=>n(a),children:u},a)})})},Ad=({candle:e})=>{const n=["open","high","low","close"];if(!e)return null;const s=e.open>e.close;return t.jsx("div",{className:"AssetPriceChart__indicators",children:n.map(a=>{const i=Me(fe(e[a],2));return t.jsxs("div",{className:"AssetPriceChart__indicators-item",children:[t.jsx("span",{className:"AssetPriceChart__indicators-item-name",children:a[0].toUpperCase()}),t.jsx("span",{className:j("AssetPriceChart__indicators-item-value",{negative:s,positive:!s}),children:i})]},a)})})};const wd="/sf_draft/assets/Pashov_Audit_Group-e5d101e4.png",ri=()=>t.jsxs("a",{className:"AuditStamp",href:"https://github.com/pashov/audits/blob/master/team/pdf/SharwaFinance-security-review.pdf",target:"_blank",rel:"noreferrer",children:[t.jsx("div",{className:"AuditStamp__text",children:"Audited by"}),t.jsx("div",{className:"AuditStamp__logo",children:t.jsx("img",{src:wd,alt:"Pashov Audit Group"})})]});const jd="/sf_draft/assets/Uniswap_circled-4e125cab.svg",He=()=>{const e=li();return e===null?null:e==null?void 0:e.data},oi=()=>{const e=li();return e===null?null:e==null?void 0:e.mutate},li=()=>{const{isConnected:e,userAddress:n}=te(),s=V(),a=et(),i=a==null?void 0:a.isLoading,o=ft(),{data:r,error:l,mutate:u}=we(e&&!i&&!U(o)&&[n,o,"useMarginAccountData"],async()=>{const p=a.utils.getSelectedAccount()??{},c={id:o,...p},d=kd(s,o),m=Dd(s,o),y=Ed(s,o),h=Id(s,o),T=Pd(s,o);return await Promise.all([d,m,y,h,T]).then(([b,g,x,v,_])=>{c.ratio=b,c.balance=g,c.debt=x,c.fee=v,c.equity=(c.balance??0n)-x,c.poolsData=_}).catch(console.log),c},{refreshInterval:60*se});if(!i&&(!e||U(o)))return null;if(!(r&&!r.poolsData))return l?(console.log("useMarginAccountData error!",l),null):{data:r,mutate:u}},kd=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.getMarginAccountRatio(n).catch(console.log);return ae(BigInt(a),5)},Dd=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.calculateMarginAccountValue(n).catch(console.log);return ae(BigInt(a),ct)},Ed=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.calculateDebtWithAccruedInterest(n).catch(console.log);return ae(BigInt(a),ct)},Id=async(e,n)=>{if(U(n))return null;const s=ie.map(c=>Gr[c]),a=ie.map(c=>Bs(e,c)),i=ie.map(c=>ee(e,`Pool_${c}`)),o=await Promise.all(i.map(c=>c.getDebtWithAccruedInterest(n).then(BigInt))),r=await Promise.all(i.map(c=>c.portfolioIdToDebt(n).then(BigInt))),l=o.map((c,d)=>{const m=r[d];return c-m});return(await Promise.all(l.map((c,d)=>{const m=ae(c,s[d]),y=a[d];return m>0n?Qn(e,y,m):0n}))).reduce((c,d)=>c+d,0n)},Pd=async(e,n)=>{const s={},a=ee(e,"MarginAccount"),i=[];return ie.forEach(o=>{const r=J(e,o);s[o]={token:r};const l=ee(e,`Pool_${o}`);i.push(a.getErc20ByContract(n,r.address).then(BigInt).then(u=>{const p=ae(u,r.decimals);s[o].amount=p}).catch(console.log),l.interestRate().then(BigInt).then(u=>{const p=ae(u,4);s[o].interestRate=p}).catch(console.log),l.getDebtWithAccruedInterest(n).then(BigInt).then(u=>{const p=ae(u,r.decimals);s[o].debt=p}).catch(console.log))}),await Promise.all(i),s};const yn=({curRatio:e,estRatio:n})=>t.jsxs("div",{className:"MarginRatioChange",children:[t.jsx(Mt,{ratio:e}),n!==null&&t.jsxs(t.Fragment,{children:[t.jsx(Bd,{}),U(n)?t.jsx(ye,{}):t.jsx(Mt,{ratio:n})]})]}),Bd=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:t.jsx("path",{d:"M1 3.5C0.723858 3.5 0.5 3.72386 0.5 4C0.5 4.27614 0.723858 4.5 1 4.5V3.5ZM11.3536 4.35355C11.5488 4.15829 11.5488 3.84171 11.3536 3.64645L8.17157 0.464466C7.97631 0.269204 7.65973 0.269204 7.46447 0.464466C7.2692 0.659728 7.2692 0.976311 7.46447 1.17157L10.2929 4L7.46447 6.82843C7.2692 7.02369 7.2692 7.34027 7.46447 7.53553C7.65973 7.7308 7.97631 7.7308 8.17157 7.53553L11.3536 4.35355ZM1 4.5H11V3.5H1V4.5Z",fill:"#747FA6"})}),Nd=()=>{var i;const e=et();let n;const s=e!==null&&(e.isLoading||U(e.accounts)),a=e===null||((i=e.accounts)==null?void 0:i.length)===0;return s?n=t.jsx(Xe,{}):a&&(n=t.jsx(un,{})),t.jsx("div",{className:"MarginTradingPanel App-box",children:n??t.jsx(Rd,{})})},Rd=()=>{const e=V(),n=He(),[s,a]=f.useState(!0),[i,o]=on(),[r,l]=f.useState(""),[u,p]=f.useState(null),[c,d]=f.useState(null),[m,y]=Dt(),[h,T]=f.useState(!1),b=J(e,i),g=Q(r),x=J(e,"USDC"),v=ee(e,"ModularSwapRouter"),_=`calculateAmount${s?"In":"Out"}ERC20`,M=async()=>{let N,D;const C=J(e,i),A=Q(r);if(s)D=C,N=A;else{const L=ee(e,"ModularSwapRouter");D=J(e,"USDC");const H=await L.callStatic.calculateAmountOutERC20(C.address,D.address,Ne(A,C)).then(BigInt);N=Ke(H,D)}const w=Ct(N,m);st.queryRatioAfterPositionOpen(e,n,w,D).then(p)},k=async()=>{d(void 0);const N=await P(),C=(s?Ct:Ts)(N,m),A=Ze(C,g);d(A)},P=async(N=void 0)=>{const D=Ne(g,b);return await v.callStatic[_](b.address,x.address,D).then(BigInt).then(A=>Ke(A,x)).catch(A=>{console.log("Converting to USDC error:",A),N&&N(!1)})};f.useEffect(()=>{!r||Q(r)===0n?(p(null),d(null)):(p(void 0),d(void 0))},[r,m,s,i]),Ae(()=>{!r||Q(r)===0n||(M(),k())},ke,[r,m,s,i]);const S=[{value:"market",label:"Market"},{value:"stop_market",label:"Stop Market",isDisabled:!0}],B=[{value:"ETH",label:t.jsx(X,{symbol:"ETH",isHlight:!0,children:"ETH"})},{value:"BTC",label:t.jsx(X,{symbol:"BTC",isHlight:!0,children:"BTC"})}],E=()=>{if(U(u))return De;if(!r)return"Enter amount";if(Q(r)===0n)return"Insufficient amount";if(u<=n.ratioCoeffs.red)return"Critical Est.Ratio";if(h)return"Submitting..."},F=()=>{const N=E();return N||`Open ${s?"Long":"Short"}`},I=oi(),O=async()=>{T(!0);const N=s?x:b,D=s?b:x,C=be(e,"MarginOneClick"),A=await P(T),w=s?A:g,H=Ts(s?g:A,m),W=Ne(w,N),R=Ne(H,D),Y=()=>{I(),l("")};ge(e,C.borrowSwap,[n.id,N.address,D.address,W,R],{text:`${r} ${b.symbol} was ${s?"bought":"sold"}.`,node:t.jsxs(rt,{value:r,symbol:b.symbol,children:["was ",s?"bought":"sold","."]})},T,Y)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginTradingPanel__inputs",children:[t.jsx("div",{className:"MarginTradingPanel__switcher",children:t.jsx(es,{isOn:s,setIsOn:a,oppositeLabels:["Long","Short"]})}),t.jsxs("div",{className:"MarginTradingPanel__input",children:[t.jsx("div",{className:"MarginTradingPanel__input-title",children:"Order Type"}),t.jsx("div",{className:"MarginTradingPanel__input-body",children:t.jsx(he,{options:S,defaultOption:S[0]})})]}),t.jsxs("div",{className:"MarginTradingPanel__input",children:[t.jsx("div",{className:"MarginTradingPanel__input-title",children:s?"Long":"Short"}),t.jsxs("div",{className:"MarginTradingPanel__input-body",children:[t.jsx(nn,{value:r,setValue:l,placeholder:"0"}),t.jsx(he,{className:"MarginTradingPanel__asset-selector",options:B,defaultValue:i,onChange:N=>o(N.value)},i)]})]})]}),t.jsxs("div",{className:"MarginTradingPanel__footer",children:[t.jsxs("div",{className:"MarginTradingPanel__stats",children:[t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Market"}),t.jsxs("div",{className:"MarginTradingPanel__stat-value",children:[t.jsx("img",{src:jd,alt:"Uniswap logo"}),"UNISWAP"]})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Margin Ratio"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:t.jsx(yn,{curRatio:n==null?void 0:n.ratio,estRatio:u})})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Slippage"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:t.jsx(Xn,{slippage:m,setSlippage:y,title:""})})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Entry Price"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:de(()=>c===null?Z():t.jsx(X,{symbol:"USDC",isHlight:!0,children:le(c,!0)}),U(c))})]})]}),t.jsx(z,{className:"MarginTradingPanel__button",onClick:O,isDisabled:!!E(),children:F()})]})]})},Ld=()=>t.jsxs("div",{className:"MarginTrading",children:[t.jsx(fd,{}),t.jsx(ri,{}),t.jsx(vd,{}),t.jsx(Nd,{})]});const Od="/sf_draft/assets/pointer-7384e3ac.svg",Fd=({isBrief:e})=>{const n=He(),{ratio:s,ratioCoeffs:a}=n??{},i=U(n);if(n===null)return e?t.jsx(fn,{noData:!0}):null;if(i)return e?t.jsx(fn,{isLoading:!0}):t.jsx(Xe,{});const r=s>=Cn?300:q(s*100n),l=Math.max(r-100,0)*4,u={left:`${Math.min(l,100)}%`};if(e)return t.jsx(fn,{ratio:s});const p=`${Math.floor(q(a.red)*100)}%`,c=`${Math.floor(q(a.yellow)*100)}%`,d=t.jsx(Ja,{});return t.jsxs("div",{className:"MarginLevel",children:[t.jsxs("div",{className:"MarginLevel__head",children:[t.jsx("div",{className:"MarginLevel__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),t.jsx(Mt,{ratio:s})]}),t.jsxs("div",{className:"MarginLevel__indicator",children:[t.jsx("div",{className:"MarginLevel__indicator-segment _low",children:p}),t.jsx("div",{className:"MarginLevel__indicator-segment _medium",children:c}),t.jsx("div",{className:"MarginLevel__indicator-segment _high",children:d}),t.jsx("div",{className:"MarginLevel__indicator-pointer",style:u,children:t.jsx("img",{src:Od,alt:"v"})})]}),t.jsx(ui,{})]})},fn=({noData:e,isLoading:n,ratio:s})=>t.jsxs("div",{className:"MarginLevelBrief",children:[t.jsx("div",{className:"MarginLevelBrief__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),e?Z():n?t.jsx(ye,{}):t.jsx(Mt,{ratio:s}),t.jsx(ui,{})]}),ui=()=>t.jsxs(ne,{id:"MarginLevelTooltip",children:["The margin level is a crucial ",t.jsx("br",{}),"indicator of your margin ",t.jsx("br",{}),"account's health. It helps ",t.jsx("br",{}),"determine how close you are ",t.jsx("br",{}),"to liquidation, which occurs if ",t.jsx("br",{}),"your margin level falls below ",t.jsx("br",{}),"105%.",t.jsx("br",{}),"To calculate the value of your ",t.jsx("br",{}),"collateral and debt, we use ",t.jsx("br",{}),"Chainlink Price Feeds."]}),Ud=()=>t.jsxs("div",{className:"MarginAccountInfo App-box",children:[t.jsx("h1",{className:"MarginAccountInfo__title",children:"Account Info"}),t.jsxs("div",{className:"MarginAccountInfo__accounts-list",children:[t.jsxs("div",{className:"MarginAccountInfo__chosen-account-field",children:[t.jsx("div",{className:"MarginAccountInfo__chosen-account-field-title",children:"Account ID"}),t.jsx("div",{className:"MarginAccountInfo__chosen-account-field-selector",children:t.jsx(ts,{isSmall:!0})})]}),t.jsx(un,{})]}),t.jsx(Te,{marginValue:20}),t.jsx(Fd,{}),t.jsx($d,{})]}),$d=()=>{const e=He(),{ratio:n,ratioCoeffs:s}=e??{};if(U(e))return null;const i={"Reduce Positions":1,"Increase Positions":0,deposit:1,repay:1,withdraw:0},o=st.getRatioClass(n,s),r=o==="_low",l=o==="_medium";return t.jsxs("table",{className:"MarginAccountInfo__actions-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:Object.keys(i).map(u=>t.jsx("th",{children:rn(u)},u))})}),t.jsx("tbody",{children:t.jsx("tr",{children:Object.keys(i).map(u=>{const p=i[u],c=r?!1:l?p:!0;return t.jsx("td",{className:j(!c&&"_denied")},u)})})})]})};const ci="/sf_draft/assets/re-arrow-195ed622.svg",Hd=({setIsRepayModalOpen:e})=>{const n=He(),{equity:s,debt:a,balance:i,fee:o}=n??{},r=U(n);if(n===null)return null;const l=()=>{e(!0)};return t.jsxs("div",{className:"MarginAccountBalance App-box",children:[t.jsxs("div",{className:"MarginAccountBalance__head",children:[t.jsx("h1",{className:"MarginAccountBalance__title",children:"Account Balance"}),t.jsx("div",{className:j("MarginAccountBalance__value",!r&&"tip"),"data-tooltip-id":!r&&"MarginAccount_BalanceTooltip",children:de(()=>t.jsx(X,{isHlight:!0,children:le(i,!0)}),r)})]}),t.jsxs("div",{className:"MarginAccountBalance__items",children:[t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name tip","data-tooltip-id":"MarginAccount_EquityTooltip",children:"Equity"}),t.jsx("div",{className:"MarginAccountBalance__item-value",children:de(()=>t.jsx(X,{isHlight:!0,children:le(s,!0)}),r)})]}),t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name",children:"Debt"}),t.jsxs("div",{className:"MarginAccountBalance__item-value",children:[de(()=>t.jsx(X,{isHlight:!0,children:le(a,!0)}),r),t.jsxs(z,{className:"MarginAccountBalance__item-button",type:"micro _with-icon",onClick:l,isDisabled:r||!a,children:[t.jsx("img",{src:ci,alt:"Repay"}),"Repay"]})]})]}),t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name",children:"Interest & Service Fee"}),t.jsx("div",{className:"MarginAccountBalance__item-value",children:de(()=>t.jsx(X,{isHlight:!0,children:le(o,!0)}),r)})]})]}),t.jsx(Wd,{}),t.jsx(qd,{})]})},Wd=()=>t.jsxs(ne,{id:"MarginAccount_EquityTooltip",children:["Equity is calculated as the ",t.jsx("br",{}),"sum of your collateral, ",t.jsx("br",{}),"unrealized profits from long/",t.jsx("br",{}),"short positions, and the ",t.jsx("br",{}),"intrinsic value of American-",t.jsx("br",{}),"style options, minus your ",t.jsx("br",{}),"debt."]}),qd=()=>t.jsxs(ne,{id:"MarginAccount_BalanceTooltip",children:["This is the total value of your ",t.jsx("br",{}),"margin account (your collateral + ",t.jsx("br",{}),"purchased tokens)."]});const _n="/sf_draft/assets/download-93c01438.svg",Vd="/sf_draft/assets/upload-ab835e79.svg";const ss=()=>{const e=oi(),n=la();return()=>{e(),n()}},Gd=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=V(),[o,r]=f.useState(""),[l,u]=f.useState(null),[p,c]=f.useState(!1),d=yt(i),m=He(),y=ss();f.useEffect(()=>{!o||Q(o)===0n?u(null):u(void 0)},[o]),Ae(()=>{!o||Q(o)===0n||h()},ke,[o]);const h=async()=>{const _=Q(o),M=J(i,s),k=await st.queryRatioAfterWithdraw(i,m,_,M);u(k)};if(!m)return null;const T=m.id,b={};Object.values(m.poolsData).forEach(_=>{b[_.token.symbol]=_.amount});const g=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":U(l)?De:l<m.ratioCoeffs.red?"Critical Est.Ratio":p?"Withdrawing...":null,x=()=>{const _=g();return _||"Withdraw"},v=()=>{const _=Q(o),M=J(i,s),k=()=>{y(),n(!1)};dn.withdraw(i,T,_,M,c,k)};return t.jsxs(xe,{className:"MarginWithdrawModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Withdraw"}),t.jsx(ht,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:b})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"MarginLevel"}),t.jsx("div",{className:"info-row__value",children:t.jsx(yn,{curRatio:m.ratio,estRatio:l})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!g(),onClick:v,children:x()})]})]})};const Yd=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=V(),o=He(),r=o==null?void 0:o.id,[l,u]=f.useState(""),[p,c]=f.useState(null),[d,m]=f.useState(void 0),[y,h]=f.useState(!1),T=yt(i),b=Et(T),g=b[s],x=ss(),v=$e(i,"MarginAccount"),_=it(s,v,Q(l),m);f.useEffect(()=>{!l||Q(l)===0n?c(null):(c(void 0),m(void 0))},[l]),Ae(()=>{m(void 0),!(!l||Q(l)===0n)&&(M(),_.check())},ke,[l]);const M=async()=>{const F=Q(l),I=await st.queryRatioAfterDeposit(i,o,F,g);c(I)},k=()=>l===""?"Enter amount":l==="0"?"Insufficient amount":Q(l)>g.value?"Insufficient balance":U(d)||U(p)?De:y?d?"Depositting...":"Approving...":null,P=()=>{const F=k();return F||(d?"Deposit":"Approve")},S=()=>{h(!0),_.approve(h,()=>{m(void 0),_.check()})},B=()=>{const F=Q(l),I=()=>{x(),n(!1)};dn.deposit(i,r,F,b[s],h,I)},E=()=>{d?B():S()};return t.jsxs(xe,{className:"MarginDepositModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>u(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Deposit"}),t.jsx(ht,{tokens:T,amountStr:l,setAmountStr:u,chosenTokenSymb:s,setChosenTokenSymb:a})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"MarginLevel"}),t.jsx("div",{className:"info-row__value",children:t.jsx(yn,{curRatio:o==null?void 0:o.ratio,estRatio:p})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!k(),onClick:E,children:P()})]})]})};const Qd=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=V(),o=ft(),[r,l]=f.useState(""),[u,p]=f.useState(void 0),[c,d]=f.useState(void 0),[m,y]=f.useState(!1),h=yt(i),b=Et(h)[s],g=$e(i,"MarginAccount"),x=it(s,g,Q(r),p);f.useEffect(()=>{!r||Q(r)===0n?d(null):(d(void 0),p(void 0))},[r]),Ae(()=>{p(void 0),!(!r||Q(r)===0n)&&(v(),x.check())},ke,[r]);const v=async()=>{const I=Q(r),O=await st.queryRatioAfterRepay(i,_,I,b);d(O)},_=He(),M=ss();if(!_)return null;const k={};Object.values(_.poolsData).forEach(I=>{k[I.token.symbol]=to(I.debt)});const P=()=>r===""?"Enter amount":r==="0"?"Insufficient amount":Q(r)>b.value?"Insufficient balance":U(u)||U(c)?De:m?u?"Repaying...":"Approving...":null,S=()=>{const I=P();return I||(u?"Repay":"Approve")},B=()=>{y(!0),x.approve(y,()=>{p(void 0),x.check()})},E=()=>{const I=Q(r),O=J(i,s),N=()=>{M(),n(!1)};dn.repay(i,o,I,O,y,N)},F=()=>{u?E():B()};return t.jsxs(xe,{className:"MarginRepayModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>l(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Repay"}),t.jsx(ht,{tokens:h,amountStr:r,setAmountStr:l,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:k,maxLabelOverride:"Debt"})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Margin Level"}),t.jsx("div",{className:"info-row__value",children:t.jsx(yn,{curRatio:_.ratio,estRatio:c})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!P(),onClick:F,children:S()})]})]})},vn=["Amount","Interest Rate","Debt"],Kd=({isRepayModalOpen:e,setIsRepayModalOpen:n})=>{const s=He(),{poolsData:a,isLoading:i}=s??{isLoading:U(s)},o=_e(992),[r,l]=f.useState(!1),[u,p]=f.useState(!1),[c,d]=f.useState(ie[0]);if(U(a))return t.jsx("div",{className:"App-box",children:t.jsx(Xe,{})});const m=(y,h)=>{switch(d(h),y){case"repay":{n(!0);break}case"deposit":{l(!0);break}case"withdraw":{p(!0);break}}};return t.jsxs("div",{className:"MarginAccountAssets App-box",children:[i?t.jsx(Xe,{}):o?t.jsx(Xd,{poolsData:a,openModal:m}):t.jsx(zd,{poolsData:a,openModal:m}),t.jsx(Gd,{isOpen:u,setIsOpen:p,chosenTokenSymb:c,setChosenTokenSymb:d}),t.jsx(Yd,{isOpen:r,setIsOpen:l,chosenTokenSymb:c,setChosenTokenSymb:d}),t.jsx(Qd,{isOpen:e,setIsOpen:n,chosenTokenSymb:c,setChosenTokenSymb:d})]})},zd=({poolsData:e,openModal:n})=>t.jsxs("table",{className:"MarginAccountAssets__table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Asset"}),vn.map(s=>t.jsx("th",{children:s},s)),t.jsx("th",{})]})}),t.jsx("tbody",{children:ie.map(s=>{const a=e[s],i=[a.amount,a.interestRate,a.debt];return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(X,{symbol:s,isHlight:!0,children:s})}),i.map((o,r)=>{if(U(o))return Z();const l=vn[r],p=di(o,l==="Interest Rate",a.token);return t.jsx("td",{children:p},l)}),t.jsx("td",{children:t.jsx("div",{className:"MarginAccountAssets__buttons",children:t.jsx(pi,{openModal:n,asset:s})})})]},s)})})]}),Xd=({poolsData:e,openModal:n})=>t.jsx("div",{className:"MarginAccountAssets__mobile",children:ie.map(s=>{const a=e[s],i=[a.amount,a.interestRate,a.debt],o=s===Lt(ie);return t.jsxs("div",{className:"MarginAccountAssets__mobile-item",children:[t.jsx(X,{className:"MarginAccountAssets__mobile-item-title",symbol:s,isHlight:!0,isLarge:!0,children:s}),t.jsx("div",{className:"MarginAccountAssets__mobile-item-stats",children:i.map((r,l)=>{const u=vn[l],p=l===i.length-1,d=di(r,u==="Interest Rate",a.token);return t.jsxs(Ve.Fragment,{children:[t.jsxs("div",{className:"MarginAccountAssets__mobile-item-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:u}),t.jsx("div",{className:"info-row__value",children:d})]},u),!p&&t.jsx(Te,{marginValue:6})]},u)})}),t.jsx("div",{className:"MarginAccountAssets__mobile-item-buttons",children:t.jsx(pi,{openModal:n,asset:s})}),!o&&t.jsx(Te,{marginValue:20})]},s)})}),pi=({openModal:e,asset:n})=>{const a=He().poolsData[n];return t.jsxs(t.Fragment,{children:[t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("repay",n),isDisabled:!a.debt,children:[t.jsx("img",{src:ci,alt:"Repay"}),"Repay"]}),t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("deposit",n),children:[t.jsx("img",{src:_n,alt:"Deposit"}),"Deposit"]}),t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("withdraw",n),isDisabled:!a.amount,children:[t.jsx("img",{src:Vd,alt:"Withdraw"}),"Withdraw"]})]})},di=(e,n,s)=>{const a=n?`${Fe(e*100n)}%`:le(e,s.isStable);return n?a:t.jsx(X,{symbol:s.symbol,isHlight:!0,children:a})},Zd=()=>{const e=et(),[n,s]=f.useState(!1),{isLoading:a,accounts:i}=e??{},o=!a&&!(i!=null&&i.length);return!e||o?t.jsx("div",{className:"MarginAccount__404",children:t.jsx(un,{})}):t.jsxs("div",{className:"MarginAccount",children:[t.jsx(Ud,{}),t.jsx(Hd,{setIsRepayModalOpen:s}),t.jsx(Kd,{isRepayModalOpen:n,setIsRepayModalOpen:s})]})};const as=()=>{const e=mi();return e===null?null:e==null?void 0:e.data},yi=()=>{const e=mi();return e===null?null:e==null?void 0:e.mutate},mi=()=>{const e=V(),{isConnected:n,userAddress:s}=te(),{data:a,error:i,mutate:o}=we([s,"usePoolsData"],async()=>{const r={},l=ie.map(async y=>ey(e,y).then(h=>(r[y]={totalSupplied:h,asset:y},h)).catch(console.log));await Promise.all(l);const u=ie.map(async y=>{if(!n)return;const h=r[y].totalSupplied;return ty(e,y,s,h).then(([T,b])=>(r[y].userSupplied=T,r[y].userShareBalance=b,T))});await Promise.all(u);const p=ie.map(async y=>ny(e,y).then(h=>(r[y].balance=h,h)));await Promise.all(p),ie.forEach(async y=>{if(!n)return;const h=sy(y,r);r[y].availableToWithdraw=h});const c=ie.map(async y=>ay(e,y).then(h=>(r[y].interestRate=h,h))),d=ie.map(async y=>{const h=r[y].balance;return iy(e,y,h).then(T=>(r[y].utilRate=T,T))}),m=ie.map(async y=>Jd(e,y).then(h=>(r[y].maxCapacity=h,h)));return await Promise.all([...c,...d,...m]),{data:r,mutate:o}},{refreshInterval:60*se});return i?(console.log(i),null):a},Jd=async(e,n)=>await Tt(e,n).maximumPoolCapacity().then(BigInt).then(i=>Ke(i,n)).catch(console.log),ey=async(e,n)=>await Tt(e,n).getTotalLiquidity().then(BigInt).then(i=>Ke(i,n)).catch(console.log),ty=async(e,n,s,a)=>{const i=Tt(e,n),[o,r]=await Promise.all([i.balanceOf(s).then(BigInt).catch(console.log),i.depositShare().then(BigInt).catch(console.log)]);return[o*a/r,o]},ny=async(e,n)=>{const s=Tt(e,n);return await ee(e,n).balanceOf(s.address).then(BigInt).then(o=>Ke(o,n)).catch(console.log)},sy=(e,n)=>{const s=n[e].userSupplied,a=n[e].balance;return a<s?a:s},ay=async(e,n)=>{const s=Tt(e,n),[a,i]=await Promise.all([s.interestRate().then(BigInt),s.insuranceRateMultiplier().then(BigInt)]).catch(console.log),o=BigInt(1e5),r=(a*o-a*i)/o;return ae(r,5)},iy=async(e,n,s)=>{const i=await Tt(e,n).netDebt().then(BigInt).then(r=>Ke(r,n)).catch(console.log);return Ze(i,s)},Tt=(e,n)=>ee(e,`Pool_${n}`),ry=({poolAsset:e,chosenPool:n,setChosenPool:s,openSupplyModal:a,openWithdrawModal:i})=>{const o=V(),{isConnected:r}=te(),l=J(o,e),u=e===n,p=`EarnPoolRadio_${e}`,c=as();if(U(c))return t.jsx("div",{className:"App-box",children:t.jsx(Xe,{})});if(c===null)return t.jsx("div",{className:"App-box relative",children:t.jsxs(ze,{children:[e," pool data error"]})});const d=c[e],m=le(d.totalSupplied,l.isStable),y=U(d.userSupplied)?void 0:le(d.userSupplied,l.isStable),h=U(d.availableToWithdraw)?void 0:le(d.availableToWithdraw,l.isStable),T=`${Fe(d.interestRate*100n,2,void 0,!0)}%`,b=`${Fe(d.utilRate*100n,2,void 0,!0)}%`,g=()=>{u||s(e)},x=()=>{g(),a()},v=()=>{g(),i()};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:j("EarnPool","App-box",u&&"_chosen"),children:[t.jsxs("div",{className:"EarnPool__radio",children:[t.jsx("input",{id:p,type:"radio",name:"EarnPool",checked:u,onChange:g}),t.jsx("label",{htmlFor:p})]}),t.jsxs("div",{className:"EarnPool__head",children:[t.jsx("div",{className:"EarnPool__icon",children:t.jsx("img",{src:l.icon_circled,alt:`${l.name} icon`})}),t.jsxs("h1",{className:"EarnPool__title",children:[l.symbol," pool"]})]}),t.jsxs("div",{className:"EarnPool__body",children:[t.jsxs("div",{className:"EarnPool__item _action",children:[t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Total Supplied"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:m})})]}),t.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",isDisabled:!r,onClick:x,children:[t.jsx("img",{src:_n,alt:"Supply"}),"Supply"]})]}),t.jsxs("div",{className:"EarnPool__item _action",children:[t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Your Supplied"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:y??Z()})})]}),t.jsx(Te,{marginValue:0}),t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Available to Withdraw"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:h??Z()})})]}),t.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",isDisabled:!r,onClick:v,children:[t.jsx("img",{src:_n,alt:"Withdraw"}),"Withdraw"]})]}),t.jsxs("div",{className:"EarnPool__item",children:[t.jsx("div",{className:"EarnPool__item-name tip","data-tooltip-id":"SupplyAPYTooltip",children:"Supply APY"}),t.jsx("div",{className:"EarnPool__item-value",children:T})]}),t.jsxs("div",{className:"EarnPool__item",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Utilization Rate"}),t.jsx("div",{className:"EarnPool__item-value",children:b})]})]})]})})};const oy=e=>{const n=V(),s=J(n,e);return Et([s])[e]},ly=({isOpen:e,setIsOpen:n,chosenPool:s,setChosenPool:a})=>{const i=V(),[o,r]=f.useState(""),[l,u]=f.useState(void 0),[p,c]=f.useState(!1),d=yt(i),m=oy(s),y=as(),h=yi(),T=be(i,`Pool_${s}`),b=it(s,T.address,Q(o),u);if(f.useEffect(()=>{o&&Q(o)!==0n&&u(void 0)},[o]),Ae(()=>{u(void 0),o&&Q(o)!==0n&&b.check()},ke,[o]),!y)return null;const g=y[s],x=g.maxCapacity-g.totalSupplied,v=le(x,m.isStable),_=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":Q(o)>m.value?"Insufficient balance":U(l)?De:p?l?"Supplying...":"Approving...":null,M=()=>{const B=_();return B||(l?"Supply":"Approve")},k=()=>{c(!0),b.approve(c,()=>{u(void 0),b.check()})},P=async()=>{const B=s==="ETH",E=be(i,"MarginOneClick"),F=Q(o),I=Ne(F,s),O=()=>{n(!1),h()};ge(i,B?E.provideETHToPool:T.provide,B?[{value:I}]:[I],{text:`${o} ${s} were supplied to ${s} pool.`,node:t.jsxs(rt,{value:o,symbol:s,children:["were supplied to ",s," pool."]})},c,O)},S=()=>{l?P():k()};return t.jsxs(xe,{className:"EarnSupplyModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"EarnSupplyModal__body",children:[t.jsx("h1",{className:"EarnSupplyModal__title",children:"Supply"}),t.jsxs("div",{className:"EarnSupplyModal__info info-row",children:[t.jsx("div",{className:"info-row__title _light tip","data-tooltip-id":"MaxToSupplyTooltip",children:"Max. amount to supply"}),t.jsx("div",{className:"info-row__value",children:t.jsx(X,{symbol:s,isHlight:!0,children:v})})]}),t.jsx(Te,{}),t.jsx(ht,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a})]}),t.jsx(z,{className:"EarnSupplyModal__button",isDisabled:!!_(),onClick:S,children:M()}),t.jsx(uy,{})]})},uy=()=>t.jsxs(ne,{id:"MaxToSupplyTooltip",children:["To maintain stability, we ",t.jsx("br",{}),"currently cap the maximum ",t.jsx("br",{}),"liquidity that can be added to ",t.jsx("br",{}),"each pool. These limits will be ",t.jsx("br",{}),"increased in the near future"]});const cy={calcShareAmount:py};function py(e,n){const{userSupplied:s,userShareBalance:a}=n,i=Ze(e,s);return Zr(a,i)}const dy=({isOpen:e,setIsOpen:n,chosenPool:s,setChosenPool:a})=>{const i=V(),[o,r]=f.useState(""),[l,u]=f.useState(!1),p=yt(i),c=as(),d=yi();if(!c)return null;const m={};Object.values(c).forEach(b=>{m[b.asset]=b.availableToWithdraw});const y=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":Q(o)>c[s].userSupplied?"Insufficient balance":l?"Withdrawing...":null,h=()=>{const b=y();return b||"Withdraw"},T=async()=>{const b=be(i,`Pool_${s}`),g=Q(o),x=cy.calcShareAmount(g,c[s]),v=()=>{n(!1),d()};ge(i,b.withdraw,[x],{text:`${o} ${s} were withdrawn from ${s} pool.`,node:t.jsxs(rt,{value:o,symbol:s,children:["were withdrawn from ",s," pool."]})},u,v)};return t.jsxs(xe,{className:"EarnSupplyModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"EarnSupplyModal__body",children:[t.jsx("h1",{className:"EarnSupplyModal__title",children:"Withdraw"}),t.jsx(ht,{tokens:p,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:m})]}),t.jsx(z,{className:"EarnSupplyModal__button",isDisabled:!!y(),onClick:T,children:h()})]})},yy=()=>{const[e,n]=Oe("EarnPage_pool",ie[0]),[s,a]=f.useState(!1),[i,o]=f.useState(!1),r=()=>a(!0),l=()=>o(!0);return t.jsxs("div",{className:"EarnPage",children:[t.jsxs("div",{className:"EarnPage__header",children:[t.jsx("h1",{className:"EarnPage__title",children:"Earn"}),t.jsx(ri,{})]}),t.jsx("div",{className:"EarnPage__pools",children:ie.map(u=>t.jsx(ry,{poolAsset:u,chosenPool:e,setChosenPool:n,openSupplyModal:r,openWithdrawModal:l},u))}),t.jsx(ly,{isOpen:s,setIsOpen:a,chosenPool:e,setChosenPool:n}),t.jsx(dy,{isOpen:i,setIsOpen:o,chosenPool:e,setChosenPool:n}),t.jsx(my,{})]})},my=()=>t.jsx(ne,{id:"SupplyAPYTooltip",children:t.jsxs("div",{children:["Supply APY refers to the ",t.jsx("br",{}),"Interest Rate that is earned ",t.jsx("br",{}),"when staking USDC"]})}),fy=()=>{const e=St(),n=Ss();return f.useEffect(()=>{e.pathname.endsWith("options")&&n("/options/builder"),e.pathname.endsWith("margin")&&n("/margin/trading")},[e.pathname]),t.jsxs(Pi,{children:[t.jsxs(We,{path:"/options",element:t.jsx(Al,{}),children:[t.jsx(We,{path:"builder",element:t.jsx(kc,{})}),t.jsx(We,{path:"option-chain",element:t.jsx(kp,{})})]}),t.jsxs(We,{path:"/margin",element:t.jsx(nd,{}),children:[t.jsx(We,{path:"trading",element:t.jsx(Ld,{})}),t.jsx(We,{path:"account",element:t.jsx(Zd,{})})]}),t.jsx(We,{path:"/earn",element:t.jsx(yy,{})}),t.jsx(We,{path:"*",element:t.jsx(Bi,{to:Wr,replace:!0})})]})};const by="/sf_draft/assets/Discord-f7d998b5.svg",hy="/sf_draft/assets/Gitbook-c728118d.svg",Ty="/sf_draft/assets/Github-d50e83d6.svg",gy="/sf_draft/assets/Mirror-095740c8.svg",xy="/sf_draft/assets/Dune-cc12c29c.svg",_y="/sf_draft/assets/Twitter-5cfdd2f4.svg",vy=()=>{const e=[{name:"Discord",icon:by,url:"https://discord.gg/5DGZ7rzSfS"},{name:"Gitbook",icon:hy,url:"https://docs.sharwa.finance/"},{name:"Github",icon:Ty,url:"https://github.com/SharwaFinance"},{name:"Mirror",icon:gy,url:"https://mirror.xyz/sharwa-finance.eth"},{name:"Dune",icon:xy,url:"https://dune.com/sharwa_finance/aggregator"},{name:"Twitter",icon:_y,url:"https://twitter.com/SharwaFinance"}];return t.jsx("footer",{className:"Footer",children:t.jsxs("div",{className:"Footer__content _container",children:[t.jsx(As,{}),t.jsx("div",{className:"Footer__smedia-items",children:e.map(n=>t.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:n.url,children:t.jsx("img",{src:n.icon,alt:`${n.name} logo`})},n.name))})]})})};const Cy=({children:e})=>t.jsx("div",{className:"GlobalStickyMessage",children:e}),My=({children:e})=>t.jsx(kr,{children:t.jsx(jo,{children:t.jsx(jc,{children:t.jsx(Yu,{children:t.jsx(cl,{children:e})})})})}),Sy=()=>t.jsxs("div",{className:"Tooltips",children:[t.jsx(ne,{id:"Tooltip_default",place:"bottom-start"}),t.jsx(ne,{id:"Tooltip_bottom",place:"bottom"}),t.jsx(ne,{id:"Tooltip_top",place:"top"}),t.jsx(ne,{id:"Tooltip_Asset",hasDelay:!1,place:"bottom"}),t.jsx(ne,{id:"Tooltip_Expiration",place:"bottom-end"}),t.jsx(ne,{id:"Tooltip_MarketInfo",place:"bottom-start"})]});function Ay(){const{chain:e}=Si(),{isConnected:n,userAddress:s}=te(),a=()=>t.jsxs(Ve.Fragment,{children:[t.jsx(Or,{}),t.jsx("main",{className:"_container",children:t.jsx(fy,{})}),t.jsx(vy,{}),t.jsx(Cy,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]},n),i=()=>t.jsx(Hr,{chainId:e.id});return e!=null&&e.unsupported?i():a()}function wy(){return t.jsx(Oi,{fallbackRender:null,children:t.jsxs(t.Fragment,{children:[t.jsx(Fr,{}),t.jsx(Sy,{}),t.jsx(Mi,{config:jr(),children:t.jsx(hi,{children:t.jsx(My,{children:t.jsx(Ay,{})})})})]})})}fi.createRoot(document.getElementById("root")).render(t.jsx(Ve.StrictMode,{children:t.jsx(wy,{})}));
