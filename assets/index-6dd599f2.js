import{j as e,r as f,a as We}from"./node_modules/react-90d84203.js";import{a as oa,c as Ls}from"./node_modules/react-dom-85b864ba.js";import{L as Os,H as Fs}from"./node_modules/react-router-dom-c36c90a0.js";import{c as A}from"./node_modules/classnames-58e405e9.js";import{c as Us,u as $s,a as Hs,b as Ws,d as G,e as qs,f as Vs,W as Gs,g as Ys}from"./node_modules/wagmi-1368f1fa.js";import{p as Ks,I as Qs,q as zs,r as Xs,t as Zs,u as hn}from"./node_modules/@wagmi-69ffc3f1.js";import{Q as gn,k as Js,h as ei}from"./node_modules/react-toastify-935b52fd.js";import{b as ht,O as la,a as ua,d as ti,e as $e,f as ni}from"./node_modules/react-router-82445d4b.js";import{u as ai,a as si,b as ii,c as we,d as ri,e as ke}from"./node_modules/react-use-bc3311ea.js";import{S as oi,c as li}from"./node_modules/react-select-51dfe5cb.js";import{W as ui}from"./node_modules/react-tooltip-fde9db0c.js";import{E as ci}from"./node_modules/react-error-boundary-75bb9c52.js";import{R as xn}from"./node_modules/react-modal-7b824e63.js";import{i as $,u as Oe}from"./node_modules/swr-4fa31563.js";import{B as Bt,A as pi,W as di,C as Nt,y as yi,z as mi,D as fi}from"./node_modules/@ethersproject-bf7bf4ae.js";import{_ as bi}from"./node_modules/react-fast-marquee-a0c5ffcb.js";import{I as Ti}from"./node_modules/react-icons-22a086b9.js";import{f as Ae}from"./node_modules/date-fns-003c5fae.js";import{A as hi,a as gi}from"./node_modules/@szhsin-f545df6e.js";import{r as xi}from"./node_modules/swiper-4105a6d8.js";import{u as _i}from"./node_modules/ethers-1b4b58d6.js";import{S as vi}from"./node_modules/rc-slider-b79f222d.js";import{R as Ci,A as Mi,X as Si,Y as Ai,T as wi,a as ji,b as qn,C as ki}from"./node_modules/recharts-3a81bad4.js";import"https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs";import{T as Di}from"./node_modules/lightweight-charts-068b394f.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-19585569.js";import"./node_modules/use-sync-external-store-d9fdebd1.js";import"./node_modules/eventemitter3-3e2fdae4.js";import"./node_modules/zustand-33f96c56.js";import"./node_modules/@noble-6164e8b7.js";import"./node_modules/isows-b4181a00.js";import"./node_modules/vite-plugin-node-polyfills-daa009c6.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/copy-to-clipboard-2c58613e.js";import"./node_modules/toggle-selection-93f4ad84.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/@babel-0a888fcc.js";import"./node_modules/@emotion-7c24be43.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-f7f26ffc.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/prop-types-63f5e6e2.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-9d64241e.js";import"./node_modules/bech32-7c6d7f34.js";import"./node_modules/js-sha3-43eb1fb4.js";import"./node_modules/bn.js-7d9c8149.js";import"./node_modules/hash.js-6ee91aa2.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-0943c707.js";import"./node_modules/scrypt-js-e7ebb268.js";import"./node_modules/react-transition-state-e386e7d4.js";import"./node_modules/rc-util-f4edc9bb.js";import"./node_modules/react-resize-detector-b29ac57a.js";import"./node_modules/lodash-8d16cd1b.js";import"./node_modules/react-smooth-c53f2ee1.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-324f79d2.js";import"./node_modules/css-unit-converter-9e08bb2c.js";import"./node_modules/fancy-canvas-250c9c40.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();const Ei="/sf_draft/assets/Logo-258738bb.svg",ca=({className:t})=>e.jsx("div",{className:A("Logo",t),children:e.jsx("a",{className:"Logo__link",href:"/index.html",children:e.jsx("img",{src:Ei,alt:"Sharwa.Finance"})})});const Rt=({className:t,links:n,type:a})=>{const s=A(t,a&&`_${a}`);return e.jsx("div",{className:A("Links",s),children:n.map((i,o)=>{var p;const r=A("Links__item",i.isActive&&"active");return((p=i.to)==null?void 0:p.startsWith("http"))?e.jsx("a",{className:r,href:i.to,rel:"noreferrer",target:"_blank",children:i.name},i.to):e.jsx(Os,{to:i.to,className:r,disabled:i.isDisabled,onClick:i.isDisabled&&(c=>c.preventDefault()),children:i.name},i.to??o)})})};const pa=t=>{const[n,a]=f.useState(!1),s=f.useCallback(()=>{document.removeEventListener("click",s),a(!1),t&&t()},[]);return{isOpen:n,openPopup:()=>{n||(a(!0),setTimeout(()=>{document.addEventListener("click",s)},10))},closePopup:s}},Ii="/sf_draft/assets/wallet-8f98d05f.svg",da="/sf_draft/assets/link-597331d6.svg",Pi="/sf_draft/assets/cross_white-42eb5050.svg",Bi="/sf_draft/assets/Arbitrum-299bccbf.svg",Ni="/sf_draft/assets/Arbitrum-299bccbf.svg",ve=42161,_n=10,vn=[ve],Lt={[ve]:{name:"Arbitrum",icon:Bi},[_n]:{name:"Optimism",icon:Ni,isDisabled:!0}},Ri=t=>{var a;let n=t.reason??t.message;return n==="Internal JSON-RPC error."&&(n=(a=t.data)==null?void 0:a.message),n},Li=t=>t?t.includes("User rejected the request")?"User rejected the request.":t.includes("user rejected transaction")?"User rejected transaction.":t.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":t.includes("Connector already connected")?"Wallet is already connected.":t.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":t.includes("Too little received")?"Slippage set too low. Please consider increasing it for successful strategy purchase.":t:"Unknown error",Ce=t=>{if(typeof t!="bigint")throw new TypeError(`Invalid BigInt: ${t}`)},ya=t=>{if(typeof t!="number"&&typeof t!="string")throw new TypeError(`Invalid amount: ${t}`)},Oi=t=>{if(typeof t!="string")throw new TypeError(`Invalid String: ${t}`)},Fi=(t,n,a)=>{n=ma(n);const s=ga(t)+"/tx/"+a;console.log(n.text,`
`,s),gn.success(e.jsxs("div",{children:[e.jsx("div",{children:n.node}),e.jsx("br",{}),a&&e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},ma=t=>{if(typeof t=="string"){const n=t;t={text:n,node:n}}return t},Ui=t=>{t=ma(t),console.log(t.text),gn.success(t.node)},yt=(t,n)=>{const a=Ri(t),s=Li(a);console.error(t),gn.error(e.jsx("div",{children:s})),n&&n(!1)},Ze=.003,$i=.005,me=["USDC","ETH","WBTC"],Hi="/sf_draft/assets/ETH-fb1e5539.svg",fa="/sf_draft/assets/ETH_circled-dc6cb60f.svg",Wi="/sf_draft/assets/BTC-b739bd63.svg",qi="/sf_draft/assets/WETH-2ba67e25.svg",Vi="/sf_draft/assets/WBTC-f0287338.svg",ba="/sf_draft/assets/WBTC_circled-48bbc65b.svg",Gi="/sf_draft/assets/LINK-728e8697.svg",Yi="/sf_draft/assets/ARB-fc2e28d1.svg",Ki="/sf_draft/assets/GMX-f911f5cf.svg",Qi="/sf_draft/assets/MAGIC-5214f6ce.svg",Vn="/sf_draft/assets/USDC-5a7f3d86.svg",Ta="/sf_draft/assets/USDC_circled-cda21ca8.svg",zi="/sf_draft/assets/USDT-2e53b5e9.svg",Xi="/sf_draft/assets/DAI-b460716b.svg",Qe={[ve]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",oracleAddress:"0x639fe6ab55c921f74e7fac1ee960c0b6293ba612",url:"https://www.coingecko.com/en/coins/ethereum",isAsset:!0,isETH:!0,icon:Hi,icon_circled:fa,isSwappable:!0,isWrappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",oracleAddress:"0x6ce185860a4963106506c203335a2910413708e9",url:"https://www.coingecko.com/en/coins/bitcoin",isAsset:!0,icon:Wi,isWrappable:!0},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:qi,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:Vi,icon_circled:ba,isSwappable:!0},{name:"Chainlink Token",symbol:"LINK",decimals:18,address:"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4",oracleAddress:"0x86e53cf1b870786351da77a57575e79cb55812cb",url:"https://www.coingecko.com/en/coins/chainlink",icon:Gi},{name:"Arbitrum Token",symbol:"ARB",decimals:18,address:"0x912CE59144191C1204E64559FE8253a0e49E6548",oracleAddress:"0xb2a824043730fe05f3da2efafa1cbbe83fa548d6",url:"https://www.coingecko.com/en/coins/arbitrum",icon:Yi},{name:"GMX Token",symbol:"GMX",decimals:18,address:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",oracleAddress:"0xdb98056fecfff59d032ab628337a4887110df3db",url:"https://www.coingecko.com/en/coins/gmx",icon:Ki},{name:"MAGIC",symbol:"MAGIC",decimals:18,address:"0x539bdE0d7Dbd336b79148AA742883198BBF60342",oracleAddress:"0x47e55ccec6582838e173f252d08afd8116c2202d",url:"https://www.coingecko.com/en/coins/magic",icon:Qi},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:Xi,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:Vn,icon_circled:Ta,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:Vn,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:zi,isSwappable:!0,isStable:!0}]},jt={},kt={},Gn=Object.keys(Qe);for(let t=0;t<Gn.length;t++){const n=Gn[t];jt[n]={},kt[n]={};let a=Qe[n];for(let s=0;s<a.length;s++){const i=a[s];i.address=i.address.toLowerCase(),jt[n][i.symbol]=i,kt[n][i.address]=i}}const Ot={};for(let t=0;t<Qe[ve].length;t++){const n=Qe[ve][t];Ot[n.symbol]=n.decimals}const Ft=Qe[ve].filter(t=>t.isAsset).map(t=>t.symbol),Z=(t,n)=>{if(!jt[t])throw new Error(`No tokens found for chainId ${t}`);const s=jt[t][n];if(!s)throw new Error(`Incorrect symbol "${n}" for chainId ${t}`);return s},Yn=(t,n)=>{if(!kt[t])throw new Error(`No tokens found for chainId ${t}`);const s=kt[t][n.toLowerCase()];if(!s)throw new Error(`Incorrect address "${n}" for chainId ${t}`);return s},ha=(t,n)=>Z(t,n).address,Zi=t=>{const n=Qe[t];if(!n)throw new Error(`No tokens found for chainId ${t}`);return n.filter(s=>s.isSwappable)},Cn=t=>Z(t,"USDC").address,Dt=t=>Z(ve,t).icon,De=(t,n,a=[],s,i,o)=>(i&&i(!0),n(...a).then(r=>{console.log("Submitting:",r),r.wait().then(l=>{typeof s=="function"&&(s=s(l)),Fi(t,s,r.hash),i&&i(!1),o&&o(l)},l=>{yt(l,i)})},r=>{yt(r,i)})),Ji=()=>{const t=[zs];if(t.length!==vn.length)throw new Error("Invalid number of wagmi chains.");const{chains:n,publicClient:a,webSocketPublicClient:s}=Ks(t,[Xs()]);return Us({autoConnect:!0,publicClient:a,webSocketPublicClient:s,connectors:[new Qs({chains:n,options:{name:"Injected",shimDisconnect:!0}})]})},ga=t=>{switch(t){case ve:return"https://arbiscan.io";case _n:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}},gt=t=>me.map(a=>Z(t,a));const z=f.forwardRef(function({children:n,className:a,style:s,isDisabled:i,isGreen:o,onClick:r,type:l},u){const p=A(a,l&&`Button_${l}`,o&&"_green"),c=l==="complex";return e.jsx("button",{className:A("Button",p),ref:u,disabled:i,onClick:r,"data-text":n,style:s,children:c?e.jsx("span",{children:n.toString()}):n})}),xa=f.createContext(null),er=({children:t})=>{const{godEyeAddress:n}=nr();return e.jsx(xa.Provider,{value:n,children:t})},tr="AEZAKMI=",ee=()=>{var i;const t=f.useContext(xa),{address:n,isConnected:a}=$s();return{userAddress:(i=t??n)==null?void 0:i.toLowerCase(),isConnected:a}},nr=()=>{const[t,n]=f.useState(),a=ht(),s=o=>{n(o),console.log("GOD EYE MODE ENABLED:",o)},i=o=>{n(null),console.log(`GOD EYE MODE DISABLED${o?` (${o})`:""}`)};return f.useEffect(()=>{const o=a.pathname.split("/"),r=o[o.length-1];if(r.startsWith(tr)){const l=r.split("=")[1];Zs(l)?s(l):i("Invalid wallet address")}},[a.pathname]),{godEyeAddress:t}};function Ut(){const{connect:t,connectors:n}=Hs({onError:i=>{yt(i)}}),{disconnect:a}=Ws(),s=n[0];return{connectWallet:()=>t({connector:s}),disconnectWallet:a}}const ar=()=>{const{isOpen:t,openPopup:n,closePopup:a}=pa(),s=A(t&&"open"),i=G(),{isConnected:o,userAddress:r}=ee(),{connectWallet:l,disconnectWallet:u}=Ut(),[,p]=ai(),c=m=>m.slice(0,9)+"..."+m.slice(-15),d=()=>e.jsx(z,{type:"complex",onClick:l,children:"Connect Wallet"}),y=()=>e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"Wallet__header",onClick:()=>{n(),p(r)},children:e.jsxs("div",{className:"Wallet__address",children:[e.jsx("img",{src:Ii,alt:"Wallet icon"}),e.jsx("span",{children:c(r)})]})}),e.jsxs("div",{className:"Wallet__body",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:a,children:e.jsx("img",{src:Pi,alt:"x"})}),e.jsxs("a",{className:"Wallet__link",href:`${ga(i)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[e.jsx("img",{src:da,alt:"external link"}),e.jsx("span",{children:"View on explorer"})]}),e.jsx("div",{className:"Wallet__inner-address",children:"("+c(r)+")"}),e.jsx(z,{className:"Wallet__button",onClick:u,children:"Disconnect wallet"})]})]});return e.jsx("div",{className:A("Wallet",s),children:o?y():d()})};const sr=()=>e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 3L5 5.73504L9 3",stroke:"white",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),be=({className:t,options:n,defaultValue:a,defaultOption:s,isDisabled:i,onChange:o,iconNode:r,iconTextNode:l,...u})=>{const p=r||l,c=!n.length,d=({children:T,...b})=>e.jsxs(li.Control,{...b,children:[r&&e.jsx("div",{className:"Selector__icon",children:r}),l&&e.jsx("div",{className:"Selector__icon Selector__icon_text",children:l}),T]}),y=T=>{let b;const h=C=>C.value===T;return n.find(C=>C.options)?n.forEach(C=>{if(b)return;b=(C.options??[C]).find(h)}):b=n.find(h),b},m=A(t,p&&"Selector_with-icon"),g=t==null?void 0:t.split(" ")[0];return e.jsx("div",{className:A("Selector__wrapper",g&&`${g}-wrapper`),"data-tooltip-id":c&&"Tooltip_bottom","data-tooltip-content":c?"No options":"",place:"bottom-end",children:e.jsx(oi,{...u,options:n,defaultValue:s??y(a),onChange:o,className:A("Selector",m),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:T,innerProps:b})=>e.jsx("div",{ref:T,...b,className:"Selector__indicator Selector__dropdown-indicator",children:e.jsx(sr,{})}),Control:d},isDisabled:c||i})})};const Ne="#46956A",se="#C75E4B",Kn="#D99445",Et="#6988FF",ct="#747FA6",Qn="rgba(58, 68, 102, 0.5)",pt="#3A4466",zn="#181A3C",ir="#0D0F29",Mn="rgba(56, 66, 99, 0.25)",rr="≈",dn={positive:"+",negative:"–",neutral:""},te=({children:t,hasDelay:n=!0,...a})=>e.jsx(ui,{place:"bottom-start",delayShow:n?150:0,delayHide:n?150:0,border:`1px solid ${Mn}`,...a,children:t}),_a=()=>{const{switchNetworkAsync:t}=qs();return n=>{if(typeof n!="number"&&typeof n!="string")throw new TypeError(`Invalid chainId type: ${n} (${typeof n})`);const a=Lt[n].name;t(n).then(()=>{Ui(`Network switched to ${a} (${n})`)},s=>{yt(s)})}},or=()=>{const t=G(),n=_a(),a=vn.map(i=>{const{name:o,icon:r,isDisabled:l}=Lt[i];return{value:i,label:e.jsxs("div",{className:"flex gap-x-7",children:[e.jsx("img",{src:r,alt:`${o} icon`}),e.jsx("span",{children:o})]}),isCurrent:i===t,isDisabled:l}}),s=a.find(i=>i.isCurrent);return e.jsxs("div",{className:"NetworkSwitcher",children:[e.jsx(be,{options:a,value:s,onChange:i=>{n(i.value)},isDisabled:!0}),e.jsx(te,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},lr=()=>{const{isConnected:t}=ee();return e.jsxs("div",{className:"CryptoGateway",children:[t&&e.jsx(or,{}),e.jsx(ar,{})]})},ur=()=>{const t=ht(),n=[{name:"Option Trading",to:"/options"},{name:"Margin Trading",to:"/margin"},{name:"Earn",to:"/earn"}];return n.forEach(a=>{t.pathname.startsWith(a.to)&&(a.isActive=!0)}),e.jsxs("header",{className:"Header _container",children:[e.jsx(ca,{}),e.jsx(Rt,{links:n}),e.jsx(lr,{})]})};const cr=()=>{const t=ei({enter:"jellyIn",exit:"jellyOut"});return e.jsx(Js,{limit:3,transition:t,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const pr=300,dr=t=>{const n=si();f.useEffect(()=>{const a=window.innerWidth>1025?n:0;t?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${a}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},pr)},[t,n])};xn.setAppElement("#root");xn.defaultStyles={};const Xn=300,Me=({children:t,className:n,isOpen:a,setIsOpen:s,isObligatory:i,reset:o})=>(dr(a),f.useEffect(()=>{!a&&o&&setTimeout(o,Xn)},[a]),e.jsx(xn,{className:A(n,"App-box"),isOpen:a,onRequestClose:()=>{i||s(!1)},overlayElement:(r,l)=>e.jsxs("div",{...r,children:[l,!i&&e.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:Xn,children:t})),yr=t=>{const{chainId:n}=t,[a]=f.useState(!0),s=_a();return e.jsxs(Me,{className:"UnsupportedChainErrorModal",isOpen:a,isObligatory:!0,children:[e.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",n," is not supported."]}),e.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:vn.map(i=>{const o=Lt[i],{name:r,icon:l,isDisabled:u}=o;return e.jsxs(z,{isDisabled:u,type:"stroke",onClick:()=>{s(i)},children:[e.jsx("img",{src:l,alt:`${r} icon`}),"Switch to ",r]},i)})})]})},mr="/margin",Ee=600,Ie="Please, wait...";const va="/sf_draft/assets/graph-b6757e0e.svg";const Q=({className:t,children:n,isLarge:a,symbol:s="USDC",isHlight:i,style:o,...r})=>{const l=G(),u=Z(l,s).icon,p=n,c=A(i&&"_hlight",a&&"_large",t);return e.jsxs("div",{className:A("Currency",c),style:o,...r,children:[e.jsx("img",{src:u,alt:`${s} icon`}),e.jsx("span",{children:p})]})},ae=18,Zn=18,Jn=8,$t=6,fr=8,He=6,br={ETH:Zn,WETH:Zn,BTC:Jn,WBTC:Jn,USDC:$t},Ca=2,Ma=4,_e=(t,n=",")=>{ya(t);const a=t.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),a.join(".")},Tr=t=>{if(ya(t),!Sa(t))return 0;const n=t.toString(),a=n.indexOf("."),s=n.match(/[1-9]/)[0];return n.indexOf(s,a)-a},xt=(t,n=0,a=!1)=>{if(!Sa(t))return t;let s=t.toString(),i=s;const o=s.indexOf(".");if(s.length-o-1>n&&(i=ea(t,n),a&&Number(i)===0)){const l=Tr(t);i=ea(t,l)}return i},Sa=t=>t.toString().indexOf(".")!==-1,Aa=(t,n)=>{let a=t.toString();const s=a.indexOf("."),i=s!==-1,o=i?a.length-s-1:0;return o<n&&(a+=+i?"":".",a+="0".repeat(n-o)),a},hr=t=>{const n=t.toString();return n.indexOf(".")!==-1?parseFloat(n):t},gr=t=>{const n=t.toString(),[a,s]=n.split(".");return s==="0".repeat(s==null?void 0:s.length)?a:n},xr=(t,n)=>{var i;let a=t.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((i=a.match(/\./g))==null?void 0:i.length)>1&&(a=(r=>r.replace(/\.$/,""))(a)),a=xt(a,n?0:He),a},st=(t,n,a)=>_e(xr(t,a),n),Pe=(t,n=",")=>(Oi(t),Number(t.split(n).join(""))),ea=(t,n=0)=>Math.floor(t*10**n)/10**n,ye=(t,n=0)=>Math.round(t*10**n)/10**n,_r=(t,n=0)=>Math.ceil(t*10**n)/10**n,H=(t,n=ae,a)=>{Ce(t);let s=Number(t)/10**n;return $(a)||(s=ye(s,a)),String(s).includes("e")?0:s},Ht=(t,n)=>(Ce(t),t*BigInt(10**n)),wa=(t,n)=>(Ce(t),t/BigInt(10**n)),oe=(t,n=ae)=>{const a=Math.min(He,n),s=Math.round(Number(t)*10**a);return Ht(BigInt(s),n-a)},de=(t,n=Ca,a=ae,s=!1)=>{Ce(t);let i=H(t,a);return i=xt(i,n),i=Aa(i,n),s||(i=gr(i)),i=_e(i),String(i)},Je=(t,n=Ma,a=ae,s)=>{Ce(t);let i=H(t,a);return i=xt(i,n,s),i=hr(i),i=_e(i),String(i)},fe=(t,n,a=n?Ca:Ma,s=ae)=>(Ce(t),(n?de:Je)(t,a,s,!n)),ja=(t,n,a)=>{Ce(t);const s=a-n;return(s<0?wa:Ht)(t,Math.abs(s))},ie=(t,n)=>ja(t,n,ae),Le=(t,n)=>ja(t,ae,n),Sn=(t,n,a=ae)=>{Ce(t);const s=H(t,a)*n;return oe(s,a)},_t=(t,n,a=ae)=>(t=Ht(t,a),t/n),it=t=>(Ce(t),t<0n?-t:t),vr=(t,n,a=ae)=>{Ce(t);const s=a-n,i=wa(t,s);return Ht(i,s)},Cr=(t,n=0,a=ae)=>oe(ye(H(t,a),n),a),Mr=(t,n=He,a=ae)=>{let s=H(t,a);return s===0&&t!==0n&&(s=+`0.${"0".repeat(n-1)}1`),oe(_r(s,n),a)},Sr=t=>{if(typeof t!="object")throw new Error(`Invalid bigNumberData: ${t}`);const n={};for(const a in t){let s=t[a];Bt.isBigNumber(s)&&(s=s.toBigInt()),n[a]=s}return n},K=t=>{const n=Pe(t);return oe(n)},Wt=t=>{const n=H(t);return st(n)},Ar="/sf_draft/assets/url-c5832e95.svg",wr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],jr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],kr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Dr=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"},{internalType:"address",name:"_buildManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"buildManager",outputs:[{internalType:"contract IBuildManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract IExchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],Er=[{inputs:[{internalType:"address",name:"_proxySeller",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premium",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ir=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Pr=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_weth9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth9",outputs:[{internalType:"contract IWETH9",name:"",type:"address"}],stateMutability:"view",type:"function"}],Br=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[],name:"Lock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!0,internalType:"address",name:"tokenIn",type:"address"},{indexed:!0,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"timelock",type:"uint256"}],name:"Unlock",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc20",type:"address[]"}],name:"UpdateAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc721",type:"address[]"}],name:"UpdateAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableTokenToLiquidityPool",type:"address[]"}],name:"UpdateAvailableTokenToLiquidityPool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"UpdateErc721Limit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"UpdateLiquidatorFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"UpdateTokenToLiquidityPool",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc20",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableTokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"checkERC20Amount",outputs:[{internalType:"bool",name:"currectBalance",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721Value",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721tokenID",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"checkLiquidityPool",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721Limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"erc721Token",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAvailableErc20",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableErc721",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableTokenToLiquidityPool",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc20ByContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc721ByContract",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc20",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc721",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"address",name:"marginAccountOwner",type:"address"},{internalType:"address",name:"liquidator",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc20",type:"address[]"}],name:"setAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc721",type:"address[]"}],name:"setAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableTokenToLiquidityPool",type:"address[]"}],name:"setAvailableTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"setErc721Limit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"setLiquidatorFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"setTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"swapID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"timelock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],Nr=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"CreateMarginAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"createMarginAccount",outputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Rr=[{inputs:[{internalType:"address",name:"_positionsManager",type:"address"},{internalType:"address",name:"_baseToken",type:"address"},{internalType:"address",name:"_portfolioLendingStorage",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProvideERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"ProvideERC721",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"UpdateRedCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"UpdateYellowCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"WithdrawERC721",type:"event"},{inputs:[],name:"BASE_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtSizeInUSDC",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateMarginAccountValue",outputs:[{internalType:"uint256",name:"marginAccountValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getMarginAccountRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParams",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParamsByDebt",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"redCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"setRedCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"setYellowCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"yellowCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Lr=[{inputs:[{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"calculateAmountInERC20",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculateAmountOutERC20",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"calculateAmountOutERC721",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculatePositionValue",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"calculateTotalPositionValue",outputs:[{internalType:"uint256",name:"totalValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"checkValidityERC721",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"exercise",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getModuleAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"liquidate",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setTokenInToTokenOutToExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"swapOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"tokenInToTokenOutToExchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Or=[{inputs:[{internalType:"contract IMarginAccountManager",name:"_marginAccountManager",type:"address"},{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"},{internalType:"contract IPositionsManager",name:"_hegicPositionManager",type:"address"},{internalType:"contract IProxySeller",name:"_proxySeller",type:"address"},{internalType:"contract IMarginAccount",name:"_marginAccount",type:"address"},{internalType:"address",name:"_hegicTokenIn",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"borrowSwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicPositionManager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicTokenIn",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"provideETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"contract IProxySeller",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setUniswapExchangeModules",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapRepay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"transferBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"uniswapExchangeModules",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"withdrawBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],Fr=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Ur=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],$r=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Hr=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Wr=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],qr=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Vr=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Gr=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!0,internalType:"int24",name:"tickSpacing",type:"int24"}],name:"FeeAmountEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!1,internalType:"int24",name:"tickSpacing",type:"int24"},{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolCreated",type:"event"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"}],name:"createPool",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],name:"enableFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"",type:"uint24"}],name:"feeAmountTickSpacing",outputs:[{internalType:"int24",name:"",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint24",name:"",type:"uint24"}],name:"getPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"parameters",outputs:[{internalType:"address",name:"factory",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}],Yr=t=>({VITE_ALCHEMY_API_KEY_42161:"tz_aYA5g8dBegbWo1l6TQEY7cKhGZCh1",VITE_PREMIA_API_KEY_42161:"sharwa_3ZgugmeGTvPgPXmuxuEeho4J",VITE_SUBGRAPH_API_KEY_42161:"4d7d37cf3bc9fc7cae70d943fb30a47e",BASE_URL:"/sf_draft",MODE:"production",DEV:!1,PROD:!0,SSR:!1})[`VITE_ALCHEMY_API_KEY_${t}`],qt=t=>{const n=Yr(t);if(!n)throw new Error(`No Alchemy api key found for chainId ${t}`);return new pi(t,n)},Kr=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new di(window.ethereum).getSigner()},dt={[ve]:{Pool_USDC:{address:"0x1cD7629981881e80A6fe046AF0556369FbA3C09c",abi:wr},Pool_WBTC:{address:"0x9D8625f596d52523bAf775dB597b5429838177Bd",abi:jr},Pool_ETH:{address:"0x033258f67eD89043D3ea4E4f322aDcBd00152cf1",abi:kr},TxBuilder:{address:"0x9daA79Dbf6CD067D207194661779677B5Ee29DCF",abi:Dr},TxBuilderOpen_Hegic:{address:"0xb94fe302bF6B707027706996887299120449B6ec",abi:Er},Exchanger:{address:"0x03E34a4d1F2B88579521086876E781479A544610",abi:Pr},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:Ir},MarginAccount:{address:"0x7Ce77Aebd1AD2Bd629Ed35e74ceF3d108d8bF28a",abi:Br},MarginAccountManager:{address:"0x3AD2F7207ad004fa658041Bc180Ad6c21072eBc7",abi:Nr},MarginTrading:{address:"0xcB6010751Ab1282b3777484f91F6E7728888AF58",abi:Rr},ModularSwapRouter:{address:"0x565112dd17Ae251703e93441Ab04D8c5B884Fa72",abi:Lr},MarginOneClick:{address:"0xEBD3f2A348Fc3a8b7D5B79CEbD86ab88c4A45403",abi:Or},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:Fr},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:Ur},Hegic_Strategy:{abi:$r},Hegic_PriceCalculator:{abi:Hr},ChainlinkOracle:{abi:qr},UniswapQuoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:Vr},UniswapFactory:{address:"0x1F98431c8aD98523631AE4a59f267346ea31F984",abi:Gr}},[_n]:{}},Qr=()=>{for(const t in dt){const n=dt[t],a=Qe[t];a&&(a.forEach(s=>{s.isETH||(n[s.symbol]={address:s.address,abi:Wr})}),dt[t]={...n})}};Qr();const An=(t,n)=>{if(!dt[t])throw new Error(`Unknown chainId ${t}`);const a=dt[t][n];if(!a)throw new Error(`Unknown contract "${n}" for chainId ${t}`);return[a.address,a.abi]},et=(t,n)=>An(t,n)[0],wn=(t,n)=>An(t,n)[1],ka=(t,n,a)=>new Nt(...An(t,n),a?Kr():qt(t)),ne=(t,n)=>ka(t,n,!1),je=(t,n)=>ka(t,n,!0),zr=async(t,n)=>{const s=(await Xr(t,n).latestAnswer()).toBigInt();return ie(s,fr)},Xr=(t,n)=>{const a=wn(t,"ChainlinkOracle"),s=Z(t,n).oracleAddress;if(!s)throw new Error(`No oracle address set for asset ${n}`);return new Nt(s,a,qt(t))},Da=f.createContext(null),Zr=({children:t})=>{const n=Jr();return e.jsx(Da.Provider,{value:n,children:t})},Ea=()=>f.useContext(Da),Jr=()=>{const t=G(),{data:n,error:a}=Oe("useTokenPricesSetup",{fetcher:async()=>{const s={},i=[];return Ft.forEach(o=>{i.push(zr(t,o).then(r=>{s[o]=r}))}),await Promise.all(i),s},refreshInterval:60*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return a?(console.log(a),null):n},Ve=t=>{const n=Ea();return(n==null?void 0:n[t])??0n},Ia=()=>{var c;const t=G(),n=Ea(),[a,s]=f.useState(!1),i=f.useRef(null),o=f.useRef(null),r=f.useRef(null),l=d=>{var T,b,h;const y=(T=r.current)==null?void 0:T.clientWidth,m=((b=i.current)==null?void 0:b.clientWidth)-y;return(d??((h=o.current)==null?void 0:h.clientWidth))>m},u=ii();f.useEffect(()=>{var d,y;if(a){const m=((y=(d=o.current)==null?void 0:d.querySelector(".rfm-marquee"))==null?void 0:y.clientWidth)/2;s(l(m))}else s(l())},[(c=o.current)==null?void 0:c.width,u]);const p=()=>Ft.map(d=>{if(!n)return null;const y=n[d],m=de(y,void 0,void 0,!0),g=Z(t,d);return e.jsx("div",{className:"AssetPricesPanel__item",children:e.jsxs("a",{href:g.url,target:"_blank",rel:"noreferrer","data-tooltip-id":"Tooltip_Asset","data-tooltip-content":g.name,children:[e.jsx(Q,{isHlight:!0,symbol:d,children:e.jsxs("span",{children:["$",m]})}),e.jsx("img",{className:"icon-url",src:Ar,alt:"External url"})]})},d)});return e.jsxs("div",{className:A("AssetPricesPanel",a&&"marquee_rendered"),ref:i,children:[e.jsx("div",{className:"AssetPricesPanel__icon",ref:r,children:e.jsx("img",{src:va,alt:"Graph icon"})}),e.jsx("div",{className:"AssetPricesPanel__items",ref:o,children:a?e.jsx(bi,{pauseOnHover:!0,autoFill:!0,children:p()}):p()})]})},eo=()=>{const t=ht(),n=[{name:"Option Strategies",to:"/options/builder"},{name:"Option-Chain",to:"/options/option-chain"}];return n.forEach(a=>{t.pathname.endsWith(a.to)&&(a.isActive=!0)}),e.jsxs("div",{className:"OptionsPage",children:[e.jsx(Ia,{}),e.jsx(Rt,{links:n,type:"border"}),e.jsx(la,{})]})};function Vt(t,n={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},a=[st,Pe]){const[s,i]=t,{maxValue:o,placeholder:r,isDisabled:l,isFocused:u}=n,[p,c]=a,[d,y]=f.useState(!1),m=f.useRef(null);return{node:e.jsx("input",{autoFocus:u,type:"text",ref:m,value:s,disabled:l,placeholder:r,onChange:g=>{o&&c(g.target.value)>o?i(p(o)):i(p(g.target.value))},onFocus:()=>{y(!0)},onBlur:()=>{y(!1)}}),hasFocus:d,ref:m}}const Gt=({value:t,setValue:n,maxValue:a,maxValueDisplayed:s,maxLabel:i=void 0,formatInputStringFns:o=[st,Pe],hasError:r,errorMsg:l,isDisabled:u,unitStr:p,placeholder:c,className:d})=>{typeof a=="bigint"&&(a=H(a));const y=Vt([t,n],{maxValue:a,placeholder:c,isDisabled:u},o),m=A(d,y.hasFocus&&"hlight",r&&"error",u&&"disabled");return e.jsxs("div",{className:A("InputFamily Input",m),onClick:()=>{y.ref.current.focus()},children:[y.node,e.jsx("div",{className:"Input__unit",children:p}),!$(a)&&e.jsxs("button",{className:A("InputFamily__max-btn",l&&"invisible"),disabled:u,onClick:g=>{g.stopPropagation(),n(o[0](a))},children:[i??"Max",s?": ":"",s?e.jsx("div",{className:"InputFamily__max-btn-value",children:s}):""]}),l&&e.jsx("div",{className:"InputFamily__error-msg",children:l})]})},ue="Limited",xe="Unlimited",at="Bullish",yn="Bearish",Be="Neutral",le={"Long Call":{stats:{outlooks:[at],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:Ne,isCollection:!0},"Short Call":{stats:{outlooks:[yn],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:se,isCollection:!0},"Covered Call":{stats:{outlooks:[at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:se},"Long Put":{stats:{outlooks:[yn],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:Ne,isCollection:!0},"Short Put":{stats:{outlooks:[at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:se,isCollection:!0},"Long Strangle":{stats:{outlooks:[Be],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:Kn},"Short Strangle":{stats:{outlooks:[Be],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:se},"Covered Strangle":{stats:{outlooks:[Be,at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:se},"Long Straddle":{stats:{outlooks:[Be],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:Kn},"Short Straddle":{stats:{outlooks:[Be],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:se},"Covered Straddle":{stats:{outlooks:[Be,at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:se},"Iron Butterfly":{stats:{outlooks:[Be],profit:ue,loss:ue,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:Et,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[Be],profit:ue,loss:ue,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:Et},"Bull Call Spread":{color:Ne},"Bear Put Spread":{color:se}},to={[at]:Ne,[Be]:Et,[yn]:se},Pa=Object.keys(le).filter(t=>{const n=le[t];return!$(n.key)}),no=Pa.filter(t=>!le[t].isHidden),ao={Hegic:2},Ba={HEAD:"Head",COMMON:"Common",LEG:"Leg"},so=t=>{const{amountStrState:n,strategy:a}=t,[s,i]=n,o=le[a].plural??`${a}s`;return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),e.jsx("div",{className:"BuilderForm__field-body",children:e.jsx(Gt,{value:s,setValue:i,unitStr:o})})]})},io="/sf_draft/assets/strategy-1e15875d.svg",ro=t=>{const{strategyState:n,isDisabled:a}=t,[s,i]=n,o=no.map(r=>({value:r,label:r}));return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[e.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",e.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),e.jsx("div",{className:"BuilderForm__field-body",children:e.jsx(be,{options:o,defaultValue:s,onChange:r=>{i(r.value)},iconNode:e.jsx("img",{src:io,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:a})})]})};const pe=t=>{const{style:n,hasLeftMargin:a}=t;return e.jsx("div",{className:"Spinner",children:e.jsx(Ti,{className:"Spinner__icon",style:{marginLeft:a?7:0,...n}})})},rt=(t,n,a=e.jsx(pe,{}))=>n?a:t,ce=(t,n,a=e.jsx(pe,{}))=>n?a:t(),J=(t="—",n,a)=>e.jsx("span",{className:A("muted",a&&"muted_light"),style:{fontSize:n?13:"inherit"},children:t}),oo=(t,n,a,s,i,o)=>{const r=Le(s,n.decimals),l=je(t,n.symbol);De(t,l.approve,[a,Bt.from(r)],`${n.symbol} approved.`,i,o)},lo=async(t,n,a,s,i)=>{Ce(i);const o=ne(t,n.symbol),r=Le(i,n.decimals);return(await o.allowance(a,s)).toBigInt()>=r},Ke=(t,n)=>{const a=n.symbol??n,s=Ot[a];return Le(t,s)},mt=(t,n)=>{const a=n.symbol??n,s=Ot[a];return ie(t,s)},uo=t=>t.startsWith("W"),Na=(t,n)=>{const a=t.address!==n.address,s=t.isETH!==n.isETH;return a||s},co=t=>{const n={};return t.forEach(a=>n[a.symbol]=a),n},Ge=t=>{const n=Math.abs(t)===1,a=t>0;return{isCall:n,isLong:a}},jn=t=>!!t.find(n=>{const{isLong:a}=Ge(n);return!a}),po=t=>!!t.find(n=>{const{isLong:a}=Ge(n);return a}),yo=t=>!!t.find(n=>n),mo=(t,n,a)=>{let s;const i=`W${a}`,o=n.split(" ")[0],{isCall:r}=Ge(t);return!r||o==="Short"?s=["USDC.e"]:o==="Covered"?s=[i]:o==="Iron"&&(s=["USDC.e",i]),s},fo=t=>{const n=t.includes("Straddle"),a=t==="Iron Butterfly";if(n)return[0,1];if(a)return[1,2]},bo=(t,n)=>{if(!(t!=null&&t[0].market))return;if(t.length>1){const s=t.find(i=>i.market===n);if(s)return s}return t[0]},To=(t,n)=>ne(t,`TxBuilderOpen_${n}`),ho=t=>({Hegic:ne(t,"TxBuilderOpen_Hegic")}),go=(t,n,a)=>{if(!n)return a;let s=0,i=0;return t.map(r=>{const{isLong:l}=Ge(r);return l?n[s++]:a[i++]})},xo=t=>{const n=Object.keys(t);return n?!!n.find(s=>!t[s][0].isAbsent):!1},Ra=(t,n)=>{var s;return(s=t==null?void 0:t.decomposition)!=null&&s.length?!!t.decomposition.find(i=>{if(!i)return;const o=i.marketToken,r=n??t.paymentToken;return!o||!r?!1:Na(o,r)}):!1},re=1e3,Re=60,qe=60,ft=24,vt=t=>t*ft*qe*Re*re,Yt=t=>Math.floor(t/re/Re/qe/ft),kn=t=>Math.floor(t/re),Dn=(t,n)=>{if(t<0)return`0d:0h${n?":0m":""}`;const a=t/re/Re/qe,s=Math.floor(a%ft),i=Math.floor(a/ft),o=Math.floor((a-Math.floor(a))*qe);return n?`${i}d:${s}h:${o}m`:s===0&&i===0?`${o}m`:`${i}d:${s}h`};const _o=t=>{const n=t.reduce((s,i)=>i<s?i:s,t[0]),a=t.reduce((s,i)=>i>s?i:s,t[0]);return{min:n,max:a}},Ct=(t,n,a=1)=>{const s=t,i=n;if(s>i)return a;if(s==i)return 0;if(s<i)return-a},Kt=t=>t.filter(vo),vo=(t,n,a)=>a.indexOf(t)===n,Co=t=>{t.splice(0,t.length)},It=t=>t[t.length-1],Mo=(t,n)=>t.reduce((a,s)=>{const i=it(n-a);return it(n-s)<i?s:a},t[0]),So=t=>{const n=[];return t.forEach(a=>{n.push(...a)}),n},mn=["delta","vega","gamma","theta"],ta=8,Ao=[7,14,30,60,90],Pt=Ao.map(vt),wo=()=>{const{data:t,error:n}=Oe("_useDates",async()=>{let a;try{a=[...jo()]}catch(s){console.log(s)}return a?Kt(a).sort(Ct):null},{refreshInterval:5*Re*re,revalidateOnFocus:!1});return n?(console.log(n),null):t},jo=()=>Pt.map((n,a)=>{const s=new Date(Date.now()+n),i=a===0,o=a===Pt.length-1,r=s.getUTCHours()>=ta,l=s.getUTCDate();return i&&r&&s.setUTCDate(l+1),o&&!r&&s.setUTCDate(l-1),s.setUTCHours(ta),s.setUTCMinutes(0),s.setUTCSeconds(0),s.setUTCMilliseconds(0),s.getTime()}),La=f.createContext(null),ko=({children:t})=>{const n=Do();return e.jsx(La.Provider,{value:n,children:t})},Se=()=>f.useContext(La),Do=()=>{const t=wo(),n=we("chosen-date",null),[a,s]=n;return t&&$(t.find(o=>o===a))&&s(t[0]),{dates:t,chosenDateState:n}},Eo=t=>{const{strategyStructure:n,chosenDateState:a,resetTriggers:s,isDisabled:i,updateUnstableField:o}=t,{userAddress:r}=ee(),[l,u]=a,c=Se().dates??[],d=()=>{u(null)};f.useEffect(()=>{d()},s),f.useEffect(()=>{r&&c.length&&!l&&u(c[0])},[r,c]);const y=(T,b="d MMM")=>{const h=T-Date.now();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"BuilderForm__date-value",children:Ae(T,b)}),e.jsx("div",{className:"BuilderForm__date-period",children:Dn(h)})]})},m=c.map(T=>({value:T,label:y(T)})),g=l&&m.find(T=>T.value===l);return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),e.jsx("div",{className:"BuilderForm__field-body",children:n.map((T,b)=>{const{isCall:h,isLong:v}=Ge(T),C=rt(e.jsx(be,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:i||!r,options:m,value:g,formatOptionLabel:({value:x},{selectValue:j,context:I})=>{var E;if(I==="menu")return y(x);const w=((E=j[0])==null?void 0:E.value)===x?"d MMM hh a":"d MMM";return y(x,w)},onChange:x=>{u(x.value)},iconTextNode:e.jsxs("span",{className:A({positive:v,negative:!v},"block"),style:{width:25},children:[v?"Buy":"Sell",e.jsx("br",{}),h?"Call":"Put"]})},b),$(c),e.jsx(pe,{},b));return o(b,C),C})})]})},En=(t,n,a,s)=>{const[i,o]=a.split(".");let r=t[i],l=n[i];return o&&(r=r&&r[o],l=l&&l[o]),Ct(r,l,s)},Oa=(t,n)=>(a,s)=>En(a,s,t,n),Qt=(t,n,a)=>{if(!t||!Object.keys(t).length)return{...n};if(!n)return;const s={...t};a||(a=Object.keys(t));for(let i=0;i<a.length;i++){const[o,r]=a[i].split("."),l=r?t[o][r]:t[o],u=r?n[o][r]:n[o],p=l+u;r?(s[o]||(s[o]={}),s[o][r]=p):s[o]=p}return s},Io=t=>So(Object.values(t));const zt=(t,n)=>`${t?"Long":"Short"} ${n?"Call":"Put"}`,In=(t,n,a)=>t?a>n:a<n,bt=(t,n,a=ae)=>Sn(t,1+n,a),na=(t,n,a=ae)=>Sn(t,1-n,a),Fa=(t,n,a)=>{if(a===0n)return 0n;const s=_t(n,it(a))*100n,i=oe(-100),o=oe(100);return t===null?s:t?s<i?i:s:s>o?o:s},Ua=(t,n)=>{const a=Qt(t,n);for(const s in a){const i=a[s];a[s]=i?ye(i,3):void 0}return a},$a=(t,n=ae)=>H(t,n,1),Ha=(t,n)=>{const a=()=>{const o=h=>(1+r(h/Math.sqrt(2)))/2,r=h=>{const v=.254829592,C=-.284496736,x=1.421413741,j=-1.453152027,I=1.061405429,R=.3275911,w=Math.sign(h);h=Math.abs(h);const E=1/(1+R*h),k=1-((((I*E+j)*E+x)*E+C)*E+v)*E*Math.exp(-h*h);return w*k},l=(h,v,C,x,j)=>{const I=(Math.log(h/v)+(x+.5*j**2)*C)/(j*Math.sqrt(C)),R=I-j*Math.sqrt(C);return h*o(I)-v*Math.exp(-x*C)*o(R)},u=(h,v,C,x,j)=>{const I=(Math.log(h/v)+(x+.5*j**2)*C)/(j*Math.sqrt(C)),R=I-j*Math.sqrt(C);return v*Math.exp(-x*C)*o(-R)-h*o(-I)},p=(h,v,C,x,j,I)=>{const R=I?l:u;let w=.2,E=.001,k=1;const O=1e-5;let B=R(h,v,C,x,w),L=0;const P=1e3;for(;Math.abs(B-j)>O&&L<P;)B<j?E=w:k=w,w=(E+k)/2,B=R(h,v,C,x,w),L++;return w},c=H(n),d=H(t.strike),y=(t.expiry-Date.now())/re/Re/qe/ft/365,m=H(t.premiumData.inUSDC),g=.01,{isCall:T}=t;return p(c,d,y,g,m,T)},s=o=>`${Math.floor(o*100)}%`,i=a();return{value:i,formatted:s(i)}};function aa(){const{innerWidth:t,innerHeight:n}=window;return{width:t,height:n}}function Po(){const[t,n]=f.useState(aa());return f.useEffect(()=>{function a(){n(aa())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}const Te=(t=768)=>{const{width:n}=Po();return n<t},Bo=({getParentNode:t,getChildNodes:n})=>{const[a,s]=ri(!1),i=A(a&&"expanded"),o=t(i,s),r=n(i);return e.jsxs(e.Fragment,{children:[o,...r]})};const Wa=({children:t,transitionTimeout:n=250,renderHeader:a=({state:s})=>s.isEnter?"Hide":"Show"})=>e.jsx("div",{className:"Accordion",children:e.jsx(hi,{transition:!0,transitionTimeout:n,children:e.jsx(gi,{header:a,children:t})})});const he=({isVertical:t,marginValue:n})=>{const a=t?{marginLeft:n,marginRight:n}:{marginTop:n,marginBottom:n};return e.jsx("div",{className:A("Divider",t&&"_vertical"),style:$(n)?{}:a})};class qa{constructor(n){const{titleData:a,itemsData:s}=n,i=Object.keys(a);this.titleData=a,this.itemsData=s,this.dataKeys=i}}class No extends qa{constructor(n){super(n),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const n=this._getCells(this.titleData,!0);return e.jsxs("tr",{children:[...n]})}getItemsRows(){const n=this.itemsData.map(a=>{const s=this._getItemRow(a);return e.jsx(We.Fragment,{children:s},a.id)});return e.jsx(We.Fragment,{children:n},"rows")}_getCells(n,a){return this.dataKeys.map(s=>{const i=n[s]??J();return a?e.jsx("th",{children:i},s):e.jsx("td",{children:i},s)})}_getItemRow(n){const a=!!n.children,s=this._getCells(n),i=(r,l)=>{const u=[r,n.className];return e.jsxs("tr",{className:A("Table__item",a&&"expandable",u),onClick:l,children:[...s]})};return a?this._getExpandableRow(n,i):i()}_getExpandableRow(n,a){const s=i=>n.children.map(r=>{const l=this._getCells(r);return e.jsxs("tr",{className:A("Table__child-item",i),children:[...l]},r.id)});return e.jsx(Bo,{getParentNode:a,getChildNodes:s},n.id)}}class Ro extends qa{constructor(n){super(n),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(n){const a=n.omittedKeys;return this.dataKeys.map(i=>{const o=n[i];return a&&!!a.find(l=>i===l)||$(o)?null:e.jsxs("div",{className:A("Table__item-row info-row",i),children:[e.jsx("div",{className:"info-row__title",children:this.titleData[i]}),e.jsx("div",{className:"info-row__value",children:o===null?J():o})]})})}_getItem(n){const a=n.className;return e.jsxs("div",{className:A("Table__item App-box",a),children:[this._renderItemRows(n),n.children&&e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx(Wa,{transitionTimeout:500,renderHeader:({state:s})=>`${s.isEnter?"Hide":"Show"} full strategy`,children:n.children.map(s=>e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx("div",{className:"Table__child-item",children:this._renderItemRows(s)})]}))})]})]})}}const Va=({structureData:t,className:n,children:a})=>{const s=Te(576),i=l=>{if(!l){const u=new No(t),{getTitleRow:p,getItemsRows:c}=u;l=[e.jsx("thead",{children:p()},"head"),e.jsx("tbody",{children:c()},"body")]}return e.jsx("div",{className:"Table__desktop",children:e.jsx("table",{children:l})})},o=()=>{const u=new Ro(t).getItems();return e.jsx("div",{className:"Table__mobile",children:u})},r=()=>s?o():i();return e.jsx("div",{className:A("Table",n),children:a!=null&&a.length?i(a):r()})};const Ga="/sf_draft/assets/direction_up-3632497a.svg",Ya="/sf_draft/assets/direction_down-6f961d86.svg",Lo="/sf_draft/assets/Hegic-a7e6545a.svg",Oo="/sf_draft/assets/Hegic_circled-26df614a.svg",Fo="/sf_draft/assets/Hegic_circled-light-9256df54.svg",Xt={Hegic:{common:Lo,circled:Oo,circledLight:Fo}},Ka=({strikeData:t,priceNode:n,isPriceHlight:a,isSmall:s})=>{const{market:i,isCall:o,isLong:r}=t,l=Xt[i].circled,u=r?Ga:Ya;return e.jsxs("div",{className:A("Brief","PriceBrief",s&&"small"),children:[e.jsxs("div",{className:"PriceBrief__icons Brief__icons",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:l,alt:`${i}`})}),e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:u,alt:`${r?"Long":"Short"}`})})]}),e.jsx("div",{className:A("PriceBrief__info-card",{positive:r,negative:!r}),children:o?"Call":"Put"}),e.jsx("div",{className:A("PriceBrief__price",a&&"hlight"),children:n})]})},Uo=t=>{const{id:n,amountStr:a,strikeMarketsDataArr:s,chosenStrikeData:i,setChosenStrikeData:o,isOpen:r,close:l}=t,[u,p]=f.useState([]),c=()=>{const b=[];s.forEach((h,v)=>{const C=oe(Pe(a));h.utils.calcPremium(C).then(x=>{h.premiumData=x,b[v]=x,p([...b])})})};if(f.useEffect(()=>{p([]),s&&c()},[s,a]),!s)return null;const d=23,m=80-d,T=200-d;return e.jsx("div",{className:A("StrikeInfoBox",r&&"open"),style:{zIndex:9-n*2},children:e.jsxs(Va,{onClick:b=>b.stopPropagation(),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("div",{style:{minWidth:T},children:"Market"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Source"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Delta"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Vega"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Gamma"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Theta"})}),e.jsx("th",{children:e.jsx("div",{style:{width:m},children:"Rho"})})]})}),e.jsx("tbody",{children:s.sort(Oa("premiumData.inUSDC")).map((b,h)=>{const{greeks:v,source:C}=b,x=u[h],j=!x||x.isDisabled,I=b===i;return e.jsxs("tr",{className:A("StrikeInfoBox__strike-option",j&&"disabled",I&&"chosen"),children:[e.jsxs("td",{children:[e.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{o(b),l()},disabled:j}),e.jsx(Ka,{strikeData:b,priceNode:ce(()=>x===null?J("No liquidity",!0):`$${de(x.inUSDC)}`,$(x)),isPriceHlight:!0})]}),e.jsx("td",{children:C??"AMM"}),Object.keys(v).map(R=>{const w=v[R];return e.jsx("td",{children:w??J()},R)})]},b.market)})})]})})};const ze=({fontSize:t,children:n})=>e.jsx("div",{className:"InnerWarning",style:{fontSize:t??""},children:n});xi();const Qa=({id:t,className:n,isUnited:a,spaceBetween:s,isDraggable:i,breakpoints:o,handleInit:r,slideClassName:l,children:u})=>{const p=f.useRef(null),c=`${a?`.${n}`:`#${t}`}`,d={spaceBetween:s,allowTouchMove:i,breakpoints:o,navigation:{enabled:!0,prevEl:`${c} .Carousel__nav-btn_prev`,nextEl:`${c} .Carousel__nav-btn_next`},on:{init:y=>{y.el.style.overflow="clip visible",r&&r(y)}}};return f.useEffect(()=>{const y=p.current;y&&(Object.assign(y,d),y.initialize())},[p,d]),e.jsxs("div",{className:A("Carousel",n),id:t,children:[e.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),e.jsx("swiper-container",{init:!1,ref:p,children:u==null?void 0:u.map((y,m)=>e.jsx("swiper-slide",{class:l,children:y},m))}),e.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const $o=({children:t,slideType:n="lg"})=>e.jsx(Qa,{breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:6,grid:{fill:"row",rows:2}},520:{slidesPerView:5,grid:{fill:"row",rows:2}},380:{slidesPerView:4,grid:{fill:"row",rows:2}},0:{slidesPerView:3,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${n}`,children:t}),Pn=t=>Object.keys(t).map(BigInt),Ho=t=>{const n={},a=t.map(i=>i.strike);return Kt(a).forEach(i=>{const o=t.filter(r=>r.strike===i);n[i]=o}),n},Wo=t=>{const n=[];return t.forEach(s=>{const i=Pn(s);n.push(...i)}),Kt(n)},qo=t=>{const n=Wo(t);return t.map(s=>{const i=Pn(s),o={...s};return n.forEach(r=>{i.indexOf(r)===-1&&(o[r]=[{strike:r,isAbsent:!0}])}),o})};const Vo=t=>{const{currentPrice:n,isFirst:a}=t;return e.jsx("div",{className:A("StrikeCurrentPriceItem","StrikeChooser__item",a&&"StrikeCurrentPriceItem_first"),children:e.jsxs("span",{children:["$",Je(n)]})})};const Go="/sf_draft/assets/cross_grey-42dbd9c5.svg",Yo=t=>{const{isITM:n}=t;return e.jsx("div",{className:A("StrikeAbsentItem","StrikeChooser__item",n&&"StrikeChooser__item_ITM"),children:e.jsx("img",{src:Go,alt:"Absent"})})},Ko=({className:t,id:n,isAutoSelectEnabled:a,structureKey:s,asset:i,amountStr:o,strikesData:r,chosenStrikeData:l,setChosenStrikeData:u})=>{const{isConnected:p}=ee(),c=Ve(i),d=H(c),y=oe(ye(d,d<10?2:0)),m=n===0,g=Te(),[T,b]=f.useState(null),h=B=>{const L={};for(const P in B){const _=B[P][0],{isCurrentPrice:S,isAbsent:D}=_;S&&D||(L[P]=B[P])}return L},v=()=>{const B=h(r);let L;for(const P in r){const M=r[P][0];if(M.isCurrentPrice||y===M.strike){M.isCurrentPrice=!0,L=M;break}}return L||(B[y]=[{strike:y,isCurrentPrice:!0,isAbsent:!0}]),B},C=()=>{if(r){if(!xo(r))return{strikes:[],dataArr:[]};let B=v();const L=Pn(B).sort(Ct),P=Object.values(B).sort((M,_)=>{const S=M[0],D=_[0];return En(S,D,"strike")});return{strikes:L,dataArr:P}}return{}},{strikes:x,dataArr:j}=C(),I=!!(x!=null&&x.length);f.useEffect(()=>{if(a&&r&&!l){const B=j.find(P=>!P[0].isAbsent);if(!B)return;const L=B[0];u(L)}},[r]);const{openPopup:R,closePopup:w,isOpen:E}=pa(()=>b(null)),k=()=>{const B=H(j[0][0].strike);let L;return B<10**2?L="xs":B<10**3?L="sm":B<10**4?L="md":B<10**5?L="lg":L="xl",e.jsx($o,{slideType:L,children:x.map((P,M)=>{const _=j[M],S=_[0],{isCurrentPrice:D,isAbsent:F}=S;if(D&&F)return e.jsx(Vo,{currentPrice:P,isFirst:m},"current_price");const{isCall:W}=Ge(s),Y=In(W,P,y);if(F)return e.jsx(Yo,{isITM:Y},M);const N=l&&l.strike===P,q=N&&l.market,V=T===_;return e.jsxs(z,{className:A("StrikeChooser__item",Y&&"StrikeChooser__item_ITM",N&&"chosen",V&&"open",D&&A("StrikeCurrentPriceItem",m&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:U=>{E&&U.stopPropagation(),b(_),R()},children:[N&&e.jsx("div",{className:"StrikeChooser__item-market",children:e.jsx("img",{src:Xt[q].circledLight,alt:`${q} icon`})}),e.jsxs("span",{children:["$",Je(P,0)]})]},P)})})},O=()=>r?I?e.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-n*2},children:k()}):e.jsx(ze,{children:"No Liquidity"}):e.jsxs(ze,{children:[p?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return e.jsxs("div",{className:A("StrikeChooser",t,g&&!r&&"hidden"),children:[O(),e.jsx(Uo,{id:n,amountStr:o,strikeMarketsDataArr:T,chosenStrikeData:l,setChosenStrikeData:u,isOpen:E,close:w})]})},Qo=()=>f.useContext(za),zo=()=>{const[t,n]=f.useReducer(Xo,{});return[t,n]},Xo=(t,n)=>{switch(n.type){case"added":{const{asset:a,dateMs:s,strikesForDate:i}=n;return t[a]||(t[a]={}),t[a][s]||(t[a][s]=i),{...t}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},za=f.createContext(null),Xa=f.createContext(null),Zo=({children:t})=>{const[n,a]=zo();return e.jsx(za.Provider,{value:n,children:e.jsx(Xa.Provider,{value:a,children:t})})},Jo={[ve]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},el={[ve]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},tl=t=>{const n=Jo[t];if(!n)throw new Error(`No Hegic strategies found for chainId ${t}`);return n},nl=(t,n)=>{const a=tl(t),s=Yt(n);if(s<7||s>90)return;let i;return s<14?i=a.short:s<30?i=a.medShort:s<60?i=a.medLong:s<=90&&(i=a.long),i},al=(t,n)=>{const a=el[t];if(!a)throw new Error(`No Hegic Price Calculator address found for chainId ${t}`);const s=a[n];if(!s)throw new Error(`No Hegic Price Calculator address found for strategy key ${n}`);return s},sl=(t,n,a)=>{const s=wn(t,`Hegic_${a}`);return new Nt(n,s,qt(t))},il=(t,n)=>{const a=al(t,n);return sl(t,a,"PriceCalculator")},Za=.005*10**5,Bn=async(t,n,a,s)=>{const i=Yn(t,n),o=Yn(t,a),r=Le(s,i.decimals);return n===a||r===0n||i.isStable&&o.isStable?new Promise(p=>{p(s)}):await ne(t,"UniswapQuoter").callStatic.quoteExactInput(Ja(n,a),r).then(p=>{const c=p.toBigInt();return ie(c,o.decimals)}).catch(p=>{console.log(`Swapping ${i.symbol} to ${o.symbol} error!

`,p)})},Nn=(t,n,a)=>{const s=Cn(t);return Bn(t,n,s,a)},rl=(t,n,a)=>{const s=Cn(t);return Bn(t,s,n,a)},Ja=(t,n)=>_i.solidityPack(["address","uint24","address"],[t,Za,n]);class ol{constructor(n,a){this.getMarketToken=s=>Z(s,a),this.getId=(s,i)=>{i=i.toLowerCase();const{strike:o,isCall:r,isLong:l,expiry:u}=s,p=H(BigInt(o)),c=Ae(Number(u),"dd-MMM-yy");return`${n}_${p}_${l?"LONG":"SHORT"}_${r?"CALL":"PUT"}_${c}_${i}`}}}class ll extends ol{constructor(){super("Hegic","USDC.e")}calcDeltaByAssetPrice(n,a){const{isCall:s,strike:i,amount:o}=n,r=H(o);return s?i<a?r:0:i>a?-r:0}calcDeltaByStrikeScale(n,a){const{isCall:s,amount:i}=n;return s?Number(a)<100?i:0:Number(a)>100?-i:0}}const es=new ll,ts={PROTOCOL_NAME:"Hegic"},ul=async(t,n,a)=>{if(!cl(n))return[];const{assetPrice:i}=a,{expiry:o}=n,r=o-Date.now();n={...n,period:r};const l=nl(t,r);return l?await pl(t,l,n,i):[]},cl=t=>{const{isLong:n}=t;if(n)return!0},pl=async(t,n,a,s)=>{const{amount:i,asset:o,isCall:r}=a,l=[],u=Object.keys(n);for(let c=0;c<u.length;c++){const d=u[c],y=n[d],m={strategyKey:d,strategyAddress:y},g=dl(d,o,r),T=await yl(t,y,a),b=T>=i;if(!g||!b)continue;const h=ml(t,m,a,s),v=h.utils.calcPremium(i).then(C=>({...h,liquidity:T,premiumData:C})).catch();l.push(v)}return await Promise.all(l).then(hl)},dl=(t,n,a)=>{const[s,,i]=t.split("_");return!(s.includes("SPREAD")||a!==(s==="CALL")||i!==n)},yl=async(t,n,a)=>{const{asset:s,period:i}=a,o=new Nt(n,wn(t,"Hegic_Strategy"),qt(t)),r=kn(i);let l=0n;try{const u=(await o.getAvailableContracts(r,[])).toBigInt();l=ie(u,Ot[s])}catch{}return l},ml=(t,n,a,s)=>{const{isCall:i,asset:o,expiry:r}=a,{strategyKey:l}=n,[,u]=l.split("_"),p=Tl(u,s),c=fl(t,n,a),d=es.calcDeltaByStrikeScale(a,u);return{market:"Hegic",protocolName:ts.PROTOCOL_NAME,asset:o,strike:Cr(p),expiry:r,isCurrentPrice:u==="100",isCall:i,isLong:!0,greeks:{delta:d,vega:void 0,gamma:void 0,theta:void 0,rho:void 0},utils:c}},fl=(t,n,a)=>{const{strategyKey:s,strategyAddress:i}=n,{asset:o,period:r}=a;return{calcPremium:async p=>bl(t,s,a,p),getBuilderParams:async(p,c,d)=>{const y=Ke(p,o),m=c.premiumData.inMarketToken,g=vr(m,d);return To(t,ts.PROTOCOL_NAME).encodeFromHegic(i,y,kn(r),g,[])}}},bl=async(t,n,a,s)=>{const{asset:i,period:o}=a,r=es.getMarketToken(t),l=Ke(s,i),u=il(t,n),p=kn(o),c=await u.calculatePremium(p,l,0).then(BigInt),d=ie(c,r.decimals);return{inUSDC:await Nn(t,r.address,d),inMarketToken:d,marketToken:r}},Tl=(t,n)=>{const a=H(n),s=Math.floor(a*(t/100));return oe(s)},hl=t=>t.filter(n=>n&&n.premiumData),gl=async(t,n,a,s)=>{const i=a%n;if(s+1>a-i&&(n=i),t.length>=n){const r=await Promise.all(t);return Co(t),r}else return[]},ns=t=>t.filter(n=>n.status==="fulfilled").map(n=>n.value),xl=async(t,n)=>{const a={address:t.adress,topics:[yi("Transfer(address,address,uint256)"),null,mi(n,32)]};return await t.queryFilter(a)},Rn=(t,n)=>{var d;const a=Qo(),s=f.useContext(Xa),i=G(),{userAddress:o}=ee(),r=Ve(t),[l,u]=f.useState((d=a==null?void 0:a[t])==null?void 0:d[n]),{data:p,error:c}=Oe(n&&r&&[a,n,t,r,"fetchStrikesForDate"],async()=>await _l(i,t,n,{userAddress:o,assetPrice:r}),{refreshInterval:300*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var y;u((y=a==null?void 0:a[t])==null?void 0:y[n])},[t,n]),f.useEffect(()=>{p&&(u(p),s({type:"added",asset:t,dateMs:n,strikesForDate:p}))},[p]),c?(console.log(c),null):l},_l=async(t,n,a,s)=>{const i={asset:n,expiry:a,amount:oe(1)},o=[{...i,isCall:!0,isLong:!0,strategy:"Long Call"},{...i,isCall:!1,isLong:!0,strategy:"Long Put"},{...i,isCall:!0,isLong:!1,strategy:"Short Call"},{...i,isCall:!1,isLong:!1,strategy:"Short Put"}],r={},l=[];return o.forEach(p=>{const c=Promise.allSettled([ul(t,p,s)]).then(ns).then(d=>{const y={strategy:p.strategy,strikes:[]};return d.forEach(m=>{y.strikes.push(...m)}),y}).catch(console.log);l.push(c)}),(await Promise.all(l)).forEach(p=>{r[p.strategy]=Ho(p.strikes)}),r},vl=t=>{const{asset:n,strategy:a,amountStr:s,chosenDate:i,strategyStructure:o,hasSell:r,strikesDataArrState:l,chosenStrikesState:u,areStrikesLoadingState:p,updateTriggers:c,resetTriggers:d,updateUnstableField:y}=t,[m,g]=l,[T,b]=u,[h,v]=p,C=Rn(n,i),x=()=>{if(v(!0),j(),o.forEach((R,w)=>{m[w]=[];const{isCall:E,isLong:k}=Ge(R),O=zt(k,E);C!=null&&C[O]&&(m[w]={...C[O]})}),C){const R=qo(m);g([...R]),v(!1)}},j=()=>{b([])},I=()=>{g([])};return f.useEffect(()=>{j(),I()},d),f.useEffect(()=>{i&&x()},[...c,C]),e.jsxs("div",{className:A("BuilderForm__field","BuilderForm__field_strike",!r&&"col-span-2"),children:[e.jsx("div",{className:"BuilderForm__field-header",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),e.jsx("div",{className:"BuilderForm__field-body",children:o.map((R,w)=>{const E=fo(a),k=E&&E.indexOf(w)!==-1,O=rt(e.jsx(Ko,{id:w,isAutoSelectEnabled:o.length===1&&!h,structureKey:R,asset:n,amountStr:s,strikesData:m[w],chosenStrikeData:T[w],setChosenStrikeData:B=>{if(T[w]=B,k){const L=H(B.strike),P=B.market;E.filter(_=>_!==w).forEach(_=>{const S=bo(m[_][L],P);T[_]=S})}b([...T])}},w),h,e.jsx(pe,{},w));return y(w,O),O})})]})};const Cl=t=>{const{liqPrice:n,isLiqPriceLoading:a,isInLastHalf:s}=t,i=e.jsx("span",{className:"muted_light",children:"..."}),o=e.jsx("span",{className:"muted_light",children:"—"}),r=()=>`$${de(n)}`;return e.jsxs("div",{className:A("CollateralLiqPrice",s&&"CollateralLiqPrice_down"),children:["Liq. Price:",e.jsxs("span",{className:"CollateralLiqPrice__val",children:[a&&i,!a&&(n?r():o)]})]})};const Ml=({min:t,max:n,collateralData:a,handleClick:s})=>e.jsx("div",{className:"CollateralRangeBtns",children:[t,n].map((i,o)=>{const r=a.isBase,l=_e(ye(H(i),He)),u=fe(i,a.marketToken.isStable),p=o===0;return e.jsxs(We.Fragment,{children:[e.jsxs("button",{onClick:()=>s(l),children:[r?"":"$",u]},o),p?"—":""]},o)})});const Sl=({collateralData:t,collateralAmountStr:n,onChange:a})=>{const{isBase:s}=t,i=s?1:0,o=H(t.min,ae,i),r=H(t.max,ae,i),l=Pe(n),u=s?.01:1;return e.jsx("div",{className:"CollateralSlider",children:e.jsx(vi,{defaultValue:0,value:l,min:o,max:r,step:u,onChange:a})})},Al=t=>{const{isInLastHalf:n,getCollateralData:a,collateralData:s,setCollateralData:i,collateralTokens:o,chosenStrike:r,updateTriggers:l,resetTriggers:u}=t,[p,c]=f.useState(""),[d,y]=f.useState(o[0]),[m,g]=f.useState(!1),[T,b]=f.useState(!1),h=()=>{c(""),y(o[0]),i(null)},v=()=>{c(""),i(null)};f.useEffect(()=>{h()},u),f.useEffect(()=>{r&&(g(!0),v(),C(!0))},[r,d]);const C=w=>{let E;if(!w&&p){const k=Pe(p);E=oe(k)}a(d,E).then(k=>{i(k),g(!1),b(!1)})};ke(()=>{m||(b(!0),C())},Ee,[p,...l]);const x=Vt([p,c],{placeholder:"0"}),j=o.map(w=>({value:w,label:e.jsx(Q,{symbol:w,isHlight:!0,children:w})})),I=A(x.hasFocus&&"hlight"),R=()=>e.jsxs(e.Fragment,{children:[s&&e.jsx(Cl,{liqPrice:s.liquidationPrice,isLiqPriceLoading:T,isInLastHalf:n}),ce(()=>e.jsxs("div",{className:"CollateralChooser__input-container",children:[e.jsx("div",{className:"CollateralChooser__input",children:x.node}),s&&e.jsx(Ml,{min:s.min,max:s.max,collateralData:s,handleClick:w=>{c(w)}}),s&&e.jsx(Sl,{collateralData:s,collateralAmountStr:p,onChange:w=>{const E=st(w);c(E)}})]}),m),e.jsx("div",{className:"CollateralChooser__token-selector",children:e.jsx(be,{options:j,defaultValue:d,isDisabled:j.length===1,onChange:w=>{y(w.value)}},`CollateralChooser__token-selector_${d}`)})]});return e.jsx("div",{className:A("CollateralChooser",I),children:r?r.isComingSoon?e.jsxs(ze,{children:[r.market," is coming soon"]}):R():e.jsx(ze,{children:"Strike required"})})},wl=t=>{const{asset:n,amountStr:a,strategy:s,strategyStructure:i,hasSell:o,chosenStrikes:r,collateralDataArrState:l,updateTriggers:u,resetTriggers:p,updateUnstableField:c}=t,[d,y]=l,m=()=>{y([])};f.useEffect(()=>{m()},p);const g=(b,h)=>{d[b]=h,y([...d])},T=(b,h,v)=>{const C=r[b];if(!C||!C.utils.getCollateralData)return new Promise(()=>{});const x=oe(Pe(a)),j=uo(h),I=Bt.from(v??0);return C.utils.getCollateralData(x,{isBaseCollateral:j,setToCollateral:I})};return o?e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[e.jsx("div",{className:"BuilderForm__field-header",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),e.jsx("div",{className:"BuilderForm__field-body",children:i.map((b,h)=>{const{isLong:v}=Ge(b);if(v)return e.jsx("div",{className:"BuilderForm__field-empty-row",children:J()},h);const C=r[h],x=mo(b,s,n),j=h>(i.length-1)/2,I=e.jsx(Al,{isInLastHalf:j,collateralTokens:x,collateralData:d[h],setCollateralData:R=>g(h,R),getCollateralData:(R,w)=>T(h,R,w),chosenStrike:C,updateTriggers:u,resetTriggers:p},h);return c(h,I),I})})]}):null};const jl=t=>{const{strategyStructure:n,unstableFields:a,chosenStrikes:s,strikesDataArr:i,areStrikesLoading:o}=t;return Te()?e.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),e.jsx("div",{className:"BuilderForm__field-body",children:n.map((l,u)=>{const p=o||!!i[u],c=!!s[u],d=!!a.collateral[u],y=u===n.length-1;return e.jsxs("div",{className:"BuilderMobileContainer__item",children:[e.jsx("div",{className:A("BuilderMobileContainer__item-date",p&&"mb-7"),children:a.date[u]}),e.jsx("div",{className:"BuilderMobileContainer__item-strike",children:a.strike[u]}),d&&c&&e.jsxs("div",{className:A("BuilderMobileContainer__item-collateral"),children:[e.jsx("div",{className:"BuilderMobileContainer__item-title",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),a.collateral[u]]}),p&&!y&&e.jsx(he,{})]},u)})})]}):null};const Zt=({title:t,className:n,children:a})=>e.jsxs("div",{className:A("OptionController",n),children:[e.jsx("div",{className:"OptionController__title",children:t}),e.jsx("div",{className:"OptionController__content",children:a})]}),Ln=({asset:t,setAsset:n,isDisabled:a})=>{const s=Ft.map(i=>({value:i,label:e.jsx(Q,{symbol:i,isHlight:!0,children:i})}));return e.jsx(Zt,{className:"AssetController",title:"Asset",children:e.jsx(be,{options:s,defaultValue:t,isDisabled:a,onChange:i=>{n(i.value)}})})},kl=t=>{const{assetState:n,strategyState:a,amountStrState:s,chosenDateState:i,strikesDataArrState:o,chosenStrikesState:r,collateralDataArrState:l}=t,[u,p]=n,[c]=a,[d]=s,[y]=i,m=le[c].structure,g=jn(m),T=f.useState(!1),[b]=T,[h]=r,[v]=o,C={strike:[y],collateral:[d]},x={date:[c],strike:[u,c,y],collateral:[u,c,y],unstableFields:[c]},[j,I]=f.useState({date:[],strike:[],collateral:[]}),R=(w,E,k)=>{j[w][E]=k};return f.useEffect(()=>{I({date:[],strike:[],collateral:[]})},x.unstableFields),e.jsxs("div",{className:"BuilderForm__fields",children:[e.jsx(Ln,{asset:u,setAsset:p,isDisabled:b}),e.jsx(ro,{strategyState:a,isDisabled:b}),e.jsx(so,{amountStrState:s,strategy:c}),e.jsx(Eo,{strategyStructure:m,chosenDateState:i,updateTriggers:C.date,resetTriggers:x.date,isDisabled:b,updateUnstableField:(w,E)=>{R("date",w,E)}}),e.jsx(vl,{asset:u,strategy:c,amountStr:d,chosenDate:y,strategyStructure:m,hasSell:g,strikesDataArrState:o,chosenStrikesState:r,areStrikesLoadingState:T,updateTriggers:C.strike,resetTriggers:x.strike,updateUnstableField:(w,E)=>{R("strike",w,E)}}),e.jsx(wl,{asset:u,strategy:c,amountStr:d,strategyStructure:m,hasSell:g,chosenStrikes:h,collateralDataArrState:l,updateTriggers:C.collateral,resetTriggers:x.collateral,updateUnstableField:(w,E)=>{R("collateral",w,E)}}),e.jsx(jl,{strategyStructure:m,unstableFields:j,chosenStrikes:h,strikesDataArr:v,areStrikesLoading:b})]})};const Dl=({strategy:t})=>e.jsxs("div",{className:"BuilderTooltips",children:[e.jsx(El,{}),e.jsx(Il,{strategy:t}),e.jsx(Pl,{}),e.jsx(Bl,{}),e.jsx(Nl,{}),e.jsx(Rl,{}),e.jsx(Ll,{})]}),El=()=>e.jsxs(te,{id:"BuilderForm_StrikeTooltip",children:[e.jsx("h6",{children:"Hegic Options (American options)"}),e.jsxs("p",{className:"my-5",children:["They require manual exercise before ",e.jsx("br",{}),"the expiration date. ",e.jsx("br",{}),"There are no secondary markets; out-",e.jsx("br",{}),"of-the-money options can't be sold."]})]}),Il=({strategy:t})=>{const n=le[t],{outlooks:a,profit:s,loss:i,description:o}=n.stats;return e.jsxs(te,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[e.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[e.jsx("h2",{className:"WhenPurchaseTooltip__title",children:t}),e.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:a.map(r=>{const l=to[r];return e.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:l},children:r},r)})})]}),e.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[e.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),e.jsx("p",{className:"WhenPurchaseTooltip__description",children:o}),e.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[s,i].map((r,l)=>{const u=l===0?"Profit":"Loss";return e.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[e.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:u}),e.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:r})]},`${u}_${r}`)})})]})]})},Pl=()=>e.jsxs(te,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",e.jsx("br",{}),"you’re setting aside ",e.jsx("br",{}),"as collateral for selling options"]}),Bl=()=>e.jsxs(te,{id:"Builder_PremiumTooltip",children:[e.jsx("h6",{children:"Negative Premium"}),e.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",e.jsx("br",{}),"have paid as an option buyer."]}),e.jsx("h6",{children:"Positive Premium"}),e.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",e.jsx("br",{}),"have received as an option seller."]})]}),Nl=()=>e.jsxs(te,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",e.jsx("br",{}),"you’ll pay for buying options. ",e.jsx("br",{}),"If the option price rises ",e.jsx("br",{}),"beyond this, your transaction ",e.jsx("br",{}),"will be reverted."]}),Rl=()=>e.jsxs(te,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",e.jsx("br",{}),"assured to receive when ",e.jsx("br",{}),"selling options. If the option ",e.jsx("br",{}),"price drops beyond this point, ",e.jsx("br",{}),"your transaction will ",e.jsx("br",{}),"be reverted."]}),Ll=()=>e.jsxs(te,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",e.jsx("br",{}),"is too small. This may result in instant ",e.jsx("br",{}),"liquidation of the position."]});const tt=(t,n=2,a,s)=>{const i=H(t,a);return wt(i,n,s)},Ol=(t,n=2,a)=>tt(t,n,a,!0),wt=(t,n=2,a)=>{const s=a?"+":"",i=t<0?"–":t>0?s:"";return t=Math.abs(t),t=ye(t,n),t=Aa(t,n),`${i}$${_e(t)}`},Fl=({strategy:t,amountStr:n,chosenStrikesState:a,collateralDataArrState:s,youPayState:i,swapSlippageState:o,shouldSwapState:r,setIsCostLoading:l})=>{const u=le[t].structure,p=jn(u),c=po(u),[d,y]=i,[m,g]=a,[T,b]=s,[h]=o,[v,C]=r,[x,j]=f.useState(null),[I,R]=f.useState(null),[w,E]=f.useState(null),[k,O]=f.useState(null),B=yo(m),L=!!T.find(N=>N),P=N=>{m[N]=null,T[N]=null,g([...m]),b([...T])};f.useEffect(()=>{!!(d!=null&&d.inPaymentToken)&&C(Ra(d)),l(!1)},[d]);const M={sum:N=>N.reduce((V,U,ge)=>{if(ge===0)return{inUSDC:U.inUSDC,decomposition:[U]};const Wn=V.decomposition;return Wn[ge]={marketToken:U.marketToken,inMarketToken:U.inMarketToken,inUSDC:U.inUSDC},{inUSDC:V.inUSDC+U.inUSDC,decomposition:Wn}},N[0]),separateBuyFromSell:N=>{const q=[],V=[];return N.forEach(U=>{U&&(U.isLong?q.push(U):V.push(U))}),{buyCosts:q,sellCosts:V}},getArgsForHandler:N=>{const{reset:q}=_[N],{isAllowed:V,update:U}=D[N];return[q,V,U]}},_={collateral:{reset:()=>{O({inUSDC:0n})}},trade:{reset:()=>{j(null),R(null),E(null)}},youPay:{reset:()=>{y(null)}}},S={collateral:{calc:()=>{const N=T.filter(V=>V);return M.sum(N)}},trade:{calc:()=>{if(!n)return;const N=[],q=oe(Pe(n));return m.forEach((V,U)=>{V&&N.push(V.utils.calcPremium(q).then(ge=>ge?(V.premiumData=ge,V.amount=q,ge.isLong=V.isLong,ge):(P(U),null)))}),Promise.all(N).then(V=>{const{buyCosts:U,sellCosts:ge}=M.separateBuyFromSell(V);return{maxCost:M.sum(U),minReceived:M.sum(ge)}})}},youPay:{calc:()=>p?(()=>{if(k!=null&&k.inUSDC)return{inUSDC:k.inUSDC+((x==null?void 0:x.inUSDC)??0n),decomposition:go(u,x==null?void 0:x.decomposition,k.decomposition),shouldSwap:v}})():(()=>({inUSDC:x.inUSDC,decomposition:x.decomposition}))()}},D={collateral:{triggers:[T],isAllowed:L&&B,update:()=>{const N=S.collateral.calc();O(N)}},trade:{triggers:[m],debouncedTriggers:[n],isAllowed:B,update:()=>{S.trade.calc().then(N=>{const{maxCost:q,minReceived:V}=N;j(q),R(V);const U={inUSDC:((V==null?void 0:V.inUSDC)??0n)-((q==null?void 0:q.inUSDC)??0n)};E(U)})}},youPay:{triggers:[w,k,h],isAllowed:!!(p?w!=null&&w.inUSDC&&(k!=null&&k.inUSDC):w!=null&&w.inUSDC),update:()=>{const N=S.youPay.calc();y(N)}}},F=(N,q,V)=>{N(),q&&(l(!0),V())};Object.keys(D).forEach(N=>{const q=()=>{F(...M.getArgsForHandler(N))},V=[...D[N].triggers],U=D[N].debouncedTriggers&&[...D[N].debouncedTriggers];U&&ke(q,Ee,U),f.useEffect(q,V)});const Y=()=>{const N=[];return c&&N.push({name:"Max. Cost",value:x==null?void 0:x.inUSDC}),p&&N.push({name:"Min. Received",value:I==null?void 0:I.inUSDC},{name:"Collateral",value:k==null?void 0:k.inUSDC}),N};return e.jsx("div",{className:A("BuilderCost",p&&"has-sell"),children:e.jsx(te,{id:"BuilderForm_YouPayTooltip",className:"YouPayTooltip",place:"bottom-end",children:Y().map(N=>e.jsxs("div",{className:"YouPayTooltip__item",children:[e.jsx("div",{className:"YouPayTooltip__item-name",children:N.name}),e.jsx("div",{className:"YouPayTooltip__item-value",children:N.value?tt(N.value):J()})]},N.name))})})};const Ul=({id:t,decompositionArr:n,...a})=>e.jsx(te,{className:"TooltipDecomposition",id:t,place:"bottom-end",...a,children:n.map((s,i)=>{const o=i===n.length-1;return e.jsxs(We.Fragment,{children:[e.jsxs("div",{className:"TooltipDecomposition__item",children:[e.jsx("div",{className:"TooltipDecomposition__item-name",children:s.nameNode}),e.jsx("div",{className:"TooltipDecomposition__item-value",children:s.valueNode})]}),!o&&e.jsx(he,{})]},i)})}),Jt=t=>t.charAt(0).toUpperCase()+t.slice(1),$l=t=>t[t.length-1],Hl=({decompositionData:t})=>e.jsx("div",{className:"GreeksDecompositionTooltips",children:mn.map(n=>{const a=t[n];if(!a||!a.length)return null;const i=`BuilderForm_${Jt(n)}DecompositionTooltip`;return e.jsx(Ul,{id:i,decompositionArr:a},i)})});const as="/sf_draft/assets/pen-7561a00e.svg",Wl="/sf_draft/assets/confirm-d9cebec0.svg",On=({title:t="Slippage",slippage:n,setSlippage:a})=>{var T;const s=b=>`${ye(b*100,6)}`,[i,o]=f.useState(s(n)),[r,l]=f.useState(!1),{node:u,ref:p,hasFocus:c}=Vt([i,o],{maxValue:100}),d=()=>{const b=s(Ze);o(b)},y=()=>{const b=Number(i)/100;a(b)},m=()=>{const b=p.current,h=b.value.includes(".");let v=(b.value.length+1)*8.5;h&&(v-=4),b.style.width=v+"px"},g=()=>{(!i||Number(i)===0)&&d(),y(),r||(l(!0),setTimeout(()=>{l(!1)},200))};return f.useEffect(()=>{m()},[i]),f.useEffect(()=>{c||g()},[c]),(T=p.current)==null||T.addEventListener("keyup",b=>{b.keyCode===13&&c&&p.current.blur()}),e.jsxs("div",{className:"SlippageInput",onClick:()=>{var b;r||(b=p.current)==null||b.focus()},children:[e.jsx("div",{className:"SlippageInput__title",children:t}),e.jsxs("div",{className:"SlippageInput__content",children:[e.jsxs("div",{className:A("SlippageInput__input-container",c&&"focused"),children:[u,e.jsx("span",{className:"SlippageInput__unit",children:"%"})]}),e.jsx("button",{className:"SlippageInput__btn",children:e.jsx("img",{src:c?Wl:as,alt:"Edit slippage"})})]})]})},ql=({swapSlippageState:t})=>{const[n,a]=t,s=Te();return e.jsx("div",{className:"SwapSlippageField",children:e.jsx(On,{title:s?"Uniswap Slippage":"Slippage",slippage:n,setSlippage:a})})},Vl=({chosenStrikes:t,swapSlippageState:n,shouldSwapState:a})=>{const[s]=a,i={};mn.forEach(c=>{i[c]=[]});const o=(c,d)=>{const y=c.greeks[d],m=$a(c.strike),g={nameNode:e.jsx(Ka,{strikeData:c,priceNode:`$${_e(m)}`}),valueNode:y??J()};i[d].push(g)},r=()=>e.jsx("div",{className:"BuilderCalculations__items",children:mn.map(c=>{const d=Jt(c),y=t.reduce((g,T)=>{if(!T)return g;o(T,c);const b=T.greeks[c];return(g??0)+b},void 0),m=y||y===0;return m||(i[c]=null),e.jsxs("div",{className:"BuilderCalculations__item",children:[e.jsx("div",{className:"BuilderCalculations__item-name",children:d}),e.jsx("div",{className:A("BuilderCalculations__item-value",m&&"tip"),"data-tooltip-id":`BuilderForm_${d}DecompositionTooltip`,children:m?xt(y,3):J()})]},c)})}),l=()=>e.jsx(Wa,{renderHeader:({state:c})=>`${c.isEnter?"Hide":"Show"} greeks`,children:r()}),p=Te(576);return e.jsxs("div",{className:"BuilderGreeks",children:[e.jsxs("div",{className:"BuilderGreeks__content",children:[p?l():r(),s&&e.jsx(ql,{swapSlippageState:n})]}),e.jsx(Hl,{decompositionData:i})]})};const ss=t=>{const{userAddress:n}=ee();return t.map(s=>{let{data:i}=Vs({address:n,token:s.isETH?null:s.address,watch:!0});return i||(i={value:0n,decimals:0}),{...i,address:s.address,symbol:s.symbol,icon:s.icon,isETH:s.isETH,isStable:s.isStable,value1eToken:i.value,value:ie(i.value,i.decimals)}})},Gl=t=>{const{isConnected:n,userAddress:a}=ee(),s=G(),i=ss(t),{data:o}=Oe(n&&[a,"useTokenBalancesUSDC",i],async()=>{const r=[];return i.forEach(u=>{if(!u)return;u.inTokenDecimals=u.value1eToken,u.inDefaultDecimals=u.value;const p=Nn(s,u.address,u.inDefaultDecimals).then(c=>({...u,inUSDC:c})).catch(c=>(console.log(`Swapping ${u.symbol} to USDC error.

`+c),null));r.push(p)}),await Promise.allSettled(r).then(ns)});return o??[]};const Yl=({className:t,options:n,defaultOption:a,defaultValue:s,onChange:i,...o})=>e.jsx(be,{className:A("SelectorInline",t),options:n,defaultOption:a,defaultValue:s,onChange:i,...o});const Kl=({paymentTokenState:t})=>{const n=G(),{isConnected:a,userAddress:s}=ee(),i=Zi(n),o=Gl(i),[r,l]=t,u=()=>{const y=o.find(m=>m.symbol===r.symbol);y!==r.balance&&l({...r,balance:y})};f.useEffect(()=>{u()},[o,s]);const p=y=>a?y===null?J("Error"):$(y)||$(y.inUSDC)?e.jsx(pe,{}):`$${de(y.inUSDC,0)}`:J(),c=i.map((y,m)=>{const g=o[m],T=p(g);return{label:e.jsxs("div",{className:"PaymentTokenSelector__item",children:[e.jsx("div",{className:"PaymentTokenSelector__item-name",children:e.jsx(Q,{symbol:y.symbol,isHlight:!0,children:y.symbol})}),e.jsx("div",{className:"PaymentTokenSelector__item-value",children:T})]}),value:y.symbol,balance:g}}),d=[{label:e.jsxs("div",{className:"PaymentTokenSelector__item",children:[e.jsx("div",{children:"Asset"}),e.jsx("div",{children:"Balance, $"})]}),options:c}];return e.jsx(Yl,{className:"PaymentTokenSelector",options:d,defaultValue:r.symbol,onChange:y=>{const m=Z(n,y.value);l({...m,balance:y.balance})}},s)},Ql=({youPayState:t,paymentToken:n,isCostLoading:a,tooltipId:s,swapSlippage:i})=>{const o=G(),[r,l]=t,u=()=>r.inUSDC<0?new Promise(m=>{m(null)}):rl(o,n.address,r.inUSDC),p={triggers:[r],isAllowed:!!(r&&n&&$(r.inPaymentToken)),update:()=>{(T=>{const b=j=>bt(j,i??Ze),h=j=>bt(j,$i),{inUSDC:v}=T,C=b(v),x=h(C);return T.inUSDC=x,T})(r);const g=()=>{setTimeout(()=>{l({...r})},1e3)};u().then(T=>{r.paymentToken=n,r.inPaymentToken=T,g()})}},c={triggers:[n.symbol],isAllowed:!!r,reset:()=>{r.inPaymentToken=void 0,l({...r})}};f.useEffect(()=>{p.isAllowed&&p.update()},[...p.triggers]),f.useEffect(()=>{c.isAllowed&&c.reset()},[...c.triggers]);const d={getNegativeValueNode:()=>e.jsx(Q,{children:e.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:de(r.inUSDC,0)})}),getPaymentTokenNode:()=>fe(r.inPaymentToken,r.paymentToken.isStable),getUsdcNode:()=>r.inUSDC===0n?"$0":tt(r.inUSDC),getApproximatelySymbolNode:()=>e.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:rr})};return(()=>a?e.jsx(pe,{}):!r||!n?J():$(r.inPaymentToken)?e.jsx(pe,{}):r.inPaymentToken===null?d.getNegativeValueNode():e.jsxs(Q,{isHlight:!0,symbol:n.symbol,"data-tooltip-id":s,className:A(s&&"tip"),children:[d.getPaymentTokenNode(),!s&&e.jsxs(e.Fragment,{children:[d.getApproximatelySymbolNode(),d.getUsdcNode()]})]}))()},zl=({paymentToken:t})=>{const{isConnected:n}=ee();if(!n)return J();if(t.balance===null)return J("Error");if($(t.balance))return e.jsx(pe,{});const a=t.balance.value===0n?0:void 0;return e.jsx(Q,{symbol:t.symbol,isHlight:!0,children:fe(t.balance.inDefaultDecimals,t.isStable,a)})},is=()=>({opening:[],closing:[]});f.createContext(is());const Xl=(t,n)=>{const s=Zl({Hegic:[]}),{isConnected:i}=ee();if(!i)return{};const[o,r]=n;return Object.values(s).every(p=>!$(p))&&!o&&r(!0),s},Zl=t=>{const n={};for(const a in t){const s=t[a],i=s&&s.filter(o=>!(Date.now()>o.expiry&&o.pnl.inPercentage===oe(-100)));n[a]=i}return n},rs=f.createContext(null),Jl=({children:t})=>{const n=eu();return e.jsx(rs.Provider,{value:n,children:t})},Fe=()=>f.useContext(rs),eu=()=>{const t=f.useState(is()),[n,a]=f.useState(!1),s=Xl(t,[n,a]),i=tu(s),o=nu(i),r=we("swap-slippage",Ze),{userAddress:l}=ee();return f.useEffect(()=>{a(!1)},[l]),{positions:i,positionsByMarket:s,positionsTotalData:o,arePositionsLoaded:n,pendingPositionsState:t,swapSlippageState:r}},tu=t=>Object.values(t).reduce((a,s)=>(s&&a.push(...s),a),[]),nu=t=>{if(!t.length)return null;const n={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},a=t.reduce((o,r,l)=>{var p;const u=Qt(o,r,["premium","pnl.inUSDC"]);return u.greeks=Ua(o.greeks,r.greeks),(p=r.collateral)!=null&&p.inUSDC&&(u.collateral.inUSDC+=r.collateral.inUSDC),u},n),s=()=>Fa(null,a.pnl.inUSDC,a.premium),i=t.length===1;return a.pnl.inPercentage=i?t[0].pnl.inPercentage:s(),a},os=({paymentTokenState:t,youPayState:n,youPayTooltipId:a,isCostLoading:s})=>{const i=Fe(),[o]=i.swapSlippageState,[r]=t;return e.jsxs("div",{className:"PaymentMethodPanel",children:[e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Select Payment method"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(Kl,{paymentTokenState:t})})]}),e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"You pay"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(Ql,{youPayState:n,paymentToken:r,isCostLoading:s,tooltipId:a,swapSlippage:o})})]}),e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Balance"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(zl,{paymentToken:r})})]})]})},au=({paymentToken:t,setPaymentToken:n,youPayState:a,confirmButtonNode:s,isCostLoading:i})=>e.jsxs("div",{className:"BuilderSwap",children:[e.jsx(os,{paymentTokenState:[t,n],youPayState:a,youPayTooltipId:"BuilderForm_YouPayTooltip",isCostLoading:i}),s]}),su=(t,n,a,s,i,o,r)=>{const{isConnected:l}=ee(),{connectWallet:u}=Ut(),p=jn(n),c=a.length!==n.length||!a.every(v=>v),d=!!s.find(v=>v&&v.inMarketToken===0n),y=a.find(v=>v==null?void 0:v.isComingSoon),m=()=>{if(!t)return"Enter Amount";if(c)return"Fill out the Strike fields";if(p&&d)return"Fill out the Collateral fields";if(!i)return Ie;if(i>o)return"Insufficient balance"},g=()=>!l||y?!0:!m(),T=()=>{const v="Buy Strategy";return l?y?`Visit ${y.market} app`:m()??v:"Connect wallet"},b=()=>{if(!l){u();return}if(y){window.open(y.marketLink);return}r()};return e.jsx(z,{className:"BuilderForm__button",onClick:b,isDisabled:!g(),children:T()})},iu=({strategy:t,amountStr:n,youPayState:a,chosenStrikesState:s,collateralDataArrState:i,openBuyModal:o,swapSlippageState:r})=>{var x;const l=G(),[u,p]=we("payment-token","ETH"),[c,d]=f.useState(Z(l,u)),y=f.useState(!1),[m,g]=f.useState(!1);f.useEffect(()=>{if(p(c.symbol),!c.address){const j=Z(l,c.symbol);d({...c,...j})}},[c]);const[T]=s,[b]=i,[h]=a,v=le[t].structure,C=su(n,v,T,b,h==null?void 0:h.inPaymentToken,(x=c.balance)==null?void 0:x.inDefaultDecimals,o);return e.jsxs("div",{className:"BuilderCalculations",children:[e.jsx(Vl,{chosenStrikes:T,swapSlippageState:r,shouldSwapState:y}),e.jsx(Fl,{strategy:t,amountStr:n,chosenStrikesState:s,collateralDataArrState:i,youPayState:a,swapSlippageState:r,shouldSwapState:y,setIsCostLoading:g}),e.jsx(au,{youPayState:a,paymentToken:c,setPaymentToken:d,confirmButtonNode:C,isCostLoading:m})]})};const ls=({stagesArr:t})=>e.jsx("div",{className:"Stages",children:t.map(n=>e.jsx("div",{className:A("Stages__item",n.isActive&&"active"),children:n.name},n.name))}),us=(t,n,a,s,i=Ze,o={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}})=>{const r=G(),l=le[t],[u,p]=f.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:BigInt(l.key)}),[c,d]=f.useState([]);if(!(s!=null&&s.inPaymentToken))return null;const{setIsLoading:y,closeModal:m,addPendingPosition:g}=o,{paymentToken:T,decomposition:b}=s,h=T.isETH,v=()=>c.reduce((k,O)=>k+O,0n),C=je(r,"TxBuilder"),x=(E,k)=>{const O=ao[E.protocolName];return C.module(O).then(B=>{u.moduleArr[k]=B})},j=async(E,k)=>{const{isLong:O}=E;let B;O&&(B=b[k]);const L=a[k],P={setToCollateral:L&&Bt.from(L.inMarketToken),isBaseCollateral:L==null?void 0:L.isBase,premiumData:B};return E.utils.getBuilderParams(E.amount,P,T.decimals).then(S=>{u.parametersArr[k]=S})},I=(E,k)=>{const O=ne(r,"Exchanger"),B=b[k],L=B.marketToken,P=Ja(T.address,L.address),M=B.inMarketToken,_=Na(T,L);return Bn(r,L.address,T.address,M).then(S=>bt(S,i)).then(S=>{const D=Le(S,T.decimals),F=Le(M,L.decimals);return h&&(c.push(D),d([...c])),O.encodeFromExchange({path:P,tokenIn:T.address,tokenOut:L.address,amountIn:D,amountOutMinimum:F,isETH:h,swap:_}).then(W=>{u.swapDataArr[k]=W})})},R=()=>{const E=[];return n.forEach((k,O)=>{E.push(x(k,O),j(k,O),I(k,O))}),Promise.all(E).then(()=>{p({...u})}).catch(k=>{throw console.log(k),y(!1),new Error("Something went wrong")})};return()=>{y(!0);const{amount:E,asset:k}=n[0];return R().then(()=>{const{isHidden:O}=l,B=H(E),L=B!==1,P=l.plural??`${t}s`,M=L?P:t,_=O?`${k} ${M} opened.`:`${B} ${k} ${M} opened.`,S=e.jsxs(Q,{symbol:k,children:[O?"":`${B} `,M," opened."]}),D={text:_,node:S};return De(r,C.consolidationOfTransactions,[u.moduleArr,u.parametersArr,u.swapDataArr,u.productType,c.length?{value:v()}:{}],D,y,m)}).then(()=>{d([])}).catch(yt)}},ot=(t,n,a,s=i=>{})=>{const{userAddress:i}=ee(),o=G(),r=Z(o,t);return{check:async()=>r.isETH?new Promise(u=>u(!0)).then(s):lo(o,r,i,n,a).then(s),approve:async(u,p)=>{if(r.isETH)throw new Error("Trying to approve ETH");return oo(o,r,n,a,u,p)}}},ru=({isOpen:t,setIsOpen:n,asset:a,strategy:s,amountStr:i,chosenStrikes:o,collateralDataArr:r,youPay:l,swapSlippage:u})=>{const p=G(),c=le[s],[d,y]=f.useState(!1),[m,g]=f.useState(null),T=Fe(),[b,h]=T.pendingPositionsState,v=us(s,o,r,l,u,{setIsLoading:y,closeModal:()=>n(!1),addPendingPosition:D=>{D.isOpening=!0,b.opening.push(D),h({...b})}}),C=Ra(l),j=["Approve","Buy"].map(D=>({name:D,isActive:m===D})),{paymentToken:I,inPaymentToken:R}=l,w=fe(R,I.isStable),E=I.symbol,k=`${w} ${E}`,O={Approve:`Approve ${k}`,Buy:`Pay ${k}`},B=je(p,"Exchanger"),L=ot(E,B.address,R,D=>{g(D?"Buy":"Approve")}),P=()=>{g(null),L.check()};f.useEffect(()=>{t&&P()},[t,l]);const M=()=>{if(!m)return Ie;if(d){if(m==="Approve")return`Approving ${E}...`;if(m==="Buy")return`Buying ${s}...`}},_={approve:()=>{L.approve(y,P)},buy:v},S={getBtnText:()=>M()??O[m],getIsBtnEnabled:()=>!M(),getBtnOnClick:()=>{switch(m){case"Approve":return _.approve;case"Buy":return _.buy}}};return e.jsxs(Me,{className:"BuyBuildModal",isOpen:t,setIsOpen:n,children:[e.jsx(ls,{stagesArr:j}),e.jsx("h1",{className:"BuyBuildModal__title",children:m??e.jsx(pe,{})}),e.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",e.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[e.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:c.color},children:s}),e.jsx(he,{isVertical:!0}),e.jsx(Q,{className:"BuyBuildModal__strategy-amount",symbol:a,isHlight:!0,children:i})]})]}),C&&e.jsx("div",{className:"BuyBuildModal__footer",children:e.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",k," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),e.jsx(z,{className:"BuyBuildModal__button",isDisabled:!S.getIsBtnEnabled(),onClick:S.getBtnOnClick(),children:S.getBtnText()})]})},ou=({assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r})=>{const l=f.useState(null),[u]=l,[p,c]=f.useState(!1),d=Fe(),{swapSlippageState:y}=d,[m,g]=y;lu(m)||g(Ze);const[T]=t,[b]=n,[h]=a,[v]=o,[C]=r,x=()=>{c(!0)};return e.jsxs("div",{className:"BuilderForm App-box",children:[e.jsx(kl,{assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),e.jsx(iu,{strategy:b,amountStr:h,youPayState:l,chosenStrikesState:o,collateralDataArrState:r,openBuyModal:x,swapSlippageState:y}),(u==null?void 0:u.inPaymentToken)&&e.jsx(ru,{isOpen:p,setIsOpen:c,asset:T,strategy:b,amountStr:h,chosenStrikes:v,collateralDataArr:C,youPay:u,swapSlippage:m}),e.jsx(Dl,{strategy:b})]})},lu=t=>!(typeof t!="number"||t>1||t<0);const uu=({asset:t,strategy:n,amountStr:a,chosenStrikes:s,collateralDataArr:i})=>{var P;const o=le[n].structure,r=f.useRef(null),l=Pe(a),u={amount:l,strikes:s.map(M=>H((M==null?void 0:M.strike)??0n)),premiums:s.map(M=>{var S;const _=(S=M==null?void 0:M.premiumData)==null?void 0:S.inUSDC;return _&&H(_)}),strategies:o,collaterals:i,isReady:l&&s.length===o.length&&s.every(M=>M)},p=t==="ETH",c=p?.3:.2,d=p?5:10,y=100,m=Ve(t),g=H(m),T=g&&Math.round(g/d)*d,b=(M,_)=>{const S=u.strategies[M],D=u.premiums[M],F=u.strikes[M],W=u.amount,Y=u.collaterals[M],N=(Y==null?void 0:Y.liquidationPrice)&&H(Y.liquidationPrice),q=Y&&H(Y.inMarketToken),V=Y==null?void 0:Y.isBase;let U;if(D){switch(S){case 1:_<F?U=-D:U=(_-F)*W-D;break;case 2:_>F?U=-D:U=(F-_)*W-D;break;case-1:if(N&&_>N)V?U=-(q*N)+D:U=-q+D;else if(V){const ge=(F-g)*W+D;_>F?U=ge:U=(_-g)*W+D}else _<F?U=D:U=(F-_)*W+D;break;case-2:N&&_<N?V?U=-(q*N)+D:U=-q+D:_>F?U=D:U=(_-F)*W+D;break}if(U)return Number(U)}},v=(()=>{if(!u)return;const M=u.strikes.reduce((Y,N)=>(Y+N)/2,u.strikes[0]),_=window.innerWidth>480?c:c-.05,S=Math.round(M*(1-_)/100)*100,D=Math.round(M*(1+_)/100)*100,F=[];for(let Y=0;Y<(D-S)/d;Y++){const N=S+Y*d;F.push(N)}const W=[];return u.strategies.forEach((Y,N)=>{F.forEach((q,V)=>{const U=b(N,q);N===0?W.push({closePrice:q,pnl:U}):W[V].pnl=W[V].pnl+U})}),W})(),C=(P=v.reduce((M,_)=>_.pnl>M.pnl?_:M,v[0]))==null?void 0:P.pnl,x=C&&_e(C.toFixed(0)),I=(()=>{if(!v)return;const M=Math.max(...v.map(D=>D.pnl)),_=Math.min(...v.map(D=>D.pnl));if(M<=0)return 0;if(_>=0)return 1;const S=M/(M-_);return isNaN(S)?0:S})(),R=({value:M,cx:_,cy:S})=>{const D=M[1];let F;return D<0?F=se:D>0?F=Ne:F=ct,e.jsx("circle",{cx:_,cy:S,r:5,style:{opacity:"0.9"},fill:F})},w=M=>{const{active:_,payload:S,label:D}=M,F=_&&S&&S.length&&Number(S[0].value.toFixed(2));return _&&S&&S.length?e.jsxs("div",{className:"react-tooltip",children:[e.jsxs(Q,{symbol:t,isHlight:!0,children:["$",_e(D)]}),e.jsxs("p",{children:["PnL ",e.jsx("span",{className:A({positive:F>0,negative:F<0}),children:`${F!==0?F>0?"+":"-":""}$${_e(Math.abs(F))}`})]})]}):null},E=M=>_e(M),k={fill:ct,fontSize:13},O=pt,[B,L]=f.useState(null);return f.useEffect(()=>{if(r.current&&v){let M;const _=Math.round(y/(r.current.clientWidth/v.length));_<20?M=19:M=Math.floor(_/20)*20-1,L(M)}},[r.current,v,window.innerWidth]),e.jsx("div",{className:"BuilderPositionChart App-box",ref:r,children:u.isReady?e.jsx(Ci,{children:e.jsxs(Mi,{data:v,margin:{left:(x==null?void 0:x.length)*7.5-40,right:15,top:15},children:[e.jsx(Si,{dataKey:"closePrice",interval:B,tickFormatter:E,tick:k,stroke:O}),e.jsx(Ai,{dataKey:"pnl",tickFormatter:E,tick:k,stroke:O,padding:{bottom:15}}),e.jsx(wi,{cursor:{stroke:ct},content:e.jsx(w,{})}),e.jsx(ji,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:e.jsx(R,{}),fill:"url(#splitColorTransparent)"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:I,stopColor:Ne,stopOpacity:1}),e.jsx("stop",{offset:I,stopColor:se,stopOpacity:1})]}),e.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:I,stopColor:Ne,stopOpacity:.3}),e.jsx("stop",{offset:I,stopColor:se,stopOpacity:.3})]})]}),e.jsx(qn,{x:T,stroke:pt,strokeDasharray:"3 3",label:{value:"Current Price",fill:pt,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),u.collaterals.length&&u.collaterals.map(M=>{if(!M||!M.liquidationPrice)return;const _=H(M.liquidationPrice),S=Math.round(_/d)*d;return e.jsx(qn,{x:S,stroke:se,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:se,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},_)}),e.jsx(ki,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):e.jsx(ze,{children:"Fill out the Strike fields to view position chart"})})},cu=({assetState:t})=>{const n=f.useState("Long Call"),a=f.useState("1"),s=f.useState(null),i=f.useState([]),o=f.useState([]),r=f.useState([]),[l]=t,[u]=n,[p]=a,[c]=o,[d]=r;return e.jsxs("div",{className:"BuilderDashboard",children:[e.jsx(ou,{assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),e.jsx(uu,{asset:l,strategy:u,amountStr:p,chosenStrikes:c,collateralDataArr:d})]})},pu=6,du=()=>{const{isConnected:t,userAddress:n}=ee(),a=G(),s=ne(a,"TxBuilder"),{data:i,error:o}=Oe(t&&[n,"useBuilderPositionsStructure"],async()=>{var d;const r=[],l={},u={},p=await mu(s,n),c=[];for(let y=0;y<p.length;y++){const m=p[y],{buildID:g,productType:T}=Sr(m.args),b=Pa.find(I=>le[I].key===Number(T)),h={strategy:b,buildId:g,legsStructure:[]},v=(d=le[b])==null?void 0:d.isCollection,C=yu(a,g),x=[];for(const I in C)C[I].forEach(w=>{w.then(E=>{const k=Tu(E,I);h.legsStructure.push(...k),gu(k,g,l)}),x.push(w)});const j=Promise.all(x).then(()=>{r.push(h),v&&_u(h,u)});c.push(j),await gl(c,pu,p.length,y)}return xu(r,l),vu(r,u),r},{refreshInterval:2e4});return o?(console.log(`Builder Positions error:
`,o),null):i},yu=(t,n)=>{const{Hegic:a}=ho(t),{OpenPositionByHegic:s}=a.filters;return{Hegic:[a.queryFilter(s(n))]}},mu=async(t,n)=>{const{CreateBuild:a}=t.filters,s=await t.queryFilter(a(null,n));return(await fu(s,t.provider)).reverse()},fu=async(t,n)=>{const a=t.map(o=>bu(o,n)),s=await Promise.all(a);return t.filter((o,r)=>{if(s[r])return!0})},bu=async(t,n)=>{const a=await n.getBlock(t.blockNumber),s=Pt[Pt.length-1],i=Date.now()-s-vt(1);if(a.timestamp*re>i)return!0},Tu=(t,n)=>t.map(s=>{const i=hu(n,s);return{market:n,id:i}}),hu=(t,n)=>{switch(t){case"Hegic":return Number(n.args.tokenID);default:throw new Error`Invalid market: ${t}`}},gu=(t,n,a)=>{t.forEach(s=>{const{id:i}=s;a[i]=a[i]??[],a[i].push(n)})},xu=(t,n)=>{const a=[];for(const s in n)n[s].length>1&&a.push(s);a.forEach(s=>{const i=t.filter(r=>{if(r.legsStructure.find(u=>u.id===s))return!0}),o=i.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,i[0]);i.forEach(r=>{if(r.buildId===o.buildId)return;const l=r.legsStructure.findIndex(p=>p.id===s);r.legsStructure.splice(l,1);const u=n[s].findIndex(p=>p===r.buildId);n[s].splice(u,1)})})},_u=(t,n)=>{const a=Cu(t.legsStructure[0].id);n[a]=n[a]??[],n[a].push(t)},vu=(t,n)=>{for(const a in n){const s=n[a].filter(r=>r.legsStructure.length);if(s.length<=1)continue;const i=s.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,s[0]),o=t.find(r=>r.buildId===i.buildId);s.forEach(r=>{if(r.buildId===o.buildId)return;o.legsStructure.push(...r.legsStructure);const l=t.findIndex(u=>u.buildId===r.buildId);t.splice(l,1)})}},Cu=t=>t.split("_").slice(1).join("_"),{HEAD:Mu,COMMON:Su,LEG:cs}=Ba,ps=()=>{const t=Fe(),{positionsByMarket:n}=t,a=du();if(!a||!n)return;const i=a.map(r=>{var y;const{legsStructure:l,strategy:u}=r,p=[],c=(y=le[u])==null?void 0:y.isCollection;for(let m=0;m<l.length;m++){const{id:g,market:T}=l[m],b=n[T];if(!b)return;const h=b.findIndex(C=>C.id===g),v=b[h];v&&(p.push(v),b[h].role=cs)}const d=l.length===1||c&&p.length===1;if(p.length)if(d){const m={...p[0]};return{...r,...m,role:Su}}else{const m=wu(p),g=p[0].asset;return{...r,legs:p,asset:g,...m,role:Mu}}}).filter(r=>!$(r));return Au(i,n)},Au=(t,n)=>{const a=[],s=[];Object.values(n).forEach(r=>{r&&s.push(...r)});const o=s.filter(r=>r.role!==cs).map(r=>{const{isCall:l,isSpread:u,isLong:p}=r;return{strategy:`${u?l?"Bull":"Bear":p?"Long":"Short"} ${l?"Call":"Put"} ${u?"Spread":""}`.trim(),...r}});return a.push(...t,...o),a},wu=t=>{const n=t.reduce((a,s)=>{const i=Qt(a,s,["amount","premium","pnl.inUSDC"]);return i.greeks=Ua(a.greeks,s.greeks),i.collaterals=s.collateral?[...a.collaterals,s.collateral]:a.collaterals,i},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return n.pnl.inPercentage=Fa(null,n.pnl.inUSDC,n.premium),n.expiry=t[0].expiry,n};const ju=({position:t,openCloseModal:n})=>{const[a]=Fe().pendingPositionsState;if(!t.actions)return null;const{isClosingDisabled:s}=t.actions,i=a.closing.find(l=>l.id===t.id),o=()=>{n(t)},r=Te(576);return e.jsx("div",{className:"PositionCloseBtn",children:rt(r?e.jsx(Du,{isDisabled:s,handleClick:o}):e.jsx(ku,{isDisabled:s,handleClick:o}),i)})},ku=({isDisabled:t,handleClick:n})=>e.jsx("button",{className:"close-btn _cross",disabled:t,onClick:n,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[e.jsx("g",{id:"icon-close",clipPath:"url(#clip0_294_4433)",children:e.jsx("path",{id:"Vector",d:"M13.6899 0.320713C13.5917 0.222272 13.475 0.144172 13.3465 0.090885C13.2181 0.0375978 13.0803 0.010169 12.9413 0.010169C12.8022 0.010169 12.6645 0.0375978 12.536 0.090885C12.4076 0.144172 12.2909 0.222272 12.1926 0.320713L7 5.50274L1.80736 0.310093C1.70905 0.211782 1.59233 0.133796 1.46388 0.0805904C1.33543 0.0273845 1.19776 1.03588e-09 1.05873 0C0.919692 -1.03588e-09 0.78202 0.0273845 0.653569 0.0805904C0.525118 0.133796 0.408405 0.211782 0.310093 0.310093C0.211782 0.408405 0.133796 0.525118 0.0805904 0.653569C0.0273845 0.78202 -1.03588e-09 0.919692 0 1.05873C1.03588e-09 1.19776 0.0273845 1.33543 0.0805904 1.46388C0.133796 1.59233 0.211782 1.70905 0.310093 1.80736L5.50274 7L0.310093 12.1926C0.211782 12.291 0.133796 12.4077 0.0805904 12.5361C0.0273845 12.6646 0 12.8022 0 12.9413C0 13.0803 0.0273845 13.218 0.0805904 13.3464C0.133796 13.4749 0.211782 13.5916 0.310093 13.6899C0.408405 13.7882 0.525118 13.8662 0.653569 13.9194C0.78202 13.9726 0.919692 14 1.05873 14C1.19776 14 1.33543 13.9726 1.46388 13.9194C1.59233 13.8662 1.70905 13.7882 1.80736 13.6899L7 8.49726L12.1926 13.6899C12.291 13.7882 12.4077 13.8662 12.5361 13.9194C12.6646 13.9726 12.8022 14 12.9413 14C13.0803 14 13.218 13.9726 13.3464 13.9194C13.4749 13.8662 13.5916 13.7882 13.6899 13.6899C13.7882 13.5916 13.8662 13.4749 13.9194 13.3464C13.9726 13.218 14 13.0803 14 12.9413C14 12.8022 13.9726 12.6646 13.9194 12.5361C13.8662 12.4077 13.7882 12.291 13.6899 12.1926L8.49726 7L13.6899 1.80736C14.0934 1.40384 14.0934 0.724231 13.6899 0.320713Z",fill:"#6988FF"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_294_4433",children:e.jsx("rect",{width:"14",height:"14",fill:"white"})})})]})}),Du=({isDisabled:t,handleClick:n})=>e.jsx(z,{className:"close-btn",type:"micro",isDisabled:t,onClick:n,children:"Close"}),Eu=({handleClick:t})=>e.jsx("button",{onClick:t,className:"shrink-0",children:e.jsx("img",{src:as,alt:"Update Collateral"})}),Iu="/sf_draft/assets/multi-626e9c45.svg";const Pu=({expiry:t})=>{const n=t-Date.now(),a=n<=0,i=Dn(n,!0).split(":");return e.jsxs("div",{className:A("ExpirationTimer",a&&"expired"),children:[e.jsx("div",{className:"ExpirationTimer__text",children:"Left until expiration"}),e.jsx("div",{className:"ExpirationTimer__timer",children:i.map((o,r)=>{const l=r===i.length-1,u=$l(o);return e.jsxs(We.Fragment,{children:[e.jsx("div",{className:"ExpirationTimer__timer-value",children:o}),!l&&e.jsx("span",{className:"ExpirationTimer__timer-separator",children:":"})]},u)})})]})};const fn=({market:t,strikeParams:n,isSmall:a})=>{const{strike:s,isCall:i,isLong:o,expiry:r}=n,l=Date.now()>r,u=t?Xt[t].circled:Iu,p=o?Ga:Ya,c=Ae(r,"dMMMyy").toUpperCase(),d=$a(s),m=`${c}-${d}-${i?"C":"P"}`,g=oa(e.jsx(Pu,{expiry:r}));return e.jsxs("div",{className:A("Brief","InstrumentBrief",a&&"small",l&&"expired"),children:[e.jsxs("div",{className:"Brief__icons",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:u,alt:`${t}`})}),e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:p,alt:`${o?"Long":"Short"}`})})]}),e.jsx("div",{className:"InstrumentBrief__string tip","data-tooltip-id":"Tooltip_Expiration","data-tooltip-html":g,children:m})]})},{HEAD:Bu,LEG:Nu}=Ba,Ru={strategy:"Strategy",amount:"Amount",instrument:"Instrument",collateral:e.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",entryPrice:"Entry Price",closePrice:"Close Price",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",closeBtn:""},Lu=({positions:t,openCollateralModal:n,openCloseModal:a,isLoadingComplete:s})=>{const{isConnected:i}=ee(),o=d=>{const{role:y,isOpening:m,isTotal:g,expiry:T}=d,b=y===Bu,h=y===Nu,v=Date.now()>T,C=()=>{if(h)return"";if(g)return J("Total",!1,!0);let{strategy:_}=d;if(!_){const{isCall:W,isLong:Y}=d;_=zt(Y,W)}const S=le[_],D=S==null?void 0:S.color,F=e.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:e.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:D,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return e.jsxs("span",{className:"flex items-center gap-x-4",style:{color:D},children:[m&&e.jsx(pe,{}),_,b&&F]})},x=()=>{const{asset:_,amount:S}=d;if(S)return e.jsx(Q,{symbol:_,children:H(S)})},j=()=>{const{market:_,strike:S,strategy:D,legs:F}=d;if(b){const W=le[D],{isCollection:Y}=W;return Y?e.jsx(fn,{strikeParams:F[0]}):e.jsx("div",{className:"PositionsTable__strike-msg",children:J("Click to see strikes")})}if(S)return e.jsx(fn,{market:_,strikeParams:d})},I=()=>{const{premium:_}=d,S=_<0n,D=de(it(_)),F=`${S?"–":"+"}$${D}`;return e.jsx("span",{className:A({positive:!S,negative:S}),children:F})},R=()=>{const{collateral:_,collaterals:S,actions:D}=d;if(!_&&(!S||!S.length))return;const F=W=>g?W.inUSDC?e.jsxs("span",{children:["$",de(W.inUSDC)]}):void 0:e.jsx(Q,{symbol:W.marketToken.symbol,children:fe(W.inMarketToken,W.marketToken.isStable)},W.isBase);return b?w(S,F):D&&!D.isAddingToCollateralDisabled?e.jsxs("div",{className:"flex items-center gap-x-3",children:[F(_),e.jsx(Eu,{handleClick:()=>n(d)})]}):F(_)},w=(_,S)=>{const D={base:{},stable:{}},F=Y=>{const{isBase:N}=Y,q=N?"base":"stable";D[q]={...Qt(D[q],Y,["inMarketToken","inUSDC"]),isBase:N}};_.forEach(F);const W=Object.values(D).map(S);return e.jsx("div",{className:"flex flex-col gap-y-5",children:W})},E=()=>{if(!d.pnl)return;const{inUSDC:_,inPercentage:S}=d.pnl,D=_<0?dn.negative:"",F=it(S),W=H(F)<1?1:0,Y=de(F,W);return e.jsxs("div",{className:A({positive:_>0n,negative:_<0n,muted:_===0n}),children:[e.jsx("span",{style:{color:ct,marginRight:5},children:tt(_)}),`(${D}${Y}%)`]})},k=()=>{const{entryPrice:_}=d;if(!$(_))return`$${de(_)}`},O=()=>{const{closePrice:_}=d;if(!$(_))return`$${de(_)}`},B=()=>{const{collateral:_}=d;if(!(!_||!_.liquidationPrice))return`$${de(_.liquidationPrice)}`},L=()=>{const{greeks:_}=d;if(g)for(const S in _)_[S]||(_[S]=void 0);return _},P=()=>b?d.legs.map(o):void 0,M=()=>m?"":e.jsx(ju,{openCloseModal:a,position:d});return{id:`${d.buildId}_${d.id}`,strategy:C(),amount:x(),instrument:j(),premium:I(),collateral:R(),pnl:E(),entryPrice:k(),closePrice:O(),liqPrice:B(),...L(),children:P(),closeBtn:M(),omittedKeys:(b||g)&&["instrument","closeBtn"],className:A(v&&"expired")}},r=Ru,l=t==null?void 0:t.map(o),u={titleData:r,itemsData:l},p=[{name:"Active",isActive:!0}],c=()=>{let d;return i?!t||!s?d="Loading...":t.length||(d="No open positions"):d="No wallet connected",e.jsx("div",{className:"App-box PositionsTable__message",style:s?{}:{marginBottom:10},children:J(d)})};return e.jsxs("div",{className:"PositionsTable",children:[e.jsx("div",{className:"PositionsTable__header",children:e.jsx(Rt,{links:p,type:"border"})}),t!=null&&t.length?e.jsxs(e.Fragment,{children:[!s&&c(),e.jsx(Va,{structureData:u})]}):c()]})};const ds=t=>{const{value:n,setValue:a,maxValue:s,placeholder:i,isDisabled:o,isFocused:r,hasError:l,formatInputStringFns:u=[st,Pe],title:p,presentedValue:c,presentedValueTitle:d,iconData:y,unitStr:m}=t,g=Vt([n,a],{maxValue:s,placeholder:i,isDisabled:o,isFocused:r},u),T=A(t.className,g.hasFocus&&"hlight",l&&"error",o&&"disabled"),b=u[0];return e.jsxs("div",{className:A("InputFamily InputComplexNumeric",T),onClick:()=>{g.ref.current.focus()},children:[e.jsxs("div",{className:"InputComplexNumeric__header",children:[e.jsx("div",{className:"InputComplexNumeric__title",children:p}),c&&e.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:h=>{h.stopPropagation(),a(b(c))},children:[e.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[d,":"]}),b(c)]}),y&&e.jsx("div",{className:"InputComplexNumeric__icon",children:e.jsx("img",{src:y.src,alt:y.alt??"icon"})})]}),e.jsxs("div",{className:"InputComplexNumeric__body",children:[e.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:g.node}),e.jsxs("div",{className:"InputComplexNumeric__helper",children:[s&&e.jsx("button",{className:"InputFamily__max-btn",disabled:o,onClick:h=>{h.stopPropagation(),a(st(s))},children:"Max"}),m&&e.jsx("div",{className:"InputComplexNumeric__unit",children:m})]})]})]})};const Mt=({className:t,children:n,value:a,symbol:s="USDC",isHlight:i=!0,style:o,...r})=>{const l=G(),u=Z(l,s).icon,p=n,c=A(i&&"_hlight",t);return e.jsxs("div",{className:A("CurrencyWithText",c),style:o,...r,children:[e.jsx("img",{src:u,alt:`${s} icon`}),e.jsx("span",{className:"CurrencyWithText__value",children:a}),e.jsx("span",{className:"CurrencyWithText__text",children:p})]})},Ou=({position:t,isOpen:n,setIsOpen:a})=>{var v;const s=G(),[i,o]=f.useState(""),[r,l]=f.useState(!1),[u,p]=f.useState(null),c=((v=t==null?void 0:t.collateral)==null?void 0:v.marketToken)??{symbol:"ETH"},d=Dt(c.symbol),y=ot(c==null?void 0:c.symbol,fi,K(i),p),m=()=>{p(null),y.check()};if(f.useEffect(()=>{p(null)},[i]),ke(()=>{i&&m()},Ee,[i]),!t||!t.collateral)return null;const g=()=>{if(!i)return"Enter Amount";if(u===null)return Ie;if(r)return u?"Updating Collateral...":`Approving ${c.symbol}...`},T=()=>!g(),b=()=>{const C=u?"Add Collateral":`Approve ${i} ${c.symbol}`;return g()??C},h=()=>{if(!u){y.approve(l,m);return}const C=K(i);De(s,t.actions.addToCollateral,[C],{text:`${i} ${c.symbol} added.`,node:e.jsx(Mt,{value:i,symbol:c.symbol,children:"added to collateral."})},l,()=>a(!1))};return e.jsxs(Me,{className:"PositionCollateralModal",isOpen:n,setIsOpen:a,reset:()=>{o(""),p(null)},children:[e.jsx("h1",{children:"Edit Collateral"}),e.jsx(ds,{value:i,setValue:o,title:"Add Amount",iconData:{src:d},isFocused:!0}),e.jsx(z,{isDisabled:!T(),onClick:h,children:b()})]})};const Fu=({position:t,isOpen:n,setIsOpen:a})=>{const s=G(),[i,o]=f.useState(""),[r,l]=f.useState(void 0),[u,p]=f.useState(!1),[c,d]=Fe().pendingPositionsState,y=()=>{const _=Wt(t.amount);o(_)},m=_=>{l(void 0),t.utils.calcPnl(_).then(l)};if(f.useEffect(()=>{n&&t&&y()},[n]),ke(()=>{t&&i&&m(K(i))},Ee,[i]),!t||!t.actions)return null;const g=_=>{if(_)c.closing.push({id:t.id,market:t.market});else{const S=c.closing.findIndex(D=>D.id===t.id);S!==-1&&c.closing.splice(S,1)}d({...c})},{close:T}=t.actions,{asset:b,amount:h,strategy:v,isCall:C,isLong:x}=t,j=v??`${x?"Long":"Short"} ${C?"Call":"Put"}`,I=e.jsxs(Q,{symbol:b,children:[i," ",j," closed."]}),w={text:`${i} ${b} ${j} closed.`,node:I},E=K(i),k=r==null?void 0:r.inUSDC,O=()=>{De(s,T,[E],w,p,()=>{g(!0),a(!1)})},B=()=>{if(!i)return"Enter Amount";if(u)return"Closing Strategy..."},L=()=>B()??"Close Strategy",P=()=>!B(),M=Dt(b);return e.jsxs(Me,{className:"ClosePositionModal",isOpen:n,setIsOpen:a,reset:()=>{o(""),l(void 0)},children:[e.jsxs("div",{className:"ClosePositionModal__body",children:[e.jsx("h1",{children:"Close Strategy"}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"info-row__title",children:"Instrument"}),e.jsx("div",{className:"info-row__value",children:e.jsx(fn,{market:t.market,strikeParams:t})})]}),t.market!=="Hegic"&&e.jsx(ds,{value:i,setValue:o,title:"Amount",iconData:{src:M},isFocused:!0,maxValue:H(h)})]}),e.jsxs("div",{className:"ClosePositionModal__footer",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"info-row__title",children:"PnL"}),e.jsx("div",{className:A("info-row__value",{positive:k>0n,negative:k<0n}),children:ce(()=>Ol(k),$(k))})]}),e.jsx(z,{isDisabled:!P(),onClick:O,children:L()})]})]})},ys=({positions:t})=>{const n=Fe(),{arePositionsLoaded:a,positionsTotalData:s,pendingPositionsState:i}=n,o=t==null?void 0:t.sort((b,h)=>h.isTotal?-1:b.isTotal?1:En(b,h,"pnl.inUSDC",-1));o==null||o.forEach(b=>{b.legs&&b.legs.sort(Oa("pnl.inUSDC",-1))});const r=o&&s?[...o,s]:o,[l,u]=f.useState(null),[p,c]=f.useState(!1),[d,y]=f.useState(!1),m=b=>{u(b),c(!0)},g=b=>{u(b),y(!0)},[T]=i;return T.opening&&r&&[...T.opening,...r],e.jsxs("div",{className:"Positions",children:[e.jsx("h1",{className:"Positions__title",children:"My Positions"}),e.jsx(Lu,{positions:r,isLoadingComplete:a,openCollateralModal:m,openCloseModal:g}),e.jsx(Ou,{isOpen:p,setIsOpen:c,position:l}),e.jsx(Fu,{isOpen:d,setIsOpen:y,position:l})]})},ms=f.createContext(null),Uu=({children:t})=>{const n=we("asset","ETH");return e.jsx(ms.Provider,{value:n,children:t})},en=()=>f.useContext(ms),$u=()=>{const t=en(),n=ps();return e.jsxs("div",{className:"Builder",children:[e.jsx(cu,{assetState:t}),e.jsx(ys,{positions:n})]})},Fn=()=>f.useContext(fs),X=t=>{const n=Fn();return t.endsWith("State")?n[t]:n[`${t}State`][0]},Hu=()=>{const t=we("asset","ETH"),n=we("OptionChain-isDistanceEnabled",!1),a=f.useState(null),s=f.useState(!0),i=f.useState(!0),o=f.useState(!1);return{assetState:t,isDistanceEnabledState:n,strikePriceState:a,isCallState:s,isLongState:i,isModalOpenState:o}},fs=f.createContext(null),Wu=({children:t})=>{const n=Hu();return e.jsx(fs.Provider,{value:n,children:t})};const qu="/sf_draft/assets/date-1ea6323e.svg",bs=({chosenDate:t,setChosenDate:n,type:a="Selector",shouldRenderCarousel:s=!1})=>{const{dates:i}=Se();f.useEffect(()=>{i&&!t&&n(i[0])},[i]);const o=Te(1100)||!s;return e.jsx(Zt,{className:A("DateController",`_${a}`),title:"Expiration Date",children:e.jsx("div",{className:"DateController__items",children:ce(()=>o?e.jsx(Vu,{chosenDate:t,setChosenDate:n,type:a}):e.jsx(Ku,{chosenDate:t,setChosenDate:n}),$(i))})})},Vu=({chosenDate:t,setChosenDate:n,type:a})=>{const{dates:s}=Se(),i=s.map(l=>{const u=Gu(a,l);return{value:l,label:e.jsx(Yu,{date:l,expiryStr:u})}}),o=t&&i.find(l=>l.value===t),r=a==="Selector"?e.jsx("img",{src:qu,alt:"Strategy selector icon"}):null;return e.jsx(be,{className:r?"Selector_thin-options":"",placeholder:"Choose Date",options:i,value:o,onChange:l=>{n(l.value)},iconNode:r})},Gu=(t,n)=>{const a=n-Date.now();switch(t){case"Selector":return Dn(a);case"Selector_no-icon":return`Expires in ${Yt(a)} days`;default:return""}},Yu=({date:t,expiryStr:n})=>e.jsxs("div",{className:"DateController__selector-date",children:[e.jsx("div",{className:"DateController__selector-date-value",children:Ae(t,"d MMM yy")}),e.jsx("div",{className:"DateController__selector-date-expiry",children:n})]}),Ku=({chosenDate:t,setChosenDate:n})=>{const{dates:a}=Se(),s=a.map(i=>{const o=Ae(i,"d MMM yy"),r=Yt(i-Date.now()),l=t===i;return e.jsxs(z,{className:A("DateController__item",l&&"chosen"),type:"stroke",onClick:()=>n(i),children:[e.jsx("div",{className:"DateController__item-date",children:o}),e.jsxs("div",{className:"DateController__item-expiry",children:[r," days"]})]},i)});return e.jsx(Qa,{id:"DateControllerCarousel",spaceBetween:8,isDraggable:!1,breakpoints:{992:{slidesPerView:7},1200:{slidesPerView:8},1300:{slidesPerView:"auto"}},children:s})};const Qu=({isCheckedState:t,text:n})=>{const[a,s]=t,i=o=>{const r=o.target;s(r.checked)};return e.jsxs("div",{className:"Checker",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:i}),e.jsx("label",{children:n})]})},zu=()=>{const t=Fn(),{assetState:n,isDistanceEnabledState:a}=t,[s,i]=n,[o,r]=Se().chosenDateState;return e.jsxs("div",{className:"OptionChainControllers",children:[e.jsx(bs,{chosenDate:o,setChosenDate:r,type:"Selector_no-icon",shouldRenderCarousel:!0}),e.jsx(Ln,{asset:s,setAsset:i}),e.jsx(Qu,{isCheckedState:a,text:"Distance"})]})};const Xu=t=>Object.keys(t).map(BigInt).sort(Ct),Un=t=>{const n=[];Object.values(t).forEach(i=>{n.push(...Object.keys(i))});const a=n.map(BigInt);return Kt(a).sort(Ct)},Zu=t=>Io(t),Ju=({asset:t,chosenDate:n,strikes:a,isDistanceEnabled:s})=>{const i=Un(a),o=Ve(t),r=Ae(n??0,"d MMM yy"),l=Te();return e.jsxs("div",{className:A("OptionChainStrikeList",s&&"_distance"),children:[!l&&e.jsx("div",{className:"OptionChainStrikeList__cell _title whitespace-nowrap",children:r}),e.jsx("div",{className:"OptionChainStrikeList__cell _title",children:"Strike"}),e.jsx(ec,{assetPrice:o,strikePrices:i,isDistanceEnabled:s})]})},ec=({assetPrice:t,strikePrices:n,isDistanceEnabled:a})=>{const s=n.filter(r=>{const l=Sn(t,.001);return it(r-t)<l}),i=Mo(s,t);let o;return i||(o=n.reduce((r,l,u)=>{if(r)return r;if(t<l||u===n.length-1)return l},void 0)),e.jsx(e.Fragment,{children:n.map(r=>{const l=r===i,u=!l&&r===o,p=`$${Je(r)}`;return e.jsxs("div",{className:A("OptionChainStrikeList__cell",l&&"_assetPrice"),children:[u&&e.jsx(nc,{assetPrice:t,strikePrices:n}),e.jsxs("div",{className:"OptionChainStrikeList__strike",children:[p,a&&e.jsx(tc,{assetPrice:t,strikePrice:r})]})]},r)})})},tc=({assetPrice:t,strikePrice:n})=>{const a=H(_t(n,t))*100-100,s=ye(a,a>0&&a<1?1:0);return e.jsxs("span",{className:A("OptionChainStrikeList__distance",{negative:s<0,positive:s>0,neutral:s===0}),children:["(",s,"%)"]})},nc=({assetPrice:t,strikePrices:n})=>{if(!t)return null;const a=A("OptionChainStrikeList__assetPrice",t>It(n)&&"_last"),s=H(t),i=tt(t,s<100?2:0);return e.jsx("div",{className:a,children:i})};const lt=({style:t})=>e.jsx("div",{className:"SpinnerBig",style:t,children:e.jsxs("svg",{viewBox:"0 0 100 100",children:[e.jsx("defs",{}),e.jsx("circle",{className:"SpinnerBig__circle",style:{fill:"transparent",stroke:"#fff",strokeWidth:"7px",strokeLinecap:"round"},cx:"50",cy:"50",r:"45"})]})});const Ts="/sf_draft/assets/arrow-up_green-2d5f573c.svg",hs="/sf_draft/assets/arrow-down_red-ed33cd18.svg",gs=({strikes:t,isCall:n,renderStrikeList:a})=>{const s=X("asset"),i=X("isDistanceEnabled"),o=Ve(s),r=Te(),l=f.useRef(null);return f.useEffect(()=>{if(r){const u=document.querySelector(".OptionChainStrikeList");l.current&&(l.current.style.paddingRight=`${u.clientWidth}px`)}else l.current.style.paddingRight&&(l.current.style.paddingRight="")},[r,i]),e.jsx("div",{className:"OptionChainTable__wrapper",children:e.jsxs("div",{className:"OptionChainTable",children:[e.jsx(ac,{isCall:n}),e.jsxs("div",{className:"OptionChainTable__scrollable",ref:l,children:[e.jsx(sc,{}),e.jsx(ic,{strikes:t,isCall:n,assetPrice:o})]}),r&&a()]})})},ac=({isCall:t})=>{const n=Te(),[a]=Se().chosenDateState,s=Ae(a,"d MMM yy"),i=()=>e.jsxs("div",{className:"OptionChainTable__cell-content",children:[t?"Calls":"Puts",e.jsx("img",{src:t?Ts:hs,alt:t?"Arrow up":"Arrow down"})]});return e.jsxs("div",{className:A("OptionChainTable__cell _title _main-title",t?"positive":"negative"),children:[i(),n&&e.jsx("span",{className:"text-white",children:s})]})},sc=()=>e.jsxs("div",{className:"OptionChainTable__head",children:[e.jsxs("div",{className:"OptionChainTable__head-group",children:[e.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),e.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"IV Bid"}),e.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"Bid"})]}),e.jsxs("div",{className:"OptionChainTable__head-group",children:[e.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),e.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"IV Ask"}),e.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"Ask"})]})]}),ic=({strikes:t,isCall:n,assetPrice:a})=>{const s=Fn(),[,i]=s.isModalOpenState,o=Un(t),r=u=>{const p=zt(u,n),c=Zu(t[p]);return o.map(d=>{const y=`${d}_${u}`,m=In(n,d,a),g=c.filter(j=>j.strike===d);if(!g.length)return l(y,m);const T=g.reduce((j,I)=>{const R=j.premiumData.inUSDC,w=I.premiumData.inUSDC;if(u){if(w<R)return I}else if(w>R)return I;return j},g[0]),b=g.reduce((j,I)=>j+(I.liquidity??0n),0n),h=b?de(b,1):J(),v=Ha(T,a).formatted,C=ce(()=>tt(T.premiumData.inUSDC),!T.premiumData);return l(y,m,{size:h,IV:v,price:C},()=>{const[,j]=s.isCallState,[,I]=s.isLongState,[,R]=s.strikePriceState;j(n),I(u),R(d),i(!0)})})},l=(u,p,c,d=()=>{})=>{const y=!c;return e.jsxs("button",{className:A("OptionChainTable__strikes-item",p&&"_ITM"),disabled:y,onClick:d,children:[e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.size)??J()}),e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.IV)??J()}),e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.price)??J()})]},u)};return e.jsxs("div",{className:"OptionChainTable__strikes",children:[e.jsx("div",{className:"OptionChainTable__strikes-long",children:r(!1)}),e.jsx("div",{className:"OptionChainTable__strikes-short",children:r(!0)})]})};const rc=()=>{const t=X("asset"),n=X("isDistanceEnabled"),[a]=Se().chosenDateState,s=Rn(t,a),i=!a||!s,o=Te();if(!i&&!Un(s).length)return e.jsx("div",{className:"OptionChainOptions",children:e.jsx(ze,{children:"No Liquidity"})});const l=()=>e.jsx(Ju,{asset:t,chosenDate:a,strikes:s,isDistanceEnabled:n});return rt(e.jsxs("div",{className:"OptionChainOptions",children:[e.jsx(oc,{asset:t,strikes:s,renderStrikeList:l,isDistanceEnabled:n}),!o&&l(),e.jsx(lc,{asset:t,strikes:s,renderStrikeList:l,isDistanceEnabled:n})]}),i,e.jsx(lt,{style:{margin:"50px auto 70px"}}))},oc=({strikes:t,renderStrikeList:n})=>e.jsx(gs,{strikes:t,renderStrikeList:n,isCall:!0}),lc=({strikes:t,renderStrikeList:n})=>e.jsx(gs,{strikes:t,renderStrikeList:n,isCall:!1}),uc=()=>e.jsxs("div",{className:"OptionChainDashboard App-box",children:[e.jsx(zu,{}),e.jsx(rc,{})]});const $n=({oppositeLabels:t,isOn:n,setIsOn:a})=>e.jsxs("div",{className:"Switcher",children:[e.jsx("button",{className:A("Switcher__button","positive",n&&"chosen"),onClick:()=>a(!0),children:t[0]}),e.jsx("button",{className:A("Switcher__button","negative",!n&&"chosen"),onClick:()=>a(!1),children:t[1]})]});const cc=({isCall:t,setIsCall:n})=>{const a=[e.jsxs("div",{className:"CallPutController__label",children:[e.jsx("img",{src:Ts,alt:"arrow up"}),"Call"]}),e.jsxs("div",{className:"CallPutController__label",children:[e.jsx("img",{src:hs,alt:"arrow down"}),"Put"]})];return e.jsx(Zt,{className:"CallPutController",title:"Strategy",children:e.jsx($n,{oppositeLabels:a,isOn:t,setIsOn:n})})};const pc=({strikePrices:t,chosenStrikePrice:n,setChosenStrikePrice:a,asset:s,isCall:i})=>{f.useEffect(()=>{t.find(p=>p===n)||a(null)},[t]);const o=Ve(s),r=t.map(u=>{const p=In(i,u,o);return{value:u,label:e.jsx("div",{className:A("StrikeController__item",p&&"_ITM"),children:e.jsx("span",{children:`$${Je(u)}`})})}}),l=e.jsx("img",{src:va,alt:"graph icon"});return e.jsx(Zt,{title:"Strike",className:"StrikeController",children:e.jsx(be,{className:"Selector_thin-options",placeholder:"Choose Strike",options:r,value:r.find(u=>u.value===n),onChange:u=>{a(u.value)},iconNode:l},t)})};const dc=({contentType:t,market:n})=>{const a={Hegic:e.jsx(yc,{contentType:t})};return e.jsx("div",{className:"MarketInfoTooltip",children:a[n]})},yc=({contentType:t})=>{const n=()=>e.jsxs("div",{children:[e.jsxs("ul",{children:[e.jsx("li",{children:"You can't close your position if your option is OTM (Out of the money)"}),e.jsx("li",{children:"You can exercise only the Intrinsic Value of your option (the difference between the strike price and the settlement price)"})]}),e.jsxs("div",{className:"MarketInfoTooltip__important-note",children:["You must exercise your ",e.jsx("br",{}),"option before the expiration date; otherwise, it will expire worthless."]})]}),a=()=>e.jsx("div",{children:"Zero fees 🔥"}),s=()=>e.jsx("div",{children:"The payoff for both call and put options is in USDC.e"});return e.jsx(mc,{Overall:n(),Fees:a(),PayoffAsset:s(),contentType:t})},mc=({Overall:t,Fees:n,PayoffAsset:a,contentType:s})=>({"2Market":t,Fees:n,"Payoff Asset":a})[s],fc=({marketStrikeData:t})=>{const{market:n}=t,a=Xt[n].circled,s=["2Market","Fees","Payoff Asset"];return e.jsxs("div",{className:"Brief MarketBrief",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:a,alt:n})}),s.map(i=>{const o=oa(e.jsx(dc,{market:n,contentType:i}));return e.jsx("div",{className:"MarketBrief__tooltip-trigger","data-tooltip-id":"Tooltip_MarketInfo","data-tooltip-html":o,children:e.jsx("span",{className:"tip",children:i})},i)})]})},bc=({isLong:t,setIsLong:n})=>e.jsx($n,{oppositeLabels:["Buy","Sell"],isOn:t,setIsOn:n}),ut=f.createContext(null),Tc=()=>{var j;const[t]=Se().chosenDateState,[n,a]=X("isModalOpenState"),s=X("asset"),i=X("strikePrice"),o=X("isCall"),r=X("isLong"),l=Te(),u=G(),p=f.useState({}),c=f.useState(null),d=f.useState(Z(u,JSON.parse(localStorage.getItem("payment-token"))??"ETH")),[y]=d;f.useEffect(()=>{localStorage.setItem("payment-token",JSON.stringify(y.symbol))},[y]);const m=Rn(s,t),g=zt(r,o),T=Xu((m==null?void 0:m[g])??{}),b=(j=m==null?void 0:m[g])==null?void 0:j[i],h=f.useState([]),v=f.useState(!1),x={amountsState:p,availableMarkets:b,errorMarketsState:h,areStrikesLoading:!m,isCostLoadingState:v};return e.jsx(ut.Provider,{value:x,children:e.jsxs(Me,{className:A("OptionChainModal",l&&"_scrollable"),isOpen:n,setIsOpen:a,children:[e.jsx(hc,{strikePrices:T}),e.jsx(he,{}),e.jsx(gc,{availableMarkets:b,strikePrices:T}),e.jsx(Sc,{}),e.jsx(Ac,{paymentTokenState:d,youPayState:c})]})})},hc=({strikePrices:t})=>{const[n,a]=Se().chosenDateState,{areStrikesLoading:s}=f.useContext(ut),[i,o]=X("assetState"),[r,l]=X("strikePriceState"),[u,p]=X("isCallState");return e.jsxs("div",{className:"OptionChainModal__controllers",children:[e.jsx(cc,{isCall:u,setIsCall:p}),e.jsx(bs,{chosenDate:n,setChosenDate:a}),ce(()=>e.jsx(pc,{strikePrices:t,chosenStrikePrice:r,setChosenStrikePrice:l,asset:i,isCall:u}),s),e.jsx(Ln,{asset:i,setAsset:o})]})},gc=({availableMarkets:t,strikePrices:n})=>{const[a,s]=X("isLongState"),{areStrikesLoading:i}=f.useContext(ut);return e.jsxs("div",{className:"OptionChainModal__markets",children:[e.jsx(xc,{isLong:a,setIsLong:s}),rt(e.jsx(_c,{availableMarkets:t,isLong:a,strikePrices:n}),i,e.jsx(lt,{}))]})},xc=({isLong:t,setIsLong:n})=>e.jsxs("div",{className:"OptionChainModal__markets-header",children:[e.jsxs("h1",{className:"OptionChainModal__markets-title",children:[t?"Buy":"Sell"," Options"]}),e.jsx("div",{className:"OptionChainModal__markets-long-controller",children:e.jsx(bc,{isLong:t,setIsLong:n})})]}),_c=({availableMarkets:t,isLong:n,strikePrices:a})=>{const s=X("asset"),i=Ve(s);return e.jsx("div",{className:"OptionChainModal__markets-table-overflow",children:e.jsxs("table",{className:"OptionChainModal__markets-table",cellPadding:0,cellSpacing:0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Instrument"}),e.jsx("th",{children:"Available size"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"IV"}),e.jsxs("th",{children:["Amount to ",n?"buy":"sell"]})]})}),e.jsx("tbody",{children:t?t.map(o=>e.jsx(vc,{marketStrikeData:o,assetPrice:i},o.market)):e.jsx(Cc,{strikePrices:a})})]})})},vc=({marketStrikeData:t,assetPrice:n})=>{const{market:a,premiumData:s,priceForAmount:i,liquidity:o}=t,r=tt(i??s.inUSDC),l=o?Je(o,1):J("Will be available soon",!0),u=Ha(t,n).formatted;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(fc,{marketStrikeData:t})}),e.jsx("td",{children:l}),e.jsx("td",{children:r}),e.jsx("td",{children:u}),e.jsx("td",{children:e.jsx(Mc,{marketStrikeData:t})})]},a)},Cc=({strikePrices:t})=>{const n=t.length?"Choose strike to view available markets":"No Liquidity";return e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"_no-liquidity",children:e.jsx(ze,{fontSize:15,children:n})})})},Mc=({marketStrikeData:t})=>{const{market:n,liquidity:a}=t,s=Se().chosenDateState,i=X("strikePrice"),o=X("isCall"),r=X("isLong"),l=X("isModalOpen"),{amountsState:u,errorMarketsState:p}=f.useContext(ut),[c,d]=u,[y]=p,[m,g]=f.useState("");f.useEffect(()=>{c[n]=m?K(m):0n,d({...c})},[m]),f.useEffect(()=>{g(""),d({})},[o,r,s,i,l]);const T=!!y.find(C=>C===n),b=T&&c[n]>oe(.1)?"Try reducing your size":"",{isComingSoon:h}=t,v=h?`${r?"Buying":"Selling"} ${n} options will be available soon`:"";return e.jsx("div",{className:"OptionChainModal__amount-input","data-tooltip-id":h&&"Tooltip_bottom","data-tooltip-content":v,children:e.jsx(Gt,{className:A("OptionChainModal__markets-table-input"),hasError:T,errorMsg:b,value:m,setValue:g,maxValue:a?H(a):void 0,placeholder:"0",isDisabled:h})})},Sc=()=>{const t=Fe(),[n,a]=t.swapSlippageState;return e.jsxs("div",{className:"OptionChainModal__details",children:[e.jsx("div",{className:"OptionChainModal__details-title",children:"Details"}),e.jsx("div",{className:"OptionChainModal__details-slippage-input",children:e.jsx(On,{slippage:n,setSlippage:a})})]})},Ac=({paymentTokenState:t,youPayState:n})=>{const a=X("isCall"),s=X("isLong"),i=X("strikePrice"),[o]=Se().chosenDateState,[r]=Fe().swapSlippageState,{amountsState:l,availableMarkets:u,errorMarketsState:p,isCostLoadingState:c}=f.useContext(ut),[d]=l,[y,m]=p,[g,T]=n,[b,h]=c,[v]=t,C=E=>{m([...y,E])},x=E=>{m(y.filter(k=>k!==E))},j=()=>{m([])},I=()=>{u.forEach(E=>{E.priceForAmount=null})},R=()=>{T(null),I(),j()},w=async(E=!1)=>{if(!u||cn(d)){R();return}const k=xs(g,b);h(!0);const O=u.map(async P=>{const{market:M}=P,{calcPremium:_}=P.utils,S=d[M];if(!S)return P.priceForAmount=null,k?new Promise(async W=>{await _(oe(.1)).catch(),setTimeout(()=>{P.priceForAmount=null,W()},1700)}):0n;const D=await _(S);return D?(E&&(P.priceForAmount=_t(D.inUSDC,S)),x(M),D):(C(M),P.priceForAmount=null,0n)}).filter(P=>P),B=(await Promise.all(O)).filter(P=>P),L=B.reduce((P,M)=>P+M.inUSDC,0n);T(cn(d)?null:{inUSDC:L,decomposition:[...B]}),h(!1)};return ke(()=>{w(!0)},Ee,[d,u]),f.useEffect(()=>{w()},[r]),f.useEffect(()=>{cn(d)&&R()},[g]),f.useEffect(()=>{T(null),m([])},[a,s,o,i]),e.jsxs("div",{className:"OptionChainModal__payment-panel",children:[e.jsx(os,{paymentTokenState:t,youPayState:n,isCostLoading:b}),e.jsx(wc,{youPay:g,isCostLoading:b,paymentToken:v})]})},wc=({youPay:t,isCostLoading:n,paymentToken:a})=>{const s=G(),{isConnected:i}=ee(),{connectWallet:o}=Ut(),r=X("isLong"),l=X("isCall"),[,u]=X("isModalOpenState"),{availableMarkets:p,amountsState:c,errorMarketsState:d,areStrikesLoading:y}=f.useContext(ut),[m]=c,[g,T]=f.useState(null),[b]=d,[h,v]=f.useState(!1),[C,x]=f.useState(!1),j=et(s,"Exchanger"),I=ot((a==null?void 0:a.symbol)??"ETH",j,(t==null?void 0:t.inPaymentToken)??0n,v),w=us(`${r?"Long":"Short"} ${l?"Call":"Put"}`,g,[],t,Ze,{setIsLoading:x,closeModal:()=>u(!1)});f.useEffect(()=>{if(p){const L=[];for(const P in m){const M=m[P];if(M){const _=p.find(S=>S.market===P);L.push({..._,amount:M})}}T(L)}},[m,p]);const E=xs(t,n);f.useEffect(()=>{E?v(void 0):t?t.inUSDC===0n?v(!1):I.check():v(!1)},[t,n]);const k=()=>{if(!i)return!1;if(y||E||$(h)||!(a!=null&&a.balance))return Ie;if(C)return h?"Submitting...":`Approving ${a.symbol}...`;if(!p)return"Empty strike";if(b.length)return"Invalid input";const P=Object.values(m).every(_=>!_);if(!t||t.inUSDC===0n||P)return"Enter amount";const M=a.balance.inDefaultDecimals;if(M&&M<t.inPaymentToken)return"Insufficient balance"},O=()=>{if(!i)return"Connect Wallet";const L=k();return L||(h?`${r?"Buy":"Sell"} options`:`Approve ${fe(t.inPaymentToken,a.isStable)} ${a.symbol}`)},B=()=>{if(!i){o();return}if(!h){I.approve(x,I.check);return}w()};return e.jsx(z,{isDisabled:k(),onClick:B,children:O()})},xs=(t,n)=>n||t&&$(t.inPaymentToken),cn=t=>Object.values(t).every(n=>!n),jc=()=>{const t=ps();return e.jsx(Wu,{children:e.jsxs("div",{className:"OptionChain",children:[e.jsx(uc,{}),e.jsx(Tc,{}),e.jsx(ys,{positions:t})]})})};const _s=f.createContext(null),kc=({children:t})=>{const n=Bc();return e.jsx(_s.Provider,{value:n,children:t})},Dc=()=>{const t=vs();return t===null?null:t==null?void 0:t.accounts},Ec=()=>{const t=vs();return t===null?null:t==null?void 0:t.mutate},vs=()=>{const{isConnected:t,userAddress:n}=ee(),a=G(),s=ne(a,"MarginTrading"),{data:i,error:o,mutate:r}=Oe(t&&[n,"useMarginAccounts"],async()=>{console.log("useMarginAccounts");const l=await Ic(a,n),u=[],p=[],c=await Pc(s);return l.forEach(y=>{const m={id:y,ratioCoeffs:c},g=s.callStatic.calculateMarginAccountValue(y).then(h=>{const v=ie(BigInt(h),$t);m.balance=v}).catch(console.log),T=s.callStatic.getMarginAccountRatio(y).then(h=>{const v=ie(BigInt(h),5);m.ratio=v}).catch(console.log),b=Promise.all([g,T]).then(()=>u.push(m)).catch(console.log);p.push(b)}),await Promise.all(p),{accounts:u.sort((y,m)=>y.id<m.id?-1:1),mutate:r}},{revalidateOnFocus:!1,refreshInterval:300*re});return o?(console.log(o),null):i},Ic=async(t,n)=>{const a=ne(t,"MarginAccountManager");return(await xl(a,n)).map(o=>o.args.tokenId.toBigInt())},Pc=async t=>{const[n,a]=await Promise.all([t.redCoeff(),t.yellowCoeff()]).then(s=>s.map(i=>ie(BigInt(i),5)));return{red:n,yellow:a}},Ye=()=>{const{isConnected:t}=ee();return t?f.useContext(_s):null},Bc=()=>{const t=Dc(),n=we("MarginAccount_selected-id",-1n,{serializer:l=>JSON.stringify(Number(l)),deserializer:l=>BigInt(JSON.parse(l))}),[a,s]=n,[i,o]=f.useState(!0);f.useEffect(()=>{const l=t==null?void 0:t.find(c=>c.id===a),u=t==null?void 0:t.length;u&&!l&&s(t[0].id),!$(t)?(o(!1),u||s(-1n)):o(!0)},[t,a]);const r={accounts:t,selectedAccountIdState:n,isLoading:i,utils:{}};return Nc(r),r},Nc=t=>(Object.keys(sa).forEach(n=>{const a=sa[n];t.utils[n]=a.bind(t)}),t),sa={getSelectedAccount:function(){return this.accounts?this.accounts.find(n=>n.id===this.selectedAccountIdState[0]):null}},St=()=>{const t=Ye();if(!t)return;const n=t.selectedAccountIdState[0];if(n!==-1n)return n},Rc=()=>{const t=Ye();if(!t)return null;const n=t.utils.getSelectedAccount();return n?n.ratioCoeffs:null};const Lc="/sf_draft/assets/confirm_white-d15a05bc.svg";const Cs=f.createContext(null),Oc=({children:t})=>{const n=Fc();return e.jsx(Cs.Provider,{value:n,children:t})},tn=()=>f.useContext(Cs),Fc=()=>{const t=G(),n=ua(),a=Ec(),s=f.useState(!1),i=f.useState(!1),o=f.useState(!1),r=f.useState(!1),[,l]=s,[,u]=i,[,p]=o,[,c]=r;return{isIntroModalOpenState:s,isCreateModalOpenState:i,isWelcomeModalOpenState:o,isCreatingState:r,actions:{openIntro:()=>{l(!0)},skipIntro:()=>{l(!1),u(!0)},createAccount:async h=>{const v=je(t,"MarginAccountManager");await De(t,v.createMarginAccount,[],C=>{try{let x=C.events[0].args.tokenId.toString();return x.length===1&&(x=`0${x}`),`Margin Account #${x} created.`}catch(x){return console.log(x),"Margin Account created."}},c,()=>{a(void 0),h&&h()})},goToWelcomeModal:()=>{u(!1),p(!0)},startTrading:()=>{p(!1),n("/margin/trading")}}}},Uc="Create new margin account",nn=({label:t})=>{const n=Ye(),a=tn(),{isConnected:s}=ee(),{connectWallet:i}=Ut(),{isCreatingState:o}=a,[r]=o,{openIntro:l,createAccount:u}=a.actions,p=()=>{var d;(d=n==null?void 0:n.accounts)!=null&&d.length?u():l()},c=()=>r?"Creating...":t??Uc;return s?e.jsx(e.Fragment,{children:e.jsx(z,{className:"CreateMarginAccountBtn",type:"stroke",isDisabled:r,onClick:p,children:c()})}):e.jsx(z,{className:"ConnectWalletBtn",onClick:i,children:"Connect wallet"})};const Xe={formatRatio:$c,getRatioClass:Hc,queryRatioAfterPositionOpen:Wc,queryRatioAfterDeposit:qc,queryRatioAfterWithdraw:Vc,queryRatioAfterRepay:Gc};function $c(t){return`${Math.floor(H(t*100n))}%`}function Hc(t,n){const{red:a,yellow:s}=n;return t<a?"_low":t<s?"_medium":"_high"}async function Wc(t,n,a,s){const i=await an(t,s,a);return sn(n.balance+i,n.debt+i)}async function qc(t,n,a,s){const i=await an(t,s,a);return sn(n.balance+i,n.debt)}async function Vc(t,n,a,s){const i=await an(t,s,a);return sn(n.balance-i,n.debt)}async function Gc(t,n,a,s){const i=await an(t,s,a);return sn(n.balance-i,n.debt-i)}const an=async(t,n,a)=>{let s=a;const i=Z(t,"USDC");return n.address!==i.address&&(s=await ne(t,"ModularSwapRouter").callStatic.calculatePositionValue(n.address,i.address,Ke(a,n)).then(BigInt).then(r=>mt(r,i)).catch(console.log)),s},sn=(t,n)=>n==0n?hn:_t(t,n),Ms=()=>e.jsx("svg",{width:"15",height:"10",viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{id:"icon-eternity",children:e.jsx("path",{id:"Vector",d:"M14.9777 4.8961C14.8355 3.68253 14.0771 2.69856 12.9554 2.23937C11.7704 1.76378 10.4433 2.00978 9.51113 2.86255L8.0102 4.22372L8.76856 4.9125L10.1589 3.63333C10.8225 3.02655 11.7546 2.86255 12.6078 3.19055C13.3819 3.50214 13.9033 4.19092 13.9981 5.0109C14.0139 5.12569 14.0139 5.24049 14.0139 5.35529C14.0139 5.47009 13.9981 5.58488 13.9981 5.69968C13.9033 6.53606 13.3819 7.20844 12.6078 7.52003C11.7704 7.84802 10.8541 7.68403 10.1905 7.11004C10.1747 7.09364 10.1747 7.09364 10.1589 7.07724L5.92471 3.25614L5.49813 2.86255C4.55017 2.00978 3.23884 1.76378 2.0381 2.23937C0.932154 2.69856 0.157992 3.68253 0.0315984 4.8961C0.0157992 5.0601 0 5.20769 0 5.37169C0 5.51928 0.0157992 5.68328 0.0315984 5.83088C0.173791 7.04444 0.932154 8.04482 2.0539 8.48761C3.23884 8.96319 4.56597 8.7172 5.51393 7.86442L6.99905 6.50326L6.24069 5.83088L4.85036 7.09364C4.18679 7.70043 3.25464 7.86442 2.40148 7.53643C1.62732 7.22484 1.10594 6.55246 1.01115 5.71608C0.995351 5.60128 0.995351 5.48649 0.995351 5.37169C0.995351 5.25689 1.01115 5.12569 1.01115 5.0273C1.10594 4.20732 1.62732 3.51854 2.40148 3.20695C2.68587 3.09215 2.98605 3.04295 3.27044 3.04295C3.83921 3.04295 4.40798 3.25614 4.83456 3.64973L5.26114 4.04332L9.46373 7.86442L9.49533 7.88082C10.1115 8.45481 10.9015 8.75 11.7072 8.75C12.118 8.75 12.5446 8.668 12.9396 8.50401C14.0613 8.06122 14.8197 7.06084 14.9619 5.84728C14.9777 5.69968 14.9935 5.53568 14.9935 5.38809C15.0093 5.20769 14.9935 5.0601 14.9777 4.8961Z",fill:"white"})})}),Tt=({ratio:t,className:n})=>{const a=Rc();if(!a||$(t))return e.jsx(pe,{});const s=Xe.getRatioClass(t,a),i=t>=hn?e.jsx(Ms,{}):Xe.formatRatio(t);return e.jsx("div",{className:A("MarginRatio",s,n),children:i})},Ss=({isCreateButtonIncluded:t,isSmall:n})=>{const a=Ye();if(a===null)return null;const{accounts:s,selectedAccountIdState:i,isLoading:o}=a,[r,l]=i;if(o)return e.jsx(pe,{});const u=s.map(p=>{const c=p.id===r;return{value:p.id,label:e.jsx(Yc,{account:p,isSelected:c})}});return t&&u.push({value:null,label:e.jsx(nn,{label:"Create new account"}),isDisabled:!0}),e.jsx(be,{className:A("MarginAccountSelector",t&&"_with-create-btn",n&&"_small"),isDisabled:u.length<=1,options:u,defaultValue:r,onChange:p=>{l(p.value)}},r)},Yc=({account:t,isSelected:n})=>{const a=G();if(!t)return e.jsx(pe,{});const{id:s,balance:i,ratio:o}=t,r=s<10n?`0${String(s)}`:String(s),l=de(i,0),p=`https://arbiscan.io/nft/${et(a,"MarginAccountManager")}/${String(s)}`;return e.jsxs("div",{className:"MarginAccountSelector__option",children:[e.jsxs("div",{className:"MarginAccountSelector__option-head",children:[e.jsxs("div",{className:"MarginAccountSelector__option-id",children:[r,e.jsx("a",{href:p,rel:"noreferrer",target:"_blank",onClick:c=>c.stopPropagation(),onMouseDown:c=>{n&&c.stopPropagation()},children:e.jsx("img",{src:da,alt:"link"})})]}),e.jsx(z,{className:"MarginAccountSelector__option-button",type:"micro",children:n?e.jsx("img",{src:Lc,alt:"v"}):"Select"})]}),e.jsx(he,{marginValue:10}),e.jsx("div",{className:"MarginAccountSelector__option-body",children:e.jsxs("div",{className:"MarginAccountSelector__option-stats",children:[e.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Balance"}),e.jsx("div",{className:"info-row__value MarginAccountSelector__option-balance",children:e.jsx(Q,{isHlight:!0,children:l})})]}),e.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Margin Level"}),e.jsx(Tt,{className:"info-row__value MarginAccountSelector__option-ratio",ratio:o})]})]})})]})};const At=t=>{const n=ss(t),a={};return n.forEach(s=>{a[s.symbol]=s}),a};const rn=({amountStr:t,setAmountStr:n,chosenTokenSymb:a,setChosenTokenSymb:s,tokens:i,maxValueOverride:o=void 0,maxLabelOverride:r=void 0})=>{const l=i.map(m=>({value:m.symbol,label:e.jsx(Q,{symbol:m.symbol,isHlight:!0,children:m.symbol})})),u=co(i),p=At(i),c=(o==null?void 0:o[a])??p[a].value,d=fe(c,u[a].isStable),y=e.jsx(Q,{symbol:a,isHlight:!0,children:d});return e.jsxs("div",{className:"TokenAmountInput",children:[e.jsx("div",{className:"TokenAmountInput__title",children:"Amount"}),e.jsxs("div",{className:"TokenAmountInput__content",children:[e.jsx(Gt,{value:t,setValue:n,maxValue:c,maxValueDisplayed:y,maxLabel:r,placeholder:"0"}),e.jsx(be,{options:l,defaultValue:a,onChange:m=>{n(""),s(m.value)}})]})]})},on={repay:Kc,deposit:Qc,withdraw:zc};function Kc(t,n,a,s,i,o=void 0){const r=je(t,"MarginTrading"),l=Le(a,s.decimals),u=Wt(a);De(t,r.repay,[n,s.address,l],{text:`${u} ${s.symbol} were repayed.`,node:e.jsx(Mt,{value:u,symbol:s.symbol,children:"were repayed."})},i,o)}function Qc(t,n,a,s,i,o){const r=je(t,"MarginTrading"),l=je(t,"MarginOneClick"),u=Le(a,s.decimals),p=Wt(a);De(t,s.isETH?l.provideETH:r.provideERC20,s.isETH?[n,{value:u}]:[n,s.address,u],{text:`${p} ${s.symbol} were deposited to your margin account.`,node:e.jsx(Mt,{value:p,symbol:s.symbol,children:"were deposited to your margin account."})},i,o)}function zc(t,n,a,s,i,o){const r=je(t,"MarginTrading"),l=Le(a,s.decimals),u=Wt(a);De(t,r.withdrawERC20,[n,s.address,l],{text:`${u} ${s.symbol} were withdrawn.`,node:e.jsx(Mt,{value:u,symbol:s.symbol,children:"were withdrawn."})},i,o)}const Xc=()=>{const t=G(),n=tn(),{isCreateModalOpenState:a,isCreatingState:s}=n,{createAccount:i,goToWelcomeModal:o}=n.actions,[r,l]=a,[u]=s,p=[{name:"Create",title:"Create Account",content:e.jsx(Zc,{createAccount:i,isCreating:u,callback:()=>d("Enable")})},{name:"Enable",title:"Enable One-Click Trading",content:e.jsx(Jc,{callback:()=>d("Deposit")})},{name:"Deposit",content:e.jsx(ep,{callback:o})}],[c,d]=f.useState(p[0].name),y={};p.forEach(g=>{g.isActive=c===g.name,y[g.name]=g});const m=St();return f.useEffect(()=>{if($(m))return;const g=ne(t,"MarginAccountManager"),T=et(t,"MarginOneClick");g.isApprovedOrOwner(T,m).then(b=>{b||(d("Enable"),l(!0))})},[m]),e.jsxs(Me,{className:"MarginAccountCreateModal",isOpen:r,setIsOpen:l,children:[e.jsx("h1",{className:"MarginAccountCreateModal__title",children:y[c].title??y[c].name}),e.jsx(ls,{stagesArr:p}),y[c].content]})},Zc=({createAccount:t,isCreating:n,callback:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Welcome to Sharwa! Follow these simple steps to start using our unique trading products. First, create a margin account. The whole process will take less than 60 seconds!"}),e.jsx(z,{className:"MarginAccountCreateModal__button",onClick:()=>t(a),isDisabled:n,children:n?"Creating...":"Create Margin account"})]}),Jc=({callback:t})=>{const n=G(),a=St(),[s,i]=f.useState(!1),o=()=>{i(!0);const u=je(n,"MarginAccountManager"),p=et(n,"MarginOneClick");De(n,u.approve,[p,a],"One-Click Trading enabled.",i,t)},r=()=>{if($(a))return Ie;if(s)return"Enabling..."},l=()=>{const u=r();return u||"Enable One-Click Trading"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"To streamline your experience, enable One-Click Trading to reduce the number of transactions you need to sign."}),e.jsx(z,{className:"MarginAccountCreateModal__button",isGreen:!0,isDisabled:!!r(),onClick:o,children:l()})]})},ep=({callback:t})=>{const[n,a]=f.useState(""),s=G(),i=gt(s),[o,r]=f.useState("USDC"),u=At(i)[o],p=St(),[c,d]=f.useState(void 0),[y,m]=f.useState(!1),g=et(s,"MarginAccount"),T=ot(o,g,K(n),d);f.useEffect(()=>{d(void 0)},[n]),ke(()=>{d(void 0),T.check()},Ee,[n]);const b=()=>n===""?"Enter amount":n==="0"?"Insufficient amount":K(n)>u.value?"Insufficient balance":$(c)?Ie:y?c?"Depositing...":"Approving...":null,h=()=>{const x=b();return x||(c?"Deposit":"Approve")},v=()=>{m(!0),T.approve(m,()=>{d(void 0),T.check()})},C=()=>{if(!c)v();else{const x=K(n);on.deposit(s,p,x,u,m,t)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Now, deposit your tokens into your margin account. Remember, when you trade on Sharwa, only the tokens in your margin account are at risk. If your margin account is undergoing liquidation, only the assets in this account are affected."}),e.jsx(he,{marginValue:15}),e.jsx(rn,{amountStr:n,setAmountStr:a,chosenTokenSymb:o,setChosenTokenSymb:r,tokens:i}),e.jsx(z,{className:"MarginAccountCreateModal__button",isDisabled:!!b(),isGreen:!b()&&!c,onClick:C,children:h()})]})};const tp="/sf_draft/assets/uniswap-leverage-6599cd28.svg",np="/sf_draft/assets/interest-rate-bd5539c1.svg",ap="/sf_draft/assets/interest-rate_mobile-bff5408a.svg",sp="/sf_draft/assets/options-a96927ae.svg",ip="/sf_draft/assets/options_mobile-63c68d57.svg",rp="/sf_draft/assets/options-profit-2b09f575.svg",op="/sf_draft/assets/toolkits-6c59efc3.svg",lp="/sf_draft/assets/toolkits_mobile-fb7128d1.svg",up="/sf_draft/assets/LINK_circled-d3ed9518.svg",cp=()=>{const t=tn(),{isIntroModalOpenState:n}=t,{skipIntro:a}=t.actions,[s,i]=n,[o,r]=f.useState(0),l=[e.jsx(pp,{}),e.jsx(dp,{}),e.jsx(yp,{}),e.jsx(mp,{}),e.jsx(fp,{})];return f.useEffect(()=>{if(s){const u=l.length-1;o>u&&a();const p=setInterval(()=>{const c=o+1;r(c)},10*1e3);return()=>clearInterval(p)}},[s,o]),e.jsxs(Me,{className:"MarginAccountIntroModal",isOpen:s,setIsOpen:i,reset:()=>r(0),children:[e.jsx("div",{className:"MarginAccountIntroModal__content",children:l[o]}),e.jsx("button",{className:"MarginAccountIntroModal__skip-btn",onClick:a,children:"Skip introduction"}),e.jsxs("div",{className:"MarginAccountIntroModal__steps-container",children:[e.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _prev",onClick:()=>r(o-1),disabled:o===0}),e.jsx("div",{className:"MarginAccountIntroModal__steps",children:l.map((u,p)=>{const c=p<=o;return e.jsx("button",{className:A("MarginAccountIntroModal__step",c&&"_passed"),onClick:()=>r(p),children:p+1},p)})}),e.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _next",onClick:()=>r(o+1)})]})]})},pp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic",children:[e.jsx("dotlottie-player",{id:"MarginAccountIntroModal__animation-1",src:"https://lottie.host/a3afd567-a7f7-4306-ba85-d1c8712283a0/PSgo2GIw16.lottie",mode:"normal",loop:!0,autoplay:!0}),e.jsx("img",{src:tp,alt:"Uniswap illustration"})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"10x Leverage on Uniswap"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"All long and short positions are routed through Uniswap v3. Traders benefit from the deep liquidity and fair pricing of Uniswap."})]}),dp=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountIntroModal__pic",children:e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:ap}),e.jsx("img",{src:np,alt:"Interest rate illustration"})]})}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Cheap Leverage"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Sharwa offers lower cost of leverage compared to traditional derivative protocols. This is because traders are supported by liquidity providers who supply up to 10x leverage, rather than trading directly against them."})]}),yp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic _options",children:[e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:ip}),e.jsx("img",{src:sp,alt:"Options Scheme"})]}),e.jsx("div",{className:"_animation_glare",children:e.jsx("img",{src:rp,alt:"Glaring profit"})})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title _options",children:e.jsx("a",{href:"https://www.hegic.co/",target:"_blank",rel:"noreferrer",children:"American-Style Options"})}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Trade American-style options to effectively hedge your risks. The Margin Account uses the intrinsic value of your option positions as collateral, ensuring you won’t face liquidations, even with 10x leverage, if you’re properly hedged with options."})]}),mp=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountIntroModal__pic _collateral",children:e.jsxs("div",{className:"icon-group _animation_jumping-coins",children:[e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:Ta,alt:"USDC logo"})}),e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:fa,alt:"ETH logo"})}),e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:ba,alt:"WBTC logo"})})]})}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Multi-Collateral"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"The total value of all your tokens in the margin accounts is summed in USDC, allowing you to trade with up to 10x leverage without needing to sell your holdings."})]}),fp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic _toolkits",children:[e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:lp}),e.jsx("img",{src:op,alt:"Stop Order graph"})]}),e.jsx("div",{className:"animation-wrapper",children:e.jsx("div",{className:"_animation_glare",children:e.jsx("img",{src:up,alt:"Chainlink Token icon"})})})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Trading Toolkits"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Soon, we will offer stop-market orders, trailing stop-market orders, auto delta-hedging, and personalized risk profiles for each margin account. Stay tuned!"})]});const bp="/sf_draft/assets/trading-4b0d0849.png",Tp=()=>{const t=tn(),{isWelcomeModalOpenState:n}=t,{startTrading:a}=t.actions,[s,i]=n;return e.jsxs(Me,{className:"MarginAccountWelcomeModal",isOpen:s,setIsOpen:i,children:[e.jsx("div",{className:"MarginAccountWelcomeModal__pic",children:e.jsx("img",{src:bp,alt:"Graphs illustration"})}),e.jsxs("h1",{className:"MarginAccountWelcomeModal__title",children:["You’re ready to start trading ",e.jsx("br",{}),"on Sharwa"]}),e.jsxs("div",{className:"MarginAccountWelcomeModal__text text-inline",children:["Enjoy the benefits of leverage, ",e.jsx("br",{}),"portfolio margining and other features!"]}),e.jsx(z,{className:"MarginAccountWelcomeModal__button",onClick:a,children:"Go to Trade"})]})},hp=()=>e.jsx(kc,{children:e.jsxs(Oc,{children:[e.jsx(gp,{}),e.jsx(xp,{})]})}),gp=()=>{var s;const t=Ye(),n=ht(),a=[{name:"Trading Terminal",to:"/margin/trading"},{name:"Margin Account",to:"/margin/account",isDisabled:!t}];return a.forEach(i=>{n.pathname.endsWith(i.to)&&(i.isActive=!0)}),e.jsxs("div",{className:"MarginPage",children:[e.jsxs("div",{className:"MarginPage__head",children:[e.jsx(Ia,{}),(s=t==null?void 0:t.accounts)!=null&&s.length?e.jsx(Ss,{isCreateButtonIncluded:!0}):""]}),e.jsx(Rt,{links:a,type:"border"}),e.jsx(la,{})]})},xp=()=>e.jsxs(e.Fragment,{children:[e.jsx(cp,{}),e.jsx(Xc,{}),e.jsx(Tp,{})]});const As=f.createContext(null),ws=f.createContext(null),js=({children:t})=>{const[n,a]=vp();return e.jsx(As.Provider,{value:n,children:e.jsx(ws.Provider,{value:a,children:t})})},_p=()=>f.useContext(As),vp=()=>{const[t,n]=f.useReducer(Cp,{});return[t,n]},Cp=(t,n)=>{switch(n.type){case"added":{const{asset:a,dataFrequency:s,ohlcvData:i}=n;return t[a]||(t[a]={}),t[a][s]||(t[a][s]=i),{...t}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},nt={SERVER_URL:"https://omni.icarus.tools",LIQUIDITY_DEPTH_PERCENTAGE_RANGE:.025,CHART_DATA_FREQUENCIES:[5*Re*re,1*qe*Re*re,4*qe*Re*re,vt(1)],SUPERSEDING_POOLS:{}},Hn={queryOhlcvData:async(t,n,a,s)=>{const i=Sp(n,a,s);return ia(t,i)},queryLiquidityData:async(t,n)=>{const a=Ap(n);return ia(t,a)},getPriceData:jp,getChartOptions:t=>{var n;return{width:(n=t.current)==null?void 0:n.clientWidth,height:400,rightPriceScale:{borderColor:Mn},layout:{background:{color:ir},textColor:ct,fontFamily:"Gantari"},grid:{vertLines:{color:Qn,style:4},horzLines:{color:Qn,style:4}},crosshair:{vertLine:{color:pt,labelBackgroundColor:zn},horzLine:{color:pt,labelBackgroundColor:zn}},localization:{locale:"en-US",timeFormatter:a=>{const s=a*re;return Ae(s,"dd MMM yyyy, h:mm a")},priceFormatter:a=>"$"+ye(a,2)},timeScale:{timeVisible:!0,tickMarkFormatter:(a,s)=>{const i=a*re;return s===2||s===1?Ae(i,"d MMM"):Ae(i,"HH:mm")}}}}},ia=async(t,n)=>{const a=Mp(t),s=wp(n);return fetch(a,s).then(i=>i.json()).catch(console.log)},Mp=t=>{const n=Lt[t];if(!n)throw new Error(`Unknown chainId: ${t}`);const a=n.name.toLowerCase();return`${nt.SERVER_URL}/${a}`},Sp=(t,n,a,s=void 0)=>(s=s??Date.now(),{jsonrpc:"2.0",method:"cush_ohlcvTradingView",params:[t,n,s-a,s],id:0}),Ap=t=>({jsonrpc:"2.0",method:"cush_orderBook",params:[t,0,{max_orders_per_side:10,granularity_index:2}],id:1}),wp=t=>({headers:{},body:JSON.stringify(t),method:"POST"});function jp(t){if(!t)return null;const n=()=>{const i=Number(It(t).close)-Number(t[0].close),o=i/Number(t[0].close)*100;return{inUSDC:ye(i,He),inPercentage:ye(o,He)}},a=()=>{const i=t.map(o=>ye(Number(o.close),He));return _o(i)},s=()=>{const i=Number(It(t).close);return ye(i,He)};return{priceChange:n(),...a(),currentPrice:s()}}const ra=nt.CHART_DATA_FREQUENCIES[0],kp=vt(31),ks=(t,n=ra,a=kp)=>{var m;const s=_p(),i=f.useContext(ws),[o,r]=f.useState((m=s==null?void 0:s[t])==null?void 0:m[n]),l=G(),u=ne(l,"UniswapFactory"),p=ha(l,t),c=Ve(t),{error:d,data:y}=Oe(c&&[l,t,n,"useOhlcvForAsset"],async()=>{const g=nt.SUPERSEDING_POOLS[t]??await u.getPool(p,Cn(l),Za),T=await Hn.queryOhlcvData(l,g,n,a);if(T!=null&&T.result){const b=H(c);return T.result.candles.push({open:b,high:b,low:b,close:b,time:Date.now()}),T.result.candles.forEach(h=>{h.time=h.time/re}),T.result.candles}else return console.log((T==null?void 0:T.error)??T),null},{refreshInterval:ra,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var g;r((g=s==null?void 0:s[t])==null?void 0:g[n])},[t,n]),f.useEffect(()=>{y&&(r(y),i({type:"added",asset:t,dataFrequency:n,ohlcvData:y}))},[y]),d?(console.log(d),null):o},Dp=t=>{const n=nt.CHART_DATA_FREQUENCIES[0];return ks(t,n,vt(1))},Ep=()=>{const[t,n]=en();return e.jsx(js,{children:e.jsx(Ip,{asset:t,setAsset:n})})},Ip=({asset:t,setAsset:n})=>{const a=Dp(t),s=Hn.getPriceData(a),i=Ft.map(o=>{const r=Dt(o),l=Dt("USDC");return{value:o,label:e.jsxs("div",{className:"Asset24hChange__selector-option",children:[e.jsxs("div",{className:"Asset24hChange__selector-option-icons",children:[e.jsx("div",{className:"Asset24hChange__selector-option-icon",children:e.jsx("img",{src:r,alt:`${o} icon`})}),e.jsx("div",{className:"Asset24hChange__selector-option-icon",children:e.jsx("img",{src:l,alt:"USDC icon"})})]}),e.jsxs("div",{className:"Asset24hChange__selector-option-name",children:[o,"/USDC"]})]})}});return e.jsxs("div",{className:"Asset24hChange",children:[e.jsx(be,{className:"Asset24hChange__selector",options:i,defaultValue:t,onChange:o=>{n(o.value)}},t),e.jsxs("div",{className:"Asset24hChange__data",children:[e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name tip","data-tooltip-id":"CurrentPriceTooltip",children:"Current Price"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:ce(()=>wt(s.currentPrice,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Change"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:ce(()=>e.jsx(Pp,{assetChangeData:s}),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h High"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:ce(()=>wt(s.max,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Low"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:ce(()=>wt(s.min,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"Interest Rate"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:J()})]})]}),e.jsx(Bp,{})]})},Pp=({assetChangeData:t})=>{const{inPercentage:n}=t.priceChange,a=n>0,s=n<0,i=a?dn.positive:s?dn.negative:"",o=xt(t.priceChange.inPercentage,2,!0),r=`${i}${Math.abs(o)}%`;return e.jsx("span",{className:A({positive:a,negative:s,neutral:n===0}),children:r})},Bp=()=>e.jsx(te,{id:"CurrentPriceTooltip",clickable:!0,children:e.jsxs("div",{className:"text-inline",children:["This price is sourced from the ",e.jsx("br",{}),"Uniswap v3 pool. Price data is ",e.jsx("br",{}),"powered by ",e.jsx("a",{href:"https://oku.trade/",target:"_blank",rel:"noreferrer",children:"Oku.Trade"})]})});nt.CHART_DATA_FREQUENCIES[0];const Np=({type:t,chartData:n,chartContainerRef:a,chartOptions:s,seriesOptions:i,className:o,header:r,callback:l=()=>{}})=>(f.useEffect(()=>{if(!n)return;const u=()=>{p.applyOptions({width:a.current.clientWidth})},p=Di(a.current,s);return p[`add${Jt(t)}Series`](i).setData(n),window.addEventListener("resize",u),l(p),()=>{window.removeEventListener("resize",u),p.remove()}},[n]),e.jsxs("div",{className:A("App-box","Chart--container",`${o}--container`),children:[r&&e.jsx("div",{className:A("Chart__header",`${o}__header`),children:r}),rt(e.jsx("div",{className:A("Chart",o),ref:a}),!n,e.jsx(lt,{}))]})),Rp=({chartData:t,chartContainerRef:n,chartOptions:a,seriesOptions:s=Lp,className:i,header:o,callback:r=()=>{}})=>e.jsx(Np,{type:"Candlestick",chartData:t,chartContainerRef:n,chartOptions:a,seriesOptions:s,className:i,header:o,callback:r}),Lp={priceLineColor:Et,downColor:se,wickDownColor:se,upColor:Ne,wickUpColor:Ne,borderVisible:!1},Op=()=>{const[t]=en();return e.jsx(js,{children:e.jsx(Fp,{asset:t})})},Fp=({asset:t})=>{const[n,a]=we("AssetPriceChart-dataFrequency",nt.CHART_DATA_FREQUENCIES[0]),s=ks(t,n),[i,o]=f.useState(null),r=f.useRef(),l=f.useCallback(p=>{if(!p.time){o(null);return}const c=s.find(d=>d.time===p.time);o(c)},[o,s]),u=p=>{p.timeScale().applyOptions({borderColor:Mn}),p.subscribeCrosshairMove(l)};return e.jsx(Rp,{className:"AssetPriceChart",header:e.jsx(Up,{dataFrequency:n,setDataFrequency:a,candle:i??(s==null?void 0:s[s.length-1])}),chartData:s,chartContainerRef:r,chartOptions:Hn.getChartOptions(r),callback:u})},Up=({dataFrequency:t,setDataFrequency:n,candle:a})=>e.jsxs("div",{className:"AssetPriceChart__header",children:[e.jsx($p,{dataFrequency:t,setDataFrequency:n}),e.jsx(Hp,{candle:a})]}),$p=({dataFrequency:t,setDataFrequency:n})=>{const{CHART_DATA_FREQUENCIES:a}=nt;return e.jsx("div",{className:"AssetPriceChart__data-frequency",children:a.map(s=>{const i=s===t,o=Yt(s),r=Math.floor(s/re/Re),l=Math.floor(r/qe),u=o>0?`${o}D`:l>0?`${l}h`:`${r}m`;return e.jsx(z,{className:A("AssetPriceChart__data-frequency-btn",i&&"_chosen"),type:"stroke",onClick:()=>n(s),children:u},s)})})},Hp=({candle:t})=>{const n=["open","high","low","close"];if(!t)return null;const a=t.open>t.close;return e.jsx("div",{className:"AssetPriceChart__indicators",children:n.map(s=>{const i=_e(ye(t[s],2));return e.jsxs("div",{className:"AssetPriceChart__indicators-item",children:[e.jsx("span",{className:"AssetPriceChart__indicators-item-name",children:s[0].toUpperCase()}),e.jsx("span",{className:A("AssetPriceChart__indicators-item-value",{negative:a,positive:!a}),children:i})]},s)})})};const Wp="/sf_draft/assets/Pashov_Audit_Group-e5d101e4.png",Ds=()=>e.jsxs("a",{className:"AuditStamp",href:"https://github.com/pashov/audits/blob/master/team/pdf/SharwaFinance-security-review.pdf",target:"_blank",rel:"noreferrer",children:[e.jsx("div",{className:"AuditStamp__text",children:"Audited by"}),e.jsx("div",{className:"AuditStamp__logo",children:e.jsx("img",{src:Wp,alt:"Pashov Audit Group"})})]});const qp="/sf_draft/assets/Uniswap_circled-4e125cab.svg",Ue=()=>{const t=Es();return t===null?null:t==null?void 0:t.data},ln=()=>{const t=Es();return t===null?null:t==null?void 0:t.mutate},Es=()=>{const{isConnected:t,userAddress:n}=ee(),a=G(),s=Ye(),i=s==null?void 0:s.isLoading,o=St(),{data:r,error:l,mutate:u}=Oe(t&&!i&&!$(o)&&[n,o,"useMarginAccountData"],async()=>{console.log("useAccountData");const p=s.utils.getSelectedAccount()??{},c={id:o,...p},d=Vp(a,o),y=Gp(a,o),m=Yp(a,o),g=Kp(a,o),T=Qp(a,o);return await Promise.all([d,y,m,g,T]).then(([b,h,v,C,x])=>{c.ratio=b,c.balance=h,c.debt=v,c.fee=C,c.equity=(c.balance??0n)-v,c.poolsData=x}).catch(console.log),c},{refreshInterval:60*re});return!i&&(!t||$(o))?null:l?(console.log("useMarginAccountData error!",l),null):{data:r,mutate:u}},Vp=async(t,n)=>{const s=await ne(t,"MarginTrading").callStatic.getMarginAccountRatio(n).catch(console.log);return ie(BigInt(s),5)},Gp=async(t,n)=>{const s=await ne(t,"MarginTrading").callStatic.calculateMarginAccountValue(n).catch(console.log);return ie(BigInt(s),$t)},Yp=async(t,n)=>{const s=await ne(t,"MarginTrading").callStatic.calculateDebtWithAccruedInterest(n).catch(console.log);return ie(BigInt(s),$t)},Kp=async(t,n)=>{if($(n))return null;const a=me.map(c=>br[c]),s=me.map(c=>ha(t,c)),i=me.map(c=>ne(t,`Pool_${c}`)),o=await Promise.all(i.map(c=>c.getDebtWithAccruedInterest(n).then(BigInt))),r=await Promise.all(i.map(c=>c.portfolioIdToDebt(n).then(BigInt))),l=o.map((c,d)=>{const y=r[d];return c-y});return(await Promise.all(l.map((c,d)=>{const y=ie(c,a[d]),m=s[d];return y>0n?Nn(t,m,y):0n}))).reduce((c,d)=>c+d,0n)},Qp=async(t,n)=>{const a={},s=ne(t,"MarginAccount"),i=[];return me.forEach(o=>{const r=Z(t,o);a[o]={token:r};const l=ne(t,`Pool_${o}`);i.push(s.getErc20ByContract(n,r.address).then(BigInt).then(u=>{const p=ie(u,r.decimals);a[o].amount=p}).catch(console.log),l.interestRate().then(BigInt).then(u=>{const p=ie(u,4);a[o].interestRate=p}).catch(console.log),l.getDebtWithAccruedInterest(n).then(BigInt).then(u=>{const p=ie(u,r.decimals);a[o].debt=p}).catch(console.log))}),await Promise.all(i),a};const un=({curRatio:t,estRatio:n})=>e.jsxs("div",{className:"MarginRatioChange",children:[e.jsx(Tt,{ratio:t}),n!==null&&e.jsxs(e.Fragment,{children:[e.jsx(zp,{}),$(n)?e.jsx(pe,{}):e.jsx(Tt,{ratio:n})]})]}),zp=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:e.jsx("path",{d:"M1 3.5C0.723858 3.5 0.5 3.72386 0.5 4C0.5 4.27614 0.723858 4.5 1 4.5V3.5ZM11.3536 4.35355C11.5488 4.15829 11.5488 3.84171 11.3536 3.64645L8.17157 0.464466C7.97631 0.269204 7.65973 0.269204 7.46447 0.464466C7.2692 0.659728 7.2692 0.976311 7.46447 1.17157L10.2929 4L7.46447 6.82843C7.2692 7.02369 7.2692 7.34027 7.46447 7.53553C7.65973 7.7308 7.97631 7.7308 8.17157 7.53553L11.3536 4.35355ZM1 4.5H11V3.5H1V4.5Z",fill:"#747FA6"})}),Xp=()=>{var i;const t=Ye();let n;const a=t!==null&&(t.isLoading||$(t.accounts)),s=t===null||((i=t.accounts)==null?void 0:i.length)===0;return a?n=e.jsx(lt,{}):s&&(n=e.jsx(nn,{})),e.jsx("div",{className:"MarginTradingPanel App-box",children:n??e.jsx(Zp,{})})},Zp=()=>{const t=G(),n=Ue(),[a,s]=f.useState(!0),[i,o]=en(),[r,l]=f.useState(""),[u,p]=f.useState(null),[c,d]=f.useState(null),[y,m]=we("swap-slippage",Ze),[g,T]=f.useState(!1),b=Z(t,i),h=K(r),v=Z(t,"USDC"),C=ne(t,"ModularSwapRouter"),x=`calculateAmount${a?"In":"Out"}ERC20`,j=async()=>{let P,M;const _=Z(t,i),S=K(r);if(a)M=_,P=S;else{const F=ne(t,"ModularSwapRouter");M=Z(t,"USDC");const W=await F.callStatic.calculateAmountOutERC20(_.address,M.address,Ke(S,_)).then(BigInt);P=mt(W,M)}const D=bt(P,y);Xe.queryRatioAfterPositionOpen(t,n,D,M).then(p)},I=async()=>{d(void 0);const P=await R(),_=(a?bt:na)(P,y),S=_t(_,h);d(S)},R=async(P=void 0)=>{const M=Ke(h,b);return await C.callStatic[x](b.address,v.address,M).then(BigInt).then(S=>mt(S,v)).catch(S=>{console.log("Converting to USDC error:",S),P&&P(!1)})};f.useEffect(()=>{!r||K(r)===0n?(p(null),d(null)):(p(void 0),d(void 0))},[r,y,a,i]),ke(()=>{!r||K(r)===0n||(j(),I())},Ee,[r,y,a,i]);const w=[{value:"market",label:"Market"},{value:"stop_market",label:"Stop Market",isDisabled:!0}],E=[{value:"ETH",label:e.jsx(Q,{symbol:"ETH",isHlight:!0,children:"ETH"})},{value:"BTC",label:e.jsx(Q,{symbol:"BTC",isHlight:!0,children:"BTC"})}],k=()=>{if($(u))return Ie;if(!r)return"Enter amount";if(K(r)===0n)return"Insufficient amount";if(u<=n.ratioCoeffs.red)return"Critical Est.Ratio";if(g)return"Submitting..."},O=()=>{const P=k();return P||`Open ${a?"Long":"Short"}`},B=ln(),L=async()=>{T(!0);const P=a?v:b,M=a?b:v,_=je(t,"MarginOneClick"),S=await R(T),D=a?S:h,W=na(a?h:S,y),Y=Ke(D,P),N=Ke(W,M),q=()=>{B(),l("")};De(t,_.borrowSwap,[n.id,P.address,M.address,Y,N],{text:`${r} ${b.symbol} was ${a?"bought":"sold"}.`,node:e.jsxs(Mt,{value:r,symbol:b.symbol,children:["was ",a?"bought":"sold","."]})},T,q)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginTradingPanel__inputs",children:[e.jsx("div",{className:"MarginTradingPanel__switcher",children:e.jsx($n,{isOn:a,setIsOn:s,oppositeLabels:["Long","Short"]})}),e.jsxs("div",{className:"MarginTradingPanel__input",children:[e.jsx("div",{className:"MarginTradingPanel__input-title",children:"Order Type"}),e.jsx("div",{className:"MarginTradingPanel__input-body",children:e.jsx(be,{options:w,defaultOption:w[0]})})]}),e.jsxs("div",{className:"MarginTradingPanel__input",children:[e.jsx("div",{className:"MarginTradingPanel__input-title",children:a?"Long":"Short"}),e.jsxs("div",{className:"MarginTradingPanel__input-body",children:[e.jsx(Gt,{value:r,setValue:l,placeholder:"0"}),e.jsx(be,{className:"MarginTradingPanel__asset-selector",options:E,defaultValue:i,onChange:P=>o(P.value)},i)]})]})]}),e.jsxs("div",{className:"MarginTradingPanel__footer",children:[e.jsxs("div",{className:"MarginTradingPanel__stats",children:[e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Market"}),e.jsxs("div",{className:"MarginTradingPanel__stat-value",children:[e.jsx("img",{src:qp,alt:"Uniswap logo"}),"UNISWAP"]})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Margin Ratio"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:e.jsx(un,{curRatio:n==null?void 0:n.ratio,estRatio:u})})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Slippage"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:e.jsx(On,{slippage:y,setSlippage:m,title:""})})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Entry Price"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:ce(()=>c===null?J():e.jsx(Q,{symbol:"USDC",isHlight:!0,children:fe(c,!0)}),$(c))})]})]}),e.jsx(z,{className:"MarginTradingPanel__button",onClick:L,isDisabled:!!k(),children:O()})]})]})},Jp=()=>e.jsxs("div",{className:"MarginTrading",children:[e.jsx(Ep,{}),e.jsx(Ds,{}),e.jsx(Op,{}),e.jsx(Xp,{})]});const ed="/sf_draft/assets/pointer-7384e3ac.svg",td=({isBrief:t})=>{const n=Ue(),{ratio:a,ratioCoeffs:s}=n??{},i=$(n);if(n===null)return t?e.jsx(pn,{noData:!0}):null;if(i)return t?e.jsx(pn,{isLoading:!0}):e.jsx(lt,{});const r=a>=hn?300:H(a*100n),l=Math.max(r-100,0)*4,u={left:`${Math.min(l,100)}%`};if(t)return e.jsx(pn,{ratio:a});const p=`${Math.floor(H(s.red)*100)}%`,c=`${Math.floor(H(s.yellow)*100)}%`,d=e.jsx(Ms,{});return e.jsxs("div",{className:"MarginLevel",children:[e.jsxs("div",{className:"MarginLevel__head",children:[e.jsx("div",{className:"MarginLevel__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),e.jsx(Tt,{ratio:a})]}),e.jsxs("div",{className:"MarginLevel__indicator",children:[e.jsx("div",{className:"MarginLevel__indicator-segment _low",children:p}),e.jsx("div",{className:"MarginLevel__indicator-segment _medium",children:c}),e.jsx("div",{className:"MarginLevel__indicator-segment _high",children:d}),e.jsx("div",{className:"MarginLevel__indicator-pointer",style:u,children:e.jsx("img",{src:ed,alt:"v"})})]}),e.jsx(Is,{})]})},pn=({noData:t,isLoading:n,ratio:a})=>e.jsxs("div",{className:"MarginLevelBrief",children:[e.jsx("div",{className:"MarginLevelBrief__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),t?J():n?e.jsx(pe,{}):e.jsx(Tt,{ratio:a}),e.jsx(Is,{})]}),Is=()=>e.jsxs(te,{id:"MarginLevelTooltip",children:["The margin level is a crucial ",e.jsx("br",{}),"indicator of your margin ",e.jsx("br",{}),"account's health. It helps ",e.jsx("br",{}),"determine how close you are ",e.jsx("br",{}),"to liquidation, which occurs if ",e.jsx("br",{}),"your margin level falls below ",e.jsx("br",{}),"105%.",e.jsx("br",{}),"To calculate the value of your ",e.jsx("br",{}),"collateral and debt, we use ",e.jsx("br",{}),"Chainlink Price Feeds."]}),nd=()=>e.jsxs("div",{className:"MarginAccountInfo App-box",children:[e.jsx("h1",{className:"MarginAccountInfo__title",children:"Account Info"}),e.jsxs("div",{className:"MarginAccountInfo__accounts-list",children:[e.jsxs("div",{className:"MarginAccountInfo__chosen-account-field",children:[e.jsx("div",{className:"MarginAccountInfo__chosen-account-field-title",children:"Account ID"}),e.jsx("div",{className:"MarginAccountInfo__chosen-account-field-selector",children:e.jsx(Ss,{isSmall:!0})})]}),e.jsx(nn,{})]}),e.jsx(he,{marginValue:20}),e.jsx(td,{}),e.jsx(ad,{})]}),ad=()=>{const t=Ue(),{ratio:n,ratioCoeffs:a}=t??{};if($(t))return null;const i={"Reduce Positions":1,"Increase Positions":0,deposit:1,repay:1,withdraw:0},o=Xe.getRatioClass(n,a),r=o==="_low",l=o==="_medium";return e.jsxs("table",{className:"MarginAccountInfo__actions-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(i).map(u=>e.jsx("th",{children:Jt(u)},u))})}),e.jsx("tbody",{children:e.jsx("tr",{children:Object.keys(i).map(u=>{const p=i[u],c=r?!1:l?p:!0;return e.jsx("td",{className:A(!c&&"_denied")},u)})})})]})};const Ps="/sf_draft/assets/re-arrow-195ed622.svg",sd=({setIsRepayModalOpen:t})=>{const n=Ue(),{equity:a,debt:s,balance:i,fee:o}=n??{},r=$(n),l=()=>{t(!0)};return e.jsxs("div",{className:"MarginAccountBalance App-box",children:[e.jsxs("div",{className:"MarginAccountBalance__head",children:[e.jsx("h1",{className:"MarginAccountBalance__title",children:"Account Balance"}),e.jsx("div",{className:A("MarginAccountBalance__value",!r&&"tip"),"data-tooltip-id":!r&&"MarginAccount_BalanceTooltip",children:ce(()=>e.jsx(Q,{isHlight:!0,children:fe(i,!0)}),r)})]}),e.jsxs("div",{className:"MarginAccountBalance__items",children:[e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name tip","data-tooltip-id":"MarginAccount_EquityTooltip",children:"Equity"}),e.jsx("div",{className:"MarginAccountBalance__item-value",children:ce(()=>e.jsx(Q,{isHlight:!0,children:fe(a,!0)}),r)})]}),e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name",children:"Debt"}),e.jsxs("div",{className:"MarginAccountBalance__item-value",children:[ce(()=>e.jsx(Q,{isHlight:!0,children:fe(s,!0)}),r),e.jsxs(z,{className:"MarginAccountBalance__item-button",type:"micro _with-icon",onClick:l,isDisabled:r||!s,children:[e.jsx("img",{src:Ps,alt:"Repay"}),"Repay"]})]})]}),e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name",children:"Interest & Service Fee"}),e.jsx("div",{className:"MarginAccountBalance__item-value",children:ce(()=>e.jsx(Q,{isHlight:!0,children:fe(o,!0)}),r)})]})]}),e.jsx(id,{}),e.jsx(rd,{})]})},id=()=>e.jsxs(te,{id:"MarginAccount_EquityTooltip",children:["Equity is calculated as the ",e.jsx("br",{}),"sum of your collateral, ",e.jsx("br",{}),"unrealized profits from long/",e.jsx("br",{}),"short positions, and the ",e.jsx("br",{}),"intrinsic value of American-",e.jsx("br",{}),"style options, minus your ",e.jsx("br",{}),"debt."]}),rd=()=>e.jsxs(te,{id:"MarginAccount_BalanceTooltip",children:["This is the total value of your ",e.jsx("br",{}),"margin account (your collateral + ",e.jsx("br",{}),"purchased tokens)."]});const bn="/sf_draft/assets/download-93c01438.svg",od="/sf_draft/assets/upload-ab835e79.svg";const ld=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),[o,r]=f.useState(""),[l,u]=f.useState(null),[p,c]=f.useState(!1),d=gt(i),y=Ue(),m=ln();f.useEffect(()=>{!o||K(o)===0n?u(null):u(void 0)},[o]),ke(()=>{!o||K(o)===0n||g()},Ee,[o]);const g=async()=>{const x=K(o),j=Z(i,a),I=await Xe.queryRatioAfterWithdraw(i,y,x,j);u(I)};if(!y)return null;const T=y.id,b={};Object.values(y.poolsData).forEach(x=>{b[x.token.symbol]=x.amount});const h=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":$(l)?Ie:l<y.ratioCoeffs.red?"Critical Est.Ratio":p?"Withdrawing...":null,v=()=>{const x=h();return x||"Withdraw"},C=()=>{const x=K(o),j=Z(i,a),I=()=>{m(),n(!1)};on.withdraw(i,T,x,j,c,I)};return e.jsxs(Me,{className:"MarginWithdrawModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>r(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Withdraw"}),e.jsx(rn,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:a,setChosenTokenSymb:s,maxValueOverride:b})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"MarginLevel"}),e.jsx("div",{className:"info-row__value",children:e.jsx(un,{curRatio:y.ratio,estRatio:l})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!h(),onClick:C,children:v()})]})]})};const ud=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),o=Ue(),r=o==null?void 0:o.id,[l,u]=f.useState(""),[p,c]=f.useState(null),[d,y]=f.useState(void 0),[m,g]=f.useState(!1),T=gt(i),b=At(T),h=b[a],v=ln(),C=et(i,"MarginAccount"),x=ot(a,C,K(l),y);f.useEffect(()=>{!l||K(l)===0n?c(null):(c(void 0),y(void 0))},[l]),ke(()=>{y(void 0),!(!l||K(l)===0n)&&(j(),x.check())},Ee,[l]);const j=async()=>{const O=K(l),B=await Xe.queryRatioAfterDeposit(i,o,O,h);c(B)},I=()=>l===""?"Enter amount":l==="0"?"Insufficient amount":K(l)>h.value?"Insufficient balance":$(d)||$(p)?Ie:m?d?"Depositting...":"Approving...":null,R=()=>{const O=I();return O||(d?"Deposit":"Approve")},w=()=>{g(!0),x.approve(g,()=>{y(void 0),x.check()})},E=()=>{const O=K(l),B=()=>{v(),n(!1)};on.deposit(i,r,O,b[a],g,B)},k=()=>{d?E():w()};return e.jsxs(Me,{className:"MarginDepositModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>u(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Deposit"}),e.jsx(rn,{tokens:T,amountStr:l,setAmountStr:u,chosenTokenSymb:a,setChosenTokenSymb:s})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"MarginLevel"}),e.jsx("div",{className:"info-row__value",children:e.jsx(un,{curRatio:o==null?void 0:o.ratio,estRatio:p})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!I(),onClick:k,children:R()})]})]})};const cd=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),o=St(),[r,l]=f.useState(""),[u,p]=f.useState(void 0),[c,d]=f.useState(void 0),[y,m]=f.useState(!1),g=gt(i),b=At(g)[a],h=et(i,"MarginAccount"),v=ot(a,h,K(r),p);f.useEffect(()=>{!r||K(r)===0n?d(null):(d(void 0),p(void 0))},[r]),ke(()=>{p(void 0),!(!r||K(r)===0n)&&(C(),v.check())},Ee,[r]);const C=async()=>{const B=K(r),L=await Xe.queryRatioAfterDeposit(i,x,B,b);d(L)},x=Ue(),j=ln();if(!x)return null;const I={};Object.values(x.poolsData).forEach(B=>{I[B.token.symbol]=Mr(B.debt)});const R=()=>r===""?"Enter amount":r==="0"?"Insufficient amount":K(r)>b.value?"Insufficient balance":$(u)||$(c)?Ie:y?u?"Repaying...":"Approving...":null,w=()=>{const B=R();return B||(u?"Repay":"Approve")},E=()=>{m(!0),v.approve(m,()=>{p(void 0),v.check()})},k=()=>{const B=K(r),L=Z(i,a),P=()=>{j(),n(!1)};on.repay(i,o,B,L,m,P)},O=()=>{u?k():E()};return e.jsxs(Me,{className:"MarginRepayModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>l(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Repay"}),e.jsx(rn,{tokens:g,amountStr:r,setAmountStr:l,chosenTokenSymb:a,setChosenTokenSymb:s,maxValueOverride:I,maxLabelOverride:"Debt"})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Margin Level"}),e.jsx("div",{className:"info-row__value",children:e.jsx(un,{curRatio:x.ratio,estRatio:c})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!R(),onClick:O,children:w()})]})]})},Tn=["Amount","Interest Rate","Debt"],pd=({isRepayModalOpen:t,setIsRepayModalOpen:n})=>{const a=Ue(),{poolsData:s,isLoading:i}=a??{isLoading:$(a)},o=Te(992),[r,l]=f.useState(!1),[u,p]=f.useState(!1),[c,d]=f.useState(me[0]),y=(m,g)=>{switch(d(g),m){case"repay":{n(!0);break}case"deposit":{l(!0);break}case"withdraw":{p(!0);break}}};return e.jsxs("div",{className:"MarginAccountAssets App-box",children:[i?e.jsx(lt,{}):o?e.jsx(yd,{poolsData:s,openModal:y}):e.jsx(dd,{poolsData:s,openModal:y}),e.jsx(ld,{isOpen:u,setIsOpen:p,chosenTokenSymb:c,setChosenTokenSymb:d}),e.jsx(ud,{isOpen:r,setIsOpen:l,chosenTokenSymb:c,setChosenTokenSymb:d}),e.jsx(cd,{isOpen:t,setIsOpen:n,chosenTokenSymb:c,setChosenTokenSymb:d})]})},dd=({poolsData:t,openModal:n})=>e.jsxs("table",{className:"MarginAccountAssets__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Asset"}),Tn.map(a=>e.jsx("th",{children:a},a)),e.jsx("th",{})]})}),e.jsx("tbody",{children:me.map(a=>{const s=t[a],i=[s.amount,s.interestRate,s.debt];return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(Q,{symbol:a,isHlight:!0,children:a})}),i.map((o,r)=>{const l=Tn[r],p=Ns(o,l==="Interest Rate",s.token);return e.jsx("td",{children:p},l)}),e.jsx("td",{children:e.jsx("div",{className:"MarginAccountAssets__buttons",children:e.jsx(Bs,{openModal:n,asset:a})})})]},a)})})]}),yd=({poolsData:t,openModal:n})=>e.jsx("div",{className:"MarginAccountAssets__mobile",children:me.map(a=>{const s=t[a],i=[s.amount,s.interestRate,s.debt],o=a===It(me);return e.jsxs("div",{className:"MarginAccountAssets__mobile-item",children:[e.jsx(Q,{className:"MarginAccountAssets__mobile-item-title",symbol:a,isHlight:!0,isLarge:!0,children:a}),e.jsx("div",{className:"MarginAccountAssets__mobile-item-stats",children:i.map((r,l)=>{const u=Tn[l],p=l===i.length-1,d=Ns(r,u==="Interest Rate",s.token);return e.jsxs(We.Fragment,{children:[e.jsxs("div",{className:"MarginAccountAssets__mobile-item-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:u}),e.jsx("div",{className:"info-row__value",children:d})]},u),!p&&e.jsx(he,{marginValue:6})]},u)})}),e.jsx("div",{className:"MarginAccountAssets__mobile-item-buttons",children:e.jsx(Bs,{openModal:n,asset:a})}),!o&&e.jsx(he,{marginValue:20})]},a)})}),Bs=({openModal:t,asset:n})=>{const s=Ue().poolsData[n];return e.jsxs(e.Fragment,{children:[e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("repay",n),isDisabled:!s.debt,children:[e.jsx("img",{src:Ps,alt:"Repay"}),"Repay"]}),e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("deposit",n),children:[e.jsx("img",{src:bn,alt:"Deposit"}),"Deposit"]}),e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("withdraw",n),isDisabled:!s.amount,children:[e.jsx("img",{src:od,alt:"Withdraw"}),"Withdraw"]})]})},Ns=(t,n,a)=>{const s=n?`${Je(t*100n)}%`:fe(t,a.isStable);return n?s:e.jsx(Q,{symbol:a.symbol,isHlight:!0,children:s})},md=()=>{const t=Ye(),[n,a]=f.useState(!1),{isLoading:s,accounts:i}=t??{},o=!s&&!(i!=null&&i.length);return!t||o?e.jsx("div",{className:"MarginAccount__404",children:e.jsx(nn,{})}):e.jsxs("div",{className:"MarginAccount",children:[e.jsx(nd,{}),e.jsx(sd,{setIsRepayModalOpen:a}),e.jsx(pd,{isRepayModalOpen:n,setIsRepayModalOpen:a})]})};const fd=()=>{const t=G(),{userAddress:n}=ee(),a=gt(t),s=At(a),{data:i,error:o}=Oe(s&&[n,s,"usePoolsData"],async()=>{const r={},l=me.map(async p=>bd(t,p).then(c=>(r[p]={totalSupplied:c},c)).catch(console.log));await Promise.all(l);const u=me.map(async p=>{const c=s[p].value,d=r[p].totalSupplied;return Td(t,p,c,d).then(y=>(r[p].userSupplied=y,y))});return await Promise.all(u),me.map(async p=>{r[p].userSupplied}),r});return o?(console.log(o),null):i},bd=async(t,n)=>await Rs(t,n).getTotalLiquidity().then(i=>mt(BigInt(i),n)).catch(console.log),Td=async(t,n,a,s)=>{const o=await Rs(t,n).depositShare().then(BigInt).then(l=>mt(l,n));return a*s/o},Rs=(t,n)=>ne(t,`Pool_${n}`),hd=({poolAsset:t,chosenPool:n,setChosenPool:a})=>{const s=G(),i=Z(s,t),o=t===n,r=`EarnPoolRadio_${t}`,l=fd();console.log(l);const u=()=>{o||a(t)},p=()=>{u()},c=()=>{u()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:A("EarnPool","App-box",o&&"_chosen"),children:[e.jsxs("div",{className:"EarnPool__radio",children:[e.jsx("input",{id:r,type:"radio",name:"EarnPool",checked:o,onChange:u}),e.jsx("label",{htmlFor:r})]}),e.jsxs("div",{className:"EarnPool__head",children:[e.jsx("div",{className:"EarnPool__icon",children:e.jsx("img",{src:i.icon_circled,alt:`${i.name} icon`})}),e.jsxs("h1",{className:"EarnPool__title",children:[i.symbol," pool"]})]}),e.jsxs("div",{className:"EarnPool__body",children:[e.jsxs("div",{className:"EarnPool__item _action",children:[e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Total Supplied"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(Q,{isHlight:!0,symbol:i.symbol,children:"100,000"})})]}),e.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",onClick:p,children:[e.jsx("img",{src:bn,alt:"Supply"}),"Supply"]})]}),e.jsxs("div",{className:"EarnPool__item _action",children:[e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Your Supplied"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(Q,{isHlight:!0,symbol:i.symbol,children:"10,000"})})]}),e.jsx(he,{marginValue:0}),e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Available to Withdraw"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(Q,{isHlight:!0,symbol:i.symbol,children:"5,000"})})]}),e.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",onClick:c,children:[e.jsx("img",{src:bn,alt:"Withdraw"}),"Withdraw"]})]}),e.jsxs("div",{className:"EarnPool__item",children:[e.jsx("div",{className:"EarnPool__item-name tip","data-tooltip-id":"SupplyAPYTooltip",children:"Supply APY"}),e.jsx("div",{className:"EarnPool__item-value",children:"5%"})]}),e.jsxs("div",{className:"EarnPool__item",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Utilization Rate"}),e.jsx("div",{className:"EarnPool__item-value",children:"5%"})]})]})]})})},gd=()=>{const[t,n]=we("EarnPage_pool",me[0]);return e.jsxs("div",{className:"EarnPage",children:[e.jsxs("div",{className:"EarnPage__header",children:[e.jsx("h1",{className:"EarnPage__title",children:"Earn"}),e.jsx(Ds,{})]}),e.jsx("div",{className:"EarnPage__pools",children:me.map(a=>e.jsx(hd,{poolAsset:a,chosenPool:t,setChosenPool:n},a))}),e.jsx(xd,{})]})},xd=()=>e.jsx(te,{id:"SupplyAPYTooltip",children:e.jsxs("div",{children:["Supply APY refers to the ",e.jsx("br",{}),"Interest Rate that is earned ",e.jsx("br",{}),"when staking USDC"]})}),_d=()=>{const t=ht(),n=ua();return f.useEffect(()=>{t.pathname.endsWith("options")&&n("/options/builder"),t.pathname.endsWith("margin")&&n("/margin/trading")},[t.pathname]),e.jsxs(ti,{children:[e.jsxs($e,{path:"/options",element:e.jsx(eo,{}),children:[e.jsx($e,{path:"builder",element:e.jsx($u,{})}),e.jsx($e,{path:"option-chain",element:e.jsx(jc,{})})]}),e.jsxs($e,{path:"/margin",element:e.jsx(hp,{}),children:[e.jsx($e,{path:"trading",element:e.jsx(Jp,{})}),e.jsx($e,{path:"account",element:e.jsx(md,{})})]}),e.jsx($e,{path:"/earn",element:e.jsx(gd,{})}),e.jsx($e,{path:"*",element:e.jsx(ni,{to:mr,replace:!0})})]})};const vd="/sf_draft/assets/Discord-f7d998b5.svg",Cd="/sf_draft/assets/Gitbook-c728118d.svg",Md="/sf_draft/assets/Github-d50e83d6.svg",Sd="/sf_draft/assets/Mirror-095740c8.svg",Ad="/sf_draft/assets/Dune-cc12c29c.svg",wd="/sf_draft/assets/Twitter-5cfdd2f4.svg",jd=()=>{const t=[{name:"Discord",icon:vd,url:"https://discord.gg/5DGZ7rzSfS"},{name:"Gitbook",icon:Cd,url:"https://docs.sharwa.finance/"},{name:"Github",icon:Md,url:"https://github.com/SharwaFinance"},{name:"Mirror",icon:Sd,url:"https://mirror.xyz/sharwa-finance.eth"},{name:"Dune",icon:Ad,url:"https://dune.com/sharwa_finance/aggregator"},{name:"Twitter",icon:wd,url:"https://twitter.com/SharwaFinance"}];return e.jsx("footer",{className:"Footer",children:e.jsxs("div",{className:"Footer__content _container",children:[e.jsx(ca,{}),e.jsx("div",{className:"Footer__smedia-items",children:t.map(n=>e.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:n.url,children:e.jsx("img",{src:n.icon,alt:`${n.name} logo`})},n.name))})]})})};const kd=({children:t})=>e.jsx("div",{className:"GlobalStickyMessage",children:t}),Dd=({children:t})=>e.jsx(er,{children:e.jsx(Zr,{children:e.jsx(Uu,{children:e.jsx(Jl,{children:e.jsx(ko,{children:e.jsx(Zo,{children:t})})})})})}),Ed=()=>e.jsxs("div",{className:"Tooltips",children:[e.jsx(te,{id:"Tooltip_default",place:"bottom-start"}),e.jsx(te,{id:"Tooltip_bottom",place:"bottom"}),e.jsx(te,{id:"Tooltip_top",place:"top"}),e.jsx(te,{id:"Tooltip_Asset",hasDelay:!1,place:"bottom"}),e.jsx(te,{id:"Tooltip_Expiration",place:"bottom-end"}),e.jsx(te,{id:"Tooltip_MarketInfo",place:"bottom-start"})]});function Id(){const{chain:t}=Ys(),{isConnected:n}=ee(),a=()=>e.jsxs(We.Fragment,{children:[e.jsx(ur,{}),e.jsx("main",{className:"_container",children:e.jsx(_d,{})}),e.jsx(jd,{}),e.jsx(kd,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]},n),s=()=>e.jsx(yr,{chainId:t.id});return t!=null&&t.unsupported?s():a()}function Pd(){return e.jsx(ci,{fallbackRender:null,children:e.jsxs(e.Fragment,{children:[e.jsx(cr,{}),e.jsx(Ed,{}),e.jsx(Gs,{config:Ji(),children:e.jsx(Fs,{children:e.jsx(Dd,{children:e.jsx(Id,{})})})})]})})}Ls.createRoot(document.getElementById("root")).render(e.jsx(We.StrictMode,{children:e.jsx(Pd,{})}));
