import{j as t,r as f,a as qe}from"./node_modules/react-90d84203.js";import{a as gs,c as ii}from"./node_modules/react-dom-85b864ba.js";import{L as ri,H as oi}from"./node_modules/react-router-dom-c36c90a0.js";import{c as w}from"./node_modules/classnames-58e405e9.js";import{c as li,u as ui,a as ci,b as pi,d as G,e as di,f as yi,W as mi,g as fi}from"./node_modules/wagmi-3da32785.js";import{p as bi,I as hi,q as Ti,r as gi,t as xi,u as vn}from"./node_modules/@wagmi-695a21eb.js";import{Q as Cn,k as _i,h as vi}from"./node_modules/react-toastify-935b52fd.js";import{b as St,O as xs,a as _s,d as Ci,e as He,f as Mi}from"./node_modules/react-router-82445d4b.js";import{u as Si,a as Ai,b as wi,c as Oe,d as ji,e as Ae}from"./node_modules/react-use-bc3311ea.js";import{S as ki,c as Di}from"./node_modules/react-select-51dfe5cb.js";import{W as Ei}from"./node_modules/react-tooltip-fde9db0c.js";import{E as Ii}from"./node_modules/react-error-boundary-75bb9c52.js";import{R as Mn}from"./node_modules/react-modal-7b824e63.js";import{i as U,u as Ie}from"./node_modules/swr-4fa31563.js";import{B as Ot,A as Pi,W as Bi,C as Ft,y as Sn,z as An,D as Ni}from"./node_modules/@ethersproject-bf7bf4ae.js";import{_ as Ri}from"./node_modules/react-fast-marquee-a0c5ffcb.js";import{f as Ee}from"./node_modules/date-fns-003c5fae.js";import{I as Li}from"./node_modules/react-icons-22a086b9.js";import{A as Oi,a as Fi}from"./node_modules/@szhsin-f545df6e.js";import{r as Ui}from"./node_modules/swiper-4105a6d8.js";import{u as $i}from"./node_modules/ethers-1b4b58d6.js";import{S as Hi}from"./node_modules/rc-slider-b79f222d.js";import{R as Wi,A as qi,X as Vi,Y as Gi,T as Yi,a as Ki,b as ns,C as Qi}from"./node_modules/recharts-3a81bad4.js";import"https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs";import{T as zi}from"./node_modules/lightweight-charts-068b394f.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-19585569.js";import"./node_modules/use-sync-external-store-d9fdebd1.js";import"./node_modules/eventemitter3-3e2fdae4.js";import"./node_modules/zustand-8d5a2766.js";import"./node_modules/@noble-6164e8b7.js";import"./node_modules/isows-b4181a00.js";import"./node_modules/vite-plugin-node-polyfills-daa009c6.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/copy-to-clipboard-2c58613e.js";import"./node_modules/toggle-selection-93f4ad84.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/@babel-0a888fcc.js";import"./node_modules/@emotion-7c24be43.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-f7f26ffc.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/prop-types-63f5e6e2.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-9d64241e.js";import"./node_modules/bech32-7c6d7f34.js";import"./node_modules/js-sha3-43eb1fb4.js";import"./node_modules/bn.js-7d9c8149.js";import"./node_modules/hash.js-6ee91aa2.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-0943c707.js";import"./node_modules/scrypt-js-e7ebb268.js";import"./node_modules/react-transition-state-e386e7d4.js";import"./node_modules/rc-util-f4edc9bb.js";import"./node_modules/react-resize-detector-b29ac57a.js";import"./node_modules/lodash-8d16cd1b.js";import"./node_modules/react-smooth-c53f2ee1.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-324f79d2.js";import"./node_modules/css-unit-converter-9e08bb2c.js";import"./node_modules/fancy-canvas-250c9c40.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const Xi="/sf_draft/assets/Logo-258738bb.svg",vs=({className:e})=>t.jsx("div",{className:w("Logo",e),children:t.jsx("a",{className:"Logo__link",href:"/index.html",children:t.jsx("img",{src:Xi,alt:"Sharwa.Finance"})})});const Ut=({className:e,links:n,type:s})=>{const a=w(e,s&&`_${s}`);return t.jsx("div",{className:w("Links",a),children:n.map((i,o)=>{var p;const r=w("Links__item",i.isActive&&"active");return((p=i.to)==null?void 0:p.startsWith("http"))?t.jsx("a",{className:r,href:i.to,rel:"noreferrer",target:"_blank",children:i.name},i.to):t.jsx(ri,{to:i.to,className:r,disabled:i.isDisabled,onClick:i.isDisabled&&(c=>c.preventDefault()),children:i.name},i.to??o)})})};const Cs=e=>{const[n,s]=f.useState(!1),a=f.useCallback(()=>{document.removeEventListener("click",a),s(!1),e&&e()},[]);return{isOpen:n,openPopup:()=>{n||(s(!0),setTimeout(()=>{document.addEventListener("click",a)},10))},closePopup:a}},Zi="/sf_draft/assets/wallet-8f98d05f.svg",Ms="/sf_draft/assets/link-597331d6.svg",Ji="/sf_draft/assets/cross_white-42eb5050.svg",er="/sf_draft/assets/Arbitrum-299bccbf.svg",tr="/sf_draft/assets/Arbitrum-299bccbf.svg",Se=42161,wn=10,jn=[Se],$t={[Se]:{name:"Arbitrum",icon:er},[wn]:{name:"Optimism",icon:tr,isDisabled:!0}},nr=e=>{var s;let n=e.reason??e.message;return n==="Internal JSON-RPC error."&&(n=(s=e.data)==null?void 0:s.message),n},sr=e=>e?e.includes("User rejected the request")?"User rejected the request.":e.includes("user rejected transaction")?"User rejected transaction.":e.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":e.includes("Connector already connected")?"Wallet is already connected.":e.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":e.includes("Too little received")?"Slippage set too low. Please consider increasing it for successful strategy purchase.":e:"Unknown error",we=e=>{if(typeof e!="bigint")throw new TypeError(`Invalid BigInt: ${e}`)},Ss=e=>{if(typeof e!="number"&&typeof e!="string")throw new TypeError(`Invalid amount: ${e}`)},ar=e=>{if(typeof e!="string")throw new TypeError(`Invalid String: ${e}`)},ir=(e,n,s)=>{n=As(n);const a=Es(e)+"/tx/"+s;console.log(n.text,`
`,a),Cn.success(t.jsxs("div",{children:[t.jsx("div",{children:n.node}),t.jsx("br",{}),s&&t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},As=e=>{if(typeof e=="string"){const n=e;e={text:n,node:n}}return e},rr=e=>{e=As(e),console.log(e.text),Cn.success(e.node)},lt=(e,n)=>{let s;if(typeof e=="string")s=e;else{const a=nr(e);s=sr(a)}console.error(e),Cn.error(t.jsx("div",{children:s})),n&&n(!1)},dt=.003,or=.005,ie=["USDC","ETH","WBTC"],lr="/sf_draft/assets/ETH-fb1e5539.svg",ws="/sf_draft/assets/ETH_circled-dc6cb60f.svg",ur="/sf_draft/assets/BTC-b739bd63.svg",cr="/sf_draft/assets/WETH-2ba67e25.svg",pr="/sf_draft/assets/WBTC-f0287338.svg",js="/sf_draft/assets/WBTC_circled-48bbc65b.svg",dr="/sf_draft/assets/LINK-728e8697.svg",yr="/sf_draft/assets/ARB-fc2e28d1.svg",mr="/sf_draft/assets/GMX-f911f5cf.svg",fr="/sf_draft/assets/MAGIC-5214f6ce.svg",ss="/sf_draft/assets/USDC-5a7f3d86.svg",ks="/sf_draft/assets/USDC_circled-cda21ca8.svg",br="/sf_draft/assets/USDT-2e53b5e9.svg",hr="/sf_draft/assets/DAI-b460716b.svg",tt={[Se]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",oracleAddress:"0x639fe6ab55c921f74e7fac1ee960c0b6293ba612",url:"https://www.coingecko.com/en/coins/ethereum",isAsset:!0,isETH:!0,icon:lr,icon_circled:ws,isSwappable:!0,isWrappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",oracleAddress:"0x6ce185860a4963106506c203335a2910413708e9",url:"https://www.coingecko.com/en/coins/bitcoin",isAsset:!0,icon:ur,isWrappable:!0},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:cr,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:pr,icon_circled:js,isSwappable:!0},{name:"Chainlink Token",symbol:"LINK",decimals:18,address:"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4",oracleAddress:"0x86e53cf1b870786351da77a57575e79cb55812cb",url:"https://www.coingecko.com/en/coins/chainlink",icon:dr},{name:"Arbitrum Token",symbol:"ARB",decimals:18,address:"0x912CE59144191C1204E64559FE8253a0e49E6548",oracleAddress:"0xb2a824043730fe05f3da2efafa1cbbe83fa548d6",url:"https://www.coingecko.com/en/coins/arbitrum",icon:yr},{name:"GMX Token",symbol:"GMX",decimals:18,address:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",oracleAddress:"0xdb98056fecfff59d032ab628337a4887110df3db",url:"https://www.coingecko.com/en/coins/gmx",icon:mr},{name:"MAGIC",symbol:"MAGIC",decimals:18,address:"0x539bdE0d7Dbd336b79148AA742883198BBF60342",oracleAddress:"0x47e55ccec6582838e173f252d08afd8116c2202d",url:"https://www.coingecko.com/en/coins/magic",icon:fr},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:hr,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:ss,icon_circled:ks,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:ss,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:br,isSwappable:!0,isStable:!0}]},Pt={},Bt={},as=Object.keys(tt);for(let e=0;e<as.length;e++){const n=as[e];Pt[n]={},Bt[n]={};let s=tt[n];for(let a=0;a<s.length;a++){const i=s[a];i.address=i.address.toLowerCase(),Pt[n][i.symbol]=i,Bt[n][i.address]=i}}const Ht={};for(let e=0;e<tt[Se].length;e++){const n=tt[Se][e];Ht[n.symbol]=n.decimals}const Wt=tt[Se].filter(e=>e.isAsset).map(e=>e.symbol),J=(e,n)=>{if(!Pt[e])throw new Error(`No tokens found for chainId ${e}`);const a=Pt[e][n];if(!a)throw new Error(`Incorrect symbol "${n}" for chainId ${e}`);return a},is=(e,n)=>{if(!Bt[e])throw new Error(`No tokens found for chainId ${e}`);const a=Bt[e][n.toLowerCase()];if(!a)throw new Error(`Incorrect address "${n}" for chainId ${e}`);return a},Ds=(e,n)=>J(e,n).address,Tr=e=>{const n=tt[e];if(!n)throw new Error(`No tokens found for chainId ${e}`);return n.filter(a=>a.isSwappable)},kn=e=>J(e,"USDC").address,Nt=e=>J(Se,e).icon,ge=(e,n,s=[],a,i,o=()=>{})=>(i&&i(!0),n(...s).then(r=>{console.log("Submitting:",r),r.wait().then(l=>{typeof a=="function"&&(a=a(l)),ir(e,a,r.hash),i&&i(!1),o&&o(l)},l=>{lt(l,i)})},r=>{lt(r,i)})),gr=()=>{const e=[Ti];if(e.length!==jn.length)throw new Error("Invalid number of wagmi chains.");const{chains:n,publicClient:s,webSocketPublicClient:a}=bi(e,[gi()]);return li({autoConnect:!0,publicClient:s,webSocketPublicClient:a,connectors:[new hi({chains:n,options:{name:"Injected",shimDisconnect:!0}})]})},Es=e=>{switch(e){case Se:return"https://arbiscan.io";case wn:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}},yt=e=>ie.map(s=>J(e,s));const z=f.forwardRef(function({children:n,className:s,style:a,isDisabled:i,isGreen:o,onClick:r,type:l},u){const p=w(s,l&&`Button_${l}`,o&&"_green"),c=l==="complex";return t.jsx("button",{className:w("Button",p),ref:u,disabled:i,onClick:r,"data-text":n,style:a,children:c?t.jsx("span",{children:n.toString()}):n})}),Is=f.createContext(null),xr=({children:e})=>{const{godEyeAddress:n}=vr();return t.jsx(Is.Provider,{value:n,children:e})},_r="AEZAKMI=",te=()=>{var i;const e=f.useContext(Is),{address:n,isConnected:s}=ui();return{userAddress:(i=e??n)==null?void 0:i.toLowerCase(),isConnected:s}},vr=()=>{const[e,n]=f.useState(),s=St(),a=o=>{n(o),console.log("GOD EYE MODE ENABLED:",o)},i=o=>{n(null),console.log(`GOD EYE MODE DISABLED${o?` (${o})`:""}`)};return f.useEffect(()=>{const o=s.pathname.split("/"),r=o[o.length-1];if(r.startsWith(_r)){const l=r.split("=")[1];xi(l)?a(l):i("Invalid wallet address")}},[s.pathname]),{godEyeAddress:e}};function qt(){const{connect:e,connectors:n}=ci({onError:i=>{lt(i)}}),{disconnect:s}=pi(),a=n[0];return{connectWallet:()=>e({connector:a}),disconnectWallet:s}}const Cr=()=>{const{isOpen:e,openPopup:n,closePopup:s}=Cs(),a=w(e&&"open"),i=G(),{isConnected:o,userAddress:r}=te(),{connectWallet:l,disconnectWallet:u}=qt(),[,p]=Si(),c=y=>y.slice(0,9)+"..."+y.slice(-15),d=()=>t.jsx(z,{type:"complex",onClick:l,children:"Connect Wallet"}),m=()=>t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"Wallet__header",onClick:()=>{n(),p(r)},children:t.jsxs("div",{className:"Wallet__address",children:[t.jsx("img",{src:Zi,alt:"Wallet icon"}),t.jsx("span",{children:c(r)})]})}),t.jsxs("div",{className:"Wallet__body",onClick:y=>y.stopPropagation(),children:[t.jsx("button",{className:"close-btn",onClick:s,children:t.jsx("img",{src:Ji,alt:"x"})}),t.jsxs("a",{className:"Wallet__link",href:`${Es(i)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[t.jsx("img",{src:Ms,alt:"external link"}),t.jsx("span",{children:"View on explorer"})]}),t.jsx("div",{className:"Wallet__inner-address",children:"("+c(r)+")"}),t.jsx(z,{className:"Wallet__button",onClick:u,children:"Disconnect wallet"})]})]});return t.jsx("div",{className:w("Wallet",a),children:o?m():d()})};const Mr=()=>t.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M1 3L5 5.73504L9 3",stroke:"white",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),he=({className:e,options:n,defaultValue:s,defaultOption:a,isDisabled:i,onChange:o,iconNode:r,iconTextNode:l,...u})=>{const p=r||l,c=!n.length,d=({children:T,...b})=>t.jsxs(Di.Control,{...b,children:[r&&t.jsx("div",{className:"Selector__icon",children:r}),l&&t.jsx("div",{className:"Selector__icon Selector__icon_text",children:l}),T]}),m=T=>{let b;const g=C=>C.value===T;return n.find(C=>C.options)?n.forEach(C=>{if(b)return;b=(C.options??[C]).find(g)}):b=n.find(g),b},y=w(e,p&&"Selector_with-icon"),h=e==null?void 0:e.split(" ")[0];return t.jsx("div",{className:w("Selector__wrapper",h&&`${h}-wrapper`),"data-tooltip-id":c&&"Tooltip_bottom","data-tooltip-content":c?"No options":"",place:"bottom-end",children:t.jsx(ki,{...u,options:n,defaultValue:a??m(s),onChange:o,className:w("Selector",y),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:T,innerProps:b})=>t.jsx("div",{ref:T,...b,className:"Selector__indicator Selector__dropdown-indicator",children:t.jsx(Mr,{})}),Control:d},isDisabled:c||i})})};const Re="#46956A",ce="#C75E4B",rs="#D99445",Rt="#6988FF",gt="#747FA6",os="rgba(58, 68, 102, 0.5)",xt="#3A4466",ls="#181A3C",Sr="#0D0F29",Dn="rgba(56, 66, 99, 0.25)",Ar="≈",fn={positive:"+",negative:"–",neutral:""},ne=({children:e,hasDelay:n=!0,...s})=>t.jsx(Ei,{place:"bottom-start",delayShow:n?150:0,delayHide:n?150:0,border:`1px solid ${Dn}`,...s,children:e}),Ps=()=>{const{switchNetworkAsync:e}=di();return n=>{if(typeof n!="number"&&typeof n!="string")throw new TypeError(`Invalid chainId type: ${n} (${typeof n})`);const s=$t[n].name;e(n).then(()=>{rr(`Network switched to ${s} (${n})`)},a=>{lt(a)})}},wr=()=>{const e=G(),n=Ps(),s=jn.map(i=>{const{name:o,icon:r,isDisabled:l}=$t[i];return{value:i,label:t.jsxs("div",{className:"flex gap-x-7",children:[t.jsx("img",{src:r,alt:`${o} icon`}),t.jsx("span",{children:o})]}),isCurrent:i===e,isDisabled:l}}),a=s.find(i=>i.isCurrent);return t.jsxs("div",{className:"NetworkSwitcher",children:[t.jsx(he,{options:s,value:a,onChange:i=>{n(i.value)},isDisabled:!0}),t.jsx(ne,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},jr=()=>{const{isConnected:e}=te();return t.jsxs("div",{className:"CryptoGateway",children:[e&&t.jsx(wr,{}),t.jsx(Cr,{})]})},kr=()=>{const e=St(),n=[{name:"Option Trading",to:"/options"},{name:"Margin Trading",to:"/margin"},{name:"Earn",to:"/earn"}];return n.forEach(s=>{e.pathname.startsWith(s.to)&&(s.isActive=!0)}),t.jsxs("header",{className:"Header _container",children:[t.jsx(vs,{}),t.jsx(Ut,{links:n}),t.jsx(jr,{})]})};const Dr=()=>{const e=vi({enter:"jellyIn",exit:"jellyOut"});return t.jsx(_i,{limit:3,transition:e,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const Er=300,Ir=e=>{const n=Ai();f.useEffect(()=>{const s=window.innerWidth>1025?n:0;e?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${s}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},Er)},[e,n])};Mn.setAppElement("#root");Mn.defaultStyles={};const us=300,xe=({children:e,className:n,isOpen:s,setIsOpen:a,isObligatory:i,reset:o})=>(Ir(s),f.useEffect(()=>{!s&&o&&setTimeout(o,us)},[s]),t.jsx(Mn,{className:w(n,"App-box"),isOpen:s,onRequestClose:()=>{i||a(!1)},overlayElement:(r,l)=>t.jsxs("div",{...r,children:[l,!i&&t.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:us,children:e})),Pr=e=>{const{chainId:n}=e,[s]=f.useState(!0),a=Ps();return t.jsxs(xe,{className:"UnsupportedChainErrorModal",isOpen:s,isObligatory:!0,children:[t.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",n," is not supported."]}),t.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:jn.map(i=>{const o=$t[i],{name:r,icon:l,isDisabled:u}=o;return t.jsxs(z,{isDisabled:u,type:"stroke",onClick:()=>{a(i)},children:[t.jsx("img",{src:l,alt:`${r} icon`}),"Switch to ",r]},i)})})]})},Br="/margin",je=600,ke="Please, wait...";const Bs="/sf_draft/assets/graph-b6757e0e.svg";const X=({className:e,children:n,isLarge:s=!1,symbol:a="USDC",isHlight:i=!1,style:o,...r})=>{const l=G(),u=J(l,a).icon,p=n,c=w(i&&"_hlight",s&&"_large",e);return t.jsxs("div",{className:w("Currency",c),style:o,...r,children:[t.jsx("img",{src:u,alt:`${a} icon`}),t.jsx("span",{children:p})]})},re=18,cs=18,ps=8,ut=6,Nr=8,Rr=8,We=6,Lr={ETH:cs,WETH:cs,BTC:ps,WBTC:ps,USDC:ut},Ns=2,Rs=4,Me=(e,n=",")=>{Ss(e);const s=e.toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),s.join(".")},Or=e=>{if(Ss(e),!Ls(e))return 0;const n=e.toString(),s=n.indexOf("."),a=n.match(/[1-9]/)[0];return n.indexOf(a,s)-s},At=(e,n=0,s=!1)=>{if(!Ls(e))return e;let a=e.toString(),i=a;const o=a.indexOf(".");if(a.length-o-1>n&&(i=ds(e,n),s&&Number(i)===0)){const l=Or(e);i=ds(e,l)}return i},Ls=e=>e.toString().indexOf(".")!==-1,Os=(e,n)=>{let s=e.toString();const a=s.indexOf("."),i=a!==-1,o=i?s.length-a-1:0;return o<n&&(s+=+i?"":".",s+="0".repeat(n-o)),s},Fr=e=>{const n=e.toString();return n.indexOf(".")!==-1?parseFloat(n):e},Ur=e=>{const n=e.toString(),[s,a]=n.split(".");return a==="0".repeat(a==null?void 0:a.length)?s:n},$r=(e,n)=>{var i;let s=e.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((i=s.match(/\./g))==null?void 0:i.length)>1&&(s=(r=>r.replace(/\.$/,""))(s)),s=At(s,n?0:We),s},ct=(e,n,s)=>Me($r(e,s),n),Pe=(e,n=",")=>(ar(e),Number(e.split(n).join(""))),ds=(e,n=0)=>Math.floor(e*10**n)/10**n,fe=(e,n=0)=>Math.round(e*10**n)/10**n,Hr=(e,n=0)=>Math.ceil(e*10**n)/10**n,q=(e,n=re,s)=>{we(e);let a=Number(e)/10**n;return U(s)||(a=fe(a,s)),String(a).includes("e")?0:a},Vt=(e,n)=>(we(e),e*BigInt(10**n)),En=(e,n)=>(we(e),e/BigInt(10**n)),ue=(e,n=re)=>{const s=Math.min(We,n),a=Math.round(Number(e)*10**s);return Vt(BigInt(a),n-s)},me=(e,n=Ns,s=re,a=!1)=>{we(e);let i=q(e,s);return i=At(i,n),i=Os(i,n),a||(i=Ur(i)),i=Me(i),String(i)},Fe=(e,n=Rs,s=re,a)=>{we(e);let i=q(e,s);return i=At(i,n,a),i=Fr(i),i=Me(i),String(i)},le=(e,n,s=n?Ns:Rs,a=re)=>(we(e),(n?me:Fe)(e,s,a,!n)),Fs=(e,n,s)=>{we(e);const a=s-n;return(a<0?En:Vt)(e,Math.abs(a))},se=(e,n)=>Fs(e,n,re),Ue=(e,n)=>Fs(e,re,n),In=(e,n,s=re)=>{we(e);const a=q(e,s)*n;return ue(a,s)},Xe=(e,n,s=re)=>(e=Vt(e,s),e/n),Wr=(e,n,s=re)=>{const a=e*n;return En(a,s)},Ve=e=>(we(e),e<0n?-e:e),qr=e=>-Ve(e),Vr=(e,n,s=re)=>{we(e);const a=s-n,i=En(e,a);return Vt(i,a)},Us=(e,n=0,s=re)=>ue(fe(q(e,s),n),s),Gr=(e,n=We,s=re)=>{let a=q(e,s);return a===0&&e!==0n&&(a=+`0.${"0".repeat(n-1)}1`),ue(Hr(a,n),s)},bn=e=>{if(typeof e!="object")throw new Error(`Invalid bigNumberData: ${e}`);const n={};for(const s in e){let a=e[s];Ot.isBigNumber(a)&&(a=a.toBigInt()),n[s]=a}return n},K=e=>{const n=Pe(e);return ue(n)},Gt=e=>{const n=q(e);return ct(n)},Yr="/sf_draft/assets/url-c5832e95.svg",Kr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Qr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],zr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Xr=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"},{internalType:"address",name:"_buildManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"buildManager",outputs:[{internalType:"contract IBuildManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract IExchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],Zr=[{inputs:[{internalType:"address",name:"_proxySeller",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premium",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Jr=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],eo=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_weth9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth9",outputs:[{internalType:"contract IWETH9",name:"",type:"address"}],stateMutability:"view",type:"function"}],to=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[],name:"Lock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!0,internalType:"address",name:"tokenIn",type:"address"},{indexed:!0,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"timelock",type:"uint256"}],name:"Unlock",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc20",type:"address[]"}],name:"UpdateAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc721",type:"address[]"}],name:"UpdateAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableTokenToLiquidityPool",type:"address[]"}],name:"UpdateAvailableTokenToLiquidityPool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"UpdateErc721Limit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"UpdateLiquidatorFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"UpdateTokenToLiquidityPool",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc20",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableTokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"checkERC20Amount",outputs:[{internalType:"bool",name:"currectBalance",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721Value",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721tokenID",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"checkLiquidityPool",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721Limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"erc721Token",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAvailableErc20",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableErc721",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableTokenToLiquidityPool",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc20ByContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc721ByContract",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc20",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc721",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"address",name:"marginAccountOwner",type:"address"},{internalType:"address",name:"liquidator",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc20",type:"address[]"}],name:"setAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc721",type:"address[]"}],name:"setAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableTokenToLiquidityPool",type:"address[]"}],name:"setAvailableTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"setErc721Limit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"setLiquidatorFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"setTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"swapID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"timelock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],no=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"CreateMarginAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"createMarginAccount",outputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],so=[{inputs:[{internalType:"address",name:"_positionsManager",type:"address"},{internalType:"address",name:"_baseToken",type:"address"},{internalType:"address",name:"_portfolioLendingStorage",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProvideERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"ProvideERC721",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"UpdateRedCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"UpdateYellowCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"WithdrawERC721",type:"event"},{inputs:[],name:"BASE_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtSizeInUSDC",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateMarginAccountValue",outputs:[{internalType:"uint256",name:"marginAccountValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getMarginAccountRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParams",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParamsByDebt",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"redCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"setRedCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"setYellowCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"yellowCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ao=[{inputs:[{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"calculateAmountInERC20",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculateAmountOutERC20",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"calculateAmountOutERC721",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculatePositionValue",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"calculateTotalPositionValue",outputs:[{internalType:"uint256",name:"totalValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"checkValidityERC721",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"exercise",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getModuleAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"liquidate",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setTokenInToTokenOutToExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"swapOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"tokenInToTokenOutToExchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],io=[{inputs:[{internalType:"contract IMarginAccountManager",name:"_marginAccountManager",type:"address"},{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"},{internalType:"contract IPositionsManager",name:"_hegicPositionManager",type:"address"},{internalType:"contract IProxySeller",name:"_proxySeller",type:"address"},{internalType:"contract IMarginAccount",name:"_marginAccount",type:"address"},{internalType:"contract ILiquidityPool",name:"_wethLiquidityPool",type:"address"},{internalType:"address",name:"_hegicTokenIn",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"borrowSwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicPositionManager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicTokenIn",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"provideETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"provideETHToPool",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"contract IProxySeller",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setUniswapExchangeModules",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapRepay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"transferBuyProvideERC721",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"uniswapExchangeModules",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"wethLiquidityPool",outputs:[{internalType:"contract ILiquidityPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"withdrawBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],ro=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],oo=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],lo=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],uo=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],co=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],po=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],yo=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],mo=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!0,internalType:"int24",name:"tickSpacing",type:"int24"}],name:"FeeAmountEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!1,internalType:"int24",name:"tickSpacing",type:"int24"},{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolCreated",type:"event"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"}],name:"createPool",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],name:"enableFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"",type:"uint24"}],name:"feeAmountTickSpacing",outputs:[{internalType:"int24",name:"",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint24",name:"",type:"uint24"}],name:"getPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"parameters",outputs:[{internalType:"address",name:"factory",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}],fo=e=>({VITE_ALCHEMY_API_KEY_42161:"mhe3YiD3ZPbVYOgV3rNzb5oJXKsGCKDR",VITE_PREMIA_API_KEY_42161:"sharwa_3ZgugmeGTvPgPXmuxuEeho4J",VITE_SUBGRAPH_API_KEY_42161:"4d7d37cf3bc9fc7cae70d943fb30a47e",BASE_URL:"/sf_draft",MODE:"production",DEV:!1,PROD:!0,SSR:!1})[`VITE_ALCHEMY_API_KEY_${e}`],Yt=e=>{const n=fo(e);if(!n)throw new Error(`No Alchemy api key found for chainId ${e}`);return new Pi(e,n)},$s=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new Bi(window.ethereum).getSigner()},_t={[Se]:{Pool_USDC:{address:"0x1cD7629981881e80A6fe046AF0556369FbA3C09c",abi:Kr},Pool_WBTC:{address:"0x9D8625f596d52523bAf775dB597b5429838177Bd",abi:Qr},Pool_ETH:{address:"0x033258f67eD89043D3ea4E4f322aDcBd00152cf1",abi:zr},TxBuilder:{address:"0x9daA79Dbf6CD067D207194661779677B5Ee29DCF",abi:Xr},TxBuilderOpen_Hegic:{address:"0xb94fe302bF6B707027706996887299120449B6ec",abi:Zr},Exchanger:{address:"0x03E34a4d1F2B88579521086876E781479A544610",abi:eo},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:Jr},MarginAccount:{address:"0x7Ce77Aebd1AD2Bd629Ed35e74ceF3d108d8bF28a",abi:to},MarginAccountManager:{address:"0x3AD2F7207ad004fa658041Bc180Ad6c21072eBc7",abi:no},MarginTrading:{address:"0xcB6010751Ab1282b3777484f91F6E7728888AF58",abi:so},ModularSwapRouter:{address:"0x565112dd17Ae251703e93441Ab04D8c5B884Fa72",abi:ao},MarginOneClick:{address:"0x2E9dD4A5C662acDF58699a917d4f225CccE24EB2",abi:io},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:ro},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:oo},Hegic_Strategy:{abi:lo},Hegic_PriceCalculator:{abi:uo},ChainlinkOracle:{abi:po},UniswapQuoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:yo},UniswapFactory:{address:"0x1F98431c8aD98523631AE4a59f267346ea31F984",abi:mo}},[wn]:{}},bo=()=>{for(const e in _t){const n=_t[e],s=tt[e];s&&(s.forEach(a=>{n[a.symbol]={address:a.address,abi:co}}),_t[e]={...n})}};bo();const Pn=(e,n)=>{if(!_t[e])throw new Error(`Unknown chainId ${e}`);const s=_t[e][n];if(!s)throw new Error(`Unknown contract "${n}" for chainId ${e}`);return[s.address,s.abi]},Ge=(e,n)=>Pn(e,n)[0],Bn=(e,n)=>Pn(e,n)[1],Hs=(e,n,s)=>new Ft(...Pn(e,n),s?$s():Yt(e)),ee=(e,n)=>Hs(e,n,!1),be=(e,n)=>Hs(e,n,!0),ho=async(e,n)=>{const a=(await To(e,n).latestAnswer()).toBigInt();return se(a,Rr)},To=(e,n)=>{const s=Bn(e,"ChainlinkOracle"),a=J(e,n).oracleAddress;if(!a)throw new Error(`No oracle address set for asset ${n}`);return new Ft(a,s,Yt(e))},Ws=f.createContext(null),go=({children:e})=>{const n=xo();return t.jsx(Ws.Provider,{value:n,children:e})},Nn=()=>f.useContext(Ws),xo=()=>{const e=G(),{data:n,error:s}=Ie("useTokenPricesSetup",{fetcher:async()=>{const a={},i=[];return Wt.forEach(o=>{i.push(ho(e,o).then(r=>{a[o]=r}))}),await Promise.all(i),a},refreshInterval:60*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return s?(console.log(s),null):n},Ze=e=>{const n=Nn();return(n==null?void 0:n[e])??0n},qs=()=>{var c;const e=G(),n=Nn(),[s,a]=f.useState(!1),i=f.useRef(null),o=f.useRef(null),r=f.useRef(null),l=d=>{var T,b,g;const m=(T=r.current)==null?void 0:T.clientWidth,y=((b=i.current)==null?void 0:b.clientWidth)-m;return(d??((g=o.current)==null?void 0:g.clientWidth))>y},u=wi();f.useEffect(()=>{var d,m;if(s){const y=((m=(d=o.current)==null?void 0:d.querySelector(".rfm-marquee"))==null?void 0:m.clientWidth)/2;a(l(y))}else a(l())},[(c=o.current)==null?void 0:c.width,u]);const p=()=>Wt.map(d=>{if(!n)return null;const m=n[d],y=me(m,void 0,void 0,!0),h=J(e,d);return t.jsx("div",{className:"AssetPricesPanel__item",children:t.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer","data-tooltip-id":"Tooltip_Asset","data-tooltip-content":h.name,children:[t.jsx(X,{isHlight:!0,symbol:d,children:t.jsxs("span",{children:["$",y]})}),t.jsx("img",{className:"icon-url",src:Yr,alt:"External url"})]})},d)});return t.jsxs("div",{className:w("AssetPricesPanel",s&&"marquee_rendered"),ref:i,children:[t.jsx("div",{className:"AssetPricesPanel__icon",ref:r,children:t.jsx("img",{src:Bs,alt:"Graph icon"})}),t.jsx("div",{className:"AssetPricesPanel__items",ref:o,children:s?t.jsx(Ri,{pauseOnHover:!0,autoFill:!0,children:p()}):p()})]})},Vs=()=>({opening:[],closing:[]});f.createContext(Vs());const ae=1e3,Le=60,Ye=60,vt=24,wt=e=>e*vt*Ye*Le*ae,Kt=e=>Math.floor(e/ae/Le/Ye/vt),Rn=e=>Math.floor(e/ae),Ln=(e,n)=>{if(e<0)return`0d:0h${n?":0m":""}`;const s=e/ae/Le/Ye,a=Math.floor(s%vt),i=Math.floor(s/vt),o=Math.floor((s-Math.floor(s))*Ye);return n?`${i}d:${a}h:${o}m`:a===0&&i===0?`${o}m`:`${i}d:${a}h`},_o={[Se]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},vo={[Se]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},On=e=>{const n=_o[e];if(!n)throw new Error(`No Hegic strategies found for chainId ${e}`);return n},Co=(e,n)=>{const s=On(e),a=Kt(n);if(a<7||a>90)return;let i;return a<14?i=s.short:a<30?i=s.medShort:a<60?i=s.medLong:a<=90&&(i=s.long),i},Mo=e=>{const n={},s=On(e);return Object.values(s).forEach((a,i)=>{const o=Object.keys(n)[i];for(const r in a){const l=a[r];n[`${r}_${o}`]=l}}),n},So=e=>{const n=On(e),s=[];return Object.values(n).forEach(a=>{s.push(...Object.values(a))}),s},Ao=(e,n)=>{const s=vo[e];if(!s)throw new Error(`No Hegic Price Calculator address found for chainId ${e}`);const a=s[n];if(!a)throw new Error(`No Hegic Price Calculator address found for strategy key ${n}`);return a},Gs=(e,n,s)=>{const a=Bn(e,`Hegic_${s}`);return new Ft(n,a,Yt(e))},wo=(e,n)=>{const s=Ao(e,n);return Gs(e,s,"PriceCalculator")},Ys=(e,n)=>Gs(e,n,"Strategy"),jo=e=>{const n=e.reduce((a,i)=>i<a?i:a,e[0]),s=e.reduce((a,i)=>i>a?i:a,e[0]);return{min:n,max:s}},jt=(e,n,s=1)=>{const a=e,i=n;if(a>i)return s;if(a==i)return 0;if(a<i)return-s},ko=e=>e.filter(n=>n),Qt=e=>e.filter(Do),Do=(e,n,s)=>s.indexOf(e)===n,Eo=e=>{e.splice(0,e.length)},Lt=e=>e[e.length-1],Io=(e,n)=>e.reduce((s,a)=>{const i=Ve(n-s);return Ve(n-a)<i?a:s},e[0]),Po=e=>{const n=[];return e.forEach(s=>{n.push(...s)}),n},Ks=async(e,n,s,a)=>{const i=s%n;if(a+1>s-i&&(n=i),e.length>=n){const r=await Promise.all(e).catch(console.log);return Eo(e),r}else return[]},Qs=async(e,n,s)=>{const a=e.map(r=>Bo(r,n,s)),i=await Promise.all(a);return e.filter((r,l)=>{if(i[l])return!0})},Bo=async(e,n,s)=>{const a=await s.getBlock(e.blockNumber),i=Date.now()-n-wt(1);if(a.timestamp*ae>i)return!0},zs=e=>e.filter(n=>n.status==="fulfilled").map(n=>n.value),No=async(e,n)=>{const s={address:e.adress,topics:[Sn("Transfer(address,address,uint256)"),null,An(n,32)]};return await e.queryFilter(s)},hn=["delta","vega","gamma","theta"],ys=8,Ro=[7,14,30,60,90],pt=Ro.map(wt),Lo=(e,n,s,a,i,o)=>{const r=Ue(a,n.decimals),l=be(e,n.symbol);ge(e,l.approve,[s,Ot.from(r)],`${n.symbol} approved.`,i,o)},Oo=async(e,n,s,a,i)=>{we(i);const o=ee(e,n.symbol),r=Ue(i,n.decimals);return(await o.allowance(s,a)).toBigInt()>=r},Ne=(e,n)=>{const s=n.symbol??n,a=Ht[s];return Ue(e,a)},Ke=(e,n)=>{const s=n.symbol??n,a=Ht[s];return se(e,a)},Fo=e=>e.startsWith("W"),Xs=(e,n)=>{const s=e.address!==n.address,a=e.isETH!==n.isETH;return s||a},Uo=e=>{const n={};return e.forEach(s=>n[s.symbol]=s),n},Fn=(e,n,s,a)=>{const[i,o]=s.split(".");let r=e[i],l=n[i];return o&&(r=r&&r[o],l=l&&l[o]),jt(r,l,a)},Zs=(e,n)=>(s,a)=>Fn(s,a,e,n),zt=(e,n,s)=>{if(!e||!Object.keys(e).length)return{...n};if(!n)return;const a={...e};s||(s=Object.keys(e));for(let i=0;i<s.length;i++){const[o,r]=s[i].split("."),l=r?e[o][r]:e[o],u=r?n[o][r]:n[o],p=l+u;r?(a[o]||(a[o]={}),a[o][r]=p):a[o]=p}return a},$o=e=>Po(Object.values(e));const ye=e=>{const{style:n,hasLeftMargin:s}=e;return t.jsx("div",{className:"Spinner",children:t.jsx(Li,{className:"Spinner__icon",style:{marginLeft:s?7:0,...n}})})},mt=(e,n,s=t.jsx(ye,{}))=>n?s:e,de=(e,n,s=t.jsx(ye,{}))=>n?s:e(),Z=(e="—",n,s)=>t.jsx("span",{className:w("muted",s&&"muted_light"),style:{fontSize:n?13:"inherit"},children:e}),Js=e=>!U(e)&&!isNaN(e)&&e!==null,Xt=(e,n)=>`${e?"Long":"Short"} ${n?"Call":"Put"}`,Un=(e,n,s)=>e?s>n:s<n,Ct=(e,n,s=re)=>In(e,1+n,s),ms=(e,n,s=re)=>In(e,1-n,s),$n=(e,n,s)=>{if(s===0n)return 0n;const a=Xe(n,Ve(s))*100n,i=ue(-100),o=ue(100);return e===null?a:e?a<i?i:a:a>o?o:a},ea=(e,n)=>{const s=zt(e,n);for(const a in s){const i=s[a];s[a]=Js(i)?fe(i,3):void 0}return s},ta=(e,n=re)=>q(e,n,1),na=(e,n)=>{const s=()=>{const o=g=>(1+r(g/Math.sqrt(2)))/2,r=g=>{const x=.254829592,C=-.284496736,_=1.421413741,S=-1.453152027,D=1.061405429,I=.3275911,A=Math.sign(g);g=Math.abs(g);const B=1/(1+I*g),P=1-((((D*B+S)*B+_)*B+C)*B+x)*B*Math.exp(-g*g);return A*P},l=(g,x,C,_,S)=>{const D=(Math.log(g/x)+(_+.5*S**2)*C)/(S*Math.sqrt(C)),I=D-S*Math.sqrt(C);return g*o(D)-x*Math.exp(-_*C)*o(I)},u=(g,x,C,_,S)=>{const D=(Math.log(g/x)+(_+.5*S**2)*C)/(S*Math.sqrt(C)),I=D-S*Math.sqrt(C);return x*Math.exp(-_*C)*o(-I)-g*o(-D)},p=(g,x,C,_,S,D)=>{const I=D?l:u;let A=.2,B=.001,P=1;const F=1e-5;let E=I(g,x,C,_,A),O=0;const N=1e3;for(;Math.abs(E-S)>F&&O<N;)E<S?B=A:P=A,A=(B+P)/2,E=I(g,x,C,_,A),O++;return A},c=q(n),d=q(e.strike),m=(e.expiry-Date.now())/ae/Le/Ye/vt/365,y=q(e.premiumData.inUSDC),h=.01,{isCall:T}=e;return p(c,d,m,h,y,T)},a=o=>`${Math.floor(o*100)}%`,i=s();return{value:i,formatted:a(i)}},sa=e=>{if(!e.length)return null;const n={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},s=e.reduce((o,r,l)=>{var p;const u=zt(o,r,["premium","pnl.inUSDC"]);return u.greeks=ea(o.greeks,r.greeks),(p=r.collateral)!=null&&p.inUSDC&&(u.collateral.inUSDC+=r.collateral.inUSDC),u},n),a=()=>$n(null,s.pnl.inUSDC,s.premium),i=e.length===1;return s.pnl.inPercentage=i?e[0].pnl.inPercentage:a(),s};class Ho{constructor(n,s){this.getMarketToken=a=>J(a,s),this.getId=(a,i)=>{i=i.toLowerCase();const{strike:o,isCall:r,isLong:l,expiry:u}=a,p=q(BigInt(o)),c=Ee(Number(u),"dd-MMM-yy");return`${n}_${p}_${l?"LONG":"SHORT"}_${r?"CALL":"PUT"}_${c}_${i}`}}}class Wo extends Ho{constructor(){super("Hegic","USDC.e")}calcDeltaByAssetPrice(n,s){const{isCall:a,strike:i,amount:o}=n,r=q(o);return a?i<s?r:0:i>s?-r:0}calcDeltaByStrikeScale(n,s){const{isCall:a,amount:i}=n;return a?Number(s)<100?i:0:Number(s)>100?-i:0}}const Zt=new Wo,aa=f.createContext(null),qo=({children:e})=>{const n=Ko();return t.jsx(aa.Provider,{value:n,children:e})},ia=()=>{const e=ra();return e===null?null:e==null?void 0:e.accounts},Vo=()=>{const e=ra();return e===null?null:e==null?void 0:e.mutate},ra=()=>{const{isConnected:e,userAddress:n}=te(),s=G(),a=ee(s,"MarginTrading"),{data:i,error:o,mutate:r}=Ie(e&&[n,"useMarginAccounts"],async()=>{const l=await Go(s,n),u=[],p=[],c=await Yo(a);return l.forEach(m=>{const y={id:m,ratioCoeffs:c},h=a.callStatic.calculateMarginAccountValue(m).then(g=>{const x=se(BigInt(g),ut);y.balance=x}).catch(console.log),T=a.callStatic.getMarginAccountRatio(m).then(g=>{const x=se(BigInt(g),5);y.ratio=x}).catch(console.log),b=Promise.all([h,T]).then(()=>u.push(y)).catch(console.log);p.push(b)}),await Promise.all(p),{accounts:u.sort((m,y)=>m.id<y.id?-1:1),mutate:r}},{revalidateOnFocus:!1,refreshInterval:300*ae});return o?(console.log(o),null):i},Go=async(e,n)=>{const s=ee(e,"MarginAccountManager");return(await No(s,n)).map(o=>o.args.tokenId.toBigInt())},Yo=async e=>{const[n,s]=await Promise.all([e.redCoeff(),e.yellowCoeff()]).then(a=>a.map(i=>se(BigInt(i),5)));return{red:n,yellow:s}},Je=()=>{const{isConnected:e}=te();return e?f.useContext(aa):null},Ko=()=>{const e=ia(),n=Oe("MarginAccount_selected-id",-1n,{serializer:l=>JSON.stringify(Number(l)),deserializer:l=>BigInt(JSON.parse(l))}),[s,a]=n,[i,o]=f.useState(!0);f.useEffect(()=>{const l=e==null?void 0:e.find(c=>c.id===s),u=e==null?void 0:e.length;u&&!l&&a(e[0].id),!U(e)?(o(!1),u||a(-1n)):o(!0)},[e,s]);const r={accounts:e,selectedAccountIdState:n,isLoading:i,utils:{}};return Qo(r),r},Qo=e=>(Object.keys(fs).forEach(n=>{const s=fs[n];e.utils[n]=s.bind(e)}),e),fs={getSelectedAccount:function(){return this.accounts?this.accounts.find(n=>n.id===this.selectedAccountIdState[0]):null}},ft=()=>{const e=Je();if(!e)return;const n=e.selectedAccountIdState[0];if(n!==-1n)return n},zo=()=>{const e=Je();if(!e)return null;const n=e.utils.getSelectedAccount();return n?n.ratioCoeffs:null},Xo=13,Zo=()=>{const e=G(),{isConnected:n}=te(),s=Nn(),a=ft(),i=ee(e,"MarginTrading"),o=So(e),r=ee(e,"Hegic_PositionManager"),l=pt[pt.length-1],u=r.provider,{data:p,error:c}=Ie(n&&s&&[a,"useHegicPositionsForMarginId"],async()=>{const d=[],m=Jo(i.address,a),h=(await i.queryFilter(m).catch(console.log)).map(T=>T.args.collateralTokenID.toBigInt());if(h.length){const T=[];for(let b=0;b<o.length;b++){const g=o[b],x=Ys(e,g),C=el(g,h),_=x.queryFilter(C).then(I=>Qs(I,l,u)).catch(console.log),S=I=>tl(e,I,i.address,s),D=_.then(I=>{const A=I.map(S);return Promise.all(A).catch(console.log)}).then(I=>{d.push(...ko(I))}).catch(console.log);T.push(D),await Ks(T,Xo,o.length,b)}}return d},{refreshInterval:60*ae});return c?(console.log(c),null):p},Jo=(e,n)=>{const s=[Sn("ProvideERC721(uint256,address,address,uint256)"),An(n,32)];return{address:e,topics:s}},el=(e,n)=>{const s=[Sn("Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])"),n.map(i=>An(i,32))];return{address:e,topics:s}},tl=async(e,n,s,a)=>{const i=n.address,o=bn(n.decode(n.data,n.topics));o.data=bn(o.data);const r=ee(e,"Hegic_OperationalTreasury"),l=await r.lockedLiquidity(o.id),u=l.expiration*ae;if(Date.now()>u||l.state===0)return;const{asset:d,isCall:m,isSpread:y,isLong:h,strikeScale:T}=nl(e,i);Object.assign(o,{asset:d,isCall:m,isSpread:y,isLong:h});const b=Ke(o.data.amount,d),g=a[d],x=sl(o,T);Object.assign(o,{strike:x});const{premium:C,pnl:_}=await al(e,o,i),S=Xe(Ve(C),b),D=_.inPercentage===ue(-100),I=il(o,g);return{market:"Hegic",id:Number(o.id),asset:d,amount:b,strike:x,isCall:m,isSpread:y,isLong:h,premium:C,pnl:_,entryPrice:S,expiry:u,greeks:I,utils:{calcPnl:async()=>new Promise(B=>{B(_)})},actions:{close:async()=>{const B=$s();return r.connect(B).payOff(o.id,s)},isClosingDisabled:D}}},nl=(e,n)=>{const s=Mo(e),a=Object.keys(s).find(p=>s[p]===n),[i,o,r]=a.split("_"),l=i.includes("CALL"),u=i.includes("SPREAD");return{asset:r,isCall:l,isSpread:u,isLong:!0,strikeScale:o}},sl=(e,n)=>{const s=se(e.data.strike,Nr);let a=Us(s/100n*BigInt(n));return e.isSpread&&(a=s),a},al=async(e,n,s)=>{const a=Ys(e,s),i=qr(se(n.positivepnl,ut)),r=se(BigInt(await a.payOffAmount(n.id)),ut)+i,l={inUSDC:r,inPercentage:$n(n.isLong,r,i)};return{premium:i,pnl:l}},il=(e,n)=>{const s={strike:e.strike,isCall:e.isCall,amount:e.data.amount};return{delta:Zt.calcDeltaByAssetPrice(s,n),vega:void 0,gamma:void 0,theta:void 0,rho:void 0}},rl=(e,n)=>{const a=ol({Hegic:[]}),{isConnected:i}=te();if(!i)return{};const[o,r]=n;return Object.values(a).every(p=>!U(p))&&!o&&r(!0),a},ol=e=>{const n={};for(const s in e){const a=e[s],i=a&&a.filter(o=>!(Date.now()>o.expiry&&o.pnl.inPercentage===ue(-100)));n[s]=i}return n},kt=()=>f.useContext(oa),ll=()=>{const e=f.useState(Vs()),[n,s]=f.useState(!1),a=rl(e,[n,s]),i=ul(a),o=sa(i),{userAddress:r}=te();return f.useEffect(()=>{s(!1)},[r]),{positions:i,positionsByMarket:a,positionsTotalData:o,arePositionsLoaded:n,pendingPositionsState:e}},ul=e=>Object.values(e).reduce((s,a)=>(a&&s.push(...a),s),[]),oa=f.createContext(null),cl=({children:e})=>{const n=ll();return t.jsx(oa.Provider,{value:n,children:e})},pl=()=>{const{data:e,error:n}=Ie("_useDates",async()=>{let s;try{s=[...dl()]}catch(a){console.log(a)}return s?Qt(s).sort(jt):null},{refreshInterval:5*Le*ae,revalidateOnFocus:!1});return n?(console.log(n),null):e},dl=()=>pt.map((n,s)=>{const a=new Date(Date.now()+n),i=s===0,o=s===pt.length-1,r=a.getUTCHours()>=ys,l=a.getUTCDate();return i&&r&&a.setUTCDate(l+1),o&&!r&&a.setUTCDate(l-1),a.setUTCHours(ys),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0),a.getTime()}),De=()=>f.useContext(la),yl=()=>{const e=pl(),n=Oe("chosen-date",null),[s,a]=n;return e&&U(e.find(o=>o===s))&&a(e[0]),{dates:e,chosenDateState:n}},la=f.createContext(null),ml=({children:e})=>{const n=yl();return t.jsx(la.Provider,{value:n,children:e})},fl=()=>f.useContext(ua),bl=()=>{const[e,n]=f.useReducer(hl,{});return[e,n]},hl=(e,n)=>{switch(n.type){case"added":{const{asset:s,dateMs:a,strikesForDate:i}=n;return e[s]||(e[s]={}),e[s][a]||(e[s][a]=i),{...e}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},ua=f.createContext(null),ca=f.createContext(null),Tl=({children:e})=>{const[n,s]=bl();return t.jsx(ua.Provider,{value:n,children:t.jsx(ca.Provider,{value:s,children:e})})},gl=()=>t.jsx(cl,{children:t.jsx(ml,{children:t.jsx(Tl,{children:t.jsx(xl,{})})})}),xl=()=>{const e=St(),n=[{name:"Option Strategies",to:"/options/builder"},{name:"Option-Chain",to:"/options/option-chain"}];return n.forEach(s=>{e.pathname.endsWith(s.to)&&(s.isActive=!0)}),t.jsxs("div",{className:"OptionsPage",children:[t.jsx(qs,{}),t.jsx(Ut,{links:n,type:"border"}),t.jsx(xs,{})]})};function Jt(e,n={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},s=[ct,Pe]){const[a,i]=e,{maxValue:o,placeholder:r,isDisabled:l,isFocused:u}=n,[p,c]=s,[d,m]=f.useState(!1),y=f.useRef(null);return{node:t.jsx("input",{autoFocus:u,type:"text",ref:y,value:a,disabled:l,placeholder:r,onChange:h=>{o&&c(h.target.value)>o?i(p(o)):i(p(h.target.value))},onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),hasFocus:d,ref:y}}const en=({value:e,setValue:n,maxValue:s,maxValueDisplayed:a,maxLabel:i=void 0,formatInputStringFns:o=[ct,Pe],hasError:r,errorMsg:l,isDisabled:u,unitStr:p,placeholder:c,className:d})=>{typeof s=="bigint"&&(s=q(s));const m=Jt([e,n],{maxValue:s,placeholder:c,isDisabled:u},o),y=w(d,m.hasFocus&&"hlight",r&&"error",u&&"disabled");return t.jsxs("div",{className:w("InputFamily Input",y),onClick:()=>{m.ref.current.focus()},children:[m.node,t.jsx("div",{className:"Input__unit",children:p}),!U(s)&&t.jsxs("button",{className:w("InputFamily__max-btn",l&&"invisible"),disabled:u,onClick:h=>{h.stopPropagation(),n(o[0](s))},children:[i??"Max",a?": ":"",a?t.jsx("div",{className:"InputFamily__max-btn-value",children:a}):""]}),l&&t.jsx("div",{className:"InputFamily__error-msg",children:l})]})},pe="Limited",Ce="Unlimited",ot="Bullish",Tn="Bearish",Be="Neutral",oe={"Long Call":{stats:{outlooks:[ot],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:Re,isCollection:!0},"Short Call":{stats:{outlooks:[Tn],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:ce,isCollection:!0},"Covered Call":{stats:{outlooks:[ot],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:ce},"Long Put":{stats:{outlooks:[Tn],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:Re,isCollection:!0},"Short Put":{stats:{outlooks:[ot],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:ce,isCollection:!0},"Long Strangle":{stats:{outlooks:[Be],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:rs},"Short Strangle":{stats:{outlooks:[Be],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:ce},"Covered Strangle":{stats:{outlooks:[Be,ot],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:ce},"Long Straddle":{stats:{outlooks:[Be],profit:Ce,loss:pe,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:rs},"Short Straddle":{stats:{outlooks:[Be],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:ce},"Covered Straddle":{stats:{outlooks:[Be,ot],profit:pe,loss:Ce,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:ce},"Iron Butterfly":{stats:{outlooks:[Be],profit:pe,loss:pe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:Rt,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[Be],profit:pe,loss:pe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:Rt},"Bull Call Spread":{color:Re},"Bear Put Spread":{color:ce}};Object.keys(oe).forEach(e=>{oe[e].name=e});const _l={[ot]:Re,[Be]:Rt,[Tn]:ce},pa=Object.keys(oe).filter(e=>{const n=oe[e];return!U(n.key)}),vl=pa.filter(e=>!oe[e].isHidden),Cl={Hegic:2},da={HEAD:"Head",COMMON:"Common",LEG:"Leg"},Ml=e=>{const{amountStrState:n,strategy:s}=e,[a,i]=n,o=oe[s].plural??`${s}s`;return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),t.jsx("div",{className:"BuilderForm__field-body",children:t.jsx(en,{value:a,setValue:i,unitStr:o})})]})},Sl="/sf_draft/assets/strategy-1e15875d.svg",Al=e=>{const{strategyState:n,isDisabled:s}=e,[a,i]=n,o=vl.map(r=>({value:r,label:r}));return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[t.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",t.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),t.jsx("div",{className:"BuilderForm__field-body",children:t.jsx(he,{options:o,defaultValue:a,onChange:r=>{i(r.value)},iconNode:t.jsx("img",{src:Sl,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:s})})]})},et=e=>{const n=Math.abs(e)===1,s=e>0;return{isCall:n,isLong:s}},Hn=e=>!!e.find(n=>{const{isLong:s}=et(n);return!s}),wl=e=>!!e.find(n=>{const{isLong:s}=et(n);return s}),jl=e=>!!e.find(n=>n),kl=(e,n,s)=>{let a;const i=`W${s}`,o=n.split(" ")[0],{isCall:r}=et(e);return!r||o==="Short"?a=["USDC.e"]:o==="Covered"?a=[i]:o==="Iron"&&(a=["USDC.e",i]),a},Dl=e=>{const n=e.includes("Straddle"),s=e==="Iron Butterfly";if(n)return[0,1];if(s)return[1,2]},El=(e,n)=>{if(!(e!=null&&e[0].market))return;if(e.length>1){const a=e.find(i=>i.market===n);if(a)return a}return e[0]},Il=(e,n)=>ee(e,`TxBuilderOpen_${n}`),Pl=e=>({Hegic:ee(e,"TxBuilderOpen_Hegic")}),Bl=(e,n,s)=>{if(!n)return s;let a=0,i=0;return e.map(r=>{const{isLong:l}=et(r);return l?n[a++]:s[i++]})},Nl=e=>{const n=Object.keys(e);return n?!!n.find(a=>!e[a][0].isAbsent):!1},ya=(e,n)=>{var a;return(a=e==null?void 0:e.decomposition)!=null&&a.length?!!e.decomposition.find(i=>{if(!i)return;const o=i.marketToken,r=n??e.paymentToken;return!o||!r?!1:Xs(o,r)}):!1};const Rl=e=>{const{strategyStructure:n,chosenDateState:s,resetTriggers:a,isDisabled:i,updateUnstableField:o}=e,{userAddress:r}=te(),[l,u]=s,c=De().dates??[],d=()=>{u(null)};f.useEffect(()=>{d()},a),f.useEffect(()=>{r&&c.length&&!l&&u(c[0])},[r,c]);const m=(T,b="d MMM")=>{const g=T-Date.now();return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"BuilderForm__date-value",children:Ee(T,b)}),t.jsx("div",{className:"BuilderForm__date-period",children:Ln(g)})]})},y=c.map(T=>({value:T,label:m(T)})),h=l&&y.find(T=>T.value===l);return t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),t.jsx("div",{className:"BuilderForm__field-body",children:n.map((T,b)=>{const{isCall:g,isLong:x}=et(T),C=mt(t.jsx(he,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:i||!r,options:y,value:h,formatOptionLabel:({value:_},{selectValue:S,context:D})=>{var B;if(D==="menu")return m(_);const A=((B=S[0])==null?void 0:B.value)===_?"d MMM hh a":"d MMM";return m(_,A)},onChange:_=>{u(_.value)},iconTextNode:t.jsxs("span",{className:w({positive:x,negative:!x},"block"),style:{width:25},children:[x?"Buy":"Sell",t.jsx("br",{}),g?"Call":"Put"]})},b),U(c),t.jsx(ye,{},b));return o(b,C),C})})]})};function bs(){const{innerWidth:e,innerHeight:n}=window;return{width:e,height:n}}function Ll(){const[e,n]=f.useState(bs());return f.useEffect(()=>{function s(){n(bs())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}const _e=(e=768)=>{const{width:n}=Ll();return n<e},Ol=({getParentNode:e,getChildNodes:n})=>{const[s,a]=ji(!1),i=w(s&&"expanded"),o=e(i,a),r=n(i);return t.jsxs(t.Fragment,{children:[o,...r]})};const ma=({children:e,transitionTimeout:n=250,renderHeader:s=({state:a})=>a.isEnter?"Hide":"Show"})=>t.jsx("div",{className:"Accordion",children:t.jsx(Oi,{transition:!0,transitionTimeout:n,children:t.jsx(Fi,{header:s,children:e})})});const Te=({isVertical:e,marginValue:n})=>{const s=e?{marginLeft:n,marginRight:n}:{marginTop:n,marginBottom:n};return t.jsx("div",{className:w("Divider",e&&"_vertical"),style:U(n)?{}:s})};class fa{constructor(n){const{titleData:s,itemsData:a}=n,i=Object.keys(s);this.titleData=s,this.itemsData=a,this.dataKeys=i}}class Fl extends fa{constructor(n){super(n),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const n=this._getCells(this.titleData,!0);return t.jsxs("tr",{children:[...n]})}getItemsRows(){const n=this.itemsData.map(s=>{const a=this._getItemRow(s);return t.jsx(qe.Fragment,{children:a},s.id)});return t.jsx(qe.Fragment,{children:n},"rows")}_getCells(n,s){return this.dataKeys.map(a=>{const i=n[a]??Z();return s?t.jsx("th",{children:i},a):t.jsx("td",{children:i},a)})}_getItemRow(n){const s=!!n.children,a=this._getCells(n),i=(r,l)=>{const u=[r,n.className];return t.jsxs("tr",{className:w("Table__item",s&&"expandable",u),onClick:l,children:[...a]})};return s?this._getExpandableRow(n,i):i()}_getExpandableRow(n,s){const a=i=>n.children.map(r=>{const l=this._getCells(r);return t.jsxs("tr",{className:w("Table__child-item",i),children:[...l]},r.id)});return t.jsx(Ol,{getParentNode:s,getChildNodes:a},n.id)}}class Ul extends fa{constructor(n){super(n),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(n){const s=n.omittedKeys;return this.dataKeys.map(i=>{const o=n[i];return s&&!!s.find(l=>i===l)||U(o)?null:t.jsxs("div",{className:w("Table__item-row info-row",i),children:[t.jsx("div",{className:"info-row__title",children:this.titleData[i]}),t.jsx("div",{className:"info-row__value",children:o===null?Z():o})]})})}_getItem(n){const s=n.className;return t.jsxs("div",{className:w("Table__item App-box",s),children:[this._renderItemRows(n),n.children&&t.jsxs(t.Fragment,{children:[t.jsx(Te,{}),t.jsx(ma,{transitionTimeout:500,renderHeader:({state:a})=>`${a.isEnter?"Hide":"Show"} full strategy`,children:n.children.map(a=>t.jsxs(t.Fragment,{children:[t.jsx(Te,{}),t.jsx("div",{className:"Table__child-item",children:this._renderItemRows(a)})]}))})]})]})}}const ba=({structureData:e,className:n,children:s})=>{const a=_e(576),i=l=>{if(!l){const u=new Fl(e),{getTitleRow:p,getItemsRows:c}=u;l=[t.jsx("thead",{children:p()},"head"),t.jsx("tbody",{children:c()},"body")]}return t.jsx("div",{className:"Table__desktop",children:t.jsx("table",{children:l})})},o=()=>{const u=new Ul(e).getItems();return t.jsx("div",{className:"Table__mobile",children:u})},r=()=>a?o():i();return t.jsx("div",{className:w("Table",n),children:s!=null&&s.length?i(s):r()})};const ha="/sf_draft/assets/direction_up-3632497a.svg",Ta="/sf_draft/assets/direction_down-6f961d86.svg",$l="/sf_draft/assets/Hegic-a7e6545a.svg",Hl="/sf_draft/assets/Hegic_circled-26df614a.svg",Wl="/sf_draft/assets/Hegic_circled-light-9256df54.svg",tn={Hegic:{common:$l,circled:Hl,circledLight:Wl}},ga=({strikeData:e,priceNode:n,isPriceHlight:s,isSmall:a})=>{const{market:i,isCall:o,isLong:r}=e,l=tn[i].circled,u=r?ha:Ta;return t.jsxs("div",{className:w("Brief","PriceBrief",a&&"small"),children:[t.jsxs("div",{className:"PriceBrief__icons Brief__icons",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:l,alt:`${i}`})}),t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:u,alt:`${r?"Long":"Short"}`})})]}),t.jsx("div",{className:w("PriceBrief__info-card",{positive:r,negative:!r}),children:o?"Call":"Put"}),t.jsx("div",{className:w("PriceBrief__price",s&&"hlight"),children:n})]})},ql=e=>{const{id:n,amountStr:s,strikeMarketsDataArr:a,chosenStrikeData:i,setChosenStrikeData:o,isOpen:r,close:l}=e,[u,p]=f.useState([]),c=()=>{const b=[];a.forEach((g,x)=>{const C=ue(Pe(s));g.utils.calcPremium(C).then(_=>{g.premiumData=_,b[x]=_,p([...b])})})};if(f.useEffect(()=>{p([]),a&&c()},[a,s]),!a)return null;const d=23,y=80-d,T=200-d;return t.jsx("div",{className:w("StrikeInfoBox",r&&"open"),style:{zIndex:9-n*2},children:t.jsxs(ba,{onClick:b=>b.stopPropagation(),children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:t.jsx("div",{style:{minWidth:T},children:"Market"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Source"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Delta"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Vega"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Gamma"})}),t.jsx("th",{children:t.jsx("div",{style:{minWidth:y},children:"Theta"})}),t.jsx("th",{children:t.jsx("div",{style:{width:y},children:"Rho"})})]})}),t.jsx("tbody",{children:a.sort(Zs("premiumData.inUSDC")).map((b,g)=>{const{greeks:x,source:C}=b,_=u[g],S=!_||_.isDisabled,D=b===i;return t.jsxs("tr",{className:w("StrikeInfoBox__strike-option",S&&"disabled",D&&"chosen"),children:[t.jsxs("td",{children:[t.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{o(b),l()},disabled:S}),t.jsx(ga,{strikeData:b,priceNode:de(()=>_===null?Z("No liquidity",!0):`$${me(_.inUSDC)}`,U(_)),isPriceHlight:!0})]}),t.jsx("td",{children:C??"AMM"}),Object.keys(x).map(I=>{const A=x[I];return t.jsx("td",{children:A??Z()},I)})]},b.market)})})]})})};const Qe=({fontSize:e,children:n})=>t.jsx("div",{className:"InnerWarning",style:{fontSize:e??""},children:n});Ui();const xa=({id:e,className:n,isUnited:s,spaceBetween:a,isDraggable:i,breakpoints:o,handleInit:r,slideClassName:l,children:u})=>{const p=f.useRef(null),c=`${s?`.${n}`:`#${e}`}`,d={spaceBetween:a,allowTouchMove:i,breakpoints:o,navigation:{enabled:!0,prevEl:`${c} .Carousel__nav-btn_prev`,nextEl:`${c} .Carousel__nav-btn_next`},on:{init:m=>{m.el.style.overflow="clip visible",r&&r(m)}}};return f.useEffect(()=>{const m=p.current;m&&(Object.assign(m,d),m.initialize())},[p,d]),t.jsxs("div",{className:w("Carousel",n),id:e,children:[t.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),t.jsx("swiper-container",{init:!1,ref:p,children:u==null?void 0:u.map((m,y)=>t.jsx("swiper-slide",{class:l,children:m},y))}),t.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const Vl=({children:e,slideType:n="lg"})=>t.jsx(xa,{breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:6,grid:{fill:"row",rows:2}},520:{slidesPerView:5,grid:{fill:"row",rows:2}},380:{slidesPerView:4,grid:{fill:"row",rows:2}},0:{slidesPerView:3,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${n}`,children:e}),Wn=e=>Object.keys(e).map(BigInt),Gl=e=>{const n={},s=e.map(i=>i.strike);return Qt(s).forEach(i=>{const o=e.filter(r=>r.strike===i);n[i]=o}),n},Yl=e=>{const n=[];return e.forEach(a=>{const i=Wn(a);n.push(...i)}),Qt(n)},Kl=e=>{const n=Yl(e);return e.map(a=>{const i=Wn(a),o={...a};return n.forEach(r=>{i.indexOf(r)===-1&&(o[r]=[{strike:r,isAbsent:!0}])}),o})};const Ql=e=>{const{currentPrice:n,isFirst:s}=e;return t.jsx("div",{className:w("StrikeCurrentPriceItem","StrikeChooser__item",s&&"StrikeCurrentPriceItem_first"),children:t.jsxs("span",{children:["$",Fe(n)]})})};const zl="/sf_draft/assets/cross_grey-42dbd9c5.svg",Xl=e=>{const{isITM:n}=e;return t.jsx("div",{className:w("StrikeAbsentItem","StrikeChooser__item",n&&"StrikeChooser__item_ITM"),children:t.jsx("img",{src:zl,alt:"Absent"})})},Zl=({className:e,id:n,isAutoSelectEnabled:s,structureKey:a,asset:i,amountStr:o,strikesData:r,chosenStrikeData:l,setChosenStrikeData:u})=>{const{isConnected:p}=te(),c=Ze(i),d=q(c),m=ue(fe(d,d<10?2:0)),y=n===0,h=_e(),[T,b]=f.useState(null),g=E=>{const O={};for(const N in E){const v=E[N][0],{isCurrentPrice:j,isAbsent:M}=v;j&&M||(O[N]=E[N])}return O},x=()=>{const E=g(r);let O;for(const N in r){const k=r[N][0];if(k.isCurrentPrice||m===k.strike){k.isCurrentPrice=!0,O=k;break}}return O||(E[m]=[{strike:m,isCurrentPrice:!0,isAbsent:!0}]),E},C=()=>{if(r){if(!Nl(r))return{strikes:[],dataArr:[]};let E=x();const O=Wn(E).sort(jt),N=Object.values(E).sort((k,v)=>{const j=k[0],M=v[0];return Fn(j,M,"strike")});return{strikes:O,dataArr:N}}return{}},{strikes:_,dataArr:S}=C(),D=!!(_!=null&&_.length);f.useEffect(()=>{if(s&&r&&!l){const E=S.find(N=>!N[0].isAbsent);if(!E)return;const O=E[0];u(O)}},[r]);const{openPopup:I,closePopup:A,isOpen:B}=Cs(()=>b(null)),P=()=>{const E=q(S[0][0].strike);let O;return E<10**2?O="xs":E<10**3?O="sm":E<10**4?O="md":E<10**5?O="lg":O="xl",t.jsx(Vl,{slideType:O,children:_.map((N,k)=>{const v=S[k],j=v[0],{isCurrentPrice:M,isAbsent:L}=j;if(M&&L)return t.jsx(Ql,{currentPrice:N,isFirst:y},"current_price");const{isCall:H}=et(a),W=Un(H,N,m);if(L)return t.jsx(Xl,{isITM:W},k);const R=l&&l.strike===N,Y=R&&l.market,V=T===v;return t.jsxs(z,{className:w("StrikeChooser__item",W&&"StrikeChooser__item_ITM",R&&"chosen",V&&"open",M&&w("StrikeCurrentPriceItem",y&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:$=>{B&&$.stopPropagation(),b(v),I()},children:[R&&t.jsx("div",{className:"StrikeChooser__item-market",children:t.jsx("img",{src:tn[Y].circledLight,alt:`${Y} icon`})}),t.jsxs("span",{children:["$",Fe(N,0)]})]},N)})})},F=()=>r?D?t.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-n*2},children:P()}):t.jsx(Qe,{children:"No Liquidity"}):t.jsxs(Qe,{children:[p?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return t.jsxs("div",{className:w("StrikeChooser",e,h&&!r&&"hidden"),children:[F(),t.jsx(ql,{id:n,amountStr:o,strikeMarketsDataArr:T,chosenStrikeData:l,setChosenStrikeData:u,isOpen:B,close:A})]})},_a=.005*10**5,qn=async(e,n,s,a)=>{const i=is(e,n),o=is(e,s),r=Ue(a,i.decimals);return n===s||r===0n||i.isStable&&o.isStable?new Promise(p=>{p(a)}):await ee(e,"UniswapQuoter").callStatic.quoteExactInput(va(n,s),r).then(p=>{const c=p.toBigInt();return se(c,o.decimals)}).catch(p=>{console.log(`Swapping ${i.symbol} to ${o.symbol} error!

`,p)})},Vn=(e,n,s)=>{const a=kn(e);return qn(e,n,a,s)},Jl=(e,n,s)=>{const a=kn(e);return qn(e,a,n,s)},va=(e,n)=>$i.solidityPack(["address","uint24","address"],[e,_a,n]),Ca={PROTOCOL_NAME:"Hegic"},eu=async(e,n,s)=>{if(!tu(n))return[];const{assetPrice:i}=s,{expiry:o}=n,r=o-Date.now();n={...n,period:r};const l=Co(e,r);return l?await nu(e,l,n,i):[]},tu=e=>{const{isLong:n}=e;if(n)return!0},nu=async(e,n,s,a)=>{const{amount:i,asset:o,isCall:r}=s,l=[],u=Object.keys(n);for(let c=0;c<u.length;c++){const d=u[c],m=n[d],y={strategyKey:d,strategyAddress:m},h=su(d,o,r),T=await au(e,m,s),b=T>=i;if(!h||!b)continue;const g=iu(e,y,s,a),x=g.utils.calcPremium(i).then(C=>({...g,liquidity:T,premiumData:C})).catch();l.push(x)}return await Promise.all(l).then(uu)},su=(e,n,s)=>{const[a,,i]=e.split("_");return!(a.includes("SPREAD")||s!==(a==="CALL")||i!==n)},au=async(e,n,s)=>{const{asset:a,period:i}=s,o=new Ft(n,Bn(e,"Hegic_Strategy"),Yt(e)),r=Rn(i);let l=0n;try{const u=(await o.getAvailableContracts(r,[])).toBigInt();l=se(u,Ht[a])}catch{}return l},iu=(e,n,s,a)=>{const{isCall:i,asset:o,expiry:r}=s,{strategyKey:l}=n,[,u]=l.split("_"),p=lu(u,a),c=ru(e,n,s),d=Zt.calcDeltaByStrikeScale(s,u);return{market:"Hegic",protocolName:Ca.PROTOCOL_NAME,asset:o,strike:Us(p),expiry:r,isCurrentPrice:u==="100",isCall:i,isLong:!0,greeks:{delta:d,vega:void 0,gamma:void 0,theta:void 0,rho:void 0},utils:c}},ru=(e,n,s)=>{const{strategyKey:a,strategyAddress:i}=n,{asset:o,period:r}=s;return{calcPremium:async c=>ou(e,a,s,c),getBuilderParams:async(c,d,m)=>{const y=Ne(c,o),h=d.premiumData.inMarketToken,T=Vr(h,m);return Il(e,Ca.PROTOCOL_NAME).encodeFromHegic(i,y,Rn(r),T,[])},getStrategyAddress:()=>i}},ou=async(e,n,s,a)=>{const{asset:i,period:o}=s,r=Zt.getMarketToken(e),l=Ne(a,i),u=wo(e,n),p=Rn(o),c=await u.calculatePremium(p,l,0).then(BigInt),d=se(c,r.decimals);return{inUSDC:await Vn(e,r.address,d),inMarketToken:d,marketToken:r}},lu=(e,n)=>{const s=q(n),a=Math.floor(s*(e/100));return ue(a)},uu=e=>e.filter(n=>n&&n.premiumData),Gn=(e,n)=>{var d;const s=fl(),a=f.useContext(ca),i=G(),{userAddress:o}=te(),r=Ze(e),[l,u]=f.useState((d=s==null?void 0:s[e])==null?void 0:d[n]),{data:p,error:c}=Ie(n&&r&&[s,n,e,r,"fetchStrikesForDate"],async()=>await cu(i,e,n,{userAddress:o,assetPrice:r}),{refreshInterval:300*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var m;u((m=s==null?void 0:s[e])==null?void 0:m[n])},[e,n]),f.useEffect(()=>{p&&(u(p),a({type:"added",asset:e,dateMs:n,strikesForDate:p}))},[p]),c?(console.log(c),null):l},cu=async(e,n,s,a)=>{const i={asset:n,expiry:s,amount:ue(1)},o=[{...i,isCall:!0,isLong:!0,strategy:"Long Call"},{...i,isCall:!1,isLong:!0,strategy:"Long Put"},{...i,isCall:!0,isLong:!1,strategy:"Short Call"},{...i,isCall:!1,isLong:!1,strategy:"Short Put"}],r={},l=[];return o.forEach(p=>{const c=Promise.allSettled([eu(e,p,a)]).then(zs).then(d=>{const m={strategy:p.strategy,strikes:[]};return d.forEach(y=>{m.strikes.push(...y)}),m}).catch(console.log);l.push(c)}),(await Promise.all(l)).forEach(p=>{r[p.strategy]=Gl(p.strikes)}),r},pu=e=>{const{asset:n,strategy:s,amountStr:a,chosenDate:i,strategyStructure:o,hasSell:r,strikesDataArrState:l,chosenStrikesState:u,areStrikesLoadingState:p,updateTriggers:c,resetTriggers:d,updateUnstableField:m}=e,[y,h]=l,[T,b]=u,[g,x]=p,C=Gn(n,i),_=()=>{if(x(!0),S(),o.forEach((I,A)=>{y[A]=[];const{isCall:B,isLong:P}=et(I),F=Xt(P,B);C!=null&&C[F]&&(y[A]={...C[F]})}),C){const I=Kl(y);h([...I]),x(!1)}},S=()=>{b([])},D=()=>{h([])};return f.useEffect(()=>{S(),D()},d),f.useEffect(()=>{i&&_()},[...c,C]),t.jsxs("div",{className:w("BuilderForm__field","BuilderForm__field_strike",!r&&"col-span-2"),children:[t.jsx("div",{className:"BuilderForm__field-header",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),t.jsx("div",{className:"BuilderForm__field-body",children:o.map((I,A)=>{const B=Dl(s),P=B&&B.indexOf(A)!==-1,F=mt(t.jsx(Zl,{id:A,isAutoSelectEnabled:o.length===1&&!g,structureKey:I,asset:n,amountStr:a,strikesData:y[A],chosenStrikeData:T[A],setChosenStrikeData:E=>{if(T[A]=E,P){const O=q(E.strike),N=E.market;B.filter(v=>v!==A).forEach(v=>{const j=El(y[v][O],N);T[v]=j})}b([...T])}},A),g,t.jsx(ye,{},A));return m(A,F),F})})]})};const du=e=>{const{liqPrice:n,isLiqPriceLoading:s,isInLastHalf:a}=e,i=t.jsx("span",{className:"muted_light",children:"..."}),o=t.jsx("span",{className:"muted_light",children:"—"}),r=()=>`$${me(n)}`;return t.jsxs("div",{className:w("CollateralLiqPrice",a&&"CollateralLiqPrice_down"),children:["Liq. Price:",t.jsxs("span",{className:"CollateralLiqPrice__val",children:[s&&i,!s&&(n?r():o)]})]})};const yu=({min:e,max:n,collateralData:s,handleClick:a})=>t.jsx("div",{className:"CollateralRangeBtns",children:[e,n].map((i,o)=>{const r=s.isBase,l=Me(fe(q(i),We)),u=le(i,s.marketToken.isStable),p=o===0;return t.jsxs(qe.Fragment,{children:[t.jsxs("button",{onClick:()=>a(l),children:[r?"":"$",u]},o),p?"—":""]},o)})});const mu=({collateralData:e,collateralAmountStr:n,onChange:s})=>{const{isBase:a}=e,i=a?1:0,o=q(e.min,re,i),r=q(e.max,re,i),l=Pe(n),u=a?.01:1;return t.jsx("div",{className:"CollateralSlider",children:t.jsx(Hi,{defaultValue:0,value:l,min:o,max:r,step:u,onChange:s})})},fu=e=>{const{isInLastHalf:n,getCollateralData:s,collateralData:a,setCollateralData:i,collateralTokens:o,chosenStrike:r,updateTriggers:l,resetTriggers:u}=e,[p,c]=f.useState(""),[d,m]=f.useState(o[0]),[y,h]=f.useState(!1),[T,b]=f.useState(!1),g=()=>{c(""),m(o[0]),i(null)},x=()=>{c(""),i(null)};f.useEffect(()=>{g()},u),f.useEffect(()=>{r&&(h(!0),x(),C(!0))},[r,d]);const C=A=>{let B;if(!A&&p){const P=Pe(p);B=ue(P)}s(d,B).then(P=>{i(P),h(!1),b(!1)})};Ae(()=>{y||(b(!0),C())},je,[p,...l]);const _=Jt([p,c],{placeholder:"0"}),S=o.map(A=>({value:A,label:t.jsx(X,{symbol:A,isHlight:!0,children:A})})),D=w(_.hasFocus&&"hlight"),I=()=>t.jsxs(t.Fragment,{children:[a&&t.jsx(du,{liqPrice:a.liquidationPrice,isLiqPriceLoading:T,isInLastHalf:n}),de(()=>t.jsxs("div",{className:"CollateralChooser__input-container",children:[t.jsx("div",{className:"CollateralChooser__input",children:_.node}),a&&t.jsx(yu,{min:a.min,max:a.max,collateralData:a,handleClick:A=>{c(A)}}),a&&t.jsx(mu,{collateralData:a,collateralAmountStr:p,onChange:A=>{const B=ct(A);c(B)}})]}),y),t.jsx("div",{className:"CollateralChooser__token-selector",children:t.jsx(he,{options:S,defaultValue:d,isDisabled:S.length===1,onChange:A=>{m(A.value)}},`CollateralChooser__token-selector_${d}`)})]});return t.jsx("div",{className:w("CollateralChooser",D),children:r?r.isComingSoon?t.jsxs(Qe,{children:[r.market," is coming soon"]}):I():t.jsx(Qe,{children:"Strike required"})})},bu=e=>{const{asset:n,amountStr:s,strategy:a,strategyStructure:i,hasSell:o,chosenStrikes:r,collateralDataArrState:l,updateTriggers:u,resetTriggers:p,updateUnstableField:c}=e,[d,m]=l,y=()=>{m([])};f.useEffect(()=>{y()},p);const h=(b,g)=>{d[b]=g,m([...d])},T=(b,g,x)=>{const C=r[b];if(!C||!C.utils.getCollateralData)return new Promise(()=>{});const _=ue(Pe(s)),S=Fo(g),D=Ot.from(x??0);return C.utils.getCollateralData(_,{isBaseCollateral:S,setToCollateral:D})};return o?t.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[t.jsx("div",{className:"BuilderForm__field-header",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),t.jsx("div",{className:"BuilderForm__field-body",children:i.map((b,g)=>{const{isLong:x}=et(b);if(x)return t.jsx("div",{className:"BuilderForm__field-empty-row",children:Z()},g);const C=r[g],_=kl(b,a,n),S=g>(i.length-1)/2,D=t.jsx(fu,{isInLastHalf:S,collateralTokens:_,collateralData:d[g],setCollateralData:I=>h(g,I),getCollateralData:(I,A)=>T(g,I,A),chosenStrike:C,updateTriggers:u,resetTriggers:p},g);return c(g,D),D})})]}):null};const hu=e=>{const{strategyStructure:n,unstableFields:s,chosenStrikes:a,strikesDataArr:i,areStrikesLoading:o}=e;return _e()?t.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[t.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),t.jsx("div",{className:"BuilderForm__field-body",children:n.map((l,u)=>{const p=o||!!i[u],c=!!a[u],d=!!s.collateral[u],m=u===n.length-1;return t.jsxs("div",{className:"BuilderMobileContainer__item",children:[t.jsx("div",{className:w("BuilderMobileContainer__item-date",p&&"mb-7"),children:s.date[u]}),t.jsx("div",{className:"BuilderMobileContainer__item-strike",children:s.strike[u]}),d&&c&&t.jsxs("div",{className:w("BuilderMobileContainer__item-collateral"),children:[t.jsx("div",{className:"BuilderMobileContainer__item-title",children:t.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),s.collateral[u]]}),p&&!m&&t.jsx(Te,{})]},u)})})]}):null};const nn=({title:e,className:n,children:s})=>t.jsxs("div",{className:w("OptionController",n),children:[t.jsx("div",{className:"OptionController__title",children:e}),t.jsx("div",{className:"OptionController__content",children:s})]}),Yn=({asset:e,setAsset:n,isDisabled:s})=>{const a=Wt.map(i=>({value:i,label:t.jsx(X,{symbol:i,isHlight:!0,children:i})}));return t.jsx(nn,{className:"AssetController",title:"Asset",children:t.jsx(he,{options:a,defaultValue:e,isDisabled:s,onChange:i=>{n(i.value)}})})},Tu=e=>{const{assetState:n,strategyState:s,amountStrState:a,chosenDateState:i,strikesDataArrState:o,chosenStrikesState:r,collateralDataArrState:l}=e,[u,p]=n,[c]=s,[d]=a,[m]=i,y=oe[c].structure,h=Hn(y),T=f.useState(!1),[b]=T,[g]=r,[x]=o,C={strike:[m],collateral:[d]},_={date:[c],strike:[u,c,m],collateral:[u,c,m],unstableFields:[c]},[S,D]=f.useState({date:[],strike:[],collateral:[]}),I=(A,B,P)=>{S[A][B]=P};return f.useEffect(()=>{D({date:[],strike:[],collateral:[]})},_.unstableFields),t.jsxs("div",{className:"BuilderForm__fields",children:[t.jsx(Yn,{asset:u,setAsset:p,isDisabled:b}),t.jsx(Al,{strategyState:s,isDisabled:b}),t.jsx(Ml,{amountStrState:a,strategy:c}),t.jsx(Rl,{strategyStructure:y,chosenDateState:i,updateTriggers:C.date,resetTriggers:_.date,isDisabled:b,updateUnstableField:(A,B)=>{I("date",A,B)}}),t.jsx(pu,{asset:u,strategy:c,amountStr:d,chosenDate:m,strategyStructure:y,hasSell:h,strikesDataArrState:o,chosenStrikesState:r,areStrikesLoadingState:T,updateTriggers:C.strike,resetTriggers:_.strike,updateUnstableField:(A,B)=>{I("strike",A,B)}}),t.jsx(bu,{asset:u,strategy:c,amountStr:d,strategyStructure:y,hasSell:h,chosenStrikes:g,collateralDataArrState:l,updateTriggers:C.collateral,resetTriggers:_.collateral,updateUnstableField:(A,B)=>{I("collateral",A,B)}}),t.jsx(hu,{strategyStructure:y,unstableFields:S,chosenStrikes:g,strikesDataArr:x,areStrikesLoading:b})]})};const gu=({strategy:e})=>t.jsxs("div",{className:"BuilderTooltips",children:[t.jsx(xu,{}),t.jsx(_u,{strategy:e}),t.jsx(vu,{}),t.jsx(Cu,{}),t.jsx(Mu,{}),t.jsx(Su,{}),t.jsx(Au,{})]}),xu=()=>t.jsxs(ne,{id:"BuilderForm_StrikeTooltip",children:[t.jsx("h6",{children:"Hegic Options (American options)"}),t.jsxs("p",{className:"my-5",children:["They require manual exercise before ",t.jsx("br",{}),"the expiration date. ",t.jsx("br",{}),"There are no secondary markets; out-",t.jsx("br",{}),"of-the-money options can't be sold."]})]}),_u=({strategy:e})=>{const n=oe[e],{outlooks:s,profit:a,loss:i,description:o}=n.stats;return t.jsxs(ne,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[t.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[t.jsx("h2",{className:"WhenPurchaseTooltip__title",children:e}),t.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:s.map(r=>{const l=_l[r];return t.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:l},children:r},r)})})]}),t.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[t.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),t.jsx("p",{className:"WhenPurchaseTooltip__description",children:o}),t.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[a,i].map((r,l)=>{const u=l===0?"Profit":"Loss";return t.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[t.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:u}),t.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:r})]},`${u}_${r}`)})})]})]})},vu=()=>t.jsxs(ne,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",t.jsx("br",{}),"you’re setting aside ",t.jsx("br",{}),"as collateral for selling options"]}),Cu=()=>t.jsxs(ne,{id:"Builder_PremiumTooltip",children:[t.jsx("h6",{children:"Negative Premium"}),t.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",t.jsx("br",{}),"have paid as an option buyer."]}),t.jsx("h6",{children:"Positive Premium"}),t.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",t.jsx("br",{}),"have received as an option seller."]})]}),Mu=()=>t.jsxs(ne,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",t.jsx("br",{}),"you’ll pay for buying options. ",t.jsx("br",{}),"If the option price rises ",t.jsx("br",{}),"beyond this, your transaction ",t.jsx("br",{}),"will be reverted."]}),Su=()=>t.jsxs(ne,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",t.jsx("br",{}),"assured to receive when ",t.jsx("br",{}),"selling options. If the option ",t.jsx("br",{}),"price drops beyond this point, ",t.jsx("br",{}),"your transaction will ",t.jsx("br",{}),"be reverted."]}),Au=()=>t.jsxs(ne,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",t.jsx("br",{}),"is too small. This may result in instant ",t.jsx("br",{}),"liquidation of the position."]});const st=(e,n=2,s,a)=>{const i=q(e,s);return It(i,n,a)},wu=(e,n=2,s)=>st(e,n,s,!0),It=(e,n=2,s)=>{const a=s?"+":"",i=e<0?"–":e>0?a:"";return e=Math.abs(e),e=fe(e,n),e=Os(e,n),`${i}$${Me(e)}`},ju=({strategy:e,amountStr:n,chosenStrikesState:s,collateralDataArrState:a,youPayState:i,swapSlippageState:o,shouldSwapState:r,setIsCostLoading:l})=>{const u=oe[e].structure,p=Hn(u),c=wl(u),[d,m]=i,[y,h]=s,[T,b]=a,[g]=o,[x,C]=r,[_,S]=f.useState(null),[D,I]=f.useState(null),[A,B]=f.useState(null),[P,F]=f.useState(null),E=jl(y),O=!!T.find(R=>R),N=R=>{y[R]=null,T[R]=null,h([...y]),b([...T])};f.useEffect(()=>{!!(d!=null&&d.inPaymentToken)&&C(ya(d)),l(!1)},[d]);const k={sum:R=>R.reduce((V,$,ve)=>{if(ve===0)return{inUSDC:$.inUSDC,decomposition:[$]};const ts=V.decomposition;return ts[ve]={marketToken:$.marketToken,inMarketToken:$.inMarketToken,inUSDC:$.inUSDC},{inUSDC:V.inUSDC+$.inUSDC,decomposition:ts}},R[0]),separateBuyFromSell:R=>{const Y=[],V=[];return R.forEach($=>{$&&($.isLong?Y.push($):V.push($))}),{buyCosts:Y,sellCosts:V}},getArgsForHandler:R=>{const{reset:Y}=v[R],{isAllowed:V,update:$}=M[R];return[Y,V,$]}},v={collateral:{reset:()=>{F({inUSDC:0n})}},trade:{reset:()=>{S(null),I(null),B(null)}},youPay:{reset:()=>{m(null)}}},j={collateral:{calc:()=>{const R=T.filter(V=>V);return k.sum(R)}},trade:{calc:()=>{if(!n)return;const R=[],Y=ue(Pe(n));return y.forEach((V,$)=>{V&&R.push(V.utils.calcPremium(Y).then(ve=>ve?(V.premiumData=ve,V.amount=Y,ve.isLong=V.isLong,ve):(N($),null)))}),Promise.all(R).then(V=>{const{buyCosts:$,sellCosts:ve}=k.separateBuyFromSell(V);return{maxCost:k.sum($),minReceived:k.sum(ve)}})}},youPay:{calc:()=>p?(()=>{if(P!=null&&P.inUSDC)return{inUSDC:P.inUSDC+((_==null?void 0:_.inUSDC)??0n),decomposition:Bl(u,_==null?void 0:_.decomposition,P.decomposition),shouldSwap:x}})():(()=>({inUSDC:_.inUSDC,decomposition:_.decomposition}))()}},M={collateral:{triggers:[T],isAllowed:O&&E,update:()=>{const R=j.collateral.calc();F(R)}},trade:{triggers:[y],debouncedTriggers:[n],isAllowed:E,update:()=>{j.trade.calc().then(R=>{const{maxCost:Y,minReceived:V}=R;S(Y),I(V);const $={inUSDC:((V==null?void 0:V.inUSDC)??0n)-((Y==null?void 0:Y.inUSDC)??0n)};B($)})}},youPay:{triggers:[A,P,g],isAllowed:!!(p?A!=null&&A.inUSDC&&(P!=null&&P.inUSDC):A!=null&&A.inUSDC),update:()=>{const R=j.youPay.calc();m(R)}}},L=(R,Y,V)=>{R(),Y&&(l(!0),V())};Object.keys(M).forEach(R=>{const Y=()=>{L(...k.getArgsForHandler(R))},V=[...M[R].triggers],$=M[R].debouncedTriggers&&[...M[R].debouncedTriggers];$&&Ae(Y,je,$),f.useEffect(Y,V)});const W=()=>{const R=[];return c&&R.push({name:"Max. Cost",value:_==null?void 0:_.inUSDC}),p&&R.push({name:"Min. Received",value:D==null?void 0:D.inUSDC},{name:"Collateral",value:P==null?void 0:P.inUSDC}),R};return t.jsx("div",{className:w("BuilderCost",p&&"has-sell"),children:t.jsx(ne,{id:"BuilderForm_YouPayTooltip",className:"YouPayTooltip",place:"bottom-end",children:W().map(R=>t.jsxs("div",{className:"YouPayTooltip__item",children:[t.jsx("div",{className:"YouPayTooltip__item-name",children:R.name}),t.jsx("div",{className:"YouPayTooltip__item-value",children:R.value?st(R.value):Z()})]},R.name))})})};const ku=({id:e,decompositionArr:n,...s})=>t.jsx(ne,{className:"TooltipDecomposition",id:e,place:"bottom-end",...s,children:n.map((a,i)=>{const o=i===n.length-1;return t.jsxs(qe.Fragment,{children:[t.jsxs("div",{className:"TooltipDecomposition__item",children:[t.jsx("div",{className:"TooltipDecomposition__item-name",children:a.nameNode}),t.jsx("div",{className:"TooltipDecomposition__item-value",children:a.valueNode})]}),!o&&t.jsx(Te,{})]},i)})}),sn=e=>e.charAt(0).toUpperCase()+e.slice(1),Du=e=>e[e.length-1],Eu=({decompositionData:e})=>t.jsx("div",{className:"GreeksDecompositionTooltips",children:hn.map(n=>{const s=e[n];if(!s||!s.length)return null;const i=`BuilderForm_${sn(n)}DecompositionTooltip`;return t.jsx(ku,{id:i,decompositionArr:s},i)})});const Ma="/sf_draft/assets/pen-7561a00e.svg",Iu="/sf_draft/assets/confirm-d9cebec0.svg",Kn=({title:e="Slippage",slippage:n,setSlippage:s})=>{var T;const a=b=>`${fe(b*100,6)}`,[i,o]=f.useState(a(n)),[r,l]=f.useState(!1),{node:u,ref:p,hasFocus:c}=Jt([i,o],{maxValue:100}),d=()=>{const b=a(dt);o(b)},m=()=>{const b=Number(i)/100;s(b)},y=()=>{const b=p.current,g=b.value.includes(".");let x=(b.value.length+1)*8.5;g&&(x-=4),b.style.width=x+"px"},h=()=>{(!i||Number(i)===0)&&d(),m(),r||(l(!0),setTimeout(()=>{l(!1)},200))};return f.useEffect(()=>{y()},[i]),f.useEffect(()=>{c||h()},[c]),(T=p.current)==null||T.addEventListener("keyup",b=>{b.keyCode===13&&c&&p.current.blur()}),t.jsxs("div",{className:"SlippageInput",onClick:()=>{var b;r||(b=p.current)==null||b.focus()},children:[t.jsx("div",{className:"SlippageInput__title",children:e}),t.jsxs("div",{className:"SlippageInput__content",children:[t.jsxs("div",{className:w("SlippageInput__input-container",c&&"focused"),children:[u,t.jsx("span",{className:"SlippageInput__unit",children:"%"})]}),t.jsx("button",{className:"SlippageInput__btn",children:t.jsx("img",{src:c?Iu:Ma,alt:"Edit slippage"})})]})]})},Pu=({swapSlippageState:e})=>{const[n,s]=e,a=_e();return t.jsx("div",{className:"SwapSlippageField",children:t.jsx(Kn,{title:a?"Uniswap Slippage":"Slippage",slippage:n,setSlippage:s})})},Bu=({chosenStrikes:e,swapSlippageState:n,shouldSwapState:s})=>{const[a]=s,i={};hn.forEach(c=>{i[c]=[]});const o=(c,d)=>{const m=c.greeks[d],y=ta(c.strike),h={nameNode:t.jsx(ga,{strikeData:c,priceNode:`$${Me(y)}`}),valueNode:m??Z()};i[d].push(h)},r=()=>t.jsx("div",{className:"BuilderCalculations__items",children:hn.map(c=>{const d=sn(c),m=e.reduce((h,T)=>{if(!T)return h;o(T,c);const b=T.greeks[c];return(h??0)+b},void 0),y=m||m===0;return y||(i[c]=null),t.jsxs("div",{className:"BuilderCalculations__item",children:[t.jsx("div",{className:"BuilderCalculations__item-name",children:d}),t.jsx("div",{className:w("BuilderCalculations__item-value",y&&"tip"),"data-tooltip-id":`BuilderForm_${d}DecompositionTooltip`,children:y?At(m,3):Z()})]},c)})}),l=()=>t.jsx(ma,{renderHeader:({state:c})=>`${c.isEnter?"Hide":"Show"} greeks`,children:r()}),p=_e(576);return t.jsxs("div",{className:"BuilderGreeks",children:[t.jsxs("div",{className:"BuilderGreeks__content",children:[p?l():r(),a&&t.jsx(Pu,{swapSlippageState:n})]}),t.jsx(Eu,{decompositionData:i})]})};const Sa=e=>{const{userAddress:n}=te();return e.map(a=>{let{data:i}=yi({address:n,token:a.isETH?null:a.address,watch:!0});return i||(i={value:0n,decimals:0}),{...i,address:a.address,symbol:a.symbol,icon:a.icon,isETH:a.isETH,isStable:a.isStable,value1eToken:i.value,value:se(i.value,i.decimals)}})},Nu=e=>{const{isConnected:n,userAddress:s}=te(),a=G(),i=Sa(e),{data:o}=Ie(n&&[s,"useTokenBalancesUSDC",i],async()=>{const r=[];return i.forEach(u=>{if(!u)return;u.inTokenDecimals=u.value1eToken,u.inDefaultDecimals=u.value;const p=Vn(a,u.address,u.inDefaultDecimals).then(c=>({...u,inUSDC:c})).catch(c=>(console.log(`Swapping ${u.symbol} to USDC error.

`+c),null));r.push(p)}),await Promise.allSettled(r).then(zs)});return o??[]};const Ru=({className:e,options:n,defaultOption:s,defaultValue:a,onChange:i,...o})=>t.jsx(he,{className:w("SelectorInline",e),options:n,defaultOption:s,defaultValue:a,onChange:i,...o});const Lu=({paymentTokenState:e,isDisabled:n=!1})=>{const s=G(),{isConnected:a,userAddress:i}=te(),o=Tr(s),r=Nu(o),[l,u]=e,p=()=>{const y=r.find(h=>h.symbol===l.symbol);y!==l.balance&&u({...l,balance:y})};f.useEffect(()=>{p()},[l,r,i]);const c=y=>a?y===null?Z("Error"):U(y)||U(y.inUSDC)?t.jsx(ye,{}):`$${me(y.inUSDC,0)}`:Z(),d=o.map((y,h)=>{const T=r[h],b=c(T);return{label:t.jsxs("div",{className:"PaymentTokenSelector__item",children:[t.jsx("div",{className:"PaymentTokenSelector__item-name",children:t.jsx(X,{symbol:y.symbol,isHlight:!0,children:y.symbol})}),t.jsx("div",{className:"PaymentTokenSelector__item-value",children:b})]}),value:y.symbol,balance:T}}),m=[{label:t.jsxs("div",{className:"PaymentTokenSelector__item",children:[t.jsx("div",{children:"Asset"}),t.jsx("div",{children:"Balance, $"})]}),options:d}];return t.jsx(Ru,{className:"PaymentTokenSelector",options:m,defaultValue:l.symbol,isDisabled:n,onChange:y=>{const h=J(s,y.value);u({...h,balance:y.balance})}},[i,l.symbol])},Ou=({youPayState:e,paymentToken:n,isCostLoading:s,tooltipId:a,swapSlippage:i})=>{const o=G(),[r,l]=e,u=()=>r.inUSDC<0?new Promise(y=>{y(null)}):Jl(o,n.address,r.inUSDC),p={triggers:[r],isAllowed:!!(r&&n&&U(r.inPaymentToken)),update:()=>{(T=>{const b=S=>Ct(S,i??dt),g=S=>Ct(S,or),{inUSDC:x}=T,C=b(x),_=g(C);return T.inUSDC=_,T})(r);const h=()=>{setTimeout(()=>{l({...r})},1e3)};u().then(T=>{r.paymentToken=n,r.inPaymentToken=T,h()})}},c={triggers:[n.symbol],isAllowed:!!r,reset:()=>{r.inPaymentToken=void 0,l({...r})}};f.useEffect(()=>{p.isAllowed&&p.update()},[...p.triggers]),f.useEffect(()=>{c.isAllowed&&c.reset()},[...c.triggers]);const d={getNegativeValueNode:()=>t.jsx(X,{children:t.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:me(r.inUSDC,0)})}),getPaymentTokenNode:()=>le(r.inPaymentToken,r.paymentToken.isStable),getUsdcNode:()=>r.inUSDC===0n?"$0":st(r.inUSDC),getApproximatelySymbolNode:()=>t.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:Ar})};return(()=>s?t.jsx(ye,{}):!r||!n?Z():U(r.inPaymentToken)?t.jsx(ye,{}):r.inPaymentToken===null?d.getNegativeValueNode():t.jsxs(X,{isHlight:!0,symbol:n.symbol,"data-tooltip-id":a,className:w(a&&"tip"),children:[d.getPaymentTokenNode(),!a&&t.jsxs(t.Fragment,{children:[d.getApproximatelySymbolNode(),d.getUsdcNode()]})]}))()},Fu=({paymentToken:e})=>{const{isConnected:n}=te();if(!n)return Z();if(e.balance===null)return Z("Error");if(U(e.balance))return t.jsx(ye,{});const s=e.balance.value===0n?0:void 0;return t.jsx(X,{symbol:e.symbol,isHlight:!0,children:le(e.balance.inDefaultDecimals,e.isStable,s)})},Aa=f.createContext(null),Uu=({children:e})=>{const n=Oe("swap-slippage",dt);return t.jsx(Aa.Provider,{value:n,children:e})},Dt=()=>f.useContext(Aa),wa=({paymentTokenState:e,youPayState:n,youPayTooltipId:s,isCostLoading:a,isSelectorDisabled:i=!1})=>{const[o]=Dt(),[r]=e;return t.jsxs("div",{className:"PaymentMethodPanel",children:[t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Select Payment method"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(Lu,{paymentTokenState:e,isDisabled:i})})]}),t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"You pay"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(Ou,{youPayState:n,paymentToken:r,isCostLoading:a,tooltipId:s,swapSlippage:o})})]}),t.jsxs("div",{className:"PaymentMethodPanel__section",children:[t.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Balance"}),t.jsx("div",{className:"PaymentMethodPanel__section-content",children:t.jsx(Fu,{paymentToken:r})})]})]})},$u=({paymentToken:e,setPaymentToken:n,youPayState:s,confirmButtonNode:a,isCostLoading:i})=>t.jsxs("div",{className:"BuilderSwap",children:[t.jsx(wa,{paymentTokenState:[e,n],youPayState:s,youPayTooltipId:"BuilderForm_YouPayTooltip",isCostLoading:i}),a]}),Hu=(e,n,s,a,i,o,r)=>{const{isConnected:l}=te(),{connectWallet:u}=qt(),p=Hn(n),c=s.length!==n.length||!s.every(x=>x),d=!!a.find(x=>x&&x.inMarketToken===0n),m=s.find(x=>x==null?void 0:x.isComingSoon),y=()=>{if(!e)return"Enter Amount";if(c)return"Fill out the Strike fields";if(p&&d)return"Fill out the Collateral fields";if(!i)return ke;if(i>o)return"Insufficient balance"},h=()=>!l||m?!0:!y(),T=()=>{const x="Buy Strategy";return l?m?`Visit ${m.market} app`:y()??x:"Connect wallet"},b=()=>{if(!l){u();return}if(m){window.open(m.marketLink);return}r()};return t.jsx(z,{className:"BuilderForm__button",onClick:b,isDisabled:!h(),children:T()})},Wu=({strategy:e,amountStr:n,youPayState:s,chosenStrikesState:a,collateralDataArrState:i,openBuyModal:o,swapSlippageState:r})=>{var _;const l=G(),[u,p]=Oe("payment-token","ETH"),[c,d]=f.useState(J(l,u)),m=f.useState(!1),[y,h]=f.useState(!1);f.useEffect(()=>{if(p(c.symbol),!c.address){const S=J(l,c.symbol);d({...c,...S})}},[c]);const[T]=a,[b]=i,[g]=s,x=oe[e].structure,C=Hu(n,x,T,b,g==null?void 0:g.inPaymentToken,(_=c.balance)==null?void 0:_.inDefaultDecimals,o);return t.jsxs("div",{className:"BuilderCalculations",children:[t.jsx(Bu,{chosenStrikes:T,swapSlippageState:r,shouldSwapState:m}),t.jsx(ju,{strategy:e,amountStr:n,chosenStrikesState:a,collateralDataArrState:i,youPayState:s,swapSlippageState:r,shouldSwapState:m,setIsCostLoading:h}),t.jsx($u,{youPayState:s,paymentToken:c,setPaymentToken:d,confirmButtonNode:C,isCostLoading:y})]})};const ja=({stagesArr:e})=>t.jsx("div",{className:"Stages",children:e.map(n=>t.jsx("div",{className:w("Stages__item",n.isActive&&"active"),children:n.name},n.name))}),ka=(e,n,s,a,i=dt,o={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}},r=null)=>{const l=G(),u=oe[e],[p,c]=f.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:BigInt(u.key)}),[d,m]=f.useState([]);if(!(a!=null&&a.inPaymentToken))return null;const{setIsLoading:y,closeModal:h,addPendingPosition:T}=o,{paymentToken:b,decomposition:g}=a,x=b.isETH;if(r!==null)return()=>qu(l,n[0],r,u,y,h);const C=()=>d.reduce((F,E)=>F+E,0n),_=be(l,"TxBuilder"),S=(P,F)=>{const E=Cl[P.protocolName];return _.module(E).then(O=>{p.moduleArr[F]=O})},D=async(P,F)=>{const{isLong:E}=P;let O;E&&(O=g[F]);const N=s[F],k={setToCollateral:N&&Ot.from(N.inMarketToken),isBaseCollateral:N==null?void 0:N.isBase,premiumData:O};return P.utils.getBuilderParams(P.amount,k,b.decimals).then(M=>{p.parametersArr[F]=M})},I=(P,F)=>{const E=ee(l,"Exchanger"),O=g[F],N=O.marketToken,k=va(b.address,N.address),v=O.inMarketToken,j=Xs(b,N);return qn(l,N.address,b.address,v).then(M=>Ct(M,i)).then(M=>{const L=Ue(M,b.decimals),H=Ue(v,N.decimals);return x&&(d.push(L),m([...d])),E.encodeFromExchange({path:k,tokenIn:b.address,tokenOut:N.address,amountIn:L,amountOutMinimum:H,isETH:x,swap:j}).then(W=>{p.swapDataArr[F]=W})})},A=()=>{const P=[];return n.forEach((F,E)=>{P.push(S(F,E),D(F,E),I(F,E))}),Promise.all(P).then(()=>{c({...p})}).catch(F=>{throw console.log(F),y(!1),new Error("Something went wrong")})};return()=>{y(!0);const{amount:P,asset:F}=n[0];return A().then(()=>{const E=Da(u,P,F);return ge(l,_.consolidationOfTransactions,[p.moduleArr,p.parametersArr,p.swapDataArr,p.productType,d.length?{value:C()}:{}],E,y,h)}).then(()=>{m([])}).catch(lt)}},qu=async(e,n,s,a,i,o)=>{if(U(s)){lt(`MarginId is undefined.
This is likely a bug, please report about it.`,i);return}const r=be(e,"MarginOneClick"),l=n.premiumData.marketToken.address,u=n.utils.getStrategyAddress(),p=Ne(n.amount,n.asset),c=n.premiumData.inMarketToken,d=Math.floor((n.expiry-Date.now())/ae),m=[],y=Da(a,n.amount,n.asset);return ge(e,r.transferBuyProvideERC721,[s,l,u,p,c,d,m],y,i,o)},Da=(e,n,s,a=void 0)=>{const{name:i,isHidden:o}=e,r=q(n),l=r!==1,u=e.plural??`${i}s`,p=l?u:i,c=!U(a),d=` and deposited into Margin Account #${Number(a)}.`,m=o?`${s} ${p} opened${c?d:"."}`:`${r} ${s} ${p} opened${c?d:"."}`,y=t.jsxs(X,{symbol:s,children:[o?"":`${r} `,p," opened",c?d:"."]});return{text:m,node:y}},at=(e,n,s,a=i=>{})=>{const{userAddress:i}=te(),o=G(),r=J(o,e);return{check:async()=>r.isETH?new Promise(u=>u(!0)).then(a):Oo(o,r,i,n,s).then(a),approve:async(u,p)=>{if(r.isETH)throw new Error("Trying to approve ETH");return Lo(o,r,n,s,u,p)}}},Vu=({isOpen:e,setIsOpen:n,asset:s,strategy:a,amountStr:i,chosenStrikes:o,collateralDataArr:r,youPay:l,swapSlippage:u})=>{const p=G(),c=oe[a],[d,m]=f.useState(!1),[y,h]=f.useState(null),T=kt(),[b,g]=T.pendingPositionsState,x=ka(a,o,r,l,u,{setIsLoading:m,closeModal:()=>n(!1),addPendingPosition:M=>{M.isOpening=!0,b.opening.push(M),g({...b})}}),C=ya(l),S=["Approve","Buy"].map(M=>({name:M,isActive:y===M})),{paymentToken:D,inPaymentToken:I}=l,A=le(I,D.isStable),B=D.symbol,P=`${A} ${B}`,F={Approve:`Approve ${P}`,Buy:`Pay ${P}`},E=be(p,"Exchanger"),O=at(B,E.address,I,M=>{h(M?"Buy":"Approve")}),N=()=>{h(null),O.check()};f.useEffect(()=>{e&&N()},[e,l]);const k=()=>{if(!y)return ke;if(d){if(y==="Approve")return`Approving ${B}...`;if(y==="Buy")return`Buying ${a}...`}},v={approve:()=>{O.approve(m,N)},buy:x},j={getBtnText:()=>k()??F[y],getIsBtnEnabled:()=>!k(),getBtnOnClick:()=>{switch(y){case"Approve":return v.approve;case"Buy":return v.buy}}};return t.jsxs(xe,{className:"BuyBuildModal",isOpen:e,setIsOpen:n,children:[t.jsx(ja,{stagesArr:S}),t.jsx("h1",{className:"BuyBuildModal__title",children:y??t.jsx(ye,{})}),t.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",t.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[t.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:c.color},children:a}),t.jsx(Te,{isVertical:!0}),t.jsx(X,{className:"BuyBuildModal__strategy-amount",symbol:s,isHlight:!0,children:i})]})]}),C&&t.jsx("div",{className:"BuyBuildModal__footer",children:t.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",P," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),t.jsx(z,{className:"BuyBuildModal__button",isDisabled:!j.getIsBtnEnabled(),onClick:j.getBtnOnClick(),children:j.getBtnText()})]})},Gu=({assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r})=>{const l=f.useState(null),[u]=l,[p,c]=f.useState(!1),d=Dt(),[m,y]=d;Yu(m)||y(dt);const[h]=e,[T]=n,[b]=s,[g]=o,[x]=r,C=()=>{c(!0)};return t.jsxs("div",{className:"BuilderForm App-box",children:[t.jsx(Tu,{assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),t.jsx(Wu,{strategy:T,amountStr:b,youPayState:l,chosenStrikesState:o,collateralDataArrState:r,openBuyModal:C,swapSlippageState:d}),(u==null?void 0:u.inPaymentToken)&&t.jsx(Vu,{isOpen:p,setIsOpen:c,asset:h,strategy:T,amountStr:b,chosenStrikes:g,collateralDataArr:x,youPay:u,swapSlippage:m}),t.jsx(gu,{strategy:T})]})},Yu=e=>!(typeof e!="number"||e>1||e<0);const Ku=({asset:e,strategy:n,amountStr:s,chosenStrikes:a,collateralDataArr:i})=>{var N;const o=oe[n].structure,r=f.useRef(null),l=Pe(s),u={amount:l,strikes:a.map(k=>q((k==null?void 0:k.strike)??0n)),premiums:a.map(k=>{var j;const v=(j=k==null?void 0:k.premiumData)==null?void 0:j.inUSDC;return v&&q(v)}),strategies:o,collaterals:i,isReady:l&&a.length===o.length&&a.every(k=>k)},p=e==="ETH",c=p?.3:.2,d=p?5:10,m=100,y=Ze(e),h=q(y),T=h&&Math.round(h/d)*d,b=(k,v)=>{const j=u.strategies[k],M=u.premiums[k],L=u.strikes[k],H=u.amount,W=u.collaterals[k],R=(W==null?void 0:W.liquidationPrice)&&q(W.liquidationPrice),Y=W&&q(W.inMarketToken),V=W==null?void 0:W.isBase;let $;if(M){switch(j){case 1:v<L?$=-M:$=(v-L)*H-M;break;case 2:v>L?$=-M:$=(L-v)*H-M;break;case-1:if(R&&v>R)V?$=-(Y*R)+M:$=-Y+M;else if(V){const ve=(L-h)*H+M;v>L?$=ve:$=(v-h)*H+M}else v<L?$=M:$=(L-v)*H+M;break;case-2:R&&v<R?V?$=-(Y*R)+M:$=-Y+M:v>L?$=M:$=(v-L)*H+M;break}if($)return Number($)}},x=(()=>{if(!u)return;const k=u.strikes.reduce((W,R)=>(W+R)/2,u.strikes[0]),v=window.innerWidth>480?c:c-.05,j=Math.round(k*(1-v)/100)*100,M=Math.round(k*(1+v)/100)*100,L=[];for(let W=0;W<(M-j)/d;W++){const R=j+W*d;L.push(R)}const H=[];return u.strategies.forEach((W,R)=>{L.forEach((Y,V)=>{const $=b(R,Y);R===0?H.push({closePrice:Y,pnl:$}):H[V].pnl=H[V].pnl+$})}),H})(),C=(N=x.reduce((k,v)=>v.pnl>k.pnl?v:k,x[0]))==null?void 0:N.pnl,_=C&&Me(C.toFixed(0)),D=(()=>{if(!x)return;const k=Math.max(...x.map(M=>M.pnl)),v=Math.min(...x.map(M=>M.pnl));if(k<=0)return 0;if(v>=0)return 1;const j=k/(k-v);return isNaN(j)?0:j})(),I=({value:k,cx:v,cy:j})=>{const M=k[1];let L;return M<0?L=ce:M>0?L=Re:L=gt,t.jsx("circle",{cx:v,cy:j,r:5,style:{opacity:"0.9"},fill:L})},A=k=>{const{active:v,payload:j,label:M}=k,L=v&&j&&j.length&&Number(j[0].value.toFixed(2));return v&&j&&j.length?t.jsxs("div",{className:"react-tooltip",children:[t.jsxs(X,{symbol:e,isHlight:!0,children:["$",Me(M)]}),t.jsxs("p",{children:["PnL ",t.jsx("span",{className:w({positive:L>0,negative:L<0}),children:`${L!==0?L>0?"+":"-":""}$${Me(Math.abs(L))}`})]})]}):null},B=k=>Me(k),P={fill:gt,fontSize:13},F=xt,[E,O]=f.useState(null);return f.useEffect(()=>{if(r.current&&x){let k;const v=Math.round(m/(r.current.clientWidth/x.length));v<20?k=19:k=Math.floor(v/20)*20-1,O(k)}},[r.current,x,window.innerWidth]),t.jsx("div",{className:"BuilderPositionChart App-box",ref:r,children:u.isReady?t.jsx(Wi,{children:t.jsxs(qi,{data:x,margin:{left:(_==null?void 0:_.length)*7.5-40,right:15,top:15},children:[t.jsx(Vi,{dataKey:"closePrice",interval:E,tickFormatter:B,tick:P,stroke:F}),t.jsx(Gi,{dataKey:"pnl",tickFormatter:B,tick:P,stroke:F,padding:{bottom:15}}),t.jsx(Yi,{cursor:{stroke:gt},content:t.jsx(A,{})}),t.jsx(Ki,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:t.jsx(I,{}),fill:"url(#splitColorTransparent)"}),t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:D,stopColor:Re,stopOpacity:1}),t.jsx("stop",{offset:D,stopColor:ce,stopOpacity:1})]}),t.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:D,stopColor:Re,stopOpacity:.3}),t.jsx("stop",{offset:D,stopColor:ce,stopOpacity:.3})]})]}),t.jsx(ns,{x:T,stroke:xt,strokeDasharray:"3 3",label:{value:"Current Price",fill:xt,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),u.collaterals.length&&u.collaterals.map(k=>{if(!k||!k.liquidationPrice)return;const v=q(k.liquidationPrice),j=Math.round(v/d)*d;return t.jsx(ns,{x:j,stroke:ce,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:ce,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},v)}),t.jsx(Qi,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):t.jsx(Qe,{children:"Fill out the Strike fields to view position chart"})})},Qu=({assetState:e})=>{const n=f.useState("Long Call"),s=f.useState("1"),a=f.useState(null),i=f.useState([]),o=f.useState([]),r=f.useState([]),[l]=e,[u]=n,[p]=s,[c]=o,[d]=r;return t.jsxs("div",{className:"BuilderDashboard",children:[t.jsx(Gu,{assetState:e,strategyState:n,amountStrState:s,chosenDateState:a,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),t.jsx(Ku,{asset:l,strategy:u,amountStr:p,chosenStrikes:c,collateralDataArr:d})]})},zu=6,Xu=()=>{const{isConnected:e,userAddress:n}=te(),s=G(),a=ee(s,"TxBuilder"),{data:i,error:o}=Ie(e&&[n,"useBuilderPositionsStructure"],async()=>{var d;const r=[],l={},u={},p=await Ju(a,n),c=[];for(let m=0;m<p.length;m++){const y=p[m],{buildID:h,productType:T}=bn(y.args),b=pa.find(D=>oe[D].key===Number(T)),g={strategy:b,buildId:h,legsStructure:[]},x=(d=oe[b])==null?void 0:d.isCollection,C=Zu(s,h),_=[];for(const D in C)C[D].forEach(A=>{A.then(B=>{const P=ec(B,D);g.legsStructure.push(...P),nc(P,h,l)}),_.push(A)});const S=Promise.all(_).then(()=>{r.push(g),x&&ac(g,u)}).catch(console.log);c.push(S),await Ks(c,zu,p.length,m)}return sc(r,l),ic(r,u),r},{refreshInterval:2e4});return o?(console.log(`Builder Positions error:
`,o),null):i},Zu=(e,n)=>{const{Hegic:s}=Pl(e),{OpenPositionByHegic:a}=s.filters;return{Hegic:[s.queryFilter(a(n))]}},Ju=async(e,n)=>{const{CreateBuild:s}=e.filters,a=await e.queryFilter(s(null,n)),i=pt[pt.length-1];return(await Qs(a,i,e.provider)).reverse()},ec=(e,n)=>e.map(a=>{const i=tc(n,a);return{market:n,id:i}}),tc=(e,n)=>{switch(e){case"Hegic":return Number(n.args.tokenID);default:throw new Error`Invalid market: ${e}`}},nc=(e,n,s)=>{e.forEach(a=>{const{id:i}=a;s[i]=s[i]??[],s[i].push(n)})},sc=(e,n)=>{const s=[];for(const a in n)n[a].length>1&&s.push(a);s.forEach(a=>{const i=e.filter(r=>{if(r.legsStructure.find(u=>u.id===a))return!0}),o=i.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,i[0]);i.forEach(r=>{if(r.buildId===o.buildId)return;const l=r.legsStructure.findIndex(p=>p.id===a);r.legsStructure.splice(l,1);const u=n[a].findIndex(p=>p===r.buildId);n[a].splice(u,1)})})},ac=(e,n)=>{const s=rc(e.legsStructure[0].id);n[s]=n[s]??[],n[s].push(e)},ic=(e,n)=>{for(const s in n){const a=n[s].filter(r=>r.legsStructure.length);if(a.length<=1)continue;const i=a.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,a[0]),o=e.find(r=>r.buildId===i.buildId);a.forEach(r=>{if(r.buildId===o.buildId)return;o.legsStructure.push(...r.legsStructure);const l=e.findIndex(u=>u.buildId===r.buildId);e.splice(l,1)})}},rc=e=>{let n;try{n=e.split("_").slice(1).join("_")}catch{n=e}return n},{HEAD:oc,COMMON:lc,LEG:Ea}=da,Ia=()=>{const e=kt(),{positionsByMarket:n}=e,s=Xu();if(!s||!n)return;const i=s.map(r=>{var m;const{legsStructure:l,strategy:u}=r,p=[],c=(m=oe[u])==null?void 0:m.isCollection;for(let y=0;y<l.length;y++){const{id:h,market:T}=l[y],b=n[T];if(!b)return;const g=b.findIndex(C=>C.id===h),x=b[g];x&&(p.push(x),b[g].role=Ea)}const d=l.length===1||c&&p.length===1;if(p.length)if(d){const y={...p[0]};return{...r,...y,role:lc}}else{const y=cc(p),h=p[0].asset;return{...r,legs:p,asset:h,...y,role:oc}}}).filter(r=>!U(r));return uc(i,n)},uc=(e,n)=>{const s=[],a=[];Object.values(n).forEach(r=>{r&&a.push(...r)});const o=a.filter(r=>r.role!==Ea).map(r=>{const{isCall:l,isSpread:u,isLong:p}=r;return{strategy:`${u?l?"Bull":"Bear":p?"Long":"Short"} ${l?"Call":"Put"} ${u?"Spread":""}`.trim(),...r}});return s.push(...e,...o),s},cc=e=>{const n=e.reduce((s,a)=>{const i=zt(s,a,["amount","premium","pnl.inUSDC"]);return i.greeks=ea(s.greeks,a.greeks),i.collaterals=a.collateral?[...s.collaterals,a.collateral]:s.collaterals,i},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return n.pnl.inPercentage=$n(null,n.pnl.inUSDC,n.premium),n.expiry=e[0].expiry,n};const pc=({position:e,openCloseModal:n})=>{var l;const[s]=((l=kt())==null?void 0:l.pendingPositionsState)??[{closing:[]}];if(!e.actions)return null;const{isClosingDisabled:a}=e.actions,i=s.closing.find(u=>u.id===e.id),o=()=>{n(e)},r=_e(576);return t.jsx("div",{className:"PositionCloseBtn",children:mt(r?t.jsx(yc,{isDisabled:a,handleClick:o}):t.jsx(dc,{isDisabled:a,handleClick:o}),i)})},dc=({isDisabled:e,handleClick:n})=>t.jsx("button",{className:"close-btn _cross",disabled:e,onClick:n,children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[t.jsx("g",{id:"icon-close",clipPath:"url(#clip0_294_4433)",children:t.jsx("path",{id:"Vector",d:"M13.6899 0.320713C13.5917 0.222272 13.475 0.144172 13.3465 0.090885C13.2181 0.0375978 13.0803 0.010169 12.9413 0.010169C12.8022 0.010169 12.6645 0.0375978 12.536 0.090885C12.4076 0.144172 12.2909 0.222272 12.1926 0.320713L7 5.50274L1.80736 0.310093C1.70905 0.211782 1.59233 0.133796 1.46388 0.0805904C1.33543 0.0273845 1.19776 1.03588e-09 1.05873 0C0.919692 -1.03588e-09 0.78202 0.0273845 0.653569 0.0805904C0.525118 0.133796 0.408405 0.211782 0.310093 0.310093C0.211782 0.408405 0.133796 0.525118 0.0805904 0.653569C0.0273845 0.78202 -1.03588e-09 0.919692 0 1.05873C1.03588e-09 1.19776 0.0273845 1.33543 0.0805904 1.46388C0.133796 1.59233 0.211782 1.70905 0.310093 1.80736L5.50274 7L0.310093 12.1926C0.211782 12.291 0.133796 12.4077 0.0805904 12.5361C0.0273845 12.6646 0 12.8022 0 12.9413C0 13.0803 0.0273845 13.218 0.0805904 13.3464C0.133796 13.4749 0.211782 13.5916 0.310093 13.6899C0.408405 13.7882 0.525118 13.8662 0.653569 13.9194C0.78202 13.9726 0.919692 14 1.05873 14C1.19776 14 1.33543 13.9726 1.46388 13.9194C1.59233 13.8662 1.70905 13.7882 1.80736 13.6899L7 8.49726L12.1926 13.6899C12.291 13.7882 12.4077 13.8662 12.5361 13.9194C12.6646 13.9726 12.8022 14 12.9413 14C13.0803 14 13.218 13.9726 13.3464 13.9194C13.4749 13.8662 13.5916 13.7882 13.6899 13.6899C13.7882 13.5916 13.8662 13.4749 13.9194 13.3464C13.9726 13.218 14 13.0803 14 12.9413C14 12.8022 13.9726 12.6646 13.9194 12.5361C13.8662 12.4077 13.7882 12.291 13.6899 12.1926L8.49726 7L13.6899 1.80736C14.0934 1.40384 14.0934 0.724231 13.6899 0.320713Z",fill:"#6988FF"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_294_4433",children:t.jsx("rect",{width:"14",height:"14",fill:"white"})})})]})}),yc=({isDisabled:e,handleClick:n})=>t.jsx(z,{className:"close-btn",type:"micro",isDisabled:e,onClick:n,children:"Close"}),mc=({handleClick:e})=>t.jsx("button",{onClick:e,className:"shrink-0",children:t.jsx("img",{src:Ma,alt:"Update Collateral"})}),fc="/sf_draft/assets/multi-626e9c45.svg";const bc=({expiry:e})=>{const n=e-Date.now(),s=n<=0,i=Ln(n,!0).split(":");return t.jsxs("div",{className:w("ExpirationTimer",s&&"expired"),children:[t.jsx("div",{className:"ExpirationTimer__text",children:"Left until expiration"}),t.jsx("div",{className:"ExpirationTimer__timer",children:i.map((o,r)=>{const l=r===i.length-1,u=Du(o);return t.jsxs(qe.Fragment,{children:[t.jsx("div",{className:"ExpirationTimer__timer-value",children:o}),!l&&t.jsx("span",{className:"ExpirationTimer__timer-separator",children:":"})]},u)})})]})};const gn=({market:e,strikeParams:n,isSmall:s})=>{const{strike:a,isCall:i,isLong:o,expiry:r}=n,l=Date.now()>r,u=e?tn[e].circled:fc,p=o?ha:Ta,c=Ee(r,"dMMMyy").toUpperCase(),d=ta(a),y=`${c}-${d}-${i?"C":"P"}`,h=gs(t.jsx(bc,{expiry:r}));return t.jsxs("div",{className:w("Brief","InstrumentBrief",s&&"small",l&&"expired"),children:[t.jsxs("div",{className:"Brief__icons",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:u,alt:`${e}`})}),t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:p,alt:`${o?"Long":"Short"}`})})]}),t.jsx("div",{className:"InstrumentBrief__string tip","data-tooltip-id":"Tooltip_Expiration","data-tooltip-html":h,children:y})]})},{HEAD:hc,LEG:Tc}=da,gc={strategy:"Strategy",amount:"Amount",instrument:"Instrument",collateral:t.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",entryPrice:"Entry Price",closePrice:"Close Price",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",closeBtn:""},Pa=({positions:e,openCollateralModal:n,openCloseModal:s,isLoadingComplete:a})=>{const{isConnected:i}=te(),o=d=>{const{role:m,isOpening:y,isTotal:h,expiry:T}=d,b=m===hc,g=m===Tc,x=Date.now()>T,C=()=>{if(g)return"";if(h)return Z("Total",!1,!0);let{strategy:v}=d;if(!v){const{isCall:H,isLong:W}=d;v=Xt(W,H)}const j=oe[v],M=j==null?void 0:j.color,L=t.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:t.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:M,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return t.jsxs("span",{className:"flex items-center gap-x-4",style:{color:M},children:[y&&t.jsx(ye,{}),v,b&&L]})},_=()=>{const{asset:v,amount:j}=d;if(j)return t.jsx(X,{symbol:v,children:q(j)})},S=()=>{const{market:v,strike:j,strategy:M,legs:L}=d;if(b){const H=oe[M],{isCollection:W}=H;return W?t.jsx(gn,{strikeParams:L[0]}):t.jsx("div",{className:"PositionsTable__strike-msg",children:Z("Click to see strikes")})}if(j)return t.jsx(gn,{market:v,strikeParams:d})},D=()=>{const{premium:v}=d,j=v<0n,M=me(Ve(v)),L=`${j?"–":"+"}$${M}`;return t.jsx("span",{className:w({positive:!j,negative:j}),children:L})},I=()=>{const{collateral:v,collaterals:j,actions:M}=d;if(!v&&(!j||!j.length))return;const L=H=>h?H.inUSDC?t.jsxs("span",{children:["$",me(H.inUSDC)]}):void 0:t.jsx(X,{symbol:H.marketToken.symbol,children:le(H.inMarketToken,H.marketToken.isStable)},H.isBase);return b?A(j,L):M&&!M.isAddingToCollateralDisabled?t.jsxs("div",{className:"flex items-center gap-x-3",children:[L(v),t.jsx(mc,{handleClick:()=>n(d)})]}):L(v)},A=(v,j)=>{const M={base:{},stable:{}},L=W=>{const{isBase:R}=W,Y=R?"base":"stable";M[Y]={...zt(M[Y],W,["inMarketToken","inUSDC"]),isBase:R}};v.forEach(L);const H=Object.values(M).map(j);return t.jsx("div",{className:"flex flex-col gap-y-5",children:H})},B=()=>{if(!d.pnl)return;const{inUSDC:v,inPercentage:j}=d.pnl,M=v<0?fn.negative:"",L=Ve(j),H=q(L)<1?1:0,W=me(L,H);return t.jsxs("div",{className:w({positive:v>0n,negative:v<0n,muted:v===0n}),children:[t.jsx("span",{style:{color:gt,marginRight:5},children:st(v)}),`(${M}${W}%)`]})},P=()=>{const{entryPrice:v}=d;if(!U(v))return`$${me(v)}`},F=()=>{const{closePrice:v}=d;if(!U(v))return`$${me(v)}`},E=()=>{const{collateral:v}=d;if(!(!v||!v.liquidationPrice))return`$${me(v.liquidationPrice)}`},O=()=>{const{greeks:v}=d;if(h)for(const j in v){const M=v[j];Js(M)||(v[j]=void 0)}return v},N=()=>b?d.legs.map(o):void 0,k=()=>y?"":t.jsx(pc,{openCloseModal:s,position:d});return{id:`${d.buildId}_${d.id}`,strategy:C(),amount:_(),instrument:S(),premium:D(),collateral:I(),pnl:B(),entryPrice:P(),closePrice:F(),liqPrice:E(),...O(),children:N(),closeBtn:k(),omittedKeys:(b||h)&&["instrument","closeBtn"],className:w(x&&"expired")}},r=gc,l=e==null?void 0:e.map(o),u={titleData:r,itemsData:l},p=[{name:"Active",isActive:!0}],c=()=>{let d;return i?!e||!a?d="Loading...":e.length||(d="No open positions"):d="No wallet connected",t.jsx("div",{className:"App-box PositionsTable__message",style:a?{}:{marginBottom:10},children:Z(d)})};return t.jsxs("div",{className:"PositionsTable",children:[t.jsx("div",{className:"PositionsTable__header",children:t.jsx(Ut,{links:p,type:"border"})}),e!=null&&e.length?t.jsxs(t.Fragment,{children:[!a&&c(),t.jsx(ba,{structureData:u})]}):c()]})};const Ba=e=>{const{value:n,setValue:s,maxValue:a,placeholder:i,isDisabled:o,isFocused:r,hasError:l,formatInputStringFns:u=[ct,Pe],title:p,presentedValue:c,presentedValueTitle:d,iconData:m,unitStr:y}=e,h=Jt([n,s],{maxValue:a,placeholder:i,isDisabled:o,isFocused:r},u),T=w(e.className,h.hasFocus&&"hlight",l&&"error",o&&"disabled"),b=u[0];return t.jsxs("div",{className:w("InputFamily InputComplexNumeric",T),onClick:()=>{h.ref.current.focus()},children:[t.jsxs("div",{className:"InputComplexNumeric__header",children:[t.jsx("div",{className:"InputComplexNumeric__title",children:p}),c&&t.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:g=>{g.stopPropagation(),s(b(c))},children:[t.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[d,":"]}),b(c)]}),m&&t.jsx("div",{className:"InputComplexNumeric__icon",children:t.jsx("img",{src:m.src,alt:m.alt??"icon"})})]}),t.jsxs("div",{className:"InputComplexNumeric__body",children:[t.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:h.node}),t.jsxs("div",{className:"InputComplexNumeric__helper",children:[a&&t.jsx("button",{className:"InputFamily__max-btn",disabled:o,onClick:g=>{g.stopPropagation(),s(ct(a))},children:"Max"}),y&&t.jsx("div",{className:"InputComplexNumeric__unit",children:y})]})]})]})};const it=({className:e,children:n,value:s,symbol:a="USDC",isHlight:i=!0,style:o,...r})=>{const l=G(),u=J(l,a).icon,p=n,c=w(i&&"_hlight",e);return t.jsxs("div",{className:w("CurrencyWithText",c),style:o,...r,children:[t.jsx("img",{src:u,alt:`${a} icon`}),t.jsx("span",{className:"CurrencyWithText__value",children:s}),t.jsx("span",{className:"CurrencyWithText__text",children:p})]})},xc=({position:e,isOpen:n,setIsOpen:s})=>{var x;const a=G(),[i,o]=f.useState(""),[r,l]=f.useState(!1),[u,p]=f.useState(null),c=((x=e==null?void 0:e.collateral)==null?void 0:x.marketToken)??{symbol:"ETH"},d=Nt(c.symbol),m=at(c==null?void 0:c.symbol,Ni,K(i),p),y=()=>{p(null),m.check()};if(f.useEffect(()=>{p(null)},[i]),Ae(()=>{i&&y()},je,[i]),!e||!e.collateral)return null;const h=()=>{if(!i)return"Enter Amount";if(u===null)return ke;if(r)return u?"Updating Collateral...":`Approving ${c.symbol}...`},T=()=>!h(),b=()=>{const C=u?"Add Collateral":`Approve ${i} ${c.symbol}`;return h()??C},g=()=>{if(!u){m.approve(l,y);return}const C=K(i);ge(a,e.actions.addToCollateral,[C],{text:`${i} ${c.symbol} added.`,node:t.jsx(it,{value:i,symbol:c.symbol,children:"added to collateral."})},l,()=>s(!1))};return t.jsxs(xe,{className:"PositionCollateralModal",isOpen:n,setIsOpen:s,reset:()=>{o(""),p(null)},children:[t.jsx("h1",{children:"Edit Collateral"}),t.jsx(Ba,{value:i,setValue:o,title:"Add Amount",iconData:{src:d},isFocused:!0}),t.jsx(z,{isDisabled:!T(),onClick:g,children:b()})]})};const _c=({position:e,isOpen:n,setIsOpen:s})=>{const a=G(),[i,o]=f.useState(""),[r,l]=f.useState(void 0),[u,p]=f.useState(!1),[c,d]=kt().pendingPositionsState,m=()=>{const v=Gt(e.amount);o(v)},y=v=>{l(void 0),e.utils.calcPnl(v).then(l)};if(f.useEffect(()=>{n&&e&&m()},[n]),Ae(()=>{e&&i&&y(K(i))},je,[i]),!e||!e.actions)return null;const h=v=>{if(v)c.closing.push({id:e.id,market:e.market});else{const j=c.closing.findIndex(M=>M.id===e.id);j!==-1&&c.closing.splice(j,1)}d({...c})},{close:T}=e.actions,{asset:b,amount:g,strategy:x,isCall:C,isLong:_}=e,S=x??`${_?"Long":"Short"} ${C?"Call":"Put"}`,D=t.jsxs(X,{symbol:b,children:[i," ",S," closed."]}),A={text:`${i} ${b} ${S} closed.`,node:D},B=K(i),P=r==null?void 0:r.inUSDC,F=()=>{ge(a,T,[B],A,p,()=>{h(!0),s(!1)})},E=()=>{if(!i)return"Enter Amount";if(u)return"Closing Strategy..."},O=()=>E()??"Close Strategy",N=()=>!E(),k=Nt(b);return t.jsxs(xe,{className:"ClosePositionModal",isOpen:n,setIsOpen:s,reset:()=>{o(""),l(void 0)},children:[t.jsxs("div",{className:"ClosePositionModal__body",children:[t.jsx("h1",{children:"Close Strategy"}),t.jsxs("div",{className:"info-row",children:[t.jsx("div",{className:"info-row__title",children:"Instrument"}),t.jsx("div",{className:"info-row__value",children:t.jsx(gn,{market:e.market,strikeParams:e})})]}),e.market!=="Hegic"&&t.jsx(Ba,{value:i,setValue:o,title:"Amount",iconData:{src:k},isFocused:!0,maxValue:q(g)})]}),t.jsxs("div",{className:"ClosePositionModal__footer",children:[t.jsxs("div",{className:"info-row",children:[t.jsx("div",{className:"info-row__title",children:"PnL"}),t.jsx("div",{className:w("info-row__value",{positive:P>0n,negative:P<0n}),children:de(()=>wu(P),U(P))})]}),t.jsx(z,{isDisabled:!N(),onClick:F,children:O()})]})]})},Na=({positions:e})=>{const n=kt(),{arePositionsLoaded:s,positionsTotalData:a,pendingPositionsState:i}=n,o=e==null?void 0:e.sort((b,g)=>g.isTotal?-1:b.isTotal?1:Fn(b,g,"pnl.inUSDC",-1));o==null||o.forEach(b=>{b.legs&&b.legs.sort(Zs("pnl.inUSDC",-1))});const r=o&&a?[...o,a]:o,[l,u]=f.useState(null),[p,c]=f.useState(!1),[d,m]=f.useState(!1),y=b=>{u(b),c(!0)},h=b=>{u(b),m(!0)},[T]=i;return T.opening&&r&&[...T.opening,...r],t.jsxs("div",{className:"Positions",children:[t.jsx("h1",{className:"Positions__title",children:"My Positions"}),t.jsx(Pa,{positions:r,isLoadingComplete:s,openCollateralModal:y,openCloseModal:h}),t.jsx(xc,{isOpen:p,setIsOpen:c,position:l}),t.jsx(_c,{isOpen:d,setIsOpen:m,position:l})]})},Ra=f.createContext(null),vc=({children:e})=>{const n=Oe("asset","ETH");return t.jsx(Ra.Provider,{value:n,children:e})},an=()=>f.useContext(Ra),Cc=()=>{const e=an(),n=Ia();return t.jsxs("div",{className:"Builder",children:[t.jsx(Qu,{assetState:e}),t.jsx(Na,{positions:n})]})},Qn=()=>f.useContext(La),Q=e=>{const n=Qn();return e.endsWith("State")?n[e]:n[`${e}State`][0]},Mc=()=>{const e=Oe("asset","ETH"),n=Oe("OptionChain-isDistanceEnabled",!1),s=f.useState(null),a=f.useState(!0),i=f.useState(!0),o=f.useState(!1),r=f.useState(!1),l=f.useState(null),u=f.useState(!1);return{assetState:e,isDistanceEnabledState:n,strikePriceState:s,isCallState:a,isLongState:i,isModalOpenState:o,isDepositedIntoMarginState:r,marginIdState:l,isApproveTipShownState:u}},La=f.createContext(null),Sc=({children:e})=>{const n=Mc();return t.jsx(La.Provider,{value:n,children:e})};const Ac="/sf_draft/assets/date-1ea6323e.svg",Oa=({chosenDate:e,setChosenDate:n,type:s="Selector",shouldRenderCarousel:a=!1})=>{const{dates:i}=De();f.useEffect(()=>{i&&!e&&n(i[0])},[i]);const o=_e(1100)||!a;return t.jsx(nn,{className:w("DateController",`_${s}`),title:"Expiration Date",children:t.jsx("div",{className:"DateController__items",children:de(()=>o?t.jsx(wc,{chosenDate:e,setChosenDate:n,type:s}):t.jsx(Dc,{chosenDate:e,setChosenDate:n}),U(i))})})},wc=({chosenDate:e,setChosenDate:n,type:s})=>{const{dates:a}=De(),i=a.map(l=>{const u=jc(s,l);return{value:l,label:t.jsx(kc,{date:l,expiryStr:u})}}),o=e&&i.find(l=>l.value===e),r=s==="Selector"?t.jsx("img",{src:Ac,alt:"Strategy selector icon"}):null;return t.jsx(he,{className:r?"Selector_thin-options":"",placeholder:"Choose Date",options:i,value:o,onChange:l=>{n(l.value)},iconNode:r})},jc=(e,n)=>{const s=n-Date.now();switch(e){case"Selector":return Ln(s);case"Selector_no-icon":return`Expires in ${Kt(s)} days`;default:return""}},kc=({date:e,expiryStr:n})=>t.jsxs("div",{className:"DateController__selector-date",children:[t.jsx("div",{className:"DateController__selector-date-value",children:Ee(e,"d MMM yy")}),t.jsx("div",{className:"DateController__selector-date-expiry",children:n})]}),Dc=({chosenDate:e,setChosenDate:n})=>{const{dates:s}=De(),a=s.map(i=>{const o=Ee(i,"d MMM yy"),r=Kt(i-Date.now()),l=e===i;return t.jsxs(z,{className:w("DateController__item",l&&"chosen"),type:"stroke",onClick:()=>n(i),children:[t.jsx("div",{className:"DateController__item-date",children:o}),t.jsxs("div",{className:"DateController__item-expiry",children:[r," days"]})]},i)});return t.jsx(xa,{id:"DateControllerCarousel",spaceBetween:8,isDraggable:!1,breakpoints:{992:{slidesPerView:7},1200:{slidesPerView:8},1300:{slidesPerView:"auto"}},children:a})};const Fa=({isCheckedState:e,text:n,className:s,...a})=>{const[i,o]=e,r=l=>{const u=l.target;o(u.checked)};return t.jsxs("div",{className:w("Checker",s),...a,children:[t.jsx("input",{type:"checkbox",checked:i,onChange:r}),t.jsx("label",{children:n})]})},Ec=()=>{const e=Qn(),{assetState:n,isDistanceEnabledState:s}=e,[a,i]=n,[o,r]=De().chosenDateState;return t.jsxs("div",{className:"OptionChainControllers",children:[t.jsx(Oa,{chosenDate:o,setChosenDate:r,type:"Selector_no-icon",shouldRenderCarousel:!0}),t.jsx(Yn,{asset:a,setAsset:i}),t.jsx(Fa,{isCheckedState:s,text:"Distance"})]})};const Ic=e=>Object.keys(e).map(BigInt).sort(jt),zn=e=>{const n=[];Object.values(e).forEach(i=>{n.push(...Object.keys(i))});const s=n.map(BigInt);return Qt(s).sort(jt)},Pc=e=>$o(e),Bc=({asset:e,chosenDate:n,strikes:s,isDistanceEnabled:a})=>{const i=zn(s),o=Ze(e),r=Ee(n??0,"d MMM yy"),l=_e();return t.jsxs("div",{className:w("OptionChainStrikeList",a&&"_distance"),children:[!l&&t.jsx("div",{className:"OptionChainStrikeList__cell _title whitespace-nowrap",children:r}),t.jsx("div",{className:"OptionChainStrikeList__cell _title",children:"Strike"}),t.jsx(Nc,{assetPrice:o,strikePrices:i,isDistanceEnabled:a})]})},Nc=({assetPrice:e,strikePrices:n,isDistanceEnabled:s})=>{const a=n.filter(r=>{const l=In(e,.001);return Ve(r-e)<l}),i=Io(a,e);let o;return i||(o=n.reduce((r,l,u)=>{if(r)return r;if(e<l||u===n.length-1)return l},void 0)),t.jsx(t.Fragment,{children:n.map(r=>{const l=r===i,u=!l&&r===o,p=`$${Fe(r,0)}`;return t.jsxs("div",{className:w("OptionChainStrikeList__cell",l&&"_assetPrice"),children:[u&&t.jsx(Lc,{assetPrice:e,strikePrices:n}),t.jsxs("div",{className:"OptionChainStrikeList__strike",children:[p,s&&t.jsx(Rc,{assetPrice:e,strikePrice:r})]})]},r)})})},Rc=({assetPrice:e,strikePrice:n})=>{const s=q(Xe(n,e))*100-100,a=fe(s,s>0&&s<1?1:0);return t.jsxs("span",{className:w("OptionChainStrikeList__distance",{negative:a<0,positive:a>0,neutral:a===0}),children:["(",a,"%)"]})},Lc=({assetPrice:e,strikePrices:n})=>{if(!e)return null;const s=w("OptionChainStrikeList__assetPrice",e>Lt(n)&&"_last"),a=q(e),i=st(e,a<100?2:0);return t.jsx("div",{className:s,children:i})};const ze=({style:e})=>t.jsx("div",{className:"SpinnerBig",style:e,children:t.jsxs("svg",{viewBox:"0 0 100 100",children:[t.jsx("defs",{}),t.jsx("circle",{className:"SpinnerBig__circle",style:{fill:"transparent",stroke:"#fff",strokeWidth:"7px",strokeLinecap:"round"},cx:"50",cy:"50",r:"45"})]})});const Ua="/sf_draft/assets/arrow-up_green-2d5f573c.svg",$a="/sf_draft/assets/arrow-down_red-ed33cd18.svg",Ha=({strikes:e,isCall:n,renderStrikeList:s})=>{const a=Q("asset"),i=Q("isDistanceEnabled"),o=Ze(a),r=_e(),l=f.useRef(null);return f.useEffect(()=>{if(r){const u=document.querySelector(".OptionChainStrikeList");l.current&&(l.current.style.paddingRight=`${u.clientWidth}px`)}else l.current.style.paddingRight&&(l.current.style.paddingRight="")},[r,i]),t.jsx("div",{className:"OptionChainTable__wrapper",children:t.jsxs("div",{className:"OptionChainTable",children:[t.jsx(Oc,{isCall:n}),t.jsxs("div",{className:"OptionChainTable__scrollable",ref:l,children:[t.jsx(Fc,{}),t.jsx(Uc,{strikes:e,isCall:n,assetPrice:o})]}),r&&s()]})})},Oc=({isCall:e})=>{const n=_e(),[s]=De().chosenDateState,a=Ee(s,"d MMM yy"),i=()=>t.jsxs("div",{className:"OptionChainTable__cell-content",children:[e?"Calls":"Puts",t.jsx("img",{src:e?Ua:$a,alt:e?"Arrow up":"Arrow down"})]});return t.jsxs("div",{className:w("OptionChainTable__cell _title _main-title",e?"positive":"negative"),children:[i(),n&&t.jsx("span",{className:"text-white",children:a})]})},Fc=()=>t.jsxs("div",{className:"OptionChainTable__head",children:[t.jsxs("div",{className:"OptionChainTable__head-group",children:[t.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),t.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"IV Bid"}),t.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"Bid"})]}),t.jsxs("div",{className:"OptionChainTable__head-group",children:[t.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),t.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"IV Ask"}),t.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"Ask"})]})]}),Uc=({strikes:e,isCall:n,assetPrice:s})=>{const a=Qn(),[,i]=a.isModalOpenState,o=zn(e),r=u=>{const p=Xt(u,n),c=Pc(e[p]);return o.map(d=>{const m=`${d}_${u}`,y=Un(n,d,s),h=c.filter(S=>S.strike===d);if(!h.length)return l(m,y);const T=h.reduce((S,D)=>{const I=S.premiumData.inUSDC,A=D.premiumData.inUSDC;if(u){if(A<I)return D}else if(A>I)return D;return S},h[0]),b=h.reduce((S,D)=>S+(D.liquidity??0n),0n),g=b?me(b,1):Z(),x=na(T,s).formatted,C=de(()=>st(T.premiumData.inUSDC),!T.premiumData);return l(m,y,{size:g,IV:x,price:C},()=>{const[,S]=a.isCallState,[,D]=a.isLongState,[,I]=a.strikePriceState;S(n),D(u),I(d),i(!0)})})},l=(u,p,c,d=()=>{})=>{const m=!c;return t.jsxs("button",{className:w("OptionChainTable__strikes-item",p&&"_ITM"),disabled:m,onClick:d,children:[t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.size)??Z()}),t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.IV)??Z()}),t.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.price)??Z()})]},u)};return t.jsxs("div",{className:"OptionChainTable__strikes",children:[t.jsx("div",{className:"OptionChainTable__strikes-long",children:r(!1)}),t.jsx("div",{className:"OptionChainTable__strikes-short",children:r(!0)})]})};const $c=()=>{const e=Q("asset"),n=Q("isDistanceEnabled"),[s]=De().chosenDateState,a=Gn(e,s),i=!s||!a,o=_e();if(!i&&!zn(a).length)return t.jsx("div",{className:"OptionChainOptions",children:t.jsx(Qe,{children:"No Liquidity"})});const l=()=>t.jsx(Bc,{asset:e,chosenDate:s,strikes:a,isDistanceEnabled:n});return mt(t.jsxs("div",{className:"OptionChainOptions",children:[t.jsx(Hc,{asset:e,strikes:a,renderStrikeList:l,isDistanceEnabled:n}),!o&&l(),t.jsx(Wc,{asset:e,strikes:a,renderStrikeList:l,isDistanceEnabled:n})]}),i,t.jsx(ze,{style:{margin:"50px auto 70px"}}))},Hc=({strikes:e,renderStrikeList:n})=>t.jsx(Ha,{strikes:e,renderStrikeList:n,isCall:!0}),Wc=({strikes:e,renderStrikeList:n})=>t.jsx(Ha,{strikes:e,renderStrikeList:n,isCall:!1}),qc=()=>t.jsxs("div",{className:"OptionChainDashboard App-box",children:[t.jsx(Ec,{}),t.jsx($c,{})]});const Xn=({oppositeLabels:e,isOn:n,setIsOn:s})=>t.jsxs("div",{className:"Switcher",children:[t.jsx("button",{className:w("Switcher__button","positive",n&&"chosen"),onClick:()=>s(!0),children:e[0]}),t.jsx("button",{className:w("Switcher__button","negative",!n&&"chosen"),onClick:()=>s(!1),children:e[1]})]});const Vc=({isCall:e,setIsCall:n})=>{const s=[t.jsxs("div",{className:"CallPutController__label",children:[t.jsx("img",{src:Ua,alt:"arrow up"}),"Call"]}),t.jsxs("div",{className:"CallPutController__label",children:[t.jsx("img",{src:$a,alt:"arrow down"}),"Put"]})];return t.jsx(nn,{className:"CallPutController",title:"Strategy",children:t.jsx(Xn,{oppositeLabels:s,isOn:e,setIsOn:n})})};const Gc=({strikePrices:e,chosenStrikePrice:n,setChosenStrikePrice:s,asset:a,isCall:i})=>{f.useEffect(()=>{e.find(p=>p===n)||s(null)},[e]);const o=Ze(a),r=e.map(u=>{const p=Un(i,u,o);return{value:u,label:t.jsx("div",{className:w("StrikeController__item",p&&"_ITM"),children:t.jsx("span",{children:`$${Fe(u,0)}`})})}}),l=t.jsx("img",{src:Bs,alt:"graph icon"});return t.jsx(nn,{title:"Strike",className:"StrikeController",children:t.jsx(he,{className:"Selector_thin-options",placeholder:"Choose Strike",options:r,value:r.find(u=>u.value===n),onChange:u=>{s(u.value)},iconNode:l},e)})};const Yc=({contentType:e,market:n})=>{const s={Hegic:t.jsx(Kc,{contentType:e})};return t.jsx("div",{className:"MarketInfoTooltip",children:s[n]})},Kc=({contentType:e})=>{const n=()=>t.jsxs("div",{children:[t.jsxs("ul",{children:[t.jsx("li",{children:"You can't close your position if your option is OTM (Out of the money)"}),t.jsx("li",{children:"You can exercise only the Intrinsic Value of your option (the difference between the strike price and the settlement price)"})]}),t.jsxs("div",{className:"MarketInfoTooltip__important-note",children:["You must exercise your ",t.jsx("br",{}),"option before the expiration date; otherwise, it will expire worthless."]})]}),s=()=>t.jsx("div",{children:"Zero fees 🔥"}),a=()=>t.jsx("div",{children:"The payoff for both call and put options is in USDC.e"});return t.jsx(Qc,{Overall:n(),Fees:s(),PayoffAsset:a(),contentType:e})},Qc=({Overall:e,Fees:n,PayoffAsset:s,contentType:a})=>({"2Market":e,Fees:n,"Payoff Asset":s})[a],zc=({marketStrikeData:e})=>{const{market:n}=e,s=tn[n].circled,a=["2Market","Fees","Payoff Asset"];return t.jsxs("div",{className:"Brief MarketBrief",children:[t.jsx("div",{className:"Brief__icon",children:t.jsx("img",{src:s,alt:n})}),a.map(i=>{const o=gs(t.jsx(Yc,{market:n,contentType:i}));return t.jsx("div",{className:"MarketBrief__tooltip-trigger","data-tooltip-id":"Tooltip_MarketInfo","data-tooltip-html":o,children:t.jsx("span",{className:"tip",children:i})},i)})]})},Xc=({isLong:e,setIsLong:n})=>t.jsx(Xn,{oppositeLabels:["Buy","Sell"],isOn:e,setIsOn:n});const Zc="/sf_draft/assets/confirm_white-d15a05bc.svg";const Wa=f.createContext(null),Jc=({children:e})=>{const n=ep();return t.jsx(Wa.Provider,{value:n,children:e})},rn=()=>f.useContext(Wa),ep=()=>{const e=G(),n=_s(),s=Vo(),a=f.useState(!1),i=f.useState(!1),o=f.useState(!1),r=f.useState(!1),[,l]=a,[,u]=i,[,p]=o,[,c]=r;return{isIntroModalOpenState:a,isCreateModalOpenState:i,isWelcomeModalOpenState:o,isCreatingState:r,actions:{openIntro:()=>{l(!0)},skipIntro:()=>{l(!1),u(!0)},createAccount:async g=>{const x=be(e,"MarginAccountManager");await ge(e,x.createMarginAccount,[],C=>{try{let _=C.events[0].args.tokenId.toString();return _.length===1&&(_=`0${_}`),`Margin Account #${_} created.`}catch(_){return console.log(_),"Margin Account created."}},c,()=>{s(void 0),g&&g()})},goToWelcomeModal:()=>{u(!1),p(!0)},startTrading:()=>{p(!1),n("/margin/trading")}}}},tp="Create new margin account",on=({label:e})=>{const n=Je(),s=rn(),{isConnected:a}=te(),{connectWallet:i}=qt(),{isCreatingState:o}=s,[r]=o,{openIntro:l,createAccount:u}=s.actions,p=()=>{var d;(d=n==null?void 0:n.accounts)!=null&&d.length?u():l()},c=()=>r?"Creating...":e??tp;return a?t.jsx(t.Fragment,{children:t.jsx(z,{className:"CreateMarginAccountBtn",type:"stroke",isDisabled:r,onClick:p,children:c()})}):t.jsx(z,{className:"ConnectWalletBtn",onClick:i,children:"Connect wallet"})};const nt={formatRatio:np,getRatioClass:sp,queryRatioAfterPositionOpen:ap,queryRatioAfterDeposit:ip,queryRatioAfterWithdraw:rp,queryRatioAfterRepay:op};function np(e){return`${Math.floor(q(e*100n))}%`}function sp(e,n){const{red:s,yellow:a}=n;return e<s?"_low":e<a?"_medium":"_high"}async function ap(e,n,s,a){const i=await ln(e,a,s);return un(n.balance+i,n.debt+i)}async function ip(e,n,s,a){const i=await ln(e,a,s);return un(n.balance+i,n.debt)}async function rp(e,n,s,a){const i=await ln(e,a,s);return un(n.balance-i,n.debt)}async function op(e,n,s,a){const i=await ln(e,a,s);return un(n.balance-i,n.debt-i)}const ln=async(e,n,s)=>{let a=s;const i=J(e,"USDC");return n.address!==i.address&&(a=await ee(e,"ModularSwapRouter").callStatic.calculatePositionValue(n.address,i.address,Ne(s,n)).then(BigInt).then(r=>Ke(r,i)).catch(console.log)),a},un=(e,n)=>n==0n?vn:Xe(e,n),qa=()=>t.jsx("svg",{width:"15",height:"10",viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("g",{id:"icon-eternity",children:t.jsx("path",{id:"Vector",d:"M14.9777 4.8961C14.8355 3.68253 14.0771 2.69856 12.9554 2.23937C11.7704 1.76378 10.4433 2.00978 9.51113 2.86255L8.0102 4.22372L8.76856 4.9125L10.1589 3.63333C10.8225 3.02655 11.7546 2.86255 12.6078 3.19055C13.3819 3.50214 13.9033 4.19092 13.9981 5.0109C14.0139 5.12569 14.0139 5.24049 14.0139 5.35529C14.0139 5.47009 13.9981 5.58488 13.9981 5.69968C13.9033 6.53606 13.3819 7.20844 12.6078 7.52003C11.7704 7.84802 10.8541 7.68403 10.1905 7.11004C10.1747 7.09364 10.1747 7.09364 10.1589 7.07724L5.92471 3.25614L5.49813 2.86255C4.55017 2.00978 3.23884 1.76378 2.0381 2.23937C0.932154 2.69856 0.157992 3.68253 0.0315984 4.8961C0.0157992 5.0601 0 5.20769 0 5.37169C0 5.51928 0.0157992 5.68328 0.0315984 5.83088C0.173791 7.04444 0.932154 8.04482 2.0539 8.48761C3.23884 8.96319 4.56597 8.7172 5.51393 7.86442L6.99905 6.50326L6.24069 5.83088L4.85036 7.09364C4.18679 7.70043 3.25464 7.86442 2.40148 7.53643C1.62732 7.22484 1.10594 6.55246 1.01115 5.71608C0.995351 5.60128 0.995351 5.48649 0.995351 5.37169C0.995351 5.25689 1.01115 5.12569 1.01115 5.0273C1.10594 4.20732 1.62732 3.51854 2.40148 3.20695C2.68587 3.09215 2.98605 3.04295 3.27044 3.04295C3.83921 3.04295 4.40798 3.25614 4.83456 3.64973L5.26114 4.04332L9.46373 7.86442L9.49533 7.88082C10.1115 8.45481 10.9015 8.75 11.7072 8.75C12.118 8.75 12.5446 8.668 12.9396 8.50401C14.0613 8.06122 14.8197 7.06084 14.9619 5.84728C14.9777 5.69968 14.9935 5.53568 14.9935 5.38809C15.0093 5.20769 14.9935 5.0601 14.9777 4.8961Z",fill:"white"})})}),Mt=({ratio:e,ratioCoeffs:n=void 0,className:s})=>{if(n=n??zo(),!n||U(e))return t.jsx(ye,{});const a=nt.getRatioClass(e,n),i=e>=vn?t.jsx(qa,{}):nt.formatRatio(e);return t.jsx("div",{className:w("MarginRatio",a,s),children:i})},Zn=({isCreateButtonIncluded:e=!1,isSmall:n=!1,outOfContextData:s=void 0})=>{const a=Je(),i=!U(s);if(a===null&&!i)return null;const{accounts:o,selectedAccountIdState:r,isLoading:l}=i?s:a,[u,p]=r;if(l)return t.jsx(ye,{});const c=o.map(d=>{const m=d.id===u;return{value:d.id,label:t.jsx(lp,{account:d,isSelected:m})}});return e&&c.push({value:null,label:t.jsx(on,{label:"Create new account"}),isDisabled:!0}),t.jsx(he,{className:w("MarginAccountSelector",e&&"_with-create-btn",n&&"_small"),isDisabled:c.length<=1,options:c,defaultValue:u,onChange:d=>{p(d.value)}},u)},lp=({account:e,isSelected:n})=>{const s=G();if(!e||U(e.balance))return t.jsx(ye,{});const{id:a,balance:i,ratio:o}=e,r=a<10n?`0${String(a)}`:String(a),l=me(i,0),p=`https://arbiscan.io/nft/${Ge(s,"MarginAccountManager")}/${String(a)}`;return t.jsxs("div",{className:"MarginAccountSelector__option",children:[t.jsxs("div",{className:"MarginAccountSelector__option-head",children:[t.jsxs("div",{className:"MarginAccountSelector__option-id",children:[r,t.jsx("a",{href:p,rel:"noreferrer",target:"_blank",onClick:c=>c.stopPropagation(),onMouseDown:c=>{n&&c.stopPropagation()},children:t.jsx("img",{src:Ms,alt:"link"})})]}),t.jsx(z,{className:"MarginAccountSelector__option-button",type:"micro",children:n?t.jsx("img",{src:Zc,alt:"v"}):"Select"})]}),t.jsx(Te,{marginValue:10}),t.jsx("div",{className:"MarginAccountSelector__option-body",children:t.jsxs("div",{className:"MarginAccountSelector__option-stats",children:[t.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Balance"}),t.jsx("div",{className:"info-row__value MarginAccountSelector__option-balance",children:t.jsx(X,{isHlight:!0,children:l})})]}),t.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Margin Level"}),t.jsx(Mt,{className:"info-row__value MarginAccountSelector__option-ratio",ratio:o,ratioCoeffs:(e==null?void 0:e.ratioCoeffs)??void 0})]})]})})]})},up=({isDeposited:e,setIsDeposited:n,marginId:s,setMarginId:a})=>t.jsxs("div",{className:"DepositIntoMarginCheck",children:[t.jsx(Fa,{className:"DepositIntoMarginCheck__checker",isCheckedState:[e,n],text:"Deposit into margin account","data-tooltip-id":"DepositIntoMarginCheckTooltip"}),e&&t.jsx(cp,{marginId:s,setMarginId:a}),t.jsx(pp,{})]}),cp=({marginId:e,setMarginId:n})=>{const s=ia();f.useEffect(()=>{U(s)?n(void 0):s&&n(s[0].id)},[s]);const a=[e,n];return t.jsx("div",{className:"MarginAccountsList",children:t.jsx(Zn,{outOfContextData:{accounts:s,selectedAccountIdState:a,isLoading:U(s)}})})},pp=()=>t.jsx(ne,{id:"DepositIntoMarginCheckTooltip",clickable:!0,place:"top",children:t.jsxs("div",{className:"text-inline",children:["By clicking this box, the purchased option ",t.jsx("br",{}),"will be transferred to your margin account ",t.jsx("br",{}),"and used as collateral. Read more about ",t.jsx("br",{}),"how Portfolio Margining works ",t.jsx("a",{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",rel:"noreferrer",target:"_blank",children:"here"})]})}),bt=f.createContext(null),dp=()=>{var B;const[e]=De().chosenDateState,[n,s]=Q("isModalOpenState"),a=Q("asset"),i=Q("strikePrice"),o=Q("isCall"),r=Q("isLong"),[l,u]=Q("isDepositedIntoMarginState"),[p,c]=Q("marginIdState"),d=_e(),m=G(),y=f.useState({}),h=f.useState(null),T=f.useState(J(m,JSON.parse(localStorage.getItem("payment-token"))??"ETH")),[b]=T;f.useEffect(()=>{localStorage.setItem("payment-token",JSON.stringify(b.symbol))},[b]);const g=Gn(a,e),x=Xt(r,o),C=Ic((g==null?void 0:g[x])??{}),_=(B=g==null?void 0:g[x])==null?void 0:B[i],S=f.useState([]),D=f.useState(!1),A={amountsState:y,availableMarkets:_,errorMarketsState:S,areStrikesLoading:!g,isCostLoadingState:D};return t.jsx(bt.Provider,{value:A,children:t.jsxs(xe,{className:w("OptionChainModal",d&&"_scrollable"),isOpen:n,setIsOpen:s,children:[t.jsx(yp,{strikePrices:C}),t.jsx(Te,{}),t.jsx(mp,{availableMarkets:_,strikePrices:C}),t.jsx(up,{isDeposited:l,setIsDeposited:u,marginId:p,setMarginId:c}),t.jsx(xp,{}),t.jsx(_p,{paymentTokenState:T,youPayState:h})]})})},yp=({strikePrices:e})=>{const[n,s]=De().chosenDateState,{areStrikesLoading:a}=f.useContext(bt),[i,o]=Q("assetState"),[r,l]=Q("strikePriceState"),[u,p]=Q("isCallState");return t.jsxs("div",{className:"OptionChainModal__controllers",children:[t.jsx(Vc,{isCall:u,setIsCall:p}),t.jsx(Oa,{chosenDate:n,setChosenDate:s}),de(()=>t.jsx(Gc,{strikePrices:e,chosenStrikePrice:r,setChosenStrikePrice:l,asset:i,isCall:u}),a),t.jsx(Yn,{asset:i,setAsset:o})]})},mp=({availableMarkets:e,strikePrices:n})=>{const[s,a]=Q("isLongState"),{areStrikesLoading:i}=f.useContext(bt);return t.jsxs("div",{className:"OptionChainModal__markets",children:[t.jsx(fp,{isLong:s,setIsLong:a}),mt(t.jsx(bp,{availableMarkets:e,isLong:s,strikePrices:n}),i,t.jsx(ze,{}))]})},fp=({isLong:e,setIsLong:n})=>t.jsxs("div",{className:"OptionChainModal__markets-header",children:[t.jsxs("h1",{className:"OptionChainModal__markets-title",children:[e?"Buy":"Sell"," Options"]}),t.jsx("div",{className:"OptionChainModal__markets-long-controller",children:t.jsx(Xc,{isLong:e,setIsLong:n})})]}),bp=({availableMarkets:e,isLong:n,strikePrices:s})=>{const a=Q("asset"),i=Ze(a);return t.jsx("div",{className:"OptionChainModal__markets-table-overflow",children:t.jsxs("table",{className:"OptionChainModal__markets-table",cellPadding:0,cellSpacing:0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Instrument"}),t.jsx("th",{children:"Available size"}),t.jsx("th",{children:"Price"}),t.jsx("th",{children:"IV"}),t.jsxs("th",{children:["Amount to ",n?"buy":"sell"]})]})}),t.jsx("tbody",{children:e?e.map(o=>t.jsx(hp,{marketStrikeData:o,assetPrice:i},o.market)):t.jsx(Tp,{strikePrices:s})})]})})},hp=({marketStrikeData:e,assetPrice:n})=>{const{market:s,premiumData:a,priceForAmount:i,liquidity:o}=e,r=st(i??a.inUSDC),l=o?Fe(o,1):Z("Will be available soon",!0),u=na(e,n).formatted;return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(zc,{marketStrikeData:e})}),t.jsx("td",{children:l}),t.jsx("td",{children:r}),t.jsx("td",{children:u}),t.jsx("td",{children:t.jsx(gp,{marketStrikeData:e})})]},s)},Tp=({strikePrices:e})=>{const n=e.length?"Choose strike to view available markets":"No Liquidity";return t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"_no-liquidity",children:t.jsx(Qe,{fontSize:15,children:n})})})},gp=({marketStrikeData:e})=>{const{market:n,liquidity:s}=e,a=De().chosenDateState,i=Q("strikePrice"),o=Q("isCall"),r=Q("isLong"),l=Q("isModalOpen"),{amountsState:u,errorMarketsState:p}=f.useContext(bt),[c,d]=u,[m]=p,[y,h]=f.useState("");f.useEffect(()=>{c[n]=y?K(y):0n,d({...c})},[y]),f.useEffect(()=>{h(""),d({})},[o,r,a,i,l]);const T=!!m.find(C=>C===n),b=T&&c[n]>ue(.1)?"Try reducing your size":"",{isComingSoon:g}=e,x=g?`${r?"Buying":"Selling"} ${n} options will be available soon`:"";return t.jsx("div",{className:"OptionChainModal__amount-input","data-tooltip-id":g&&"Tooltip_bottom","data-tooltip-content":x,children:t.jsx(en,{className:w("OptionChainModal__markets-table-input"),hasError:T,errorMsg:b,value:y,setValue:h,maxValue:s?q(s):void 0,placeholder:"0",isDisabled:g})})},xp=()=>{const[e,n]=Dt(),s=Q("isApproveTipShown");return t.jsxs("div",{className:"OptionChainModal__details",children:[t.jsx("div",{className:"OptionChainModal__details-slippage-input",children:t.jsx(Kn,{slippage:e,setSlippage:n})}),s&&t.jsx(Va,{})]})},_p=({paymentTokenState:e,youPayState:n})=>{const s=G(),a=Q("isCall"),i=Q("isLong"),o=Q("strikePrice"),[r]=De().chosenDateState,[l]=Dt(),{amountsState:u,availableMarkets:p,errorMarketsState:c,isCostLoadingState:d}=f.useContext(bt),[m]=u,[y,h]=c,[T,b]=n,[g,x]=d,[C,_]=e,S=Q("isDepositedIntoMargin"),D=Q("isApproveTipShown");f.useEffect(()=>{if(S){const O=Zt.getMarketToken(s);_(O)}},[S]);const I=O=>{h([...y,O])},A=O=>{h(y.filter(N=>N!==O))},B=()=>{h([])},P=()=>{p==null||p.forEach(O=>{O.priceForAmount=null})},F=()=>{b(null),P(),B()},E=async(O=!1)=>{if(!p||yn(m)){F();return}const N=Ga(T,g);x(!0);const k=p.map(async M=>{const{market:L}=M,{calcPremium:H}=M.utils,W=m[L];if(!W)return M.priceForAmount=null,N?new Promise(async V=>{await H(ue(.1)).catch(),setTimeout(()=>{M.priceForAmount=null,V()},1700)}):0n;const R=await H(W);return R?(O&&(M.priceForAmount=Xe(R.inUSDC,W)),A(L),R):(I(L),M.priceForAmount=null,0n)}).filter(M=>M),v=(await Promise.all(k)).filter(M=>M),j=v.reduce((M,L)=>M+L.inUSDC,0n);b(yn(m)?null:{inUSDC:j,decomposition:[...v]}),x(!1)};return Ae(()=>{E(!0)},je,[m,p]),f.useEffect(()=>{E()},[l]),f.useEffect(()=>{yn(m)&&F()},[T]),f.useEffect(()=>{b(null),h([])},[a,i,r,o]),t.jsxs("div",{className:"OptionChainModal__payment-panel",children:[t.jsx(wa,{paymentTokenState:e,youPayState:n,isCostLoading:g,isSelectorDisabled:S}),t.jsx(vp,{youPay:T,isCostLoading:g,paymentToken:C}),D&&t.jsx(Va,{})]})},vp=({youPay:e,isCostLoading:n,paymentToken:s})=>{const a=G(),{isConnected:i}=te(),{connectWallet:o}=qt(),r=Q("isLong"),l=Q("isCall"),[,u]=Q("isModalOpenState"),{availableMarkets:p,amountsState:c,errorMarketsState:d,areStrikesLoading:m}=f.useContext(bt),[y]=c,[h,T]=f.useState(null),[b]=d,[g,x]=f.useState(!1),[C,_]=f.useState(!1),S=Q("isDepositedIntoMargin"),D=Q("marginId"),[,I]=Q("isApproveTipShownState"),A=Ge(a,"Exchanger"),B=Ge(a,"MarginOneClick"),P=at((s==null?void 0:s.symbol)??"ETH",S?B:A,(e==null?void 0:e.inPaymentToken)??0n,x),E=ka(`${r?"Long":"Short"} ${l?"Call":"Put"}`,h,[],e,dt,{setIsLoading:_,closeModal:()=>u(!1)},S?D:void 0);f.useEffect(()=>{if(p){const j=[];for(const M in y){const L=y[M];if(L){const H=p.find(W=>W.market===M);j.push({...H,amount:L})}}T(j)}},[y,p]);const O=Ga(e,n);f.useEffect(()=>{O?x(void 0):e?e.inUSDC===0n?x(!1):P.check():x(!1)},[e,n]),f.useEffect(()=>{e&&(x(void 0),P.check())},[S]),f.useEffect(()=>{I(!1)},[y,S]);const N=()=>{if(!i)return!1;if(m||O||U(g)||!(s!=null&&s.balance)||S&&U(D))return ke;if(C)return g?"Submitting...":`Approving ${s.symbol}...`;if(!p)return"Empty strike";if(b.length)return"Invalid input";const M=Object.values(y).every(H=>!H);if(!e||e.inUSDC===0n||M)return"Enter amount";const L=s.balance.inDefaultDecimals;if(L&&L<e.inPaymentToken)return"Insufficient balance"},k=()=>{if(!i)return"Connect Wallet";const j=N();if(j)return j;if(!g){const M=le(e.inPaymentToken,s.isStable);return I(!0),`Approve ${M} ${s.symbol}`}return`${r?"Buy":"Sell"} options`},v=()=>{if(!i){o();return}if(!g){P.approve(_,P.check);return}E()};return t.jsx(z,{isDisabled:N(),onClick:v,children:k()})},Va=()=>{const n=Q("isDepositedIntoMargin")?"Click “Approve” to enable One-Click option trading with a margin account":"Click “Approve” to enable purchasing options in any token";return t.jsx("div",{className:"OptionChainModal__approve-tip",children:n})},Ga=(e,n)=>n||e&&U(e.inPaymentToken),yn=e=>Object.values(e).every(n=>!n),Cp=()=>{const e=Ia();return t.jsx(Sc,{children:t.jsxs("div",{className:"OptionChain",children:[t.jsx(qc,{}),t.jsx(dp,{}),t.jsx(Na,{positions:e})]})})};const Et=e=>{const n=Sa(e),s={};return n.forEach(a=>{s[a.symbol]=a}),s};const ht=({amountStr:e,setAmountStr:n,chosenTokenSymb:s,setChosenTokenSymb:a,tokens:i,maxValueOverride:o=void 0,maxLabelOverride:r=void 0})=>{const l=i.map(y=>({value:y.symbol,label:t.jsx(X,{symbol:y.symbol,isHlight:!0,children:y.symbol})})),u=Uo(i),p=Et(i),c=(o==null?void 0:o[s])??p[s].value,d=le(c,u[s].isStable),m=t.jsx(X,{symbol:s,isHlight:!0,children:d});return t.jsxs("div",{className:"TokenAmountInput",children:[t.jsx("div",{className:"TokenAmountInput__title",children:"Amount"}),t.jsxs("div",{className:"TokenAmountInput__content",children:[t.jsx(en,{value:e,setValue:n,maxValue:c,maxValueDisplayed:m,maxLabel:r,placeholder:"0"}),t.jsx(he,{options:l,defaultValue:s,onChange:y=>{n(""),a(y.value)}})]})]})},cn={repay:Mp,deposit:Sp,withdraw:Ap};function Mp(e,n,s,a,i,o=void 0){const r=be(e,"MarginTrading"),l=Ue(s,a.decimals),u=Gt(s);ge(e,r.repay,[n,a.address,l],{text:`${u} ${a.symbol} were repayed.`,node:t.jsx(it,{value:u,symbol:a.symbol,children:"were repayed."})},i,o)}function Sp(e,n,s,a,i,o){const r=be(e,"MarginTrading"),l=be(e,"MarginOneClick"),u=Ue(s,a.decimals),p=Gt(s);ge(e,a.isETH?l.provideETH:r.provideERC20,a.isETH?[n,{value:u}]:[n,a.address,u],{text:`${p} ${a.symbol} were deposited to your margin account.`,node:t.jsx(it,{value:p,symbol:a.symbol,children:"were deposited to your margin account."})},i,o)}function Ap(e,n,s,a,i,o){const r=be(e,"MarginTrading"),l=Ue(s,a.decimals),u=Gt(s);ge(e,r.withdrawERC20,[n,a.address,l],{text:`${u} ${a.symbol} were withdrawn.`,node:t.jsx(it,{value:u,symbol:a.symbol,children:"were withdrawn."})},i,o)}const wp=()=>{const e=G(),n=rn(),{isCreateModalOpenState:s,isCreatingState:a}=n,{createAccount:i,goToWelcomeModal:o}=n.actions,[r,l]=s,[u]=a,p=[{name:"Create",title:"Create Account",content:t.jsx(jp,{createAccount:i,isCreating:u,callback:()=>d("Enable")})},{name:"Enable",title:"Enable One-Click Trading",content:t.jsx(kp,{callback:()=>d("Deposit")})},{name:"Deposit",content:t.jsx(Dp,{callback:o})}],[c,d]=f.useState(p[0].name),m={};p.forEach(h=>{h.isActive=c===h.name,m[h.name]=h});const y=ft();return f.useEffect(()=>{if(U(y))return;const h=ee(e,"MarginAccountManager"),T=Ge(e,"MarginOneClick");h.isApprovedOrOwner(T,y).then(b=>{b||(d("Enable"),l(!0))})},[y]),t.jsxs(xe,{className:"MarginAccountCreateModal",isOpen:r,setIsOpen:l,children:[t.jsx("h1",{className:"MarginAccountCreateModal__title",children:m[c].title??m[c].name}),t.jsx(ja,{stagesArr:p}),m[c].content]})},jp=({createAccount:e,isCreating:n,callback:s})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Welcome to Sharwa! Follow these simple steps to start using our unique trading products. First, create a margin account. The whole process will take less than 60 seconds!"}),t.jsx(z,{className:"MarginAccountCreateModal__button",onClick:()=>e(s),isDisabled:n,children:n?"Creating...":"Create Margin account"})]}),kp=({callback:e})=>{const n=G(),s=ft(),[a,i]=f.useState(!1),o=()=>{i(!0);const u=be(n,"MarginAccountManager"),p=Ge(n,"MarginOneClick");ge(n,u.approve,[p,s],"One-Click Trading enabled.",i,e)},r=()=>{if(U(s))return ke;if(a)return"Enabling..."},l=()=>{const u=r();return u||"Enable One-Click Trading"};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"To streamline your experience, enable One-Click Trading to reduce the number of transactions you need to sign."}),t.jsx(z,{className:"MarginAccountCreateModal__button",isGreen:!0,isDisabled:!!r(),onClick:o,children:l()})]})},Dp=({callback:e})=>{const[n,s]=f.useState(""),a=G(),i=yt(a),[o,r]=f.useState("USDC"),u=Et(i)[o],p=ft(),[c,d]=f.useState(void 0),[m,y]=f.useState(!1),h=Ge(a,"MarginAccount"),T=at(o,h,K(n),d);f.useEffect(()=>{d(void 0)},[n]),Ae(()=>{d(void 0),T.check()},je,[n]);const b=()=>n===""?"Enter amount":n==="0"?"Insufficient amount":K(n)>u.value?"Insufficient balance":U(c)?ke:m?c?"Depositing...":"Approving...":null,g=()=>{const _=b();return _||(c?"Deposit":"Approve")},x=()=>{y(!0),T.approve(y,()=>{d(void 0),T.check()})},C=()=>{if(!c)x();else{const _=K(n);cn.deposit(a,p,_,u,y,e)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Now, deposit your tokens into your margin account. Remember, when you trade on Sharwa, only the tokens in your margin account are at risk. If your margin account is undergoing liquidation, only the assets in this account are affected."}),t.jsx(Te,{marginValue:15}),t.jsx(ht,{amountStr:n,setAmountStr:s,chosenTokenSymb:o,setChosenTokenSymb:r,tokens:i}),t.jsx(z,{className:"MarginAccountCreateModal__button",isDisabled:!!b(),isGreen:!b()&&!c,onClick:C,children:g()})]})};const Ep="/sf_draft/assets/uniswap-leverage-6599cd28.svg",Ip="/sf_draft/assets/interest-rate-bd5539c1.svg",Pp="/sf_draft/assets/interest-rate_mobile-bff5408a.svg",Bp="/sf_draft/assets/options-a96927ae.svg",Np="/sf_draft/assets/options_mobile-63c68d57.svg",Rp="/sf_draft/assets/options-profit-2b09f575.svg",Lp="/sf_draft/assets/toolkits-6c59efc3.svg",Op="/sf_draft/assets/toolkits_mobile-fb7128d1.svg",Fp="/sf_draft/assets/LINK_circled-d3ed9518.svg",Up=()=>{const e=rn(),{isIntroModalOpenState:n}=e,{skipIntro:s}=e.actions,[a,i]=n,[o,r]=f.useState(0),l=[t.jsx($p,{}),t.jsx(Hp,{}),t.jsx(Wp,{}),t.jsx(qp,{}),t.jsx(Vp,{})];return f.useEffect(()=>{if(a){const u=l.length-1;o>u&&s();const p=setInterval(()=>{const c=o+1;r(c)},10*1e3);return()=>clearInterval(p)}},[a,o]),t.jsxs(xe,{className:"MarginAccountIntroModal",isOpen:a,setIsOpen:i,reset:()=>r(0),children:[t.jsx("div",{className:"MarginAccountIntroModal__content",children:l[o]}),t.jsx("button",{className:"MarginAccountIntroModal__skip-btn",onClick:s,children:"Skip introduction"}),t.jsxs("div",{className:"MarginAccountIntroModal__steps-container",children:[t.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _prev",onClick:()=>r(o-1),disabled:o===0}),t.jsx("div",{className:"MarginAccountIntroModal__steps",children:l.map((u,p)=>{const c=p<=o;return t.jsx("button",{className:w("MarginAccountIntroModal__step",c&&"_passed"),onClick:()=>r(p),children:p+1},p)})}),t.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _next",onClick:()=>r(o+1)})]})]})},$p=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic",children:[t.jsx("dotlottie-player",{id:"MarginAccountIntroModal__animation-1",src:"https://lottie.host/a3afd567-a7f7-4306-ba85-d1c8712283a0/PSgo2GIw16.lottie",mode:"normal",loop:!0,autoplay:!0}),t.jsx("img",{src:Ep,alt:"Uniswap illustration"})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"10x Leverage on Uniswap"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"All long and short positions are routed through Uniswap v3. Traders benefit from the deep liquidity and fair pricing of Uniswap."})]}),Hp=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountIntroModal__pic",children:t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:Pp}),t.jsx("img",{src:Ip,alt:"Interest rate illustration"})]})}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Cheap Leverage"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Sharwa offers lower cost of leverage compared to traditional derivative protocols. This is because traders are supported by liquidity providers who supply up to 10x leverage, rather than trading directly against them."})]}),Wp=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic _options",children:[t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:Np}),t.jsx("img",{src:Bp,alt:"Options Scheme"})]}),t.jsx("div",{className:"_animation_glare",children:t.jsx("img",{src:Rp,alt:"Glaring profit"})})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title _options",children:t.jsx("a",{href:"https://www.hegic.co/",target:"_blank",rel:"noreferrer",children:"American-Style Options"})}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Trade American-style options to effectively hedge your risks. The Margin Account uses the intrinsic value of your option positions as collateral, ensuring you won’t face liquidations, even with 10x leverage, if you’re properly hedged with options."})]}),qp=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"MarginAccountIntroModal__pic _collateral",children:t.jsxs("div",{className:"icon-group _animation_jumping-coins",children:[t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:ks,alt:"USDC logo"})}),t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:ws,alt:"ETH logo"})}),t.jsx("div",{className:"icon-group__item",children:t.jsx("img",{src:js,alt:"WBTC logo"})})]})}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Multi-Collateral"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"The total value of all your tokens in the margin accounts is summed in USDC, allowing you to trade with up to 10x leverage without needing to sell your holdings."})]}),Vp=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginAccountIntroModal__pic _toolkits",children:[t.jsxs("picture",{children:[t.jsx("source",{media:"(max-width: 480px)",srcSet:Op}),t.jsx("img",{src:Lp,alt:"Stop Order graph"})]}),t.jsx("div",{className:"animation-wrapper",children:t.jsx("div",{className:"_animation_glare",children:t.jsx("img",{src:Fp,alt:"Chainlink Token icon"})})})]}),t.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Trading Toolkits"}),t.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Soon, we will offer stop-market orders, trailing stop-market orders, auto delta-hedging, and personalized risk profiles for each margin account. Stay tuned!"})]});const Gp="/sf_draft/assets/trading-4b0d0849.png",Yp=()=>{const e=rn(),{isWelcomeModalOpenState:n}=e,{startTrading:s}=e.actions,[a,i]=n;return t.jsxs(xe,{className:"MarginAccountWelcomeModal",isOpen:a,setIsOpen:i,children:[t.jsx("div",{className:"MarginAccountWelcomeModal__pic",children:t.jsx("img",{src:Gp,alt:"Graphs illustration"})}),t.jsxs("h1",{className:"MarginAccountWelcomeModal__title",children:["You’re ready to start trading ",t.jsx("br",{}),"on Sharwa"]}),t.jsxs("div",{className:"MarginAccountWelcomeModal__text text-inline",children:["Enjoy the benefits of leverage, ",t.jsx("br",{}),"portfolio margining and other features!"]}),t.jsx(z,{className:"MarginAccountWelcomeModal__button",onClick:s,children:"Go to Trade"})]})};const Kp=()=>{const e=Zo();if(!(e!=null&&e.length))return e;const n=sa(e);return[...e,n]},Qp=()=>{const e=Kp();return t.jsxs("div",{className:"MarginPositions",children:[t.jsx("h1",{className:"MarginPositions__title",children:"Margin Account Positions"}),t.jsx(Pa,{positions:e,isLoadingComplete:!U(e)})]})},zp=()=>t.jsx(qo,{children:t.jsxs(Jc,{children:[t.jsx(Xp,{}),t.jsx(Zp,{})]})}),Xp=()=>{var a;const e=Je(),n=St(),s=[{name:"Trading Terminal",to:"/margin/trading"},{name:"Margin Account",to:"/margin/account",isDisabled:!e}];return s.forEach(i=>{n.pathname.endsWith(i.to)&&(i.isActive=!0)}),t.jsxs("div",{className:"MarginPage",children:[t.jsxs("div",{className:"MarginPage__head",children:[t.jsx(qs,{}),(a=e==null?void 0:e.accounts)!=null&&a.length?t.jsx(Zn,{isCreateButtonIncluded:!0}):""]}),t.jsx(Ut,{links:s,type:"border"}),t.jsx(xs,{}),t.jsx(Qp,{})]})},Zp=()=>t.jsxs(t.Fragment,{children:[t.jsx(Up,{}),t.jsx(wp,{}),t.jsx(Yp,{})]});const Ya=f.createContext(null),Ka=f.createContext(null),Qa=({children:e})=>{const[n,s]=ed();return t.jsx(Ya.Provider,{value:n,children:t.jsx(Ka.Provider,{value:s,children:e})})},Jp=()=>f.useContext(Ya),ed=()=>{const[e,n]=f.useReducer(td,{});return[e,n]},td=(e,n)=>{switch(n.type){case"added":{const{asset:s,dataFrequency:a,ohlcvData:i}=n;return e[s]||(e[s]={}),e[s][a]||(e[s][a]=i),{...e}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},rt={SERVER_URL:"https://omni.icarus.tools",LIQUIDITY_DEPTH_PERCENTAGE_RANGE:.025,CHART_DATA_FREQUENCIES:[5*Le*ae,1*Ye*Le*ae,4*Ye*Le*ae,wt(1)],SUPERSEDING_POOLS:{}},Jn={queryOhlcvData:async(e,n,s,a)=>{const i=sd(n,s,a);return hs(e,i)},queryLiquidityData:async(e,n)=>{const s=ad(n);return hs(e,s)},getPriceData:rd,getChartOptions:e=>{var n;return{width:(n=e.current)==null?void 0:n.clientWidth,height:400,rightPriceScale:{borderColor:Dn},layout:{background:{color:Sr},textColor:gt,fontFamily:"Gantari"},grid:{vertLines:{color:os,style:4},horzLines:{color:os,style:4}},crosshair:{vertLine:{color:xt,labelBackgroundColor:ls},horzLine:{color:xt,labelBackgroundColor:ls}},localization:{locale:"en-US",timeFormatter:s=>{const a=s*ae;return Ee(a,"dd MMM yyyy, h:mm a")},priceFormatter:s=>"$"+fe(s,2)},timeScale:{timeVisible:!0,tickMarkFormatter:(s,a)=>{const i=s*ae;return a===2||a===1?Ee(i,"d MMM"):Ee(i,"HH:mm")}}}}},hs=async(e,n)=>{const s=nd(e),a=id(n);return fetch(s,a).then(i=>i.json()).catch(console.log)},nd=e=>{const n=$t[e];if(!n)throw new Error(`Unknown chainId: ${e}`);const s=n.name.toLowerCase();return`${rt.SERVER_URL}/${s}`},sd=(e,n,s,a=void 0)=>(a=a??Date.now(),{jsonrpc:"2.0",method:"cush_ohlcvTradingView",params:[e,n,a-s,a],id:0}),ad=e=>({jsonrpc:"2.0",method:"cush_orderBook",params:[e,0,{max_orders_per_side:10,granularity_index:2}],id:1}),id=e=>({headers:{},body:JSON.stringify(e),method:"POST"});function rd(e){if(!e)return null;const n=()=>{const i=Number(Lt(e).close)-Number(e[0].close),o=i/Number(e[0].close)*100;return{inUSDC:fe(i,We),inPercentage:fe(o,We)}},s=()=>{const i=e.map(o=>fe(Number(o.close),We));return jo(i)},a=()=>{const i=Number(Lt(e).close);return fe(i,We)};return{priceChange:n(),...s(),currentPrice:a()}}const Ts=rt.CHART_DATA_FREQUENCIES[0],od=wt(31),za=(e,n=Ts,s=od)=>{var y;const a=Jp(),i=f.useContext(Ka),[o,r]=f.useState((y=a==null?void 0:a[e])==null?void 0:y[n]),l=G(),u=ee(l,"UniswapFactory"),p=Ds(l,e),c=Ze(e),{error:d,data:m}=Ie(c&&[l,e,n,"useOhlcvForAsset"],async()=>{const h=rt.SUPERSEDING_POOLS[e]??await u.getPool(p,kn(l),_a),T=await Jn.queryOhlcvData(l,h,n,s);if(T!=null&&T.result){const b=q(c);return T.result.candles.push({open:b,high:b,low:b,close:b,time:Date.now()}),T.result.candles.forEach(g=>{g.time=g.time/ae}),T.result.candles}else return console.log((T==null?void 0:T.error)??T),null},{refreshInterval:Ts,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var h;r((h=a==null?void 0:a[e])==null?void 0:h[n])},[e,n]),f.useEffect(()=>{m&&(r(m),i({type:"added",asset:e,dataFrequency:n,ohlcvData:m}))},[m]),d?(console.log(d),null):o},ld=e=>{const n=rt.CHART_DATA_FREQUENCIES[0];return za(e,n,wt(1))},ud=()=>{const[e,n]=an();return t.jsx(Qa,{children:t.jsx(cd,{asset:e,setAsset:n})})},cd=({asset:e,setAsset:n})=>{const s=ld(e),a=Jn.getPriceData(s),i=Wt.map(o=>{const r=Nt(o),l=Nt("USDC");return{value:o,label:t.jsxs("div",{className:"Asset24hChange__selector-option",children:[t.jsxs("div",{className:"Asset24hChange__selector-option-icons",children:[t.jsx("div",{className:"Asset24hChange__selector-option-icon",children:t.jsx("img",{src:r,alt:`${o} icon`})}),t.jsx("div",{className:"Asset24hChange__selector-option-icon",children:t.jsx("img",{src:l,alt:"USDC icon"})})]}),t.jsxs("div",{className:"Asset24hChange__selector-option-name",children:[o,"/USDC"]})]})}});return t.jsxs("div",{className:"Asset24hChange",children:[t.jsx(he,{className:"Asset24hChange__selector",options:i,defaultValue:e,onChange:o=>{n(o.value)}},e),t.jsxs("div",{className:"Asset24hChange__data",children:[t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name tip","data-tooltip-id":"CurrentPriceTooltip",children:"Current Price"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.currentPrice,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Change"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>t.jsx(pd,{assetChangeData:a}),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h High"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.max,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Low"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:de(()=>It(a.min,0),!a)})]}),t.jsxs("div",{className:"Asset24hChange__data-item",children:[t.jsx("div",{className:"Asset24hChange__data-item-name",children:"Interest Rate"}),t.jsx("div",{className:"Asset24hChange__data-item-value",children:Z()})]})]}),t.jsx(dd,{})]})},pd=({assetChangeData:e})=>{const{inPercentage:n}=e.priceChange,s=n>0,a=n<0,i=s?fn.positive:a?fn.negative:"",o=At(e.priceChange.inPercentage,2,!0),r=`${i}${Math.abs(o)}%`;return t.jsx("span",{className:w({positive:s,negative:a,neutral:n===0}),children:r})},dd=()=>t.jsx(ne,{id:"CurrentPriceTooltip",clickable:!0,children:t.jsxs("div",{className:"text-inline",children:["This price is sourced from the ",t.jsx("br",{}),"Uniswap v3 pool. Price data is ",t.jsx("br",{}),"powered by ",t.jsx("a",{href:"https://oku.trade/",target:"_blank",rel:"noreferrer",children:"Oku.Trade"})]})});rt.CHART_DATA_FREQUENCIES[0];const yd=({type:e,chartData:n,chartContainerRef:s,chartOptions:a,seriesOptions:i,className:o,header:r,callback:l=()=>{}})=>(f.useEffect(()=>{if(!n)return;const u=()=>{p.applyOptions({width:s.current.clientWidth})},p=zi(s.current,a);return p[`add${sn(e)}Series`](i).setData(n),window.addEventListener("resize",u),l(p),()=>{window.removeEventListener("resize",u),p.remove()}},[n]),t.jsxs("div",{className:w("App-box","Chart--container",`${o}--container`),children:[r&&t.jsx("div",{className:w("Chart__header",`${o}__header`),children:r}),mt(t.jsx("div",{className:w("Chart",o),ref:s}),!n,t.jsx(ze,{}))]})),md=({chartData:e,chartContainerRef:n,chartOptions:s,seriesOptions:a=fd,className:i,header:o,callback:r=()=>{}})=>t.jsx(yd,{type:"Candlestick",chartData:e,chartContainerRef:n,chartOptions:s,seriesOptions:a,className:i,header:o,callback:r}),fd={priceLineColor:Rt,downColor:ce,wickDownColor:ce,upColor:Re,wickUpColor:Re,borderVisible:!1},bd=()=>{const[e]=an();return t.jsx(Qa,{children:t.jsx(hd,{asset:e})})},hd=({asset:e})=>{const[n,s]=Oe("AssetPriceChart-dataFrequency",rt.CHART_DATA_FREQUENCIES[0]),a=za(e,n),[i,o]=f.useState(null),r=f.useRef(),l=f.useCallback(p=>{if(!p.time){o(null);return}const c=a.find(d=>d.time===p.time);o(c)},[o,a]),u=p=>{p.timeScale().applyOptions({borderColor:Dn}),p.subscribeCrosshairMove(l)};return t.jsx(md,{className:"AssetPriceChart",header:t.jsx(Td,{dataFrequency:n,setDataFrequency:s,candle:i??(a==null?void 0:a[a.length-1])}),chartData:a,chartContainerRef:r,chartOptions:Jn.getChartOptions(r),callback:u})},Td=({dataFrequency:e,setDataFrequency:n,candle:s})=>t.jsxs("div",{className:"AssetPriceChart__header",children:[t.jsx(gd,{dataFrequency:e,setDataFrequency:n}),t.jsx(xd,{candle:s})]}),gd=({dataFrequency:e,setDataFrequency:n})=>{const{CHART_DATA_FREQUENCIES:s}=rt;return t.jsx("div",{className:"AssetPriceChart__data-frequency",children:s.map(a=>{const i=a===e,o=Kt(a),r=Math.floor(a/ae/Le),l=Math.floor(r/Ye),u=o>0?`${o}D`:l>0?`${l}h`:`${r}m`;return t.jsx(z,{className:w("AssetPriceChart__data-frequency-btn",i&&"_chosen"),type:"stroke",onClick:()=>n(a),children:u},a)})})},xd=({candle:e})=>{const n=["open","high","low","close"];if(!e)return null;const s=e.open>e.close;return t.jsx("div",{className:"AssetPriceChart__indicators",children:n.map(a=>{const i=Me(fe(e[a],2));return t.jsxs("div",{className:"AssetPriceChart__indicators-item",children:[t.jsx("span",{className:"AssetPriceChart__indicators-item-name",children:a[0].toUpperCase()}),t.jsx("span",{className:w("AssetPriceChart__indicators-item-value",{negative:s,positive:!s}),children:i})]},a)})})};const _d="/sf_draft/assets/Pashov_Audit_Group-e5d101e4.png",Xa=()=>t.jsxs("a",{className:"AuditStamp",href:"https://github.com/pashov/audits/blob/master/team/pdf/SharwaFinance-security-review.pdf",target:"_blank",rel:"noreferrer",children:[t.jsx("div",{className:"AuditStamp__text",children:"Audited by"}),t.jsx("div",{className:"AuditStamp__logo",children:t.jsx("img",{src:_d,alt:"Pashov Audit Group"})})]});const vd="/sf_draft/assets/Uniswap_circled-4e125cab.svg",$e=()=>{const e=Za();return e===null?null:e==null?void 0:e.data},pn=()=>{const e=Za();return e===null?null:e==null?void 0:e.mutate},Za=()=>{const{isConnected:e,userAddress:n}=te(),s=G(),a=Je(),i=a==null?void 0:a.isLoading,o=ft(),{data:r,error:l,mutate:u}=Ie(e&&!i&&!U(o)&&[n,o,"useMarginAccountData"],async()=>{const p=a.utils.getSelectedAccount()??{},c={id:o,...p},d=Cd(s,o),m=Md(s,o),y=Sd(s,o),h=Ad(s,o),T=wd(s,o);return await Promise.all([d,m,y,h,T]).then(([b,g,x,C,_])=>{c.ratio=b,c.balance=g,c.debt=x,c.fee=C,c.equity=(c.balance??0n)-x,c.poolsData=_}).catch(console.log),c},{refreshInterval:60*ae});if(!i&&(!e||U(o)))return null;if(!(r&&!r.poolsData))return l?(console.log("useMarginAccountData error!",l),null):{data:r,mutate:u}},Cd=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.getMarginAccountRatio(n).catch(console.log);return se(BigInt(a),5)},Md=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.calculateMarginAccountValue(n).catch(console.log);return se(BigInt(a),ut)},Sd=async(e,n)=>{const a=await ee(e,"MarginTrading").callStatic.calculateDebtWithAccruedInterest(n).catch(console.log);return se(BigInt(a),ut)},Ad=async(e,n)=>{if(U(n))return null;const s=ie.map(c=>Lr[c]),a=ie.map(c=>Ds(e,c)),i=ie.map(c=>ee(e,`Pool_${c}`)),o=await Promise.all(i.map(c=>c.getDebtWithAccruedInterest(n).then(BigInt))),r=await Promise.all(i.map(c=>c.portfolioIdToDebt(n).then(BigInt))),l=o.map((c,d)=>{const m=r[d];return c-m});return(await Promise.all(l.map((c,d)=>{const m=se(c,s[d]),y=a[d];return m>0n?Vn(e,y,m):0n}))).reduce((c,d)=>c+d,0n)},wd=async(e,n)=>{const s={},a=ee(e,"MarginAccount"),i=[];return ie.forEach(o=>{const r=J(e,o);s[o]={token:r};const l=ee(e,`Pool_${o}`);i.push(a.getErc20ByContract(n,r.address).then(BigInt).then(u=>{const p=se(u,r.decimals);s[o].amount=p}).catch(console.log),l.interestRate().then(BigInt).then(u=>{const p=se(u,4);s[o].interestRate=p}).catch(console.log),l.getDebtWithAccruedInterest(n).then(BigInt).then(u=>{const p=se(u,r.decimals);s[o].debt=p}).catch(console.log))}),await Promise.all(i),s};const dn=({curRatio:e,estRatio:n})=>t.jsxs("div",{className:"MarginRatioChange",children:[t.jsx(Mt,{ratio:e}),n!==null&&t.jsxs(t.Fragment,{children:[t.jsx(jd,{}),U(n)?t.jsx(ye,{}):t.jsx(Mt,{ratio:n})]})]}),jd=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:t.jsx("path",{d:"M1 3.5C0.723858 3.5 0.5 3.72386 0.5 4C0.5 4.27614 0.723858 4.5 1 4.5V3.5ZM11.3536 4.35355C11.5488 4.15829 11.5488 3.84171 11.3536 3.64645L8.17157 0.464466C7.97631 0.269204 7.65973 0.269204 7.46447 0.464466C7.2692 0.659728 7.2692 0.976311 7.46447 1.17157L10.2929 4L7.46447 6.82843C7.2692 7.02369 7.2692 7.34027 7.46447 7.53553C7.65973 7.7308 7.97631 7.7308 8.17157 7.53553L11.3536 4.35355ZM1 4.5H11V3.5H1V4.5Z",fill:"#747FA6"})}),kd=()=>{var i;const e=Je();let n;const s=e!==null&&(e.isLoading||U(e.accounts)),a=e===null||((i=e.accounts)==null?void 0:i.length)===0;return s?n=t.jsx(ze,{}):a&&(n=t.jsx(on,{})),t.jsx("div",{className:"MarginTradingPanel App-box",children:n??t.jsx(Dd,{})})},Dd=()=>{const e=G(),n=$e(),[s,a]=f.useState(!0),[i,o]=an(),[r,l]=f.useState(""),[u,p]=f.useState(null),[c,d]=f.useState(null),[m,y]=Dt(),[h,T]=f.useState(!1),b=J(e,i),g=K(r),x=J(e,"USDC"),C=ee(e,"ModularSwapRouter"),_=`calculateAmount${s?"In":"Out"}ERC20`,S=async()=>{let N,k;const v=J(e,i),j=K(r);if(s)k=v,N=j;else{const L=ee(e,"ModularSwapRouter");k=J(e,"USDC");const H=await L.callStatic.calculateAmountOutERC20(v.address,k.address,Ne(j,v)).then(BigInt);N=Ke(H,k)}const M=Ct(N,m);nt.queryRatioAfterPositionOpen(e,n,M,k).then(p)},D=async()=>{d(void 0);const N=await I(),v=(s?Ct:ms)(N,m),j=Xe(v,g);d(j)},I=async(N=void 0)=>{const k=Ne(g,b);return await C.callStatic[_](b.address,x.address,k).then(BigInt).then(j=>Ke(j,x)).catch(j=>{console.log("Converting to USDC error:",j),N&&N(!1)})};f.useEffect(()=>{!r||K(r)===0n?(p(null),d(null)):(p(void 0),d(void 0))},[r,m,s,i]),Ae(()=>{!r||K(r)===0n||(S(),D())},je,[r,m,s,i]);const A=[{value:"market",label:"Market"},{value:"stop_market",label:"Stop Market",isDisabled:!0}],B=[{value:"ETH",label:t.jsx(X,{symbol:"ETH",isHlight:!0,children:"ETH"})},{value:"BTC",label:t.jsx(X,{symbol:"BTC",isHlight:!0,children:"BTC"})}],P=()=>{if(U(u))return ke;if(!r)return"Enter amount";if(K(r)===0n)return"Insufficient amount";if(u<=n.ratioCoeffs.red)return"Critical Est.Ratio";if(h)return"Submitting..."},F=()=>{const N=P();return N||`Open ${s?"Long":"Short"}`},E=pn(),O=async()=>{T(!0);const N=s?x:b,k=s?b:x,v=be(e,"MarginOneClick"),j=await I(T),M=s?j:g,H=ms(s?g:j,m),W=Ne(M,N),R=Ne(H,k),Y=()=>{E(),l("")};ge(e,v.borrowSwap,[n.id,N.address,k.address,W,R],{text:`${r} ${b.symbol} was ${s?"bought":"sold"}.`,node:t.jsxs(it,{value:r,symbol:b.symbol,children:["was ",s?"bought":"sold","."]})},T,Y)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"MarginTradingPanel__inputs",children:[t.jsx("div",{className:"MarginTradingPanel__switcher",children:t.jsx(Xn,{isOn:s,setIsOn:a,oppositeLabels:["Long","Short"]})}),t.jsxs("div",{className:"MarginTradingPanel__input",children:[t.jsx("div",{className:"MarginTradingPanel__input-title",children:"Order Type"}),t.jsx("div",{className:"MarginTradingPanel__input-body",children:t.jsx(he,{options:A,defaultOption:A[0]})})]}),t.jsxs("div",{className:"MarginTradingPanel__input",children:[t.jsx("div",{className:"MarginTradingPanel__input-title",children:s?"Long":"Short"}),t.jsxs("div",{className:"MarginTradingPanel__input-body",children:[t.jsx(en,{value:r,setValue:l,placeholder:"0"}),t.jsx(he,{className:"MarginTradingPanel__asset-selector",options:B,defaultValue:i,onChange:N=>o(N.value)},i)]})]})]}),t.jsxs("div",{className:"MarginTradingPanel__footer",children:[t.jsxs("div",{className:"MarginTradingPanel__stats",children:[t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Market"}),t.jsxs("div",{className:"MarginTradingPanel__stat-value",children:[t.jsx("img",{src:vd,alt:"Uniswap logo"}),"UNISWAP"]})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Margin Ratio"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:t.jsx(dn,{curRatio:n==null?void 0:n.ratio,estRatio:u})})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Slippage"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:t.jsx(Kn,{slippage:m,setSlippage:y,title:""})})]}),t.jsxs("div",{className:"MarginTradingPanel__stat",children:[t.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Entry Price"}),t.jsx("div",{className:"MarginTradingPanel__stat-value",children:de(()=>c===null?Z():t.jsx(X,{symbol:"USDC",isHlight:!0,children:le(c,!0)}),U(c))})]})]}),t.jsx(z,{className:"MarginTradingPanel__button",onClick:O,isDisabled:!!P(),children:F()})]})]})},Ed=()=>t.jsxs("div",{className:"MarginTrading",children:[t.jsx(ud,{}),t.jsx(Xa,{}),t.jsx(bd,{}),t.jsx(kd,{})]});const Id="/sf_draft/assets/pointer-7384e3ac.svg",Pd=({isBrief:e})=>{const n=$e(),{ratio:s,ratioCoeffs:a}=n??{},i=U(n);if(n===null)return e?t.jsx(mn,{noData:!0}):null;if(i)return e?t.jsx(mn,{isLoading:!0}):t.jsx(ze,{});const r=s>=vn?300:q(s*100n),l=Math.max(r-100,0)*4,u={left:`${Math.min(l,100)}%`};if(e)return t.jsx(mn,{ratio:s});const p=`${Math.floor(q(a.red)*100)}%`,c=`${Math.floor(q(a.yellow)*100)}%`,d=t.jsx(qa,{});return t.jsxs("div",{className:"MarginLevel",children:[t.jsxs("div",{className:"MarginLevel__head",children:[t.jsx("div",{className:"MarginLevel__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),t.jsx(Mt,{ratio:s})]}),t.jsxs("div",{className:"MarginLevel__indicator",children:[t.jsx("div",{className:"MarginLevel__indicator-segment _low",children:p}),t.jsx("div",{className:"MarginLevel__indicator-segment _medium",children:c}),t.jsx("div",{className:"MarginLevel__indicator-segment _high",children:d}),t.jsx("div",{className:"MarginLevel__indicator-pointer",style:u,children:t.jsx("img",{src:Id,alt:"v"})})]}),t.jsx(Ja,{})]})},mn=({noData:e,isLoading:n,ratio:s})=>t.jsxs("div",{className:"MarginLevelBrief",children:[t.jsx("div",{className:"MarginLevelBrief__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),e?Z():n?t.jsx(ye,{}):t.jsx(Mt,{ratio:s}),t.jsx(Ja,{})]}),Ja=()=>t.jsxs(ne,{id:"MarginLevelTooltip",children:["The margin level is a crucial ",t.jsx("br",{}),"indicator of your margin ",t.jsx("br",{}),"account's health. It helps ",t.jsx("br",{}),"determine how close you are ",t.jsx("br",{}),"to liquidation, which occurs if ",t.jsx("br",{}),"your margin level falls below ",t.jsx("br",{}),"105%.",t.jsx("br",{}),"To calculate the value of your ",t.jsx("br",{}),"collateral and debt, we use ",t.jsx("br",{}),"Chainlink Price Feeds."]}),Bd=()=>t.jsxs("div",{className:"MarginAccountInfo App-box",children:[t.jsx("h1",{className:"MarginAccountInfo__title",children:"Account Info"}),t.jsxs("div",{className:"MarginAccountInfo__accounts-list",children:[t.jsxs("div",{className:"MarginAccountInfo__chosen-account-field",children:[t.jsx("div",{className:"MarginAccountInfo__chosen-account-field-title",children:"Account ID"}),t.jsx("div",{className:"MarginAccountInfo__chosen-account-field-selector",children:t.jsx(Zn,{isSmall:!0})})]}),t.jsx(on,{})]}),t.jsx(Te,{marginValue:20}),t.jsx(Pd,{}),t.jsx(Nd,{})]}),Nd=()=>{const e=$e(),{ratio:n,ratioCoeffs:s}=e??{};if(U(e))return null;const i={"Reduce Positions":1,"Increase Positions":0,deposit:1,repay:1,withdraw:0},o=nt.getRatioClass(n,s),r=o==="_low",l=o==="_medium";return t.jsxs("table",{className:"MarginAccountInfo__actions-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:Object.keys(i).map(u=>t.jsx("th",{children:sn(u)},u))})}),t.jsx("tbody",{children:t.jsx("tr",{children:Object.keys(i).map(u=>{const p=i[u],c=r?!1:l?p:!0;return t.jsx("td",{className:w(!c&&"_denied")},u)})})})]})};const ei="/sf_draft/assets/re-arrow-195ed622.svg",Rd=({setIsRepayModalOpen:e})=>{const n=$e(),{equity:s,debt:a,balance:i,fee:o}=n??{},r=U(n);if(n===null)return null;const l=()=>{e(!0)};return t.jsxs("div",{className:"MarginAccountBalance App-box",children:[t.jsxs("div",{className:"MarginAccountBalance__head",children:[t.jsx("h1",{className:"MarginAccountBalance__title",children:"Account Balance"}),t.jsx("div",{className:w("MarginAccountBalance__value",!r&&"tip"),"data-tooltip-id":!r&&"MarginAccount_BalanceTooltip",children:de(()=>t.jsx(X,{isHlight:!0,children:le(i,!0)}),r)})]}),t.jsxs("div",{className:"MarginAccountBalance__items",children:[t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name tip","data-tooltip-id":"MarginAccount_EquityTooltip",children:"Equity"}),t.jsx("div",{className:"MarginAccountBalance__item-value",children:de(()=>t.jsx(X,{isHlight:!0,children:le(s,!0)}),r)})]}),t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name",children:"Debt"}),t.jsxs("div",{className:"MarginAccountBalance__item-value",children:[de(()=>t.jsx(X,{isHlight:!0,children:le(a,!0)}),r),t.jsxs(z,{className:"MarginAccountBalance__item-button",type:"micro _with-icon",onClick:l,isDisabled:r||!a,children:[t.jsx("img",{src:ei,alt:"Repay"}),"Repay"]})]})]}),t.jsxs("div",{className:"MarginAccountBalance__item",children:[t.jsx("div",{className:"MarginAccountBalance__item-name",children:"Interest & Service Fee"}),t.jsx("div",{className:"MarginAccountBalance__item-value",children:de(()=>t.jsx(X,{isHlight:!0,children:le(o,!0)}),r)})]})]}),t.jsx(Ld,{}),t.jsx(Od,{})]})},Ld=()=>t.jsxs(ne,{id:"MarginAccount_EquityTooltip",children:["Equity is calculated as the ",t.jsx("br",{}),"sum of your collateral, ",t.jsx("br",{}),"unrealized profits from long/",t.jsx("br",{}),"short positions, and the ",t.jsx("br",{}),"intrinsic value of American-",t.jsx("br",{}),"style options, minus your ",t.jsx("br",{}),"debt."]}),Od=()=>t.jsxs(ne,{id:"MarginAccount_BalanceTooltip",children:["This is the total value of your ",t.jsx("br",{}),"margin account (your collateral + ",t.jsx("br",{}),"purchased tokens)."]});const xn="/sf_draft/assets/download-93c01438.svg",Fd="/sf_draft/assets/upload-ab835e79.svg";const Ud=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=G(),[o,r]=f.useState(""),[l,u]=f.useState(null),[p,c]=f.useState(!1),d=yt(i),m=$e(),y=pn();f.useEffect(()=>{!o||K(o)===0n?u(null):u(void 0)},[o]),Ae(()=>{!o||K(o)===0n||h()},je,[o]);const h=async()=>{const _=K(o),S=J(i,s),D=await nt.queryRatioAfterWithdraw(i,m,_,S);u(D)};if(!m)return null;const T=m.id,b={};Object.values(m.poolsData).forEach(_=>{b[_.token.symbol]=_.amount});const g=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":U(l)?ke:l<m.ratioCoeffs.red?"Critical Est.Ratio":p?"Withdrawing...":null,x=()=>{const _=g();return _||"Withdraw"},C=()=>{const _=K(o),S=J(i,s),D=()=>{y(),n(!1)};cn.withdraw(i,T,_,S,c,D)};return t.jsxs(xe,{className:"MarginWithdrawModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Withdraw"}),t.jsx(ht,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:b})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"MarginLevel"}),t.jsx("div",{className:"info-row__value",children:t.jsx(dn,{curRatio:m.ratio,estRatio:l})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!g(),onClick:C,children:x()})]})]})};const $d=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=G(),o=$e(),r=o==null?void 0:o.id,[l,u]=f.useState(""),[p,c]=f.useState(null),[d,m]=f.useState(void 0),[y,h]=f.useState(!1),T=yt(i),b=Et(T),g=b[s],x=pn(),C=Ge(i,"MarginAccount"),_=at(s,C,K(l),m);f.useEffect(()=>{!l||K(l)===0n?c(null):(c(void 0),m(void 0))},[l]),Ae(()=>{m(void 0),!(!l||K(l)===0n)&&(S(),_.check())},je,[l]);const S=async()=>{const F=K(l),E=await nt.queryRatioAfterDeposit(i,o,F,g);c(E)},D=()=>l===""?"Enter amount":l==="0"?"Insufficient amount":K(l)>g.value?"Insufficient balance":U(d)||U(p)?ke:y?d?"Depositting...":"Approving...":null,I=()=>{const F=D();return F||(d?"Deposit":"Approve")},A=()=>{h(!0),_.approve(h,()=>{m(void 0),_.check()})},B=()=>{const F=K(l),E=()=>{x(),n(!1)};cn.deposit(i,r,F,b[s],h,E)},P=()=>{d?B():A()};return t.jsxs(xe,{className:"MarginDepositModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>u(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Deposit"}),t.jsx(ht,{tokens:T,amountStr:l,setAmountStr:u,chosenTokenSymb:s,setChosenTokenSymb:a})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"MarginLevel"}),t.jsx("div",{className:"info-row__value",children:t.jsx(dn,{curRatio:o==null?void 0:o.ratio,estRatio:p})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!D(),onClick:P,children:I()})]})]})};const Hd=({isOpen:e,setIsOpen:n,chosenTokenSymb:s,setChosenTokenSymb:a})=>{const i=G(),o=ft(),[r,l]=f.useState(""),[u,p]=f.useState(void 0),[c,d]=f.useState(void 0),[m,y]=f.useState(!1),h=yt(i),b=Et(h)[s],g=Ge(i,"MarginAccount"),x=at(s,g,K(r),p);f.useEffect(()=>{!r||K(r)===0n?d(null):(d(void 0),p(void 0))},[r]),Ae(()=>{p(void 0),!(!r||K(r)===0n)&&(C(),x.check())},je,[r]);const C=async()=>{const E=K(r),O=await nt.queryRatioAfterRepay(i,_,E,b);d(O)},_=$e(),S=pn();if(!_)return null;const D={};Object.values(_.poolsData).forEach(E=>{D[E.token.symbol]=Gr(E.debt)});const I=()=>r===""?"Enter amount":r==="0"?"Insufficient amount":K(r)>b.value?"Insufficient balance":U(u)||U(c)?ke:m?u?"Repaying...":"Approving...":null,A=()=>{const E=I();return E||(u?"Repay":"Approve")},B=()=>{y(!0),x.approve(y,()=>{p(void 0),x.check()})},P=()=>{const E=K(r),O=J(i,s),N=()=>{S(),n(!1)};cn.repay(i,o,E,O,y,N)},F=()=>{u?P():B()};return t.jsxs(xe,{className:"MarginRepayModal MarginPaymentModal",isOpen:e,setIsOpen:n,reset:()=>l(""),children:[t.jsxs("div",{className:"MarginPaymentModal__body",children:[t.jsx("h1",{className:"MarginPaymentModal__title",children:"Repay"}),t.jsx(ht,{tokens:h,amountStr:r,setAmountStr:l,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:D,maxLabelOverride:"Debt"})]}),t.jsxs("div",{className:"MarginPaymentModal__footer",children:[t.jsx("div",{className:"MarginPaymentModal__stats",children:t.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[t.jsx("div",{className:"info-row__title",children:"Margin Level"}),t.jsx("div",{className:"info-row__value",children:t.jsx(dn,{curRatio:_.ratio,estRatio:c})})]})}),t.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!I(),onClick:F,children:A()})]})]})},_n=["Amount","Interest Rate","Debt"],Wd=({isRepayModalOpen:e,setIsRepayModalOpen:n})=>{const s=$e(),{poolsData:a,isLoading:i}=s??{isLoading:U(s)},o=_e(992),[r,l]=f.useState(!1),[u,p]=f.useState(!1),[c,d]=f.useState(ie[0]);if(U(a))return t.jsx("div",{className:"App-box",children:t.jsx(ze,{})});const m=(y,h)=>{switch(d(h),y){case"repay":{n(!0);break}case"deposit":{l(!0);break}case"withdraw":{p(!0);break}}};return t.jsxs("div",{className:"MarginAccountAssets App-box",children:[i?t.jsx(ze,{}):o?t.jsx(Vd,{poolsData:a,openModal:m}):t.jsx(qd,{poolsData:a,openModal:m}),t.jsx(Ud,{isOpen:u,setIsOpen:p,chosenTokenSymb:c,setChosenTokenSymb:d}),t.jsx($d,{isOpen:r,setIsOpen:l,chosenTokenSymb:c,setChosenTokenSymb:d}),t.jsx(Hd,{isOpen:e,setIsOpen:n,chosenTokenSymb:c,setChosenTokenSymb:d})]})},qd=({poolsData:e,openModal:n})=>t.jsxs("table",{className:"MarginAccountAssets__table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Asset"}),_n.map(s=>t.jsx("th",{children:s},s)),t.jsx("th",{})]})}),t.jsx("tbody",{children:ie.map(s=>{const a=e[s],i=[a.amount,a.interestRate,a.debt];return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(X,{symbol:s,isHlight:!0,children:s})}),i.map((o,r)=>{if(U(o))return Z();const l=_n[r],p=ni(o,l==="Interest Rate",a.token);return t.jsx("td",{children:p},l)}),t.jsx("td",{children:t.jsx("div",{className:"MarginAccountAssets__buttons",children:t.jsx(ti,{openModal:n,asset:s})})})]},s)})})]}),Vd=({poolsData:e,openModal:n})=>t.jsx("div",{className:"MarginAccountAssets__mobile",children:ie.map(s=>{const a=e[s],i=[a.amount,a.interestRate,a.debt],o=s===Lt(ie);return t.jsxs("div",{className:"MarginAccountAssets__mobile-item",children:[t.jsx(X,{className:"MarginAccountAssets__mobile-item-title",symbol:s,isHlight:!0,isLarge:!0,children:s}),t.jsx("div",{className:"MarginAccountAssets__mobile-item-stats",children:i.map((r,l)=>{const u=_n[l],p=l===i.length-1,d=ni(r,u==="Interest Rate",a.token);return t.jsxs(qe.Fragment,{children:[t.jsxs("div",{className:"MarginAccountAssets__mobile-item-stat info-row",children:[t.jsx("div",{className:"info-row__title",children:u}),t.jsx("div",{className:"info-row__value",children:d})]},u),!p&&t.jsx(Te,{marginValue:6})]},u)})}),t.jsx("div",{className:"MarginAccountAssets__mobile-item-buttons",children:t.jsx(ti,{openModal:n,asset:s})}),!o&&t.jsx(Te,{marginValue:20})]},s)})}),ti=({openModal:e,asset:n})=>{const a=$e().poolsData[n];return t.jsxs(t.Fragment,{children:[t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("repay",n),isDisabled:!a.debt,children:[t.jsx("img",{src:ei,alt:"Repay"}),"Repay"]}),t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("deposit",n),children:[t.jsx("img",{src:xn,alt:"Deposit"}),"Deposit"]}),t.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>e("withdraw",n),isDisabled:!a.amount,children:[t.jsx("img",{src:Fd,alt:"Withdraw"}),"Withdraw"]})]})},ni=(e,n,s)=>{const a=n?`${Fe(e*100n)}%`:le(e,s.isStable);return n?a:t.jsx(X,{symbol:s.symbol,isHlight:!0,children:a})},Gd=()=>{const e=Je(),[n,s]=f.useState(!1),{isLoading:a,accounts:i}=e??{},o=!a&&!(i!=null&&i.length);return!e||o?t.jsx("div",{className:"MarginAccount__404",children:t.jsx(on,{})}):t.jsxs("div",{className:"MarginAccount",children:[t.jsx(Bd,{}),t.jsx(Rd,{setIsRepayModalOpen:s}),t.jsx(Wd,{isRepayModalOpen:n,setIsRepayModalOpen:s})]})};const es=()=>{const e=ai();return e===null?null:e==null?void 0:e.data},si=()=>{const e=ai();return e===null?null:e==null?void 0:e.mutate},ai=()=>{const e=G(),{isConnected:n,userAddress:s}=te(),{data:a,error:i,mutate:o}=Ie([s,"usePoolsData"],async()=>{const r={},l=ie.map(async y=>Kd(e,y).then(h=>(r[y]={totalSupplied:h,asset:y},h)).catch(console.log));await Promise.all(l);const u=ie.map(async y=>{if(!n)return;const h=r[y].totalSupplied;return Qd(e,y,s,h).then(([T,b])=>(r[y].userSupplied=T,r[y].userShareBalance=b,T))});await Promise.all(u);const p=ie.map(async y=>zd(e,y).then(h=>(r[y].balance=h,h)));await Promise.all(p),ie.forEach(async y=>{if(!n)return;const h=Xd(y,r);r[y].availableToWithdraw=h});const c=ie.map(async y=>Zd(e,y).then(h=>(r[y].interestRate=h,h))),d=ie.map(async y=>{const h=r[y].balance;return Jd(e,y,h).then(T=>(r[y].utilRate=T,T))}),m=ie.map(async y=>Yd(e,y).then(h=>(r[y].maxCapacity=h,h)));return await Promise.all([...c,...d,...m]),{data:r,mutate:o}},{refreshInterval:60*ae});return i?(console.log(i),null):a},Yd=async(e,n)=>await Tt(e,n).maximumPoolCapacity().then(BigInt).then(i=>Ke(i,n)).catch(console.log),Kd=async(e,n)=>await Tt(e,n).getTotalLiquidity().then(BigInt).then(i=>Ke(i,n)).catch(console.log),Qd=async(e,n,s,a)=>{const i=Tt(e,n),[o,r]=await Promise.all([i.balanceOf(s).then(BigInt).catch(console.log),i.depositShare().then(BigInt).catch(console.log)]);return[o*a/r,o]},zd=async(e,n)=>{const s=Tt(e,n);return await ee(e,n).balanceOf(s.address).then(BigInt).then(o=>Ke(o,n)).catch(console.log)},Xd=(e,n)=>{const s=n[e].userSupplied,a=n[e].balance;return a<s?a:s},Zd=async(e,n)=>{const s=Tt(e,n),[a,i]=await Promise.all([s.interestRate().then(BigInt),s.insuranceRateMultiplier().then(BigInt)]).catch(console.log),o=BigInt(1e5),r=(a*o-a*i)/o;return se(r,5)},Jd=async(e,n,s)=>{const i=await Tt(e,n).netDebt().then(BigInt).then(r=>Ke(r,n)).catch(console.log);return Xe(i,s)},Tt=(e,n)=>ee(e,`Pool_${n}`),ey=({poolAsset:e,chosenPool:n,setChosenPool:s,openSupplyModal:a,openWithdrawModal:i})=>{const o=G(),{isConnected:r}=te(),l=J(o,e),u=e===n,p=`EarnPoolRadio_${e}`,c=es();if(U(c))return t.jsx("div",{className:"App-box",children:t.jsx(ze,{})});if(c===null)return t.jsx("div",{className:"App-box relative",children:t.jsxs(Qe,{children:[e," pool data error"]})});const d=c[e],m=le(d.totalSupplied,l.isStable),y=U(d.userSupplied)?void 0:le(d.userSupplied,l.isStable),h=U(d.availableToWithdraw)?void 0:le(d.availableToWithdraw,l.isStable),T=`${Fe(d.interestRate*100n,2,void 0,!0)}%`,b=`${Fe(d.utilRate*100n,2,void 0,!0)}%`,g=()=>{u||s(e)},x=()=>{g(),a()},C=()=>{g(),i()};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:w("EarnPool","App-box",u&&"_chosen"),children:[t.jsxs("div",{className:"EarnPool__radio",children:[t.jsx("input",{id:p,type:"radio",name:"EarnPool",checked:u,onChange:g}),t.jsx("label",{htmlFor:p})]}),t.jsxs("div",{className:"EarnPool__head",children:[t.jsx("div",{className:"EarnPool__icon",children:t.jsx("img",{src:l.icon_circled,alt:`${l.name} icon`})}),t.jsxs("h1",{className:"EarnPool__title",children:[l.symbol," pool"]})]}),t.jsxs("div",{className:"EarnPool__body",children:[t.jsxs("div",{className:"EarnPool__item _action",children:[t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Total Supplied"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:m})})]}),t.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",isDisabled:!r,onClick:x,children:[t.jsx("img",{src:xn,alt:"Supply"}),"Supply"]})]}),t.jsxs("div",{className:"EarnPool__item _action",children:[t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Your Supplied"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:y??Z()})})]}),t.jsx(Te,{marginValue:0}),t.jsxs("div",{className:"EarnPool__item-stat",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Available to Withdraw"}),t.jsx("div",{className:"EarnPool__item-value",children:t.jsx(X,{isHlight:!0,symbol:l.symbol,children:h??Z()})})]}),t.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",isDisabled:!r,onClick:C,children:[t.jsx("img",{src:xn,alt:"Withdraw"}),"Withdraw"]})]}),t.jsxs("div",{className:"EarnPool__item",children:[t.jsx("div",{className:"EarnPool__item-name tip","data-tooltip-id":"SupplyAPYTooltip",children:"Supply APY"}),t.jsx("div",{className:"EarnPool__item-value",children:T})]}),t.jsxs("div",{className:"EarnPool__item",children:[t.jsx("div",{className:"EarnPool__item-name",children:"Utilization Rate"}),t.jsx("div",{className:"EarnPool__item-value",children:b})]})]})]})})};const ty=e=>{const n=G(),s=J(n,e);return Et([s])[e]},ny=({isOpen:e,setIsOpen:n,chosenPool:s,setChosenPool:a})=>{const i=G(),[o,r]=f.useState(""),[l,u]=f.useState(void 0),[p,c]=f.useState(!1),d=yt(i),m=ty(s),y=es(),h=si(),T=be(i,`Pool_${s}`),b=at(s,T.address,K(o),u);if(f.useEffect(()=>{o&&K(o)!==0n&&u(void 0)},[o]),Ae(()=>{u(void 0),o&&K(o)!==0n&&b.check()},je,[o]),!y)return null;const g=y[s],x=g.maxCapacity-g.totalSupplied,C=le(x,m.isStable),_=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":K(o)>m.value?"Insufficient balance":U(l)?ke:p?l?"Supplying...":"Approving...":null,S=()=>{const B=_();return B||(l?"Supply":"Approve")},D=()=>{c(!0),b.approve(c,()=>{u(void 0),b.check()})},I=async()=>{const B=s==="ETH",P=be(i,"MarginOneClick"),F=K(o),E=Ne(F,s),O=()=>{n(!1),h()};ge(i,B?P.provideETHToPool:T.provide,B?[{value:E}]:[E],{text:`${o} ${s} were supplied to ${s} pool.`,node:t.jsxs(it,{value:o,symbol:s,children:["were supplied to ",s," pool."]})},c,O)},A=()=>{l?I():D()};return t.jsxs(xe,{className:"EarnSupplyModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"EarnSupplyModal__body",children:[t.jsx("h1",{className:"EarnSupplyModal__title",children:"Supply"}),t.jsxs("div",{className:"EarnSupplyModal__info info-row",children:[t.jsx("div",{className:"info-row__title _light tip","data-tooltip-id":"MaxToSupplyTooltip",children:"Max. amount to supply"}),t.jsx("div",{className:"info-row__value",children:t.jsx(X,{symbol:s,isHlight:!0,children:C})})]}),t.jsx(Te,{}),t.jsx(ht,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a})]}),t.jsx(z,{className:"EarnSupplyModal__button",isDisabled:!!_(),onClick:A,children:S()}),t.jsx(sy,{})]})},sy=()=>t.jsxs(ne,{id:"MaxToSupplyTooltip",children:["To maintain stability, we ",t.jsx("br",{}),"currently cap the maximum ",t.jsx("br",{}),"liquidity that can be added to ",t.jsx("br",{}),"each pool. These limits will be ",t.jsx("br",{}),"increased in the near future"]});const ay={calcShareAmount:iy};function iy(e,n){const{userSupplied:s,userShareBalance:a}=n,i=Xe(e,s);return Wr(a,i)}const ry=({isOpen:e,setIsOpen:n,chosenPool:s,setChosenPool:a})=>{const i=G(),[o,r]=f.useState(""),[l,u]=f.useState(!1),p=yt(i),c=es(),d=si();if(!c)return null;const m={};Object.values(c).forEach(b=>{m[b.asset]=b.availableToWithdraw});const y=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":K(o)>c[s].userSupplied?"Insufficient balance":l?"Withdrawing...":null,h=()=>{const b=y();return b||"Withdraw"},T=async()=>{const b=be(i,`Pool_${s}`),g=K(o),x=ay.calcShareAmount(g,c[s]),C=()=>{n(!1),d()};ge(i,b.withdraw,[x],{text:`${o} ${s} were withdrawn from ${s} pool.`,node:t.jsxs(it,{value:o,symbol:s,children:["were withdrawn from ",s," pool."]})},u,C)};return t.jsxs(xe,{className:"EarnSupplyModal",isOpen:e,setIsOpen:n,reset:()=>r(""),children:[t.jsxs("div",{className:"EarnSupplyModal__body",children:[t.jsx("h1",{className:"EarnSupplyModal__title",children:"Withdraw"}),t.jsx(ht,{tokens:p,amountStr:o,setAmountStr:r,chosenTokenSymb:s,setChosenTokenSymb:a,maxValueOverride:m})]}),t.jsx(z,{className:"EarnSupplyModal__button",isDisabled:!!y(),onClick:T,children:h()})]})},oy=()=>{const[e,n]=Oe("EarnPage_pool",ie[0]),[s,a]=f.useState(!1),[i,o]=f.useState(!1),r=()=>a(!0),l=()=>o(!0);return t.jsxs("div",{className:"EarnPage",children:[t.jsxs("div",{className:"EarnPage__header",children:[t.jsx("h1",{className:"EarnPage__title",children:"Earn"}),t.jsx(Xa,{})]}),t.jsx("div",{className:"EarnPage__pools",children:ie.map(u=>t.jsx(ey,{poolAsset:u,chosenPool:e,setChosenPool:n,openSupplyModal:r,openWithdrawModal:l},u))}),t.jsx(ny,{isOpen:s,setIsOpen:a,chosenPool:e,setChosenPool:n}),t.jsx(ry,{isOpen:i,setIsOpen:o,chosenPool:e,setChosenPool:n}),t.jsx(ly,{})]})},ly=()=>t.jsx(ne,{id:"SupplyAPYTooltip",children:t.jsxs("div",{children:["Supply APY refers to the ",t.jsx("br",{}),"Interest Rate that is earned ",t.jsx("br",{}),"when staking USDC"]})}),uy=()=>{const e=St(),n=_s();return f.useEffect(()=>{e.pathname.endsWith("options")&&n("/options/builder"),e.pathname.endsWith("margin")&&n("/margin/trading")},[e.pathname]),t.jsxs(Ci,{children:[t.jsxs(He,{path:"/options",element:t.jsx(gl,{}),children:[t.jsx(He,{path:"builder",element:t.jsx(Cc,{})}),t.jsx(He,{path:"option-chain",element:t.jsx(Cp,{})})]}),t.jsxs(He,{path:"/margin",element:t.jsx(zp,{}),children:[t.jsx(He,{path:"trading",element:t.jsx(Ed,{})}),t.jsx(He,{path:"account",element:t.jsx(Gd,{})})]}),t.jsx(He,{path:"/earn",element:t.jsx(oy,{})}),t.jsx(He,{path:"*",element:t.jsx(Mi,{to:Br,replace:!0})})]})};const cy="/sf_draft/assets/Discord-f7d998b5.svg",py="/sf_draft/assets/Gitbook-c728118d.svg",dy="/sf_draft/assets/Github-d50e83d6.svg",yy="/sf_draft/assets/Mirror-095740c8.svg",my="/sf_draft/assets/Dune-cc12c29c.svg",fy="/sf_draft/assets/Twitter-5cfdd2f4.svg",by=()=>{const e=[{name:"Discord",icon:cy,url:"https://discord.gg/5DGZ7rzSfS"},{name:"Gitbook",icon:py,url:"https://docs.sharwa.finance/"},{name:"Github",icon:dy,url:"https://github.com/SharwaFinance"},{name:"Mirror",icon:yy,url:"https://mirror.xyz/sharwa-finance.eth"},{name:"Dune",icon:my,url:"https://dune.com/sharwa_finance/aggregator"},{name:"Twitter",icon:fy,url:"https://twitter.com/SharwaFinance"}];return t.jsx("footer",{className:"Footer",children:t.jsxs("div",{className:"Footer__content _container",children:[t.jsx(vs,{}),t.jsx("div",{className:"Footer__smedia-items",children:e.map(n=>t.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:n.url,children:t.jsx("img",{src:n.icon,alt:`${n.name} logo`})},n.name))})]})})};const hy=({children:e})=>t.jsx("div",{className:"GlobalStickyMessage",children:e}),Ty=({children:e})=>t.jsx(xr,{children:t.jsx(go,{children:t.jsx(vc,{children:t.jsx(Uu,{children:e})})})}),gy=()=>t.jsxs("div",{className:"Tooltips",children:[t.jsx(ne,{id:"Tooltip_default",place:"bottom-start"}),t.jsx(ne,{id:"Tooltip_bottom",place:"bottom"}),t.jsx(ne,{id:"Tooltip_top",place:"top"}),t.jsx(ne,{id:"Tooltip_Asset",hasDelay:!1,place:"bottom"}),t.jsx(ne,{id:"Tooltip_Expiration",place:"bottom-end"}),t.jsx(ne,{id:"Tooltip_MarketInfo",place:"bottom-start"})]});function xy(){const{chain:e}=fi(),{isConnected:n,userAddress:s}=te(),a=()=>t.jsxs(qe.Fragment,{children:[t.jsx(kr,{}),t.jsx("main",{className:"_container",children:t.jsx(uy,{})}),t.jsx(by,{}),t.jsx(hy,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]},n),i=()=>t.jsx(Pr,{chainId:e.id});return e!=null&&e.unsupported?i():a()}function _y(){return t.jsx(Ii,{fallbackRender:null,children:t.jsxs(t.Fragment,{children:[t.jsx(Dr,{}),t.jsx(gy,{}),t.jsx(mi,{config:gr(),children:t.jsx(oi,{children:t.jsx(Ty,{children:t.jsx(xy,{})})})})]})})}ii.createRoot(document.getElementById("root")).render(t.jsx(qe.StrictMode,{children:t.jsx(_y,{})}));
