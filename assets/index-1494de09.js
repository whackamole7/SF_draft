import{j as e,r as f,a as Ge}from"./node_modules/react-90d84203.js";import{a as ua,c as Ps}from"./node_modules/react-dom-85b864ba.js";import{L as Ns,H as Bs}from"./node_modules/react-router-dom-c36c90a0.js";import{c as A}from"./node_modules/classnames-58e405e9.js";import{c as Rs,u as Ls,a as Os,b as Fs,d as G,e as Us,f as $s,W as Hs,g as Ws}from"./node_modules/wagmi-1368f1fa.js";import{p as qs,I as Vs,q as Gs,r as Ys,t as Ks,u as bn}from"./node_modules/@wagmi-69ffc3f1.js";import{Q as Tn,k as Qs,h as zs}from"./node_modules/react-toastify-935b52fd.js";import{b as Tt,O as ca,a as pa,d as Xs,e as qe,f as Zs}from"./node_modules/react-router-82445d4b.js";import{u as Js,a as ei,b as ti,c as je,d as ni,e as De}from"./node_modules/react-use-bc3311ea.js";import{S as ai,c as si}from"./node_modules/react-select-51dfe5cb.js";import{W as ii}from"./node_modules/react-tooltip-fde9db0c.js";import{E as ri}from"./node_modules/react-error-boundary-75bb9c52.js";import{R as hn}from"./node_modules/react-modal-7b824e63.js";import{i as H,u as Ue}from"./node_modules/swr-4fa31563.js";import{B as It,A as oi,W as li,C as Pt,y as ui,z as ci,D as pi}from"./node_modules/@ethersproject-bf7bf4ae.js";import{_ as di}from"./node_modules/react-fast-marquee-a0c5ffcb.js";import{I as yi}from"./node_modules/react-icons-22a086b9.js";import{f as we}from"./node_modules/date-fns-003c5fae.js";import{A as mi,a as fi}from"./node_modules/@szhsin-f545df6e.js";import{r as bi}from"./node_modules/swiper-4105a6d8.js";import{u as Ti}from"./node_modules/ethers-1b4b58d6.js";import{S as hi}from"./node_modules/rc-slider-b79f222d.js";import{R as gi,A as xi,X as _i,Y as vi,T as Ci,a as Mi,b as qn,C as Si}from"./node_modules/recharts-3a81bad4.js";import"https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs";import{T as Ai}from"./node_modules/lightweight-charts-068b394f.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-19585569.js";import"./node_modules/use-sync-external-store-d9fdebd1.js";import"./node_modules/eventemitter3-3e2fdae4.js";import"./node_modules/zustand-33f96c56.js";import"./node_modules/@noble-6164e8b7.js";import"./node_modules/isows-b4181a00.js";import"./node_modules/vite-plugin-node-polyfills-daa009c6.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/copy-to-clipboard-2c58613e.js";import"./node_modules/toggle-selection-93f4ad84.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/@babel-0a888fcc.js";import"./node_modules/@emotion-7c24be43.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-f7f26ffc.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/prop-types-63f5e6e2.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-9d64241e.js";import"./node_modules/bech32-7c6d7f34.js";import"./node_modules/js-sha3-43eb1fb4.js";import"./node_modules/bn.js-7d9c8149.js";import"./node_modules/hash.js-6ee91aa2.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-0943c707.js";import"./node_modules/scrypt-js-e7ebb268.js";import"./node_modules/react-transition-state-e386e7d4.js";import"./node_modules/rc-util-f4edc9bb.js";import"./node_modules/react-resize-detector-b29ac57a.js";import"./node_modules/lodash-8d16cd1b.js";import"./node_modules/react-smooth-c53f2ee1.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-324f79d2.js";import"./node_modules/css-unit-converter-9e08bb2c.js";import"./node_modules/fancy-canvas-250c9c40.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();const wi="/sf_draft/assets/Logo-258738bb.svg",da=({className:t})=>e.jsx("div",{className:A("Logo",t),children:e.jsx("a",{className:"Logo__link",href:"/index.html",children:e.jsx("img",{src:wi,alt:"Sharwa.Finance"})})});const Nt=({className:t,links:n,type:a})=>{const s=A(t,a&&`_${a}`);return e.jsx("div",{className:A("Links",s),children:n.map((i,o)=>{var p;const r=A("Links__item",i.isActive&&"active");return((p=i.to)==null?void 0:p.startsWith("http"))?e.jsx("a",{className:r,href:i.to,rel:"noreferrer",target:"_blank",children:i.name},i.to):e.jsx(Ns,{to:i.to,className:r,disabled:i.isDisabled,onClick:i.isDisabled&&(c=>c.preventDefault()),children:i.name},i.to??o)})})};const ya=t=>{const[n,a]=f.useState(!1),s=f.useCallback(()=>{document.removeEventListener("click",s),a(!1),t&&t()},[]);return{isOpen:n,openPopup:()=>{n||(a(!0),setTimeout(()=>{document.addEventListener("click",s)},10))},closePopup:s}},ji="/sf_draft/assets/wallet-8f98d05f.svg",ma="/sf_draft/assets/link-597331d6.svg",ki="/sf_draft/assets/cross_white-42eb5050.svg",Di="/sf_draft/assets/Arbitrum-299bccbf.svg",Ei="/sf_draft/assets/Arbitrum-299bccbf.svg",ve=42161,gn=10,xn=[ve],Bt={[ve]:{name:"Arbitrum",icon:Di},[gn]:{name:"Optimism",icon:Ei,isDisabled:!0}},Ii=t=>{var a;let n=t.reason??t.message;return n==="Internal JSON-RPC error."&&(n=(a=t.data)==null?void 0:a.message),n},Pi=t=>t?t.includes("User rejected the request")?"User rejected the request.":t.includes("user rejected transaction")?"User rejected transaction.":t.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":t.includes("Connector already connected")?"Wallet is already connected.":t.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":t.includes("Too little received")?"Slippage set too low. Please consider increasing it for successful strategy purchase.":t:"Unknown error",Me=t=>{if(typeof t!="bigint")throw new TypeError(`Invalid BigInt: ${t}`)},fa=t=>{if(typeof t!="number"&&typeof t!="string")throw new TypeError(`Invalid amount: ${t}`)},Ni=t=>{if(typeof t!="string")throw new TypeError(`Invalid String: ${t}`)},Bi=(t,n,a)=>{n=ba(n);const s=Ta(t)+"/tx/"+a;console.log(n.text,`
`,s),Tn.success(e.jsxs("div",{children:[e.jsx("div",{children:n.node}),e.jsx("br",{}),a&&e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},ba=t=>{if(typeof t=="string"){const n=t;t={text:n,node:n}}return t},Ri=t=>{t=ba(t),console.log(t.text),Tn.success(t.node)},mt=(t,n)=>{const a=Ii(t),s=Pi(a);console.error(t),Tn.error(e.jsx("div",{children:s})),n&&n(!1)},Ee=(t,n,a=[],s,i,o)=>(i&&i(!0),n(...a).then(r=>{console.log("Submitting:",r),r.wait().then(l=>{typeof s=="function"&&(s=s(l)),Bi(t,s,r.hash),i&&i(!1),o&&o(l)},l=>{mt(l,i)})},r=>{mt(r,i)})),Li=()=>{const t=[Gs];if(t.length!==xn.length)throw new Error("Invalid number of wagmi chains.");const{chains:n,publicClient:a,webSocketPublicClient:s}=qs(t,[Ys()]);return Rs({autoConnect:!0,publicClient:a,webSocketPublicClient:s,connectors:[new Vs({chains:n,options:{name:"Injected",shimDisconnect:!0}})]})},Ta=t=>{switch(t){case ve:return"https://arbiscan.io";case gn:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}};const z=f.forwardRef(function({children:n,className:a,style:s,isDisabled:i,isGreen:o,onClick:r,type:l},u){const p=A(a,l&&`Button_${l}`,o&&"_green"),c=l==="complex";return e.jsx("button",{className:A("Button",p),ref:u,disabled:i,onClick:r,"data-text":n,style:s,children:c?e.jsx("span",{children:n.toString()}):n})}),ha=f.createContext(null),Oi=({children:t})=>{const{godEyeAddress:n}=Ui();return e.jsx(ha.Provider,{value:n,children:t})},Fi="AEZAKMI=",ne=()=>{var i;const t=f.useContext(ha),{address:n,isConnected:a}=Ls();return{userAddress:(i=t??n)==null?void 0:i.toLowerCase(),isConnected:a}},Ui=()=>{const[t,n]=f.useState(),a=Tt(),s=o=>{n(o),console.log("GOD EYE MODE ENABLED:",o)},i=o=>{n(null),console.log(`GOD EYE MODE DISABLED${o?` (${o})`:""}`)};return f.useEffect(()=>{const o=a.pathname.split("/"),r=o[o.length-1];if(r.startsWith(Fi)){const l=r.split("=")[1];Ks(l)?s(l):i("Invalid wallet address")}},[a.pathname]),{godEyeAddress:t}};function Rt(){const{connect:t,connectors:n}=Os({onError:i=>{mt(i)}}),{disconnect:a}=Fs(),s=n[0];return{connectWallet:()=>t({connector:s}),disconnectWallet:a}}const $i=()=>{const{isOpen:t,openPopup:n,closePopup:a}=ya(),s=A(t&&"open"),i=G(),{isConnected:o,userAddress:r}=ne(),{connectWallet:l,disconnectWallet:u}=Rt(),[,p]=Js(),c=m=>m.slice(0,9)+"..."+m.slice(-15),d=()=>e.jsx(z,{type:"complex",onClick:l,children:"Connect Wallet"}),y=()=>e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"Wallet__header",onClick:()=>{n(),p(r)},children:e.jsxs("div",{className:"Wallet__address",children:[e.jsx("img",{src:ji,alt:"Wallet icon"}),e.jsx("span",{children:c(r)})]})}),e.jsxs("div",{className:"Wallet__body",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:a,children:e.jsx("img",{src:ki,alt:"x"})}),e.jsxs("a",{className:"Wallet__link",href:`${Ta(i)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[e.jsx("img",{src:ma,alt:"external link"}),e.jsx("span",{children:"View on explorer"})]}),e.jsx("div",{className:"Wallet__inner-address",children:"("+c(r)+")"}),e.jsx(z,{className:"Wallet__button",onClick:u,children:"Disconnect wallet"})]})]});return e.jsx("div",{className:A("Wallet",s),children:o?y():d()})};const Hi=()=>e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 3L5 5.73504L9 3",stroke:"white",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),fe=({className:t,options:n,defaultValue:a,defaultOption:s,isDisabled:i,onChange:o,iconNode:r,iconTextNode:l,...u})=>{const p=r||l,c=!n.length,d=({children:T,...b})=>e.jsxs(si.Control,{...b,children:[r&&e.jsx("div",{className:"Selector__icon",children:r}),l&&e.jsx("div",{className:"Selector__icon Selector__icon_text",children:l}),T]}),y=T=>{let b;const g=v=>v.value===T;return n.find(v=>v.options)?n.forEach(v=>{if(b)return;b=(v.options??[v]).find(g)}):b=n.find(g),b},m=A(t,p&&"Selector_with-icon"),h=t==null?void 0:t.split(" ")[0];return e.jsx("div",{className:A("Selector__wrapper",h&&`${h}-wrapper`),"data-tooltip-id":c&&"Tooltip_bottom","data-tooltip-content":c?"No options":"",place:"bottom-end",children:e.jsx(ai,{...u,options:n,defaultValue:s??y(a),onChange:o,className:A("Selector",m),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:T,innerProps:b})=>e.jsx("div",{ref:T,...b,className:"Selector__indicator Selector__dropdown-indicator",children:e.jsx(Hi,{})}),Control:d},isDisabled:c||i})})};const Le="#46956A",re="#C75E4B",Vn="#D99445",St="#6988FF",pt="#747FA6",Gn="rgba(58, 68, 102, 0.5)",dt="#3A4466",Yn="#181A3C",Wi="#0D0F29",_n="rgba(56, 66, 99, 0.25)",qi="≈",cn={positive:"+",negative:"–",neutral:""},ee=({children:t,hasDelay:n=!0,...a})=>e.jsx(ii,{place:"bottom-start",delayShow:n?150:0,delayHide:n?150:0,border:`1px solid ${_n}`,...a,children:t}),ga=()=>{const{switchNetworkAsync:t}=Us();return n=>{if(typeof n!="number"&&typeof n!="string")throw new TypeError(`Invalid chainId type: ${n} (${typeof n})`);const a=Bt[n].name;t(n).then(()=>{Ri(`Network switched to ${a} (${n})`)},s=>{mt(s)})}},Vi=()=>{const t=G(),n=ga(),a=xn.map(i=>{const{name:o,icon:r,isDisabled:l}=Bt[i];return{value:i,label:e.jsxs("div",{className:"flex gap-x-7",children:[e.jsx("img",{src:r,alt:`${o} icon`}),e.jsx("span",{children:o})]}),isCurrent:i===t,isDisabled:l}}),s=a.find(i=>i.isCurrent);return e.jsxs("div",{className:"NetworkSwitcher",children:[e.jsx(fe,{options:a,value:s,onChange:i=>{n(i.value)},isDisabled:!0}),e.jsx(ee,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},Gi=()=>{const{isConnected:t}=ne();return e.jsxs("div",{className:"CryptoGateway",children:[t&&e.jsx(Vi,{}),e.jsx($i,{})]})},Yi=()=>{const t=Tt(),n=[{name:"Option Trading",to:"/options"},{name:"Margin Trading",to:"/margin"},{name:"Earn",to:"/earn"}];return n.forEach(a=>{t.pathname.startsWith(a.to)&&(a.isActive=!0)}),e.jsxs("header",{className:"Header _container",children:[e.jsx(da,{}),e.jsx(Nt,{links:n}),e.jsx(Gi,{})]})};const Ki=()=>{const t=zs({enter:"jellyIn",exit:"jellyOut"});return e.jsx(Qs,{limit:3,transition:t,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const Qi=300,zi=t=>{const n=ei();f.useEffect(()=>{const a=window.innerWidth>1025?n:0;t?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${a}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},Qi)},[t,n])};hn.setAppElement("#root");hn.defaultStyles={};const Kn=300,Se=({children:t,className:n,isOpen:a,setIsOpen:s,isObligatory:i,reset:o})=>(zi(a),f.useEffect(()=>{!a&&o&&setTimeout(o,Kn)},[a]),e.jsx(hn,{className:A(n,"App-box"),isOpen:a,onRequestClose:()=>{i||s(!1)},overlayElement:(r,l)=>e.jsxs("div",{...r,children:[l,!i&&e.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:Kn,children:t})),Xi=t=>{const{chainId:n}=t,[a]=f.useState(!0),s=ga();return e.jsxs(Se,{className:"UnsupportedChainErrorModal",isOpen:a,isObligatory:!0,children:[e.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",n," is not supported."]}),e.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:xn.map(i=>{const o=Bt[i],{name:r,icon:l,isDisabled:u}=o;return e.jsxs(z,{isDisabled:u,type:"stroke",onClick:()=>{s(i)},children:[e.jsx("img",{src:l,alt:`${r} icon`}),"Switch to ",r]},i)})})]})},Zi="/margin",Ie=600,Pe="Please, wait...";const xa="/sf_draft/assets/graph-b6757e0e.svg",Ji="/sf_draft/assets/ETH-fb1e5539.svg",_a="/sf_draft/assets/ETH_circled-dc6cb60f.svg",er="/sf_draft/assets/BTC-b739bd63.svg",tr="/sf_draft/assets/WETH-2ba67e25.svg",nr="/sf_draft/assets/WBTC-f0287338.svg",va="/sf_draft/assets/WBTC_circled-48bbc65b.svg",ar="/sf_draft/assets/LINK-728e8697.svg",sr="/sf_draft/assets/ARB-fc2e28d1.svg",ir="/sf_draft/assets/GMX-f911f5cf.svg",rr="/sf_draft/assets/MAGIC-5214f6ce.svg",Qn="/sf_draft/assets/USDC-5a7f3d86.svg",Ca="/sf_draft/assets/USDC_circled-cda21ca8.svg",or="/sf_draft/assets/USDT-2e53b5e9.svg",lr="/sf_draft/assets/DAI-b460716b.svg",Xe={[ve]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",oracleAddress:"0x639fe6ab55c921f74e7fac1ee960c0b6293ba612",url:"https://www.coingecko.com/en/coins/ethereum",isAsset:!0,isETH:!0,icon:Ji,icon_circled:_a,isSwappable:!0,isWrappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",oracleAddress:"0x6ce185860a4963106506c203335a2910413708e9",url:"https://www.coingecko.com/en/coins/bitcoin",isAsset:!0,icon:er,isWrappable:!0},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:tr,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:nr,icon_circled:va,isSwappable:!0},{name:"Chainlink Token",symbol:"LINK",decimals:18,address:"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4",oracleAddress:"0x86e53cf1b870786351da77a57575e79cb55812cb",url:"https://www.coingecko.com/en/coins/chainlink",icon:ar},{name:"Arbitrum Token",symbol:"ARB",decimals:18,address:"0x912CE59144191C1204E64559FE8253a0e49E6548",oracleAddress:"0xb2a824043730fe05f3da2efafa1cbbe83fa548d6",url:"https://www.coingecko.com/en/coins/arbitrum",icon:sr},{name:"GMX Token",symbol:"GMX",decimals:18,address:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",oracleAddress:"0xdb98056fecfff59d032ab628337a4887110df3db",url:"https://www.coingecko.com/en/coins/gmx",icon:ir},{name:"MAGIC",symbol:"MAGIC",decimals:18,address:"0x539bdE0d7Dbd336b79148AA742883198BBF60342",oracleAddress:"0x47e55ccec6582838e173f252d08afd8116c2202d",url:"https://www.coingecko.com/en/coins/magic",icon:rr},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:lr,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:Qn,icon_circled:Ca,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:Qn,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:or,isSwappable:!0,isStable:!0}]},At={},wt={},zn=Object.keys(Xe);for(let t=0;t<zn.length;t++){const n=zn[t];At[n]={},wt[n]={};let a=Xe[n];for(let s=0;s<a.length;s++){const i=a[s];i.address=i.address.toLowerCase(),At[n][i.symbol]=i,wt[n][i.address]=i}}const Lt={};for(let t=0;t<Xe[ve].length;t++){const n=Xe[ve][t];Lt[n.symbol]=n.decimals}const Ot=Xe[ve].filter(t=>t.isAsset).map(t=>t.symbol),Z=(t,n)=>{if(!At[t])throw new Error(`No tokens found for chainId ${t}`);const s=At[t][n];if(!s)throw new Error(`Incorrect symbol "${n}" for chainId ${t}`);return s},Xn=(t,n)=>{if(!wt[t])throw new Error(`No tokens found for chainId ${t}`);const s=wt[t][n.toLowerCase()];if(!s)throw new Error(`Incorrect address "${n}" for chainId ${t}`);return s},vn=(t,n)=>Z(t,n).address,ur=t=>{const n=Xe[t];if(!n)throw new Error(`No tokens found for chainId ${t}`);return n.filter(s=>s.isSwappable)},Ft=t=>Z(t,"USDC").address,jt=t=>Z(ve,t).icon;const K=({className:t,children:n,isLarge:a,symbol:s="USDC",isHlight:i,style:o,...r})=>{const l=G(),u=Z(l,s).icon,p=n,c=A(i&&"_hlight",a&&"_large",t);return e.jsxs("div",{className:A("Currency",c),style:o,...r,children:[e.jsx("img",{src:u,alt:`${s} icon`}),e.jsx("span",{children:p})]})},ae=18,Zn=18,Jn=8,Cn=6,cr=8,Ve=6,pr={ETH:Zn,WETH:Zn,BTC:Jn,WBTC:Jn,USDC:Cn},Ma=2,Sa=4,Te=(t,n=",")=>{fa(t);const a=t.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),a.join(".")},dr=t=>{if(fa(t),!Aa(t))return 0;const n=t.toString(),a=n.indexOf("."),s=n.match(/[1-9]/)[0];return n.indexOf(s,a)-a},ht=(t,n=0,a=!1)=>{if(!Aa(t))return t;let s=t.toString(),i=s;const o=s.indexOf(".");if(s.length-o-1>n&&(i=ea(t,n),a&&Number(i)===0)){const l=dr(t);i=ea(t,l)}return i},Aa=t=>t.toString().indexOf(".")!==-1,wa=(t,n)=>{let a=t.toString();const s=a.indexOf("."),i=s!==-1,o=i?a.length-s-1:0;return o<n&&(a+=+i?"":".",a+="0".repeat(n-o)),a},yr=t=>{const n=t.toString();return n.indexOf(".")!==-1?parseFloat(n):t},mr=t=>{const n=t.toString(),[a,s]=n.split(".");return s==="0".repeat(s==null?void 0:s.length)?a:n},fr=(t,n)=>{var i;let a=t.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((i=a.match(/\./g))==null?void 0:i.length)>1&&(a=(r=>r.replace(/\.$/,""))(a)),a=ht(a,n?0:Ve),a},it=(t,n,a)=>Te(fr(t,a),n),Ne=(t,n=",")=>(Ni(t),Number(t.split(n).join(""))),ea=(t,n=0)=>Math.floor(t*10**n)/10**n,ce=(t,n=0)=>Math.round(t*10**n)/10**n,br=(t,n=0)=>Math.ceil(t*10**n)/10**n,$=(t,n=ae,a)=>{Me(t);let s=Number(t)/10**n;return H(a)||(s=ce(s,a)),String(s).includes("e")?0:s},Ut=(t,n)=>(Me(t),t*BigInt(10**n)),Mn=(t,n)=>(Me(t),t/BigInt(10**n)),oe=(t,n=ae)=>{const a=Math.min(Ve,n),s=Math.round(Number(t)*10**a);return Ut(BigInt(s),n-a)},te=(t,n=Ma,a=ae,s=!1)=>{Me(t);let i=$(t,a);return i=ht(i,n),i=wa(i,n),s||(i=mr(i)),i=Te(i),String(i)},Ze=(t,n=Sa,a=ae,s)=>{Me(t);let i=$(t,a);return i=ht(i,n,s),i=yr(i),i=Te(i),String(i)},me=(t,n,a=n?Ma:Sa,s=ae)=>(Me(t),(n?te:Ze)(t,a,s,!n)),ja=(t,n,a)=>{Me(t);const s=a-n;return(s<0?Mn:Ut)(t,Math.abs(s))},ie=(t,n)=>ja(t,n,ae),Fe=(t,n)=>ja(t,ae,n),Sn=(t,n,a=ae)=>{Me(t);const s=$(t,a)*n;return oe(s,a)},ot=(t,n,a=ae)=>(t=Ut(t,a),t/n),Tr=(t,n,a=ae)=>{const s=t*n;return Mn(s,a)},rt=t=>(Me(t),t<0n?-t:t),hr=(t,n,a=ae)=>{Me(t);const s=a-n,i=Mn(t,s);return Ut(i,s)},gr=(t,n=0,a=ae)=>oe(ce($(t,a),n),a),xr=(t,n=Ve,a=ae)=>{let s=$(t,a);return s===0&&t!==0n&&(s=+`0.${"0".repeat(n-1)}1`),oe(br(s,n),a)},_r=t=>{if(typeof t!="object")throw new Error(`Invalid bigNumberData: ${t}`);const n={};for(const a in t){let s=t[a];It.isBigNumber(s)&&(s=s.toBigInt()),n[a]=s}return n},Q=t=>{const n=Ne(t);return oe(n)},$t=t=>{const n=$(t);return it(n)},vr="/sf_draft/assets/url-c5832e95.svg",Cr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Mr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Sr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"},{internalType:"address",name:"_marginAccountStorage",type:"address"},{internalType:"contract ERC20",name:"_baseToken",type:"address"},{internalType:"contract ERC20",name:"_poolToken",type:"address"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"},{internalType:"uint256",name:"_poolCapacity",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"}],name:"PRBMath_MulDiv18_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256",name:"denominator",type:"uint256"}],name:"PRBMath_MulDiv_Overflow",type:"error"},{inputs:[{internalType:"uint256",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Convert_Overflow",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Exp2_InputTooBig",type:"error"},{inputs:[{internalType:"UD60x18",name:"x",type:"uint256"}],name:"PRBMath_UD60x18_Log_InputTooSmall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDebtTokens",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountAddedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountDepositPoolTokens",type:"uint256"}],name:"Provide",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountRepayDebtTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accruedInterest",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newInsurancePool",type:"address"}],name:"UpdateInsurancePool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"UpdateInsuranceRateMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalLiquidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestRate",type:"uint256"}],name:"UpdateInterestRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"UpdateMaximumBorrowMultiplier",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"UpdateMaximumPoolCapacity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"liquidityProvider",type:"address"},{indexed:!1,internalType:"uint256",name:"amountBurnedShareTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountWithdrawPoolTokens",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockNumberDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"borrowingBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"debtSharesSum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"checkTime",type:"uint256"}],name:"getDebtWithAccruedInterestOnTime",outputs:[{internalType:"uint256",name:"debtByPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalLiquidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"insuranceRateMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"interestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumBorrowMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maximumPoolCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"netDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolToken",outputs:[{internalType:"contract ERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"portfolioIdToDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"provide",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newBlockNumberDelay",type:"uint256"}],name:"setBlockNumberDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newInsurancePool",type:"address"}],name:"setInsurancePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInsuranceRateMultiplier",type:"uint256"}],name:"setInsuranceRateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newInterestRate",type:"uint256"}],name:"setInterestRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumBorrowMultiplier",type:"uint256"}],name:"setMaximumBorrowMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaximumPoolCapacity",type:"uint256"}],name:"setMaximumPoolCapacity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"shareOfDebt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrowsSnapshotTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalInterestSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Ar=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"},{internalType:"address",name:"_buildManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"buildManager",outputs:[{internalType:"contract IBuildManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract IExchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],wr=[{inputs:[{internalType:"address",name:"_proxySeller",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premium",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],jr=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],kr=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_weth9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth9",outputs:[{internalType:"contract IWETH9",name:"",type:"address"}],stateMutability:"view",type:"function"}],Dr=[{inputs:[{internalType:"address",name:"_insurancePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[],name:"Lock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!0,internalType:"address",name:"tokenIn",type:"address"},{indexed:!0,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"timelock",type:"uint256"}],name:"Unlock",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc20",type:"address[]"}],name:"UpdateAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableErc721",type:"address[]"}],name:"UpdateAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"availableTokenToLiquidityPool",type:"address[]"}],name:"UpdateAvailableTokenToLiquidityPool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"UpdateErc721Limit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"value",type:"bool"}],name:"UpdateIsAvailableErc721",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"UpdateLiquidatorFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"UpdateTokenToLiquidityPool",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc20",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableTokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"checkERC20Amount",outputs:[{internalType:"bool",name:"currectBalance",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721Value",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"checkERC721tokenID",outputs:[{internalType:"bool",name:"hasERC721Id",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"checkLiquidityPool",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721Limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"erc721Token",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAvailableErc20",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableErc721",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAvailableTokenToLiquidityPool",outputs:[{internalType:"address[]",name:"tokensArray",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc20ByContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],name:"getErc721ByContract",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"insurancePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc20",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAvailableErc721",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"address",name:"marginAccountOwner",type:"address"},{internalType:"address",name:"liquidator",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"txSender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc20",type:"address[]"}],name:"setAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableErc721",type:"address[]"}],name:"setAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_availableTokenToLiquidityPool",type:"address[]"}],name:"setAvailableTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newErc721Limit",type:"uint256"}],name:"setErc721Limit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setIsAvailableErc721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newLiquidatorFee",type:"uint256"}],name:"setLiquidatorFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"liquidityPoolAddress",type:"address"}],name:"setTokenToLiquidityPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"uint256",name:"swapID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"timelock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenToLiquidityPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockFunction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"address",name:"txSender",type:"address"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],Er=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"CreateMarginAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"createMarginAccount",outputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Ir=[{inputs:[{internalType:"address",name:"_positionsManager",type:"address"},{internalType:"address",name:"_baseToken",type:"address"},{internalType:"address",name:"_portfolioLendingStorage",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Exercise",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProvideERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"ProvideERC721",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"uint256",name:"swapID",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"address",name:"tokenOut",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newModularSwapRouter",type:"address"}],name:"UpdateModularSwapRouter",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"UpdateRedCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"UpdateYellowCoeff",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marginAccountID",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"WithdrawERC721",type:"event"},{inputs:[],name:"BASE_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateDebtWithAccruedInterest",outputs:[{internalType:"uint256",name:"debtSizeInUSDC",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"calculateMarginAccountValue",outputs:[{internalType:"uint256",name:"marginAccountValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"exercise",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"getMarginAccountRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"modularSwapRouter",outputs:[{internalType:"contract IModularSwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParams",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"baseToken",type:"address"}],name:"prepareTokensParamsByDebt",outputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"provideERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"collateralTokenID",type:"uint256"}],name:"provideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"redCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IModularSwapRouter",name:"newModularSwapRouter",type:"address"}],name:"setModularSwapRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newRedCoeff",type:"uint256"}],name:"setRedCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newYellowCoeff",type:"uint256"}],name:"setYellowCoeff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"yellowCoeff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Pr=[{inputs:[{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_ACCOUNT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARGIN_TRADING_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"calculateAmountInERC20",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculateAmountOutERC20",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"calculateAmountOutERC721",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"calculatePositionValue",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"calculateTotalPositionValue",outputs:[{internalType:"uint256",name:"totalValue",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"tokenID",type:"uint256"}],name:"checkValidityERC721",outputs:[{internalType:"bool",name:"isValid",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"exercise",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getModuleAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct IModularSwapRouter.ERC20PositionInfo[]",name:"erc20Params",type:"tuple[]"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256[]",name:"value",type:"uint256[]"}],internalType:"struct IModularSwapRouter.ERC721PositionInfo[]",name:"erc721Params",type:"tuple[]"}],name:"liquidate",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setTokenInToTokenOutToExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"swapOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"tokenInToTokenOutToExchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Nr=[{inputs:[{internalType:"contract IMarginAccountManager",name:"_marginAccountManager",type:"address"},{internalType:"contract IMarginTrading",name:"_marginTrading",type:"address"},{internalType:"contract IPositionsManager",name:"_hegicPositionManager",type:"address"},{internalType:"contract IProxySeller",name:"_proxySeller",type:"address"},{internalType:"contract IMarginAccount",name:"_marginAccount",type:"address"},{internalType:"address",name:"_hegicTokenIn",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"approveERC721ForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"borrowSwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicPositionManager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"hegicTokenIn",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccount",outputs:[{internalType:"contract IMarginAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginAccountManager",outputs:[{internalType:"contract IMarginAccountManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"marginTrading",outputs:[{internalType:"contract IMarginTrading",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"}],name:"provideETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"contract IProxySeller",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"address",name:"module",type:"address"}],name:"setUniswapExchangeModules",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],name:"swapRepay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"transferBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"uniswapExchangeModules",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"marginAccountID",type:"uint256"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"withdrawBuyProvideERC721",outputs:[],stateMutability:"nonpayable",type:"function"}],Br=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Rr=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],Lr=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Or=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Fr=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Ur=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],$r=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Hr=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!0,internalType:"int24",name:"tickSpacing",type:"int24"}],name:"FeeAmountEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!0,internalType:"uint24",name:"fee",type:"uint24"},{indexed:!1,internalType:"int24",name:"tickSpacing",type:"int24"},{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolCreated",type:"event"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"}],name:"createPool",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],name:"enableFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint24",name:"",type:"uint24"}],name:"feeAmountTickSpacing",outputs:[{internalType:"int24",name:"",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint24",name:"",type:"uint24"}],name:"getPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"parameters",outputs:[{internalType:"address",name:"factory",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickSpacing",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}],Wr=t=>({VITE_ALCHEMY_API_KEY_42161:"tz_aYA5g8dBegbWo1l6TQEY7cKhGZCh1",VITE_PREMIA_API_KEY_42161:"sharwa_3ZgugmeGTvPgPXmuxuEeho4J",VITE_SUBGRAPH_API_KEY_42161:"4d7d37cf3bc9fc7cae70d943fb30a47e",BASE_URL:"/sf_draft",MODE:"production",DEV:!1,PROD:!0,SSR:!1})[`VITE_ALCHEMY_API_KEY_${t}`],Ht=t=>{const n=Wr(t);if(!n)throw new Error(`No Alchemy api key found for chainId ${t}`);return new oi(t,n)},qr=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new li(window.ethereum).getSigner()},yt={[ve]:{Pool_USDC:{address:"0x1cD7629981881e80A6fe046AF0556369FbA3C09c",abi:Cr},Pool_WBTC:{address:"0x9D8625f596d52523bAf775dB597b5429838177Bd",abi:Mr},Pool_ETH:{address:"0x033258f67eD89043D3ea4E4f322aDcBd00152cf1",abi:Sr},TxBuilder:{address:"0x9daA79Dbf6CD067D207194661779677B5Ee29DCF",abi:Ar},TxBuilderOpen_Hegic:{address:"0xb94fe302bF6B707027706996887299120449B6ec",abi:wr},Exchanger:{address:"0x03E34a4d1F2B88579521086876E781479A544610",abi:kr},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:jr},MarginAccount:{address:"0x7Ce77Aebd1AD2Bd629Ed35e74ceF3d108d8bF28a",abi:Dr},MarginAccountManager:{address:"0x3AD2F7207ad004fa658041Bc180Ad6c21072eBc7",abi:Er},MarginTrading:{address:"0xcB6010751Ab1282b3777484f91F6E7728888AF58",abi:Ir},ModularSwapRouter:{address:"0x565112dd17Ae251703e93441Ab04D8c5B884Fa72",abi:Pr},MarginOneClick:{address:"0xEBD3f2A348Fc3a8b7D5B79CEbD86ab88c4A45403",abi:Nr},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:Br},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:Rr},Hegic_Strategy:{abi:Lr},Hegic_PriceCalculator:{abi:Or},ChainlinkOracle:{abi:Ur},UniswapQuoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:$r},UniswapFactory:{address:"0x1F98431c8aD98523631AE4a59f267346ea31F984",abi:Hr}},[gn]:{}},Vr=()=>{for(const t in yt){const n=yt[t],a=Xe[t];a&&(a.forEach(s=>{s.isETH||(n[s.symbol]={address:s.address,abi:Fr})}),yt[t]={...n})}};Vr();const An=(t,n)=>{if(!yt[t])throw new Error(`Unknown chainId ${t}`);const a=yt[t][n];if(!a)throw new Error(`Unknown contract "${n}" for chainId ${t}`);return[a.address,a.abi]},Je=(t,n)=>An(t,n)[0],wn=(t,n)=>An(t,n)[1],ka=(t,n,a)=>new Pt(...An(t,n),a?qr():Ht(t)),se=(t,n)=>ka(t,n,!1),ke=(t,n)=>ka(t,n,!0),Gr=async(t,n)=>{const s=(await Yr(t,n).latestAnswer()).toBigInt();return ie(s,cr)},Yr=(t,n)=>{const a=wn(t,"ChainlinkOracle"),s=Z(t,n).oracleAddress;if(!s)throw new Error(`No oracle address set for asset ${n}`);return new Pt(s,a,Ht(t))},Da=f.createContext(null),Kr=({children:t})=>{const n=Qr();return e.jsx(Da.Provider,{value:n,children:t})},Ea=()=>f.useContext(Da),Qr=()=>{const t=G(),{data:n,error:a}=Ue("useTokenPricesSetup",{fetcher:async()=>{const s={},i=[];return Ot.forEach(o=>{i.push(Gr(t,o).then(r=>{s[o]=r}))}),await Promise.all(i),s},refreshInterval:60*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return a?(console.log(a),null):n},Be=t=>{const n=Ea();return(n==null?void 0:n[t])??0n},Ia=()=>{var c;const t=G(),n=Ea(),[a,s]=f.useState(!1),i=f.useRef(null),o=f.useRef(null),r=f.useRef(null),l=d=>{var T,b,g;const y=(T=r.current)==null?void 0:T.clientWidth,m=((b=i.current)==null?void 0:b.clientWidth)-y;return(d??((g=o.current)==null?void 0:g.clientWidth))>m},u=ti();f.useEffect(()=>{var d,y;if(a){const m=((y=(d=o.current)==null?void 0:d.querySelector(".rfm-marquee"))==null?void 0:y.clientWidth)/2;s(l(m))}else s(l())},[(c=o.current)==null?void 0:c.width,u]);const p=()=>Ot.map(d=>{if(!n)return null;const y=n[d],m=te(y,void 0,void 0,!0),h=Z(t,d);return e.jsx("div",{className:"AssetPricesPanel__item",children:e.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer","data-tooltip-id":"Tooltip_Asset","data-tooltip-content":h.name,children:[e.jsx(K,{isHlight:!0,symbol:d,children:e.jsxs("span",{children:["$",m]})}),e.jsx("img",{className:"icon-url",src:vr,alt:"External url"})]})},d)});return e.jsxs("div",{className:A("AssetPricesPanel",a&&"marquee_rendered"),ref:i,children:[e.jsx("div",{className:"AssetPricesPanel__icon",ref:r,children:e.jsx("img",{src:xa,alt:"Graph icon"})}),e.jsx("div",{className:"AssetPricesPanel__items",ref:o,children:a?e.jsx(di,{pauseOnHover:!0,autoFill:!0,children:p()}):p()})]})},zr=()=>{const t=Tt(),n=[{name:"Option Strategies",to:"/options/builder"},{name:"Option-Chain",to:"/options/option-chain"}];return n.forEach(a=>{t.pathname.endsWith(a.to)&&(a.isActive=!0)}),e.jsxs("div",{className:"OptionsPage",children:[e.jsx(Ia,{}),e.jsx(Nt,{links:n,type:"border"}),e.jsx(ca,{})]})};function Wt(t,n={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},a=[it,Ne]){const[s,i]=t,{maxValue:o,placeholder:r,isDisabled:l,isFocused:u}=n,[p,c]=a,[d,y]=f.useState(!1),m=f.useRef(null);return{node:e.jsx("input",{autoFocus:u,type:"text",ref:m,value:s,disabled:l,placeholder:r,onChange:h=>{o&&c(h.target.value)>o?i(p(o)):i(p(h.target.value))},onFocus:()=>{y(!0)},onBlur:()=>{y(!1)}}),hasFocus:d,ref:m}}const qt=({value:t,setValue:n,maxValue:a,maxValueDisplayed:s,formatInputStringFns:i=[it,Ne],hasError:o,errorMsg:r,isDisabled:l,unitStr:u,placeholder:p,className:c})=>{typeof a=="bigint"&&(a=$(xr(a)));const d=Wt([t,n],{maxValue:a,placeholder:p,isDisabled:l},i),y=A(c,d.hasFocus&&"hlight",o&&"error",l&&"disabled");return e.jsxs("div",{className:A("InputFamily Input",y),onClick:()=>{d.ref.current.focus()},children:[d.node,e.jsx("div",{className:"Input__unit",children:u}),!H(a)&&e.jsxs("button",{className:A("InputFamily__max-btn",r&&"invisible"),disabled:l,onClick:m=>{m.stopPropagation(),n(i[0](a))},children:["Max",s?": ":"",s?e.jsx("div",{className:"InputFamily__max-btn-value",children:s}):""]}),r&&e.jsx("div",{className:"InputFamily__error-msg",children:r})]})},ue="Limited",xe="Unlimited",at="Bullish",pn="Bearish",Re="Neutral",le={"Long Call":{stats:{outlooks:[at],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:Le,isCollection:!0},"Short Call":{stats:{outlooks:[pn],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:re,isCollection:!0},"Covered Call":{stats:{outlooks:[at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:re},"Long Put":{stats:{outlooks:[pn],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:Le,isCollection:!0},"Short Put":{stats:{outlooks:[at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:re,isCollection:!0},"Long Strangle":{stats:{outlooks:[Re],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:Vn},"Short Strangle":{stats:{outlooks:[Re],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:re},"Covered Strangle":{stats:{outlooks:[Re,at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:re},"Long Straddle":{stats:{outlooks:[Re],profit:xe,loss:ue,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:Vn},"Short Straddle":{stats:{outlooks:[Re],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:re},"Covered Straddle":{stats:{outlooks:[Re,at],profit:ue,loss:xe,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:re},"Iron Butterfly":{stats:{outlooks:[Re],profit:ue,loss:ue,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:St,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[Re],profit:ue,loss:ue,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:St},"Bull Call Spread":{color:Le},"Bear Put Spread":{color:re}},Xr={[at]:Le,[Re]:St,[pn]:re},Pa=Object.keys(le).filter(t=>{const n=le[t];return!H(n.key)}),Zr=Pa.filter(t=>!le[t].isHidden),Jr={Hegic:2},Na={HEAD:"Head",COMMON:"Common",LEG:"Leg"},eo=t=>{const{amountStrState:n,strategy:a}=t,[s,i]=n,o=le[a].plural??`${a}s`;return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),e.jsx("div",{className:"BuilderForm__field-body",children:e.jsx(qt,{value:s,setValue:i,unitStr:o})})]})},to="/sf_draft/assets/strategy-1e15875d.svg",no=t=>{const{strategyState:n,isDisabled:a}=t,[s,i]=n,o=Zr.map(r=>({value:r,label:r}));return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[e.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",e.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),e.jsx("div",{className:"BuilderForm__field-body",children:e.jsx(fe,{options:o,defaultValue:s,onChange:r=>{i(r.value)},iconNode:e.jsx("img",{src:to,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:a})})]})};const ye=t=>{const{style:n,hasLeftMargin:a}=t;return e.jsx("div",{className:"Spinner",children:e.jsx(yi,{className:"Spinner__icon",style:{marginLeft:a?7:0,...n}})})},lt=(t,n,a=e.jsx(ye,{}))=>n?a:t,pe=(t,n,a=e.jsx(ye,{}))=>n?a:t(),J=(t="—",n,a)=>e.jsx("span",{className:A("muted",a&&"muted_light"),style:{fontSize:n?13:"inherit"},children:t}),ao=(t,n,a,s,i,o)=>{const r=Fe(s,n.decimals),l=ke(t,n.symbol);Ee(t,l.approve,[a,It.from(r)],`${n.symbol} approved.`,i,o)},so=async(t,n,a,s,i)=>{Me(i);const o=se(t,n.symbol),r=Fe(i,n.decimals);return(await o.allowance(a,s)).toBigInt()>=r},st=(t,n)=>{const a=n.symbol??n,s=Lt[a];return Fe(t,s)},ta=(t,n)=>{const a=n.symbol??n,s=Lt[a];return ie(t,s)},io=t=>t.startsWith("W"),Ba=(t,n)=>{const a=t.address!==n.address,s=t.isETH!==n.isETH;return a||s},ro=t=>{const n={};return t.forEach(a=>n[a.symbol]=a),n},Qe=t=>{const n=Math.abs(t)===1,a=t>0;return{isCall:n,isLong:a}},jn=t=>!!t.find(n=>{const{isLong:a}=Qe(n);return!a}),oo=t=>!!t.find(n=>{const{isLong:a}=Qe(n);return a}),lo=t=>!!t.find(n=>n),uo=(t,n,a)=>{let s;const i=`W${a}`,o=n.split(" ")[0],{isCall:r}=Qe(t);return!r||o==="Short"?s=["USDC.e"]:o==="Covered"?s=[i]:o==="Iron"&&(s=["USDC.e",i]),s},co=t=>{const n=t.includes("Straddle"),a=t==="Iron Butterfly";if(n)return[0,1];if(a)return[1,2]},po=(t,n)=>{if(!(t!=null&&t[0].market))return;if(t.length>1){const s=t.find(i=>i.market===n);if(s)return s}return t[0]},yo=(t,n)=>se(t,`TxBuilderOpen_${n}`),mo=t=>({Hegic:se(t,"TxBuilderOpen_Hegic")}),fo=(t,n,a)=>{if(!n)return a;let s=0,i=0;return t.map(r=>{const{isLong:l}=Qe(r);return l?n[s++]:a[i++]})},bo=t=>{const n=Object.keys(t);return n?!!n.find(s=>!t[s][0].isAbsent):!1},Ra=(t,n)=>{var s;return(s=t==null?void 0:t.decomposition)!=null&&s.length?!!t.decomposition.find(i=>{if(!i)return;const o=i.marketToken,r=n??t.paymentToken;return!o||!r?!1:Ba(o,r)}):!1},de=1e3,Oe=60,Ye=60,ft=24,gt=t=>t*ft*Ye*Oe*de,Vt=t=>Math.floor(t/de/Oe/Ye/ft),kn=t=>Math.floor(t/de),Dn=(t,n)=>{if(t<0)return`0d:0h${n?":0m":""}`;const a=t/de/Oe/Ye,s=Math.floor(a%ft),i=Math.floor(a/ft),o=Math.floor((a-Math.floor(a))*Ye);return n?`${i}d:${s}h:${o}m`:s===0&&i===0?`${o}m`:`${i}d:${s}h`};const To=t=>{const n=t.reduce((s,i)=>i<s?i:s,t[0]),a=t.reduce((s,i)=>i>s?i:s,t[0]);return{min:n,max:a}},xt=(t,n,a=1)=>{const s=t,i=n;if(s>i)return a;if(s==i)return 0;if(s<i)return-a},Gt=t=>t.filter(ho),ho=(t,n,a)=>a.indexOf(t)===n,go=t=>{t.splice(0,t.length)},kt=t=>t[t.length-1],xo=(t,n)=>t.reduce((a,s)=>{const i=rt(n-a);return rt(n-s)<i?s:a},t[0]),_o=t=>{const n=[];return t.forEach(a=>{n.push(...a)}),n},dn=["delta","vega","gamma","theta"],na=8,vo=[7,14,30,60,90],Dt=vo.map(gt),Co=()=>{const{data:t,error:n}=Ue("_useDates",async()=>{let a;try{a=[...Mo()]}catch(s){console.log(s)}return a?Gt(a).sort(xt):null},{refreshInterval:5*Oe*de,revalidateOnFocus:!1});return n?(console.log(n),null):t},Mo=()=>Dt.map((n,a)=>{const s=new Date(Date.now()+n),i=a===0,o=a===Dt.length-1,r=s.getUTCHours()>=na,l=s.getUTCDate();return i&&r&&s.setUTCDate(l+1),o&&!r&&s.setUTCDate(l-1),s.setUTCHours(na),s.setUTCMinutes(0),s.setUTCSeconds(0),s.setUTCMilliseconds(0),s.getTime()}),La=f.createContext(null),So=({children:t})=>{const n=Ao();return e.jsx(La.Provider,{value:n,children:t})},Ae=()=>f.useContext(La),Ao=()=>{const t=Co(),n=je("chosen-date",null),[a,s]=n;return t&&H(t.find(o=>o===a))&&s(t[0]),{dates:t,chosenDateState:n}},wo=t=>{const{strategyStructure:n,chosenDateState:a,resetTriggers:s,isDisabled:i,updateUnstableField:o}=t,{userAddress:r}=ne(),[l,u]=a,c=Ae().dates??[],d=()=>{u(null)};f.useEffect(()=>{d()},s),f.useEffect(()=>{r&&c.length&&!l&&u(c[0])},[r,c]);const y=(T,b="d MMM")=>{const g=T-Date.now();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"BuilderForm__date-value",children:we(T,b)}),e.jsx("div",{className:"BuilderForm__date-period",children:Dn(g)})]})},m=c.map(T=>({value:T,label:y(T)})),h=l&&m.find(T=>T.value===l);return e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),e.jsx("div",{className:"BuilderForm__field-body",children:n.map((T,b)=>{const{isCall:g,isLong:_}=Qe(T),v=lt(e.jsx(fe,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:i||!r,options:m,value:h,formatOptionLabel:({value:C},{selectValue:j,context:P})=>{var E;if(P==="menu")return y(C);const w=((E=j[0])==null?void 0:E.value)===C?"d MMM hh a":"d MMM";return y(C,w)},onChange:C=>{u(C.value)},iconTextNode:e.jsxs("span",{className:A({positive:_,negative:!_},"block"),style:{width:25},children:[_?"Buy":"Sell",e.jsx("br",{}),g?"Call":"Put"]})},b),H(c),e.jsx(ye,{},b));return o(b,v),v})})]})},En=(t,n,a,s)=>{const[i,o]=a.split(".");let r=t[i],l=n[i];return o&&(r=r&&r[o],l=l&&l[o]),xt(r,l,s)},Oa=(t,n)=>(a,s)=>En(a,s,t,n),Yt=(t,n,a)=>{if(!t||!Object.keys(t).length)return{...n};if(!n)return;const s={...t};a||(a=Object.keys(t));for(let i=0;i<a.length;i++){const[o,r]=a[i].split("."),l=r?t[o][r]:t[o],u=r?n[o][r]:n[o],p=l+u;r?(s[o]||(s[o]={}),s[o][r]=p):s[o]=p}return s},jo=t=>_o(Object.values(t));const Kt=(t,n)=>`${t?"Long":"Short"} ${n?"Call":"Put"}`,In=(t,n,a)=>t?a>n:a<n,Et=(t,n,a=ae)=>Sn(t,1+n,a),aa=(t,n,a=ae)=>Sn(t,1-n,a),Fa=(t,n,a)=>{if(a===0n)return 0n;const s=ot(n,rt(a))*100n,i=oe(-100),o=oe(100);return t===null?s:t?s<i?i:s:s>o?o:s},Ua=(t,n)=>{const a=Yt(t,n);for(const s in a){const i=a[s];a[s]=i?ce(i,3):void 0}return a},$a=(t,n=ae)=>$(t,n,1),Ha=(t,n)=>{const a=()=>{const o=g=>(1+r(g/Math.sqrt(2)))/2,r=g=>{const _=.254829592,v=-.284496736,C=1.421413741,j=-1.453152027,P=1.061405429,R=.3275911,w=Math.sign(g);g=Math.abs(g);const E=1/(1+R*g),S=1-((((P*E+j)*E+C)*E+v)*E+_)*E*Math.exp(-g*g);return w*S},l=(g,_,v,C,j)=>{const P=(Math.log(g/_)+(C+.5*j**2)*v)/(j*Math.sqrt(v)),R=P-j*Math.sqrt(v);return g*o(P)-_*Math.exp(-C*v)*o(R)},u=(g,_,v,C,j)=>{const P=(Math.log(g/_)+(C+.5*j**2)*v)/(j*Math.sqrt(v)),R=P-j*Math.sqrt(v);return _*Math.exp(-C*v)*o(-R)-g*o(-P)},p=(g,_,v,C,j,P)=>{const R=P?l:u;let w=.2,E=.001,S=1;const O=1e-5;let L=R(g,_,v,C,w),I=0;const N=1e3;for(;Math.abs(L-j)>O&&I<N;)L<j?E=w:S=w,w=(E+S)/2,L=R(g,_,v,C,w),I++;return w},c=$(n),d=$(t.strike),y=(t.expiry-Date.now())/de/Oe/Ye/ft/365,m=$(t.premiumData.inUSDC),h=.01,{isCall:T}=t;return p(c,d,y,h,m,T)},s=o=>`${Math.floor(o*100)}%`,i=a();return{value:i,formatted:s(i)}};function sa(){const{innerWidth:t,innerHeight:n}=window;return{width:t,height:n}}function ko(){const[t,n]=f.useState(sa());return f.useEffect(()=>{function a(){n(sa())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}const be=(t=768)=>{const{width:n}=ko();return n<t},Do=({getParentNode:t,getChildNodes:n})=>{const[a,s]=ni(!1),i=A(a&&"expanded"),o=t(i,s),r=n(i);return e.jsxs(e.Fragment,{children:[o,...r]})};const Wa=({children:t,transitionTimeout:n=250,renderHeader:a=({state:s})=>s.isEnter?"Hide":"Show"})=>e.jsx("div",{className:"Accordion",children:e.jsx(mi,{transition:!0,transitionTimeout:n,children:e.jsx(fi,{header:a,children:t})})});const he=({isVertical:t,marginValue:n})=>{const a=t?{marginLeft:n,marginRight:n}:{marginTop:n,marginBottom:n};return e.jsx("div",{className:A("Divider",t&&"_vertical"),style:H(n)?{}:a})};class qa{constructor(n){const{titleData:a,itemsData:s}=n,i=Object.keys(a);this.titleData=a,this.itemsData=s,this.dataKeys=i}}class Eo extends qa{constructor(n){super(n),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const n=this._getCells(this.titleData,!0);return e.jsxs("tr",{children:[...n]})}getItemsRows(){const n=this.itemsData.map(a=>{const s=this._getItemRow(a);return e.jsx(Ge.Fragment,{children:s},a.id)});return e.jsx(Ge.Fragment,{children:n},"rows")}_getCells(n,a){return this.dataKeys.map(s=>{const i=n[s]??J();return a?e.jsx("th",{children:i},s):e.jsx("td",{children:i},s)})}_getItemRow(n){const a=!!n.children,s=this._getCells(n),i=(r,l)=>{const u=[r,n.className];return e.jsxs("tr",{className:A("Table__item",a&&"expandable",u),onClick:l,children:[...s]})};return a?this._getExpandableRow(n,i):i()}_getExpandableRow(n,a){const s=i=>n.children.map(r=>{const l=this._getCells(r);return e.jsxs("tr",{className:A("Table__child-item",i),children:[...l]},r.id)});return e.jsx(Do,{getParentNode:a,getChildNodes:s},n.id)}}class Io extends qa{constructor(n){super(n),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(n){const a=n.omittedKeys;return this.dataKeys.map(i=>{const o=n[i];return a&&!!a.find(l=>i===l)||H(o)?null:e.jsxs("div",{className:A("Table__item-row info-row",i),children:[e.jsx("div",{className:"info-row__title",children:this.titleData[i]}),e.jsx("div",{className:"info-row__value",children:o===null?J():o})]})})}_getItem(n){const a=n.className;return e.jsxs("div",{className:A("Table__item App-box",a),children:[this._renderItemRows(n),n.children&&e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx(Wa,{transitionTimeout:500,renderHeader:({state:s})=>`${s.isEnter?"Hide":"Show"} full strategy`,children:n.children.map(s=>e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx("div",{className:"Table__child-item",children:this._renderItemRows(s)})]}))})]})]})}}const Va=({structureData:t,className:n,children:a})=>{const s=be(576),i=l=>{if(!l){const u=new Eo(t),{getTitleRow:p,getItemsRows:c}=u;l=[e.jsx("thead",{children:p()},"head"),e.jsx("tbody",{children:c()},"body")]}return e.jsx("div",{className:"Table__desktop",children:e.jsx("table",{children:l})})},o=()=>{const u=new Io(t).getItems();return e.jsx("div",{className:"Table__mobile",children:u})},r=()=>s?o():i();return e.jsx("div",{className:A("Table",n),children:a!=null&&a.length?i(a):r()})};const Ga="/sf_draft/assets/direction_up-3632497a.svg",Ya="/sf_draft/assets/direction_down-6f961d86.svg",Po="/sf_draft/assets/Hegic-a7e6545a.svg",No="/sf_draft/assets/Hegic_circled-26df614a.svg",Bo="/sf_draft/assets/Hegic_circled-light-9256df54.svg",Qt={Hegic:{common:Po,circled:No,circledLight:Bo}},Ka=({strikeData:t,priceNode:n,isPriceHlight:a,isSmall:s})=>{const{market:i,isCall:o,isLong:r}=t,l=Qt[i].circled,u=r?Ga:Ya;return e.jsxs("div",{className:A("Brief","PriceBrief",s&&"small"),children:[e.jsxs("div",{className:"PriceBrief__icons Brief__icons",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:l,alt:`${i}`})}),e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:u,alt:`${r?"Long":"Short"}`})})]}),e.jsx("div",{className:A("PriceBrief__info-card",{positive:r,negative:!r}),children:o?"Call":"Put"}),e.jsx("div",{className:A("PriceBrief__price",a&&"hlight"),children:n})]})},Ro=t=>{const{id:n,amountStr:a,strikeMarketsDataArr:s,chosenStrikeData:i,setChosenStrikeData:o,isOpen:r,close:l}=t,[u,p]=f.useState([]),c=()=>{const b=[];s.forEach((g,_)=>{const v=oe(Ne(a));g.utils.calcPremium(v).then(C=>{g.premiumData=C,b[_]=C,p([...b])})})};if(f.useEffect(()=>{p([]),s&&c()},[s,a]),!s)return null;const d=23,m=80-d,T=200-d;return e.jsx("div",{className:A("StrikeInfoBox",r&&"open"),style:{zIndex:9-n*2},children:e.jsxs(Va,{onClick:b=>b.stopPropagation(),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("div",{style:{minWidth:T},children:"Market"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Source"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Delta"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Vega"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Gamma"})}),e.jsx("th",{children:e.jsx("div",{style:{minWidth:m},children:"Theta"})}),e.jsx("th",{children:e.jsx("div",{style:{width:m},children:"Rho"})})]})}),e.jsx("tbody",{children:s.sort(Oa("premiumData.inUSDC")).map((b,g)=>{const{greeks:_,source:v}=b,C=u[g],j=!C||C.isDisabled,P=b===i;return e.jsxs("tr",{className:A("StrikeInfoBox__strike-option",j&&"disabled",P&&"chosen"),children:[e.jsxs("td",{children:[e.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{o(b),l()},disabled:j}),e.jsx(Ka,{strikeData:b,priceNode:pe(()=>C===null?J("No liquidity",!0):`$${te(C.inUSDC)}`,H(C)),isPriceHlight:!0})]}),e.jsx("td",{children:v??"AMM"}),Object.keys(_).map(R=>{const w=_[R];return e.jsx("td",{children:w??J()},R)})]},b.market)})})]})})};const Ke=({fontSize:t,children:n})=>e.jsx("div",{className:"InnerWarning",style:{fontSize:t??""},children:n});bi();const Qa=({id:t,className:n,isUnited:a,spaceBetween:s,isDraggable:i,breakpoints:o,handleInit:r,slideClassName:l,children:u})=>{const p=f.useRef(null),c=`${a?`.${n}`:`#${t}`}`,d={spaceBetween:s,allowTouchMove:i,breakpoints:o,navigation:{enabled:!0,prevEl:`${c} .Carousel__nav-btn_prev`,nextEl:`${c} .Carousel__nav-btn_next`},on:{init:y=>{y.el.style.overflow="clip visible",r&&r(y)}}};return f.useEffect(()=>{const y=p.current;y&&(Object.assign(y,d),y.initialize())},[p,d]),e.jsxs("div",{className:A("Carousel",n),id:t,children:[e.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),e.jsx("swiper-container",{init:!1,ref:p,children:u==null?void 0:u.map((y,m)=>e.jsx("swiper-slide",{class:l,children:y},m))}),e.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const Lo=({children:t,slideType:n="lg"})=>e.jsx(Qa,{breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:6,grid:{fill:"row",rows:2}},520:{slidesPerView:5,grid:{fill:"row",rows:2}},380:{slidesPerView:4,grid:{fill:"row",rows:2}},0:{slidesPerView:3,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${n}`,children:t}),Pn=t=>Object.keys(t).map(BigInt),Oo=t=>{const n={},a=t.map(i=>i.strike);return Gt(a).forEach(i=>{const o=t.filter(r=>r.strike===i);n[i]=o}),n},Fo=t=>{const n=[];return t.forEach(s=>{const i=Pn(s);n.push(...i)}),Gt(n)},Uo=t=>{const n=Fo(t);return t.map(s=>{const i=Pn(s),o={...s};return n.forEach(r=>{i.indexOf(r)===-1&&(o[r]=[{strike:r,isAbsent:!0}])}),o})};const $o=t=>{const{currentPrice:n,isFirst:a}=t;return e.jsx("div",{className:A("StrikeCurrentPriceItem","StrikeChooser__item",a&&"StrikeCurrentPriceItem_first"),children:e.jsxs("span",{children:["$",Ze(n)]})})};const Ho="/sf_draft/assets/cross_grey-42dbd9c5.svg",Wo=t=>{const{isITM:n}=t;return e.jsx("div",{className:A("StrikeAbsentItem","StrikeChooser__item",n&&"StrikeChooser__item_ITM"),children:e.jsx("img",{src:Ho,alt:"Absent"})})},qo=({className:t,id:n,isAutoSelectEnabled:a,structureKey:s,asset:i,amountStr:o,strikesData:r,chosenStrikeData:l,setChosenStrikeData:u})=>{const{isConnected:p}=ne(),c=Be(i),d=$(c),y=oe(ce(d,d<10?2:0)),m=n===0,h=be(),[T,b]=f.useState(null),g=L=>{const I={};for(const N in L){const x=L[N][0],{isCurrentPrice:k,isAbsent:D}=x;k&&D||(I[N]=L[N])}return I},_=()=>{const L=g(r);let I;for(const N in r){const M=r[N][0];if(M.isCurrentPrice||y===M.strike){M.isCurrentPrice=!0,I=M;break}}return I||(L[y]=[{strike:y,isCurrentPrice:!0,isAbsent:!0}]),L},v=()=>{if(r){if(!bo(r))return{strikes:[],dataArr:[]};let L=_();const I=Pn(L).sort(xt),N=Object.values(L).sort((M,x)=>{const k=M[0],D=x[0];return En(k,D,"strike")});return{strikes:I,dataArr:N}}return{}},{strikes:C,dataArr:j}=v(),P=!!(C!=null&&C.length);f.useEffect(()=>{if(a&&r&&!l){const L=j.find(N=>!N[0].isAbsent);if(!L)return;const I=L[0];u(I)}},[r]);const{openPopup:R,closePopup:w,isOpen:E}=ya(()=>b(null)),S=()=>{const L=$(j[0][0].strike);let I;return L<10**2?I="xs":L<10**3?I="sm":L<10**4?I="md":L<10**5?I="lg":I="xl",e.jsx(Lo,{slideType:I,children:C.map((N,M)=>{const x=j[M],k=x[0],{isCurrentPrice:D,isAbsent:F}=k;if(D&&F)return e.jsx($o,{currentPrice:N,isFirst:m},"current_price");const{isCall:q}=Qe(s),Y=In(q,N,y);if(F)return e.jsx(Wo,{isITM:Y},M);const B=l&&l.strike===N,V=B&&l.market,W=T===x;return e.jsxs(z,{className:A("StrikeChooser__item",Y&&"StrikeChooser__item_ITM",B&&"chosen",W&&"open",D&&A("StrikeCurrentPriceItem",m&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:U=>{E&&U.stopPropagation(),b(x),R()},children:[B&&e.jsx("div",{className:"StrikeChooser__item-market",children:e.jsx("img",{src:Qt[V].circledLight,alt:`${V} icon`})}),e.jsxs("span",{children:["$",Ze(N)]})]},N)})})},O=()=>r?P?e.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-n*2},children:S()}):e.jsx(Ke,{children:"No Liquidity"}):e.jsxs(Ke,{children:[p?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return e.jsxs("div",{className:A("StrikeChooser",t,h&&!r&&"hidden"),children:[O(),e.jsx(Ro,{id:n,amountStr:o,strikeMarketsDataArr:T,chosenStrikeData:l,setChosenStrikeData:u,isOpen:E,close:w})]})},Vo=()=>f.useContext(za),Go=()=>{const[t,n]=f.useReducer(Yo,{});return[t,n]},Yo=(t,n)=>{switch(n.type){case"added":{const{asset:a,dateMs:s,strikesForDate:i}=n;return t[a]||(t[a]={}),t[a][s]||(t[a][s]=i),{...t}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},za=f.createContext(null),Xa=f.createContext(null),Ko=({children:t})=>{const[n,a]=Go();return e.jsx(za.Provider,{value:n,children:e.jsx(Xa.Provider,{value:a,children:t})})},Qo={[ve]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},zo={[ve]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},Xo=t=>{const n=Qo[t];if(!n)throw new Error(`No Hegic strategies found for chainId ${t}`);return n},Zo=(t,n)=>{const a=Xo(t),s=Vt(n);if(s<7||s>90)return;let i;return s<14?i=a.short:s<30?i=a.medShort:s<60?i=a.medLong:s<=90&&(i=a.long),i},Jo=(t,n)=>{const a=zo[t];if(!a)throw new Error(`No Hegic Price Calculator address found for chainId ${t}`);const s=a[n];if(!s)throw new Error(`No Hegic Price Calculator address found for strategy key ${n}`);return s},el=(t,n,a)=>{const s=wn(t,`Hegic_${a}`);return new Pt(n,s,Ht(t))},tl=(t,n)=>{const a=Jo(t,n);return el(t,a,"PriceCalculator")},Nn=.005*10**5,Bn=async(t,n,a,s)=>{const i=Xn(t,n),o=Xn(t,a),r=Fe(s,i.decimals);return n===a||r===0n||i.isStable&&o.isStable?new Promise(p=>{p(s)}):await se(t,"UniswapQuoter").callStatic.quoteExactInput(Za(n,a),r).then(p=>{const c=p.toBigInt();return ie(c,o.decimals)}).catch(p=>{console.log(`Swapping ${i.symbol} to ${o.symbol} error!

`,p)})},Rn=(t,n,a)=>{const s=Ft(t);return Bn(t,n,s,a)},nl=(t,n,a)=>{const s=Ft(t);return Bn(t,s,n,a)},Za=(t,n)=>Ti.solidityPack(["address","uint24","address"],[t,Nn,n]);class al{constructor(n,a){this.getMarketToken=s=>Z(s,a),this.getId=(s,i)=>{i=i.toLowerCase();const{strike:o,isCall:r,isLong:l,expiry:u}=s,p=$(BigInt(o)),c=we(Number(u),"dd-MMM-yy");return`${n}_${p}_${l?"LONG":"SHORT"}_${r?"CALL":"PUT"}_${c}_${i}`}}}class sl extends al{constructor(){super("Hegic","USDC.e")}calcDeltaByAssetPrice(n,a){const{isCall:s,strike:i,amount:o}=n,r=$(o);return s?i<a?r:0:i>a?-r:0}calcDeltaByStrikeScale(n,a){const{isCall:s,amount:i}=n;return s?Number(a)<100?i:0:Number(a)>100?-i:0}}const Ja=new sl,es={PROTOCOL_NAME:"Hegic"},il=async(t,n,a)=>{if(!rl(n))return[];const{assetPrice:i}=a,{expiry:o}=n,r=o-Date.now();n={...n,period:r};const l=Zo(t,r);return l?await ol(t,l,n,i):[]},rl=t=>{const{isLong:n}=t;if(n)return!0},ol=async(t,n,a,s)=>{const{amount:i,asset:o,isCall:r}=a,l=[],u=Object.keys(n);for(let c=0;c<u.length;c++){const d=u[c],y=n[d],m={strategyKey:d,strategyAddress:y},h=ll(d,o,r),T=await ul(t,y,a),b=T>=i;if(!h||!b)continue;const g=cl(t,m,a,s),_=g.utils.calcPremium(i).then(v=>({...g,liquidity:T,premiumData:v})).catch();l.push(_)}return await Promise.all(l).then(ml)},ll=(t,n,a)=>{const[s,,i]=t.split("_");return!(s.includes("SPREAD")||a!==(s==="CALL")||i!==n)},ul=async(t,n,a)=>{const{asset:s,period:i}=a,o=new Pt(n,wn(t,"Hegic_Strategy"),Ht(t)),r=kn(i);let l=0n;try{const u=(await o.getAvailableContracts(r,[])).toBigInt();l=ie(u,Lt[s])}catch{}return l},cl=(t,n,a,s)=>{const{isCall:i,asset:o,expiry:r}=a,{strategyKey:l}=n,[,u]=l.split("_"),p=yl(u,s),c=pl(t,n,a),d=Ja.calcDeltaByStrikeScale(a,u);return{market:"Hegic",protocolName:es.PROTOCOL_NAME,asset:o,strike:gr(p),expiry:r,isCurrentPrice:u==="100",isCall:i,isLong:!0,greeks:{delta:d,vega:void 0,gamma:void 0,theta:void 0,rho:void 0},utils:c}},pl=(t,n,a)=>{const{strategyKey:s,strategyAddress:i}=n,{asset:o,period:r}=a;return{calcPremium:async p=>dl(t,s,a,p),getBuilderParams:async(p,c,d)=>{const y=st(p,o),m=c.premiumData.inMarketToken,h=hr(m,d);return yo(t,es.PROTOCOL_NAME).encodeFromHegic(i,y,kn(r),h,[])}}},dl=async(t,n,a,s)=>{const{asset:i,period:o}=a,r=Ja.getMarketToken(t),l=st(s,i),u=tl(t,n),p=kn(o),c=await u.calculatePremium(p,l,0).then(BigInt),d=ie(c,r.decimals);return{inUSDC:await Rn(t,r.address,d),inMarketToken:d,marketToken:r}},yl=(t,n)=>{const a=$(n),s=Math.floor(a*(t/100));return oe(s)},ml=t=>t.filter(n=>n&&n.premiumData),fl=async(t,n,a,s)=>{const i=a%n;if(s+1>a-i&&(n=i),t.length>=n){const r=await Promise.all(t);return go(t),r}else return[]},ts=t=>t.filter(n=>n.status==="fulfilled").map(n=>n.value),bl=async(t,n)=>{const a={address:t.adress,topics:[ui("Transfer(address,address,uint256)"),null,ci(n,32)]};return await t.queryFilter(a)},Ln=(t,n)=>{var d;const a=Vo(),s=f.useContext(Xa),i=G(),{userAddress:o}=ne(),r=Be(t),[l,u]=f.useState((d=a==null?void 0:a[t])==null?void 0:d[n]),{data:p,error:c}=Ue(n&&r&&[a,n,t,r,"fetchStrikesForDate"],async()=>await Tl(i,t,n,{userAddress:o,assetPrice:r}),{refreshInterval:300*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var y;u((y=a==null?void 0:a[t])==null?void 0:y[n])},[t,n]),f.useEffect(()=>{p&&(u(p),s({type:"added",asset:t,dateMs:n,strikesForDate:p}))},[p]),c?(console.log(c),null):l},Tl=async(t,n,a,s)=>{const i={asset:n,expiry:a,amount:oe(1)},o=[{...i,isCall:!0,isLong:!0,strategy:"Long Call"},{...i,isCall:!1,isLong:!0,strategy:"Long Put"},{...i,isCall:!0,isLong:!1,strategy:"Short Call"},{...i,isCall:!1,isLong:!1,strategy:"Short Put"}],r={},l=[];return o.forEach(p=>{const c=Promise.allSettled([il(t,p,s)]).then(ts).then(d=>{const y={strategy:p.strategy,strikes:[]};return d.forEach(m=>{y.strikes.push(...m)}),y}).catch(console.log);l.push(c)}),(await Promise.all(l)).forEach(p=>{r[p.strategy]=Oo(p.strikes)}),r},hl=t=>{const{asset:n,strategy:a,amountStr:s,chosenDate:i,strategyStructure:o,hasSell:r,strikesDataArrState:l,chosenStrikesState:u,areStrikesLoadingState:p,updateTriggers:c,resetTriggers:d,updateUnstableField:y}=t,[m,h]=l,[T,b]=u,[g,_]=p,v=Ln(n,i),C=()=>{if(_(!0),j(),o.forEach((R,w)=>{m[w]=[];const{isCall:E,isLong:S}=Qe(R),O=Kt(S,E);v!=null&&v[O]&&(m[w]={...v[O]})}),v){const R=Uo(m);h([...R]),_(!1)}},j=()=>{b([])},P=()=>{h([])};return f.useEffect(()=>{j(),P()},d),f.useEffect(()=>{i&&C()},[...c,v]),e.jsxs("div",{className:A("BuilderForm__field","BuilderForm__field_strike",!r&&"col-span-2"),children:[e.jsx("div",{className:"BuilderForm__field-header",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),e.jsx("div",{className:"BuilderForm__field-body",children:o.map((R,w)=>{const E=co(a),S=E&&E.indexOf(w)!==-1,O=lt(e.jsx(qo,{id:w,isAutoSelectEnabled:o.length===1&&!g,structureKey:R,asset:n,amountStr:s,strikesData:m[w],chosenStrikeData:T[w],setChosenStrikeData:L=>{if(T[w]=L,S){const I=$(L.strike),N=L.market;E.filter(x=>x!==w).forEach(x=>{const k=po(m[x][I],N);T[x]=k})}b([...T])}},w),g,e.jsx(ye,{},w));return y(w,O),O})})]})};const gl=t=>{const{liqPrice:n,isLiqPriceLoading:a,isInLastHalf:s}=t,i=e.jsx("span",{className:"muted_light",children:"..."}),o=e.jsx("span",{className:"muted_light",children:"—"}),r=()=>`$${te(n)}`;return e.jsxs("div",{className:A("CollateralLiqPrice",s&&"CollateralLiqPrice_down"),children:["Liq. Price:",e.jsxs("span",{className:"CollateralLiqPrice__val",children:[a&&i,!a&&(n?r():o)]})]})};const xl=({min:t,max:n,collateralData:a,handleClick:s})=>e.jsx("div",{className:"CollateralRangeBtns",children:[t,n].map((i,o)=>{const r=a.isBase,l=Te(ce($(i),Ve)),u=me(i,a.marketToken.isStable),p=o===0;return e.jsxs(Ge.Fragment,{children:[e.jsxs("button",{onClick:()=>s(l),children:[r?"":"$",u]},o),p?"—":""]},o)})});const _l=({collateralData:t,collateralAmountStr:n,onChange:a})=>{const{isBase:s}=t,i=s?1:0,o=$(t.min,ae,i),r=$(t.max,ae,i),l=Ne(n),u=s?.01:1;return e.jsx("div",{className:"CollateralSlider",children:e.jsx(hi,{defaultValue:0,value:l,min:o,max:r,step:u,onChange:a})})},vl=t=>{const{isInLastHalf:n,getCollateralData:a,collateralData:s,setCollateralData:i,collateralTokens:o,chosenStrike:r,updateTriggers:l,resetTriggers:u}=t,[p,c]=f.useState(""),[d,y]=f.useState(o[0]),[m,h]=f.useState(!1),[T,b]=f.useState(!1),g=()=>{c(""),y(o[0]),i(null)},_=()=>{c(""),i(null)};f.useEffect(()=>{g()},u),f.useEffect(()=>{r&&(h(!0),_(),v(!0))},[r,d]);const v=w=>{let E;if(!w&&p){const S=Ne(p);E=oe(S)}a(d,E).then(S=>{i(S),h(!1),b(!1)})};De(()=>{m||(b(!0),v())},Ie,[p,...l]);const C=Wt([p,c],{placeholder:"0"}),j=o.map(w=>({value:w,label:e.jsx(K,{symbol:w,isHlight:!0,children:w})})),P=A(C.hasFocus&&"hlight"),R=()=>e.jsxs(e.Fragment,{children:[s&&e.jsx(gl,{liqPrice:s.liquidationPrice,isLiqPriceLoading:T,isInLastHalf:n}),pe(()=>e.jsxs("div",{className:"CollateralChooser__input-container",children:[e.jsx("div",{className:"CollateralChooser__input",children:C.node}),s&&e.jsx(xl,{min:s.min,max:s.max,collateralData:s,handleClick:w=>{c(w)}}),s&&e.jsx(_l,{collateralData:s,collateralAmountStr:p,onChange:w=>{const E=it(w);c(E)}})]}),m),e.jsx("div",{className:"CollateralChooser__token-selector",children:e.jsx(fe,{options:j,defaultValue:d,isDisabled:j.length===1,onChange:w=>{y(w.value)}},`CollateralChooser__token-selector_${d}`)})]});return e.jsx("div",{className:A("CollateralChooser",P),children:r?r.isComingSoon?e.jsxs(Ke,{children:[r.market," is coming soon"]}):R():e.jsx(Ke,{children:"Strike required"})})},Cl=t=>{const{asset:n,amountStr:a,strategy:s,strategyStructure:i,hasSell:o,chosenStrikes:r,collateralDataArrState:l,updateTriggers:u,resetTriggers:p,updateUnstableField:c}=t,[d,y]=l,m=()=>{y([])};f.useEffect(()=>{m()},p);const h=(b,g)=>{d[b]=g,y([...d])},T=(b,g,_)=>{const v=r[b];if(!v||!v.utils.getCollateralData)return new Promise(()=>{});const C=oe(Ne(a)),j=io(g),P=It.from(_??0);return v.utils.getCollateralData(C,{isBaseCollateral:j,setToCollateral:P})};return o?e.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[e.jsx("div",{className:"BuilderForm__field-header",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),e.jsx("div",{className:"BuilderForm__field-body",children:i.map((b,g)=>{const{isLong:_}=Qe(b);if(_)return e.jsx("div",{className:"BuilderForm__field-empty-row",children:J()},g);const v=r[g],C=uo(b,s,n),j=g>(i.length-1)/2,P=e.jsx(vl,{isInLastHalf:j,collateralTokens:C,collateralData:d[g],setCollateralData:R=>h(g,R),getCollateralData:(R,w)=>T(g,R,w),chosenStrike:v,updateTriggers:u,resetTriggers:p},g);return c(g,P),P})})]}):null};const Ml=t=>{const{strategyStructure:n,unstableFields:a,chosenStrikes:s,strikesDataArr:i,areStrikesLoading:o}=t;return be()?e.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[e.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),e.jsx("div",{className:"BuilderForm__field-body",children:n.map((l,u)=>{const p=o||!!i[u],c=!!s[u],d=!!a.collateral[u],y=u===n.length-1;return e.jsxs("div",{className:"BuilderMobileContainer__item",children:[e.jsx("div",{className:A("BuilderMobileContainer__item-date",p&&"mb-7"),children:a.date[u]}),e.jsx("div",{className:"BuilderMobileContainer__item-strike",children:a.strike[u]}),d&&c&&e.jsxs("div",{className:A("BuilderMobileContainer__item-collateral"),children:[e.jsx("div",{className:"BuilderMobileContainer__item-title",children:e.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),a.collateral[u]]}),p&&!y&&e.jsx(he,{})]},u)})})]}):null};const zt=({title:t,className:n,children:a})=>e.jsxs("div",{className:A("OptionController",n),children:[e.jsx("div",{className:"OptionController__title",children:t}),e.jsx("div",{className:"OptionController__content",children:a})]}),On=({asset:t,setAsset:n,isDisabled:a})=>{const s=Ot.map(i=>({value:i,label:e.jsx(K,{symbol:i,isHlight:!0,children:i})}));return e.jsx(zt,{className:"AssetController",title:"Asset",children:e.jsx(fe,{options:s,defaultValue:t,isDisabled:a,onChange:i=>{n(i.value)}})})},Sl=t=>{const{assetState:n,strategyState:a,amountStrState:s,chosenDateState:i,strikesDataArrState:o,chosenStrikesState:r,collateralDataArrState:l}=t,[u,p]=n,[c]=a,[d]=s,[y]=i,m=le[c].structure,h=jn(m),T=f.useState(!1),[b]=T,[g]=r,[_]=o,v={strike:[y],collateral:[d]},C={date:[c],strike:[u,c,y],collateral:[u,c,y],unstableFields:[c]},[j,P]=f.useState({date:[],strike:[],collateral:[]}),R=(w,E,S)=>{j[w][E]=S};return f.useEffect(()=>{P({date:[],strike:[],collateral:[]})},C.unstableFields),e.jsxs("div",{className:"BuilderForm__fields",children:[e.jsx(On,{asset:u,setAsset:p,isDisabled:b}),e.jsx(no,{strategyState:a,isDisabled:b}),e.jsx(eo,{amountStrState:s,strategy:c}),e.jsx(wo,{strategyStructure:m,chosenDateState:i,updateTriggers:v.date,resetTriggers:C.date,isDisabled:b,updateUnstableField:(w,E)=>{R("date",w,E)}}),e.jsx(hl,{asset:u,strategy:c,amountStr:d,chosenDate:y,strategyStructure:m,hasSell:h,strikesDataArrState:o,chosenStrikesState:r,areStrikesLoadingState:T,updateTriggers:v.strike,resetTriggers:C.strike,updateUnstableField:(w,E)=>{R("strike",w,E)}}),e.jsx(Cl,{asset:u,strategy:c,amountStr:d,strategyStructure:m,hasSell:h,chosenStrikes:g,collateralDataArrState:l,updateTriggers:v.collateral,resetTriggers:C.collateral,updateUnstableField:(w,E)=>{R("collateral",w,E)}}),e.jsx(Ml,{strategyStructure:m,unstableFields:j,chosenStrikes:g,strikesDataArr:_,areStrikesLoading:b})]})};const Al=({strategy:t})=>e.jsxs("div",{className:"BuilderTooltips",children:[e.jsx(wl,{}),e.jsx(jl,{strategy:t}),e.jsx(kl,{}),e.jsx(Dl,{}),e.jsx(El,{}),e.jsx(Il,{}),e.jsx(Pl,{})]}),wl=()=>e.jsxs(ee,{id:"BuilderForm_StrikeTooltip",children:[e.jsx("h6",{children:"Hegic Options (American options)"}),e.jsxs("p",{className:"my-5",children:["They require manual exercise before ",e.jsx("br",{}),"the expiration date. ",e.jsx("br",{}),"There are no secondary markets; out-",e.jsx("br",{}),"of-the-money options can't be sold."]})]}),jl=({strategy:t})=>{const n=le[t],{outlooks:a,profit:s,loss:i,description:o}=n.stats;return e.jsxs(ee,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[e.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[e.jsx("h2",{className:"WhenPurchaseTooltip__title",children:t}),e.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:a.map(r=>{const l=Xr[r];return e.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:l},children:r},r)})})]}),e.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[e.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),e.jsx("p",{className:"WhenPurchaseTooltip__description",children:o}),e.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[s,i].map((r,l)=>{const u=l===0?"Profit":"Loss";return e.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[e.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:u}),e.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:r})]},`${u}_${r}`)})})]})]})},kl=()=>e.jsxs(ee,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",e.jsx("br",{}),"you’re setting aside ",e.jsx("br",{}),"as collateral for selling options"]}),Dl=()=>e.jsxs(ee,{id:"Builder_PremiumTooltip",children:[e.jsx("h6",{children:"Negative Premium"}),e.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",e.jsx("br",{}),"have paid as an option buyer."]}),e.jsx("h6",{children:"Positive Premium"}),e.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",e.jsx("br",{}),"have received as an option seller."]})]}),El=()=>e.jsxs(ee,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",e.jsx("br",{}),"you’ll pay for buying options. ",e.jsx("br",{}),"If the option price rises ",e.jsx("br",{}),"beyond this, your transaction ",e.jsx("br",{}),"will be reverted."]}),Il=()=>e.jsxs(ee,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",e.jsx("br",{}),"assured to receive when ",e.jsx("br",{}),"selling options. If the option ",e.jsx("br",{}),"price drops beyond this point, ",e.jsx("br",{}),"your transaction will ",e.jsx("br",{}),"be reverted."]}),Pl=()=>e.jsxs(ee,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",e.jsx("br",{}),"is too small. This may result in instant ",e.jsx("br",{}),"liquidation of the position."]});const et=(t,n=2,a,s)=>{const i=$(t,a);return Mt(i,n,s)},Nl=(t,n=2,a)=>et(t,n,a,!0),Mt=(t,n=2,a)=>{const s=a?"+":"",i=t<0?"–":t>0?s:"";return t=Math.abs(t),t=ce(t,n),t=wa(t,n),`${i}$${Te(t)}`},Bl=({strategy:t,amountStr:n,chosenStrikesState:a,collateralDataArrState:s,youPayState:i,swapSlippageState:o,shouldSwapState:r,setIsCostLoading:l})=>{const u=le[t].structure,p=jn(u),c=oo(u),[d,y]=i,[m,h]=a,[T,b]=s,[g]=o,[_,v]=r,[C,j]=f.useState(null),[P,R]=f.useState(null),[w,E]=f.useState(null),[S,O]=f.useState(null),L=lo(m),I=!!T.find(B=>B),N=B=>{m[B]=null,T[B]=null,h([...m]),b([...T])};f.useEffect(()=>{!!(d!=null&&d.inPaymentToken)&&v(Ra(d)),l(!1)},[d]);const M={sum:B=>B.reduce((W,U,ge)=>{if(ge===0)return{inUSDC:U.inUSDC,decomposition:[U]};const Wn=W.decomposition;return Wn[ge]={marketToken:U.marketToken,inMarketToken:U.inMarketToken,inUSDC:U.inUSDC},{inUSDC:W.inUSDC+U.inUSDC,decomposition:Wn}},B[0]),separateBuyFromSell:B=>{const V=[],W=[];return B.forEach(U=>{U&&(U.isLong?V.push(U):W.push(U))}),{buyCosts:V,sellCosts:W}},getArgsForHandler:B=>{const{reset:V}=x[B],{isAllowed:W,update:U}=D[B];return[V,W,U]}},x={collateral:{reset:()=>{O({inUSDC:0n})}},trade:{reset:()=>{j(null),R(null),E(null)}},youPay:{reset:()=>{y(null)}}},k={collateral:{calc:()=>{const B=T.filter(W=>W);return M.sum(B)}},trade:{calc:()=>{if(!n)return;const B=[],V=oe(Ne(n));return m.forEach((W,U)=>{W&&B.push(W.utils.calcPremium(V).then(ge=>ge?(W.premiumData=ge,W.amount=V,ge.isLong=W.isLong,ge):(N(U),null)))}),Promise.all(B).then(W=>{const{buyCosts:U,sellCosts:ge}=M.separateBuyFromSell(W);return{maxCost:M.sum(U),minReceived:M.sum(ge)}})}},youPay:{calc:()=>p?(()=>{if(S!=null&&S.inUSDC)return{inUSDC:S.inUSDC+((C==null?void 0:C.inUSDC)??0n),decomposition:fo(u,C==null?void 0:C.decomposition,S.decomposition),shouldSwap:_}})():(()=>({inUSDC:C.inUSDC,decomposition:C.decomposition}))()}},D={collateral:{triggers:[T],isAllowed:I&&L,update:()=>{const B=k.collateral.calc();O(B)}},trade:{triggers:[m],debouncedTriggers:[n],isAllowed:L,update:()=>{k.trade.calc().then(B=>{const{maxCost:V,minReceived:W}=B;j(V),R(W);const U={inUSDC:((W==null?void 0:W.inUSDC)??0n)-((V==null?void 0:V.inUSDC)??0n)};E(U)})}},youPay:{triggers:[w,S,g],isAllowed:!!(p?w!=null&&w.inUSDC&&(S!=null&&S.inUSDC):w!=null&&w.inUSDC),update:()=>{const B=k.youPay.calc();y(B)}}},F=(B,V,W)=>{B(),V&&(l(!0),W())};Object.keys(D).forEach(B=>{const V=()=>{F(...M.getArgsForHandler(B))},W=[...D[B].triggers],U=D[B].debouncedTriggers&&[...D[B].debouncedTriggers];U&&De(V,Ie,U),f.useEffect(V,W)});const Y=()=>{const B=[];return c&&B.push({name:"Max. Cost",value:C==null?void 0:C.inUSDC}),p&&B.push({name:"Min. Received",value:P==null?void 0:P.inUSDC},{name:"Collateral",value:S==null?void 0:S.inUSDC}),B};return e.jsx("div",{className:A("BuilderCost",p&&"has-sell"),children:e.jsx(ee,{id:"BuilderForm_YouPayTooltip",className:"YouPayTooltip",place:"bottom-end",children:Y().map(B=>e.jsxs("div",{className:"YouPayTooltip__item",children:[e.jsx("div",{className:"YouPayTooltip__item-name",children:B.name}),e.jsx("div",{className:"YouPayTooltip__item-value",children:B.value?et(B.value):J()})]},B.name))})})};const Rl=({id:t,decompositionArr:n,...a})=>e.jsx(ee,{className:"TooltipDecomposition",id:t,place:"bottom-end",...a,children:n.map((s,i)=>{const o=i===n.length-1;return e.jsxs(Ge.Fragment,{children:[e.jsxs("div",{className:"TooltipDecomposition__item",children:[e.jsx("div",{className:"TooltipDecomposition__item-name",children:s.nameNode}),e.jsx("div",{className:"TooltipDecomposition__item-value",children:s.valueNode})]}),!o&&e.jsx(he,{})]},i)})}),Xt=t=>t.charAt(0).toUpperCase()+t.slice(1),Ll=t=>t[t.length-1],Ol=({decompositionData:t})=>e.jsx("div",{className:"GreeksDecompositionTooltips",children:dn.map(n=>{const a=t[n];if(!a||!a.length)return null;const i=`BuilderForm_${Xt(n)}DecompositionTooltip`;return e.jsx(Rl,{id:i,decompositionArr:a},i)})});const ns="/sf_draft/assets/pen-7561a00e.svg",Fl="/sf_draft/assets/confirm-d9cebec0.svg",tt=.003,Ul=.005,_e=["USDC","ETH","WBTC"],Fn=({title:t="Slippage",slippage:n,setSlippage:a})=>{var T;const s=b=>`${ce(b*100,6)}`,[i,o]=f.useState(s(n)),[r,l]=f.useState(!1),{node:u,ref:p,hasFocus:c}=Wt([i,o],{maxValue:100}),d=()=>{const b=s(tt);o(b)},y=()=>{const b=Number(i)/100;a(b)},m=()=>{const b=p.current,g=b.value.includes(".");let _=(b.value.length+1)*8.5;g&&(_-=4),b.style.width=_+"px"},h=()=>{(!i||Number(i)===0)&&d(),y(),r||(l(!0),setTimeout(()=>{l(!1)},200))};return f.useEffect(()=>{m()},[i]),f.useEffect(()=>{c||h()},[c]),(T=p.current)==null||T.addEventListener("keyup",b=>{b.keyCode===13&&c&&p.current.blur()}),e.jsxs("div",{className:"SlippageInput",onClick:()=>{var b;r||(b=p.current)==null||b.focus()},children:[e.jsx("div",{className:"SlippageInput__title",children:t}),e.jsxs("div",{className:"SlippageInput__content",children:[e.jsxs("div",{className:A("SlippageInput__input-container",c&&"focused"),children:[u,e.jsx("span",{className:"SlippageInput__unit",children:"%"})]}),e.jsx("button",{className:"SlippageInput__btn",children:e.jsx("img",{src:c?Fl:ns,alt:"Edit slippage"})})]})]})},$l=({swapSlippageState:t})=>{const[n,a]=t,s=be();return e.jsx("div",{className:"SwapSlippageField",children:e.jsx(Fn,{title:s?"Uniswap Slippage":"Slippage",slippage:n,setSlippage:a})})},Hl=({chosenStrikes:t,swapSlippageState:n,shouldSwapState:a})=>{const[s]=a,i={};dn.forEach(c=>{i[c]=[]});const o=(c,d)=>{const y=c.greeks[d],m=$a(c.strike),h={nameNode:e.jsx(Ka,{strikeData:c,priceNode:`$${Te(m)}`}),valueNode:y??J()};i[d].push(h)},r=()=>e.jsx("div",{className:"BuilderCalculations__items",children:dn.map(c=>{const d=Xt(c),y=t.reduce((h,T)=>{if(!T)return h;o(T,c);const b=T.greeks[c];return(h??0)+b},void 0),m=y||y===0;return m||(i[c]=null),e.jsxs("div",{className:"BuilderCalculations__item",children:[e.jsx("div",{className:"BuilderCalculations__item-name",children:d}),e.jsx("div",{className:A("BuilderCalculations__item-value",m&&"tip"),"data-tooltip-id":`BuilderForm_${d}DecompositionTooltip`,children:m?ht(y,3):J()})]},c)})}),l=()=>e.jsx(Wa,{renderHeader:({state:c})=>`${c.isEnter?"Hide":"Show"} greeks`,children:r()}),p=be(576);return e.jsxs("div",{className:"BuilderGreeks",children:[e.jsxs("div",{className:"BuilderGreeks__content",children:[p?l():r(),s&&e.jsx($l,{swapSlippageState:n})]}),e.jsx(Ol,{decompositionData:i})]})};const as=t=>{const{userAddress:n}=ne();return t.map(s=>{let{data:i}=$s({address:n,token:s.isETH?null:s.address,watch:!0});return i||(i={value:0n,decimals:0}),{...i,address:s.address,symbol:s.symbol,icon:s.icon,isETH:s.isETH,isStable:s.isStable,value1eToken:i.value,value:ie(i.value,i.decimals)}})},Wl=t=>{const{isConnected:n,userAddress:a}=ne(),s=G(),i=as(t),{data:o}=Ue(n&&[a,"useTokenBalancesUSDC",i],async()=>{const r=[];return i.forEach(u=>{if(!u)return;u.inTokenDecimals=u.value1eToken,u.inDefaultDecimals=u.value;const p=Rn(s,u.address,u.inDefaultDecimals).then(c=>({...u,inUSDC:c})).catch(c=>(console.log(`Swapping ${u.symbol} to USDC error.

`+c),null));r.push(p)}),await Promise.allSettled(r).then(ts)});return o??[]};const ql=({className:t,options:n,defaultOption:a,defaultValue:s,onChange:i,...o})=>e.jsx(fe,{className:A("SelectorInline",t),options:n,defaultOption:a,defaultValue:s,onChange:i,...o});const Vl=({paymentTokenState:t})=>{const n=G(),{isConnected:a,userAddress:s}=ne(),i=ur(n),o=Wl(i),[r,l]=t,u=()=>{const y=o.find(m=>m.symbol===r.symbol);y!==r.balance&&l({...r,balance:y})};f.useEffect(()=>{u()},[o,s]);const p=y=>a?y===null?J("Error"):H(y)||H(y.inUSDC)?e.jsx(ye,{}):`$${te(y.inUSDC,0)}`:J(),c=i.map((y,m)=>{const h=o[m],T=p(h);return{label:e.jsxs("div",{className:"PaymentTokenSelector__item",children:[e.jsx("div",{className:"PaymentTokenSelector__item-name",children:e.jsx(K,{symbol:y.symbol,isHlight:!0,children:y.symbol})}),e.jsx("div",{className:"PaymentTokenSelector__item-value",children:T})]}),value:y.symbol,balance:h}}),d=[{label:e.jsxs("div",{className:"PaymentTokenSelector__item",children:[e.jsx("div",{children:"Asset"}),e.jsx("div",{children:"Balance, $"})]}),options:c}];return e.jsx(ql,{className:"PaymentTokenSelector",options:d,defaultValue:r.symbol,onChange:y=>{const m=Z(n,y.value);l({...m,balance:y.balance})}},s)},Gl=({youPayState:t,paymentToken:n,isCostLoading:a,tooltipId:s,swapSlippage:i})=>{const o=G(),[r,l]=t,u=()=>r.inUSDC<0?new Promise(m=>{m(null)}):nl(o,n.address,r.inUSDC),p={triggers:[r],isAllowed:!!(r&&n&&H(r.inPaymentToken)),update:()=>{(T=>{const b=j=>Et(j,i??tt),g=j=>Et(j,Ul),{inUSDC:_}=T,v=b(_),C=g(v);return T.inUSDC=C,T})(r);const h=()=>{setTimeout(()=>{l({...r})},1e3)};u().then(T=>{r.paymentToken=n,r.inPaymentToken=T,h()})}},c={triggers:[n.symbol],isAllowed:!!r,reset:()=>{r.inPaymentToken=void 0,l({...r})}};f.useEffect(()=>{p.isAllowed&&p.update()},[...p.triggers]),f.useEffect(()=>{c.isAllowed&&c.reset()},[...c.triggers]);const d={getNegativeValueNode:()=>e.jsx(K,{children:e.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:te(r.inUSDC,0)})}),getPaymentTokenNode:()=>me(r.inPaymentToken,r.paymentToken.isStable),getUsdcNode:()=>r.inUSDC===0n?"$0":et(r.inUSDC),getApproximatelySymbolNode:()=>e.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:qi})};return(()=>a?e.jsx(ye,{}):!r||!n?J():H(r.inPaymentToken)?e.jsx(ye,{}):r.inPaymentToken===null?d.getNegativeValueNode():e.jsxs(K,{isHlight:!0,symbol:n.symbol,"data-tooltip-id":s,className:A(s&&"tip"),children:[d.getPaymentTokenNode(),!s&&e.jsxs(e.Fragment,{children:[d.getApproximatelySymbolNode(),d.getUsdcNode()]})]}))()},Yl=({paymentToken:t})=>{const{isConnected:n}=ne();if(!n)return J();if(t.balance===null)return J("Error");if(H(t.balance))return e.jsx(ye,{});const a=t.balance.value===0n?0:void 0;return e.jsx(K,{symbol:t.symbol,isHlight:!0,children:me(t.balance.inDefaultDecimals,t.isStable,a)})},ss=()=>({opening:[],closing:[]});f.createContext(ss());const Kl=(t,n)=>{const s=Ql({Hegic:[]}),{isConnected:i}=ne();if(!i)return{};const[o,r]=n;return Object.values(s).every(p=>!H(p))&&!o&&r(!0),s},Ql=t=>{const n={};for(const a in t){const s=t[a],i=s&&s.filter(o=>!(Date.now()>o.expiry&&o.pnl.inPercentage===oe(-100)));n[a]=i}return n},is=f.createContext(null),zl=({children:t})=>{const n=Xl();return e.jsx(is.Provider,{value:n,children:t})},$e=()=>f.useContext(is),Xl=()=>{const t=f.useState(ss()),[n,a]=f.useState(!1),s=Kl(t,[n,a]),i=Zl(s),o=Jl(i),r=je("swap-slippage",tt),{userAddress:l}=ne();return f.useEffect(()=>{a(!1)},[l]),{positions:i,positionsByMarket:s,positionsTotalData:o,arePositionsLoaded:n,pendingPositionsState:t,swapSlippageState:r}},Zl=t=>Object.values(t).reduce((a,s)=>(s&&a.push(...s),a),[]),Jl=t=>{if(!t.length)return null;const n={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},a=t.reduce((o,r,l)=>{var p;const u=Yt(o,r,["premium","pnl.inUSDC"]);return u.greeks=Ua(o.greeks,r.greeks),(p=r.collateral)!=null&&p.inUSDC&&(u.collateral.inUSDC+=r.collateral.inUSDC),u},n),s=()=>Fa(null,a.pnl.inUSDC,a.premium),i=t.length===1;return a.pnl.inPercentage=i?t[0].pnl.inPercentage:s(),a},rs=({paymentTokenState:t,youPayState:n,youPayTooltipId:a,isCostLoading:s})=>{const i=$e(),[o]=i.swapSlippageState,[r]=t;return e.jsxs("div",{className:"PaymentMethodPanel",children:[e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Select Payment method"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(Vl,{paymentTokenState:t})})]}),e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"You pay"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(Gl,{youPayState:n,paymentToken:r,isCostLoading:s,tooltipId:a,swapSlippage:o})})]}),e.jsxs("div",{className:"PaymentMethodPanel__section",children:[e.jsx("div",{className:"PaymentMethodPanel__section-title",children:"Balance"}),e.jsx("div",{className:"PaymentMethodPanel__section-content",children:e.jsx(Yl,{paymentToken:r})})]})]})},eu=({paymentToken:t,setPaymentToken:n,youPayState:a,confirmButtonNode:s,isCostLoading:i})=>e.jsxs("div",{className:"BuilderSwap",children:[e.jsx(rs,{paymentTokenState:[t,n],youPayState:a,youPayTooltipId:"BuilderForm_YouPayTooltip",isCostLoading:i}),s]}),tu=(t,n,a,s,i,o,r)=>{const{isConnected:l}=ne(),{connectWallet:u}=Rt(),p=jn(n),c=a.length!==n.length||!a.every(_=>_),d=!!s.find(_=>_&&_.inMarketToken===0n),y=a.find(_=>_==null?void 0:_.isComingSoon),m=()=>{if(!t)return"Enter Amount";if(c)return"Fill out the Strike fields";if(p&&d)return"Fill out the Collateral fields";if(!i)return Pe;if(i>o)return"Insufficient balance"},h=()=>!l||y?!0:!m(),T=()=>{const _="Buy Strategy";return l?y?`Visit ${y.market} app`:m()??_:"Connect wallet"},b=()=>{if(!l){u();return}if(y){window.open(y.marketLink);return}r()};return e.jsx(z,{className:"BuilderForm__button",onClick:b,isDisabled:!h(),children:T()})},nu=({strategy:t,amountStr:n,youPayState:a,chosenStrikesState:s,collateralDataArrState:i,openBuyModal:o,swapSlippageState:r})=>{var C;const l=G(),[u,p]=je("payment-token","ETH"),[c,d]=f.useState(Z(l,u)),y=f.useState(!1),[m,h]=f.useState(!1);f.useEffect(()=>{if(p(c.symbol),!c.address){const j=Z(l,c.symbol);d({...c,...j})}},[c]);const[T]=s,[b]=i,[g]=a,_=le[t].structure,v=tu(n,_,T,b,g==null?void 0:g.inPaymentToken,(C=c.balance)==null?void 0:C.inDefaultDecimals,o);return e.jsxs("div",{className:"BuilderCalculations",children:[e.jsx(Hl,{chosenStrikes:T,swapSlippageState:r,shouldSwapState:y}),e.jsx(Bl,{strategy:t,amountStr:n,chosenStrikesState:s,collateralDataArrState:i,youPayState:a,swapSlippageState:r,shouldSwapState:y,setIsCostLoading:h}),e.jsx(eu,{youPayState:a,paymentToken:c,setPaymentToken:d,confirmButtonNode:v,isCostLoading:m})]})};const os=({stagesArr:t})=>e.jsx("div",{className:"Stages",children:t.map(n=>e.jsx("div",{className:A("Stages__item",n.isActive&&"active"),children:n.name},n.name))}),ls=(t,n,a,s,i=tt,o={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}})=>{const r=G(),l=le[t],[u,p]=f.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:BigInt(l.key)}),[c,d]=f.useState([]);if(!(s!=null&&s.inPaymentToken))return null;const{setIsLoading:y,closeModal:m,addPendingPosition:h}=o,{paymentToken:T,decomposition:b}=s,g=T.isETH,_=()=>c.reduce((S,O)=>S+O,0n),v=ke(r,"TxBuilder"),C=(E,S)=>{const O=Jr[E.protocolName];return v.module(O).then(L=>{u.moduleArr[S]=L})},j=async(E,S)=>{const{isLong:O}=E;let L;O&&(L=b[S]);const I=a[S],N={setToCollateral:I&&It.from(I.inMarketToken),isBaseCollateral:I==null?void 0:I.isBase,premiumData:L};return E.utils.getBuilderParams(E.amount,N,T.decimals).then(k=>{u.parametersArr[S]=k})},P=(E,S)=>{const O=se(r,"Exchanger"),L=b[S],I=L.marketToken,N=Za(T.address,I.address),M=L.inMarketToken,x=Ba(T,I);return Bn(r,I.address,T.address,M).then(k=>Et(k,i)).then(k=>{const D=Fe(k,T.decimals),F=Fe(M,I.decimals);return g&&(c.push(D),d([...c])),O.encodeFromExchange({path:N,tokenIn:T.address,tokenOut:I.address,amountIn:D,amountOutMinimum:F,isETH:g,swap:x}).then(q=>{u.swapDataArr[S]=q})})},R=()=>{const E=[];return n.forEach((S,O)=>{E.push(C(S,O),j(S,O),P(S,O))}),Promise.all(E).then(()=>{p({...u})}).catch(S=>{throw console.log(S),y(!1),new Error("Something went wrong")})};return()=>{y(!0);const{amount:E,asset:S}=n[0];return R().then(()=>{const{isHidden:O}=l,L=$(E),I=L!==1,N=l.plural??`${t}s`,M=I?N:t,x=O?`${S} ${M} opened.`:`${L} ${S} ${M} opened.`,k=e.jsxs(K,{symbol:S,children:[O?"":`${L} `,M," opened."]}),D={text:x,node:k};return Ee(r,v.consolidationOfTransactions,[u.moduleArr,u.parametersArr,u.swapDataArr,u.productType,c.length?{value:_()}:{}],D,y,m)}).then(()=>{d([])}).catch(mt)}},ut=(t,n,a,s=i=>{})=>{const{userAddress:i}=ne(),o=G(),r=Z(o,t);return{check:async()=>r.isETH?new Promise(u=>u(!0)).then(s):so(o,r,i,n,a).then(s),approve:async(u,p)=>{if(r.isETH)throw new Error("Trying to approve ETH");return ao(o,r,n,a,u,p)}}},au=({isOpen:t,setIsOpen:n,asset:a,strategy:s,amountStr:i,chosenStrikes:o,collateralDataArr:r,youPay:l,swapSlippage:u})=>{const p=G(),c=le[s],[d,y]=f.useState(!1),[m,h]=f.useState(null),T=$e(),[b,g]=T.pendingPositionsState,_=ls(s,o,r,l,u,{setIsLoading:y,closeModal:()=>n(!1),addPendingPosition:D=>{D.isOpening=!0,b.opening.push(D),g({...b})}}),v=Ra(l),j=["Approve","Buy"].map(D=>({name:D,isActive:m===D})),{paymentToken:P,inPaymentToken:R}=l,w=me(R,P.isStable),E=P.symbol,S=`${w} ${E}`,O={Approve:`Approve ${S}`,Buy:`Pay ${S}`},L=ke(p,"Exchanger"),I=ut(E,L.address,R,D=>{h(D?"Buy":"Approve")}),N=()=>{h(null),I.check()};f.useEffect(()=>{t&&N()},[t,l]);const M=()=>{if(!m)return Pe;if(d){if(m==="Approve")return`Approving ${E}...`;if(m==="Buy")return`Buying ${s}...`}},x={approve:()=>{I.approve(y,N)},buy:_},k={getBtnText:()=>M()??O[m],getIsBtnEnabled:()=>!M(),getBtnOnClick:()=>{switch(m){case"Approve":return x.approve;case"Buy":return x.buy}}};return e.jsxs(Se,{className:"BuyBuildModal",isOpen:t,setIsOpen:n,children:[e.jsx(os,{stagesArr:j}),e.jsx("h1",{className:"BuyBuildModal__title",children:m??e.jsx(ye,{})}),e.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",e.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[e.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:c.color},children:s}),e.jsx(he,{isVertical:!0}),e.jsx(K,{className:"BuyBuildModal__strategy-amount",symbol:a,isHlight:!0,children:i})]})]}),v&&e.jsx("div",{className:"BuyBuildModal__footer",children:e.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",S," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),e.jsx(z,{className:"BuyBuildModal__button",isDisabled:!k.getIsBtnEnabled(),onClick:k.getBtnOnClick(),children:k.getBtnText()})]})},su=({assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r})=>{const l=f.useState(null),[u]=l,[p,c]=f.useState(!1),d=$e(),{swapSlippageState:y}=d,[m,h]=y;iu(m)||h(tt);const[T]=t,[b]=n,[g]=a,[_]=o,[v]=r,C=()=>{c(!0)};return e.jsxs("div",{className:"BuilderForm App-box",children:[e.jsx(Sl,{assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),e.jsx(nu,{strategy:b,amountStr:g,youPayState:l,chosenStrikesState:o,collateralDataArrState:r,openBuyModal:C,swapSlippageState:y}),(u==null?void 0:u.inPaymentToken)&&e.jsx(au,{isOpen:p,setIsOpen:c,asset:T,strategy:b,amountStr:g,chosenStrikes:_,collateralDataArr:v,youPay:u,swapSlippage:m}),e.jsx(Al,{strategy:b})]})},iu=t=>!(typeof t!="number"||t>1||t<0);const ru=({asset:t,strategy:n,amountStr:a,chosenStrikes:s,collateralDataArr:i})=>{var N;const o=le[n].structure,r=f.useRef(null),l=Ne(a),u={amount:l,strikes:s.map(M=>$((M==null?void 0:M.strike)??0n)),premiums:s.map(M=>{var k;const x=(k=M==null?void 0:M.premiumData)==null?void 0:k.inUSDC;return x&&$(x)}),strategies:o,collaterals:i,isReady:l&&s.length===o.length&&s.every(M=>M)},p=t==="ETH",c=p?.3:.2,d=p?5:10,y=100,m=Be(t),h=$(m),T=h&&Math.round(h/d)*d,b=(M,x)=>{const k=u.strategies[M],D=u.premiums[M],F=u.strikes[M],q=u.amount,Y=u.collaterals[M],B=(Y==null?void 0:Y.liquidationPrice)&&$(Y.liquidationPrice),V=Y&&$(Y.inMarketToken),W=Y==null?void 0:Y.isBase;let U;if(D){switch(k){case 1:x<F?U=-D:U=(x-F)*q-D;break;case 2:x>F?U=-D:U=(F-x)*q-D;break;case-1:if(B&&x>B)W?U=-(V*B)+D:U=-V+D;else if(W){const ge=(F-h)*q+D;x>F?U=ge:U=(x-h)*q+D}else x<F?U=D:U=(F-x)*q+D;break;case-2:B&&x<B?W?U=-(V*B)+D:U=-V+D:x>F?U=D:U=(x-F)*q+D;break}if(U)return Number(U)}},_=(()=>{if(!u)return;const M=u.strikes.reduce((Y,B)=>(Y+B)/2,u.strikes[0]),x=window.innerWidth>480?c:c-.05,k=Math.round(M*(1-x)/100)*100,D=Math.round(M*(1+x)/100)*100,F=[];for(let Y=0;Y<(D-k)/d;Y++){const B=k+Y*d;F.push(B)}const q=[];return u.strategies.forEach((Y,B)=>{F.forEach((V,W)=>{const U=b(B,V);B===0?q.push({closePrice:V,pnl:U}):q[W].pnl=q[W].pnl+U})}),q})(),v=(N=_.reduce((M,x)=>x.pnl>M.pnl?x:M,_[0]))==null?void 0:N.pnl,C=v&&Te(v.toFixed(0)),P=(()=>{if(!_)return;const M=Math.max(..._.map(D=>D.pnl)),x=Math.min(..._.map(D=>D.pnl));if(M<=0)return 0;if(x>=0)return 1;const k=M/(M-x);return isNaN(k)?0:k})(),R=({value:M,cx:x,cy:k})=>{const D=M[1];let F;return D<0?F=re:D>0?F=Le:F=pt,e.jsx("circle",{cx:x,cy:k,r:5,style:{opacity:"0.9"},fill:F})},w=M=>{const{active:x,payload:k,label:D}=M,F=x&&k&&k.length&&Number(k[0].value.toFixed(2));return x&&k&&k.length?e.jsxs("div",{className:"react-tooltip",children:[e.jsxs(K,{symbol:t,isHlight:!0,children:["$",Te(D)]}),e.jsxs("p",{children:["PnL ",e.jsx("span",{className:A({positive:F>0,negative:F<0}),children:`${F!==0?F>0?"+":"-":""}$${Te(Math.abs(F))}`})]})]}):null},E=M=>Te(M),S={fill:pt,fontSize:13},O=dt,[L,I]=f.useState(null);return f.useEffect(()=>{if(r.current&&_){let M;const x=Math.round(y/(r.current.clientWidth/_.length));x<20?M=19:M=Math.floor(x/20)*20-1,I(M)}},[r.current,_,window.innerWidth]),e.jsx("div",{className:"BuilderPositionChart App-box",ref:r,children:u.isReady?e.jsx(gi,{children:e.jsxs(xi,{data:_,margin:{left:(C==null?void 0:C.length)*7.5-40,right:15,top:15},children:[e.jsx(_i,{dataKey:"closePrice",interval:L,tickFormatter:E,tick:S,stroke:O}),e.jsx(vi,{dataKey:"pnl",tickFormatter:E,tick:S,stroke:O,padding:{bottom:15}}),e.jsx(Ci,{cursor:{stroke:pt},content:e.jsx(w,{})}),e.jsx(Mi,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:e.jsx(R,{}),fill:"url(#splitColorTransparent)"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:P,stopColor:Le,stopOpacity:1}),e.jsx("stop",{offset:P,stopColor:re,stopOpacity:1})]}),e.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:P,stopColor:Le,stopOpacity:.3}),e.jsx("stop",{offset:P,stopColor:re,stopOpacity:.3})]})]}),e.jsx(qn,{x:T,stroke:dt,strokeDasharray:"3 3",label:{value:"Current Price",fill:dt,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),u.collaterals.length&&u.collaterals.map(M=>{if(!M||!M.liquidationPrice)return;const x=$(M.liquidationPrice),k=Math.round(x/d)*d;return e.jsx(qn,{x:k,stroke:re,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:re,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},x)}),e.jsx(Si,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):e.jsx(Ke,{children:"Fill out the Strike fields to view position chart"})})},ou=({assetState:t})=>{const n=f.useState("Long Call"),a=f.useState("1"),s=f.useState(null),i=f.useState([]),o=f.useState([]),r=f.useState([]),[l]=t,[u]=n,[p]=a,[c]=o,[d]=r;return e.jsxs("div",{className:"BuilderDashboard",children:[e.jsx(su,{assetState:t,strategyState:n,amountStrState:a,chosenDateState:s,strikesDataArrState:i,chosenStrikesState:o,collateralDataArrState:r}),e.jsx(ru,{asset:l,strategy:u,amountStr:p,chosenStrikes:c,collateralDataArr:d})]})},lu=6,uu=()=>{const{isConnected:t,userAddress:n}=ne(),a=G(),s=se(a,"TxBuilder"),{data:i,error:o}=Ue(t&&[n,"useBuilderPositionsStructure"],async()=>{var d;const r=[],l={},u={},p=await pu(s,n),c=[];for(let y=0;y<p.length;y++){const m=p[y],{buildID:h,productType:T}=_r(m.args),b=Pa.find(P=>le[P].key===Number(T)),g={strategy:b,buildId:h,legsStructure:[]},_=(d=le[b])==null?void 0:d.isCollection,v=cu(a,h),C=[];for(const P in v)v[P].forEach(w=>{w.then(E=>{const S=mu(E,P);g.legsStructure.push(...S),bu(S,h,l)}),C.push(w)});const j=Promise.all(C).then(()=>{r.push(g),_&&hu(g,u)});c.push(j),await fl(c,lu,p.length,y)}return Tu(r,l),gu(r,u),r},{refreshInterval:2e4});return o?(console.log(`Builder Positions error:
`,o),null):i},cu=(t,n)=>{const{Hegic:a}=mo(t),{OpenPositionByHegic:s}=a.filters;return{Hegic:[a.queryFilter(s(n))]}},pu=async(t,n)=>{const{CreateBuild:a}=t.filters,s=await t.queryFilter(a(null,n));return(await du(s,t.provider)).reverse()},du=async(t,n)=>{const a=t.map(o=>yu(o,n)),s=await Promise.all(a);return t.filter((o,r)=>{if(s[r])return!0})},yu=async(t,n)=>{const a=await n.getBlock(t.blockNumber),s=Dt[Dt.length-1],i=Date.now()-s-gt(1);if(a.timestamp*de>i)return!0},mu=(t,n)=>t.map(s=>{const i=fu(n,s);return{market:n,id:i}}),fu=(t,n)=>{switch(t){case"Hegic":return Number(n.args.tokenID);default:throw new Error`Invalid market: ${t}`}},bu=(t,n,a)=>{t.forEach(s=>{const{id:i}=s;a[i]=a[i]??[],a[i].push(n)})},Tu=(t,n)=>{const a=[];for(const s in n)n[s].length>1&&a.push(s);a.forEach(s=>{const i=t.filter(r=>{if(r.legsStructure.find(u=>u.id===s))return!0}),o=i.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,i[0]);i.forEach(r=>{if(r.buildId===o.buildId)return;const l=r.legsStructure.findIndex(p=>p.id===s);r.legsStructure.splice(l,1);const u=n[s].findIndex(p=>p===r.buildId);n[s].splice(u,1)})})},hu=(t,n)=>{const a=xu(t.legsStructure[0].id);n[a]=n[a]??[],n[a].push(t)},gu=(t,n)=>{for(const a in n){const s=n[a].filter(r=>r.legsStructure.length);if(s.length<=1)continue;const i=s.reduce((r,l)=>l.legsStructure.length>r.legsStructure.length?l:r,s[0]),o=t.find(r=>r.buildId===i.buildId);s.forEach(r=>{if(r.buildId===o.buildId)return;o.legsStructure.push(...r.legsStructure);const l=t.findIndex(u=>u.buildId===r.buildId);t.splice(l,1)})}},xu=t=>t.split("_").slice(1).join("_"),{HEAD:_u,COMMON:vu,LEG:us}=Na,cs=()=>{const t=$e(),{positionsByMarket:n}=t,a=uu();if(!a||!n)return;const i=a.map(r=>{var y;const{legsStructure:l,strategy:u}=r,p=[],c=(y=le[u])==null?void 0:y.isCollection;for(let m=0;m<l.length;m++){const{id:h,market:T}=l[m],b=n[T];if(!b)return;const g=b.findIndex(v=>v.id===h),_=b[g];_&&(p.push(_),b[g].role=us)}const d=l.length===1||c&&p.length===1;if(p.length)if(d){const m={...p[0]};return{...r,...m,role:vu}}else{const m=Mu(p),h=p[0].asset;return{...r,legs:p,asset:h,...m,role:_u}}}).filter(r=>!H(r));return Cu(i,n)},Cu=(t,n)=>{const a=[],s=[];Object.values(n).forEach(r=>{r&&s.push(...r)});const o=s.filter(r=>r.role!==us).map(r=>{const{isCall:l,isSpread:u,isLong:p}=r;return{strategy:`${u?l?"Bull":"Bear":p?"Long":"Short"} ${l?"Call":"Put"} ${u?"Spread":""}`.trim(),...r}});return a.push(...t,...o),a},Mu=t=>{const n=t.reduce((a,s)=>{const i=Yt(a,s,["amount","premium","pnl.inUSDC"]);return i.greeks=Ua(a.greeks,s.greeks),i.collaterals=s.collateral?[...a.collaterals,s.collateral]:a.collaterals,i},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return n.pnl.inPercentage=Fa(null,n.pnl.inUSDC,n.premium),n.expiry=t[0].expiry,n};const Su=({position:t,openCloseModal:n})=>{const[a]=$e().pendingPositionsState;if(!t.actions)return null;const{isClosingDisabled:s}=t.actions,i=a.closing.find(l=>l.id===t.id),o=()=>{n(t)},r=be(576);return e.jsx("div",{className:"PositionCloseBtn",children:lt(r?e.jsx(wu,{isDisabled:s,handleClick:o}):e.jsx(Au,{isDisabled:s,handleClick:o}),i)})},Au=({isDisabled:t,handleClick:n})=>e.jsx("button",{className:"close-btn _cross",disabled:t,onClick:n,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[e.jsx("g",{id:"icon-close",clipPath:"url(#clip0_294_4433)",children:e.jsx("path",{id:"Vector",d:"M13.6899 0.320713C13.5917 0.222272 13.475 0.144172 13.3465 0.090885C13.2181 0.0375978 13.0803 0.010169 12.9413 0.010169C12.8022 0.010169 12.6645 0.0375978 12.536 0.090885C12.4076 0.144172 12.2909 0.222272 12.1926 0.320713L7 5.50274L1.80736 0.310093C1.70905 0.211782 1.59233 0.133796 1.46388 0.0805904C1.33543 0.0273845 1.19776 1.03588e-09 1.05873 0C0.919692 -1.03588e-09 0.78202 0.0273845 0.653569 0.0805904C0.525118 0.133796 0.408405 0.211782 0.310093 0.310093C0.211782 0.408405 0.133796 0.525118 0.0805904 0.653569C0.0273845 0.78202 -1.03588e-09 0.919692 0 1.05873C1.03588e-09 1.19776 0.0273845 1.33543 0.0805904 1.46388C0.133796 1.59233 0.211782 1.70905 0.310093 1.80736L5.50274 7L0.310093 12.1926C0.211782 12.291 0.133796 12.4077 0.0805904 12.5361C0.0273845 12.6646 0 12.8022 0 12.9413C0 13.0803 0.0273845 13.218 0.0805904 13.3464C0.133796 13.4749 0.211782 13.5916 0.310093 13.6899C0.408405 13.7882 0.525118 13.8662 0.653569 13.9194C0.78202 13.9726 0.919692 14 1.05873 14C1.19776 14 1.33543 13.9726 1.46388 13.9194C1.59233 13.8662 1.70905 13.7882 1.80736 13.6899L7 8.49726L12.1926 13.6899C12.291 13.7882 12.4077 13.8662 12.5361 13.9194C12.6646 13.9726 12.8022 14 12.9413 14C13.0803 14 13.218 13.9726 13.3464 13.9194C13.4749 13.8662 13.5916 13.7882 13.6899 13.6899C13.7882 13.5916 13.8662 13.4749 13.9194 13.3464C13.9726 13.218 14 13.0803 14 12.9413C14 12.8022 13.9726 12.6646 13.9194 12.5361C13.8662 12.4077 13.7882 12.291 13.6899 12.1926L8.49726 7L13.6899 1.80736C14.0934 1.40384 14.0934 0.724231 13.6899 0.320713Z",fill:"#6988FF"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_294_4433",children:e.jsx("rect",{width:"14",height:"14",fill:"white"})})})]})}),wu=({isDisabled:t,handleClick:n})=>e.jsx(z,{className:"close-btn",type:"micro",isDisabled:t,onClick:n,children:"Close"}),ju=({handleClick:t})=>e.jsx("button",{onClick:t,className:"shrink-0",children:e.jsx("img",{src:ns,alt:"Update Collateral"})}),ku="/sf_draft/assets/multi-626e9c45.svg";const Du=({expiry:t})=>{const n=t-Date.now(),a=n<=0,i=Dn(n,!0).split(":");return e.jsxs("div",{className:A("ExpirationTimer",a&&"expired"),children:[e.jsx("div",{className:"ExpirationTimer__text",children:"Left until expiration"}),e.jsx("div",{className:"ExpirationTimer__timer",children:i.map((o,r)=>{const l=r===i.length-1,u=Ll(o);return e.jsxs(Ge.Fragment,{children:[e.jsx("div",{className:"ExpirationTimer__timer-value",children:o}),!l&&e.jsx("span",{className:"ExpirationTimer__timer-separator",children:":"})]},u)})})]})};const yn=({market:t,strikeParams:n,isSmall:a})=>{const{strike:s,isCall:i,isLong:o,expiry:r}=n,l=Date.now()>r,u=t?Qt[t].circled:ku,p=o?Ga:Ya,c=we(r,"dMMMyy").toUpperCase(),d=$a(s),m=`${c}-${d}-${i?"C":"P"}`,h=ua(e.jsx(Du,{expiry:r}));return e.jsxs("div",{className:A("Brief","InstrumentBrief",a&&"small",l&&"expired"),children:[e.jsxs("div",{className:"Brief__icons",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:u,alt:`${t}`})}),e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:p,alt:`${o?"Long":"Short"}`})})]}),e.jsx("div",{className:"InstrumentBrief__string tip","data-tooltip-id":"Tooltip_Expiration","data-tooltip-html":h,children:m})]})},{HEAD:Eu,LEG:Iu}=Na,Pu={strategy:"Strategy",amount:"Amount",instrument:"Instrument",collateral:e.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",entryPrice:"Entry Price",closePrice:"Close Price",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",closeBtn:""},Nu=({positions:t,openCollateralModal:n,openCloseModal:a,isLoadingComplete:s})=>{const{isConnected:i}=ne(),o=d=>{const{role:y,isOpening:m,isTotal:h,expiry:T}=d,b=y===Eu,g=y===Iu,_=Date.now()>T,v=()=>{if(g)return"";if(h)return J("Total",!1,!0);let{strategy:x}=d;if(!x){const{isCall:q,isLong:Y}=d;x=Kt(Y,q)}const k=le[x],D=k==null?void 0:k.color,F=e.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:e.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:D,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return e.jsxs("span",{className:"flex items-center gap-x-4",style:{color:D},children:[m&&e.jsx(ye,{}),x,b&&F]})},C=()=>{const{asset:x,amount:k}=d;if(k)return e.jsx(K,{symbol:x,children:$(k)})},j=()=>{const{market:x,strike:k,strategy:D,legs:F}=d;if(b){const q=le[D],{isCollection:Y}=q;return Y?e.jsx(yn,{strikeParams:F[0]}):e.jsx("div",{className:"PositionsTable__strike-msg",children:J("Click to see strikes")})}if(k)return e.jsx(yn,{market:x,strikeParams:d})},P=()=>{const{premium:x}=d,k=x<0n,D=te(rt(x)),F=`${k?"–":"+"}$${D}`;return e.jsx("span",{className:A({positive:!k,negative:k}),children:F})},R=()=>{const{collateral:x,collaterals:k,actions:D}=d;if(!x&&(!k||!k.length))return;const F=q=>h?q.inUSDC?e.jsxs("span",{children:["$",te(q.inUSDC)]}):void 0:e.jsx(K,{symbol:q.marketToken.symbol,children:me(q.inMarketToken,q.marketToken.isStable)},q.isBase);return b?w(k,F):D&&!D.isAddingToCollateralDisabled?e.jsxs("div",{className:"flex items-center gap-x-3",children:[F(x),e.jsx(ju,{handleClick:()=>n(d)})]}):F(x)},w=(x,k)=>{const D={base:{},stable:{}},F=Y=>{const{isBase:B}=Y,V=B?"base":"stable";D[V]={...Yt(D[V],Y,["inMarketToken","inUSDC"]),isBase:B}};x.forEach(F);const q=Object.values(D).map(k);return e.jsx("div",{className:"flex flex-col gap-y-5",children:q})},E=()=>{if(!d.pnl)return;const{inUSDC:x,inPercentage:k}=d.pnl,D=x<0?cn.negative:"",F=rt(k),q=$(F)<1?1:0,Y=te(F,q);return e.jsxs("div",{className:A({positive:x>0n,negative:x<0n,muted:x===0n}),children:[e.jsx("span",{style:{color:pt,marginRight:5},children:et(x)}),`(${D}${Y}%)`]})},S=()=>{const{entryPrice:x}=d;if(!H(x))return`$${te(x)}`},O=()=>{const{closePrice:x}=d;if(!H(x))return`$${te(x)}`},L=()=>{const{collateral:x}=d;if(!(!x||!x.liquidationPrice))return`$${te(x.liquidationPrice)}`},I=()=>{const{greeks:x}=d;if(h)for(const k in x)x[k]||(x[k]=void 0);return x},N=()=>b?d.legs.map(o):void 0,M=()=>m?"":e.jsx(Su,{openCloseModal:a,position:d});return{id:`${d.buildId}_${d.id}`,strategy:v(),amount:C(),instrument:j(),premium:P(),collateral:R(),pnl:E(),entryPrice:S(),closePrice:O(),liqPrice:L(),...I(),children:N(),closeBtn:M(),omittedKeys:(b||h)&&["instrument","closeBtn"],className:A(_&&"expired")}},r=Pu,l=t==null?void 0:t.map(o),u={titleData:r,itemsData:l},p=[{name:"Active",isActive:!0}],c=()=>{let d;return i?!t||!s?d="Loading...":t.length||(d="No open positions"):d="No wallet connected",e.jsx("div",{className:"App-box PositionsTable__message",style:s?{}:{marginBottom:10},children:J(d)})};return e.jsxs("div",{className:"PositionsTable",children:[e.jsx("div",{className:"PositionsTable__header",children:e.jsx(Nt,{links:p,type:"border"})}),t!=null&&t.length?e.jsxs(e.Fragment,{children:[!s&&c(),e.jsx(Va,{structureData:u})]}):c()]})};const ps=t=>{const{value:n,setValue:a,maxValue:s,placeholder:i,isDisabled:o,isFocused:r,hasError:l,formatInputStringFns:u=[it,Ne],title:p,presentedValue:c,presentedValueTitle:d,iconData:y,unitStr:m}=t,h=Wt([n,a],{maxValue:s,placeholder:i,isDisabled:o,isFocused:r},u),T=A(t.className,h.hasFocus&&"hlight",l&&"error",o&&"disabled"),b=u[0];return e.jsxs("div",{className:A("InputFamily InputComplexNumeric",T),onClick:()=>{h.ref.current.focus()},children:[e.jsxs("div",{className:"InputComplexNumeric__header",children:[e.jsx("div",{className:"InputComplexNumeric__title",children:p}),c&&e.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:g=>{g.stopPropagation(),a(b(c))},children:[e.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[d,":"]}),b(c)]}),y&&e.jsx("div",{className:"InputComplexNumeric__icon",children:e.jsx("img",{src:y.src,alt:y.alt??"icon"})})]}),e.jsxs("div",{className:"InputComplexNumeric__body",children:[e.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:h.node}),e.jsxs("div",{className:"InputComplexNumeric__helper",children:[s&&e.jsx("button",{className:"InputFamily__max-btn",disabled:o,onClick:g=>{g.stopPropagation(),a(it(s))},children:"Max"}),m&&e.jsx("div",{className:"InputComplexNumeric__unit",children:m})]})]})]})};const _t=({className:t,children:n,value:a,symbol:s="USDC",isHlight:i=!0,style:o,...r})=>{const l=G(),u=Z(l,s).icon,p=n,c=A(i&&"_hlight",t);return e.jsxs("div",{className:A("CurrencyWithText",c),style:o,...r,children:[e.jsx("img",{src:u,alt:`${s} icon`}),e.jsx("span",{className:"CurrencyWithText__value",children:a}),e.jsx("span",{className:"CurrencyWithText__text",children:p})]})},Bu=({position:t,isOpen:n,setIsOpen:a})=>{var _;const s=G(),[i,o]=f.useState(""),[r,l]=f.useState(!1),[u,p]=f.useState(null),c=((_=t==null?void 0:t.collateral)==null?void 0:_.marketToken)??{symbol:"ETH"},d=jt(c.symbol),y=ut(c==null?void 0:c.symbol,pi,Q(i),p),m=()=>{p(null),y.check()};if(f.useEffect(()=>{p(null)},[i]),De(()=>{i&&m()},Ie,[i]),!t||!t.collateral)return null;const h=()=>{if(!i)return"Enter Amount";if(u===null)return Pe;if(r)return u?"Updating Collateral...":`Approving ${c.symbol}...`},T=()=>!h(),b=()=>{const v=u?"Add Collateral":`Approve ${i} ${c.symbol}`;return h()??v},g=()=>{if(!u){y.approve(l,m);return}const v=Q(i);Ee(s,t.actions.addToCollateral,[v],{text:`${i} ${c.symbol} added.`,node:e.jsx(_t,{value:i,symbol:c.symbol,children:"added to collateral."})},l,()=>a(!1))};return e.jsxs(Se,{className:"PositionCollateralModal",isOpen:n,setIsOpen:a,reset:()=>{o(""),p(null)},children:[e.jsx("h1",{children:"Edit Collateral"}),e.jsx(ps,{value:i,setValue:o,title:"Add Amount",iconData:{src:d},isFocused:!0}),e.jsx(z,{isDisabled:!T(),onClick:g,children:b()})]})};const Ru=({position:t,isOpen:n,setIsOpen:a})=>{const s=G(),[i,o]=f.useState(""),[r,l]=f.useState(void 0),[u,p]=f.useState(!1),[c,d]=$e().pendingPositionsState,y=()=>{const x=$t(t.amount);o(x)},m=x=>{l(void 0),t.utils.calcPnl(x).then(l)};if(f.useEffect(()=>{n&&t&&y()},[n]),De(()=>{t&&i&&m(Q(i))},Ie,[i]),!t||!t.actions)return null;const h=x=>{if(x)c.closing.push({id:t.id,market:t.market});else{const k=c.closing.findIndex(D=>D.id===t.id);k!==-1&&c.closing.splice(k,1)}d({...c})},{close:T}=t.actions,{asset:b,amount:g,strategy:_,isCall:v,isLong:C}=t,j=_??`${C?"Long":"Short"} ${v?"Call":"Put"}`,P=e.jsxs(K,{symbol:b,children:[i," ",j," closed."]}),w={text:`${i} ${b} ${j} closed.`,node:P},E=Q(i),S=r==null?void 0:r.inUSDC,O=()=>{Ee(s,T,[E],w,p,()=>{h(!0),a(!1)})},L=()=>{if(!i)return"Enter Amount";if(u)return"Closing Strategy..."},I=()=>L()??"Close Strategy",N=()=>!L(),M=jt(b);return e.jsxs(Se,{className:"ClosePositionModal",isOpen:n,setIsOpen:a,reset:()=>{o(""),l(void 0)},children:[e.jsxs("div",{className:"ClosePositionModal__body",children:[e.jsx("h1",{children:"Close Strategy"}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"info-row__title",children:"Instrument"}),e.jsx("div",{className:"info-row__value",children:e.jsx(yn,{market:t.market,strikeParams:t})})]}),t.market!=="Hegic"&&e.jsx(ps,{value:i,setValue:o,title:"Amount",iconData:{src:M},isFocused:!0,maxValue:$(g)})]}),e.jsxs("div",{className:"ClosePositionModal__footer",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"info-row__title",children:"PnL"}),e.jsx("div",{className:A("info-row__value",{positive:S>0n,negative:S<0n}),children:pe(()=>Nl(S),H(S))})]}),e.jsx(z,{isDisabled:!N(),onClick:O,children:I()})]})]})},ds=({positions:t})=>{const n=$e(),{arePositionsLoaded:a,positionsTotalData:s,pendingPositionsState:i}=n,o=t==null?void 0:t.sort((b,g)=>g.isTotal?-1:b.isTotal?1:En(b,g,"pnl.inUSDC",-1));o==null||o.forEach(b=>{b.legs&&b.legs.sort(Oa("pnl.inUSDC",-1))});const r=o&&s?[...o,s]:o,[l,u]=f.useState(null),[p,c]=f.useState(!1),[d,y]=f.useState(!1),m=b=>{u(b),c(!0)},h=b=>{u(b),y(!0)},[T]=i;return T.opening&&r&&[...T.opening,...r],e.jsxs("div",{className:"Positions",children:[e.jsx("h1",{className:"Positions__title",children:"My Positions"}),e.jsx(Nu,{positions:r,isLoadingComplete:a,openCollateralModal:m,openCloseModal:h}),e.jsx(Bu,{isOpen:p,setIsOpen:c,position:l}),e.jsx(Ru,{isOpen:d,setIsOpen:y,position:l})]})},ys=f.createContext(null),Lu=({children:t})=>{const n=je("asset","ETH");return e.jsx(ys.Provider,{value:n,children:t})},vt=()=>f.useContext(ys),Ou=()=>{const t=vt(),n=cs();return e.jsxs("div",{className:"Builder",children:[e.jsx(ou,{assetState:t}),e.jsx(ds,{positions:n})]})},Un=()=>f.useContext(ms),X=t=>{const n=Un();return t.endsWith("State")?n[t]:n[`${t}State`][0]},Fu=()=>{const t=je("asset","ETH"),n=je("OptionChain-isDistanceEnabled",!1),a=f.useState(null),s=f.useState(!0),i=f.useState(!0),o=f.useState(!1);return{assetState:t,isDistanceEnabledState:n,strikePriceState:a,isCallState:s,isLongState:i,isModalOpenState:o}},ms=f.createContext(null),Uu=({children:t})=>{const n=Fu();return e.jsx(ms.Provider,{value:n,children:t})};const $u="/sf_draft/assets/date-1ea6323e.svg",fs=({chosenDate:t,setChosenDate:n,type:a="Selector",shouldRenderCarousel:s=!1})=>{const{dates:i}=Ae();f.useEffect(()=>{i&&!t&&n(i[0])},[i]);const o=be(1100)||!s;return e.jsx(zt,{className:A("DateController",`_${a}`),title:"Expiration Date",children:e.jsx("div",{className:"DateController__items",children:pe(()=>o?e.jsx(Hu,{chosenDate:t,setChosenDate:n,type:a}):e.jsx(Vu,{chosenDate:t,setChosenDate:n}),H(i))})})},Hu=({chosenDate:t,setChosenDate:n,type:a})=>{const{dates:s}=Ae(),i=s.map(l=>{const u=Wu(a,l);return{value:l,label:e.jsx(qu,{date:l,expiryStr:u})}}),o=t&&i.find(l=>l.value===t),r=a==="Selector"?e.jsx("img",{src:$u,alt:"Strategy selector icon"}):null;return e.jsx(fe,{className:r?"Selector_thin-options":"",placeholder:"Choose Date",options:i,value:o,onChange:l=>{n(l.value)},iconNode:r})},Wu=(t,n)=>{const a=n-Date.now();switch(t){case"Selector":return Dn(a);case"Selector_no-icon":return`Expires in ${Vt(a)} days`;default:return""}},qu=({date:t,expiryStr:n})=>e.jsxs("div",{className:"DateController__selector-date",children:[e.jsx("div",{className:"DateController__selector-date-value",children:we(t,"d MMM yy")}),e.jsx("div",{className:"DateController__selector-date-expiry",children:n})]}),Vu=({chosenDate:t,setChosenDate:n})=>{const{dates:a}=Ae(),s=a.map(i=>{const o=we(i,"d MMM yy"),r=Vt(i-Date.now()),l=t===i;return e.jsxs(z,{className:A("DateController__item",l&&"chosen"),type:"stroke",onClick:()=>n(i),children:[e.jsx("div",{className:"DateController__item-date",children:o}),e.jsxs("div",{className:"DateController__item-expiry",children:[r," days"]})]},i)});return e.jsx(Qa,{id:"DateControllerCarousel",spaceBetween:8,isDraggable:!1,breakpoints:{992:{slidesPerView:7},1200:{slidesPerView:8},1300:{slidesPerView:"auto"}},children:s})};const Gu=({isCheckedState:t,text:n})=>{const[a,s]=t,i=o=>{const r=o.target;s(r.checked)};return e.jsxs("div",{className:"Checker",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:i}),e.jsx("label",{children:n})]})},Yu=()=>{const t=Un(),{assetState:n,isDistanceEnabledState:a}=t,[s,i]=n,[o,r]=Ae().chosenDateState;return e.jsxs("div",{className:"OptionChainControllers",children:[e.jsx(fs,{chosenDate:o,setChosenDate:r,type:"Selector_no-icon",shouldRenderCarousel:!0}),e.jsx(On,{asset:s,setAsset:i}),e.jsx(Gu,{isCheckedState:a,text:"Distance"})]})};const Ku=t=>Object.keys(t).map(BigInt).sort(xt),$n=t=>{const n=[];Object.values(t).forEach(i=>{n.push(...Object.keys(i))});const a=n.map(BigInt);return Gt(a).sort(xt)},Qu=t=>jo(t),zu=({asset:t,chosenDate:n,strikes:a,isDistanceEnabled:s})=>{const i=$n(a),o=Be(t),r=we(n??0,"d MMM yy"),l=be();return e.jsxs("div",{className:A("OptionChainStrikeList",s&&"_distance"),children:[!l&&e.jsx("div",{className:"OptionChainStrikeList__cell _title whitespace-nowrap",children:r}),e.jsx("div",{className:"OptionChainStrikeList__cell _title",children:"Strike"}),e.jsx(Xu,{assetPrice:o,strikePrices:i,isDistanceEnabled:s})]})},Xu=({assetPrice:t,strikePrices:n,isDistanceEnabled:a})=>{const s=n.filter(r=>{const l=Sn(t,.001);return rt(r-t)<l}),i=xo(s,t);let o;return i||(o=n.reduce((r,l,u)=>{if(r)return r;if(t<l||u===n.length-1)return l},void 0)),e.jsx(e.Fragment,{children:n.map(r=>{const l=r===i,u=!l&&r===o,p=`$${Ze(r)}`;return e.jsxs("div",{className:A("OptionChainStrikeList__cell",l&&"_assetPrice"),children:[u&&e.jsx(Ju,{assetPrice:t,strikePrices:n}),e.jsxs("div",{className:"OptionChainStrikeList__strike",children:[p,a&&e.jsx(Zu,{assetPrice:t,strikePrice:r})]})]},r)})})},Zu=({assetPrice:t,strikePrice:n})=>{const a=$(ot(n,t))*100-100,s=ce(a,a>0&&a<1?1:0);return e.jsxs("span",{className:A("OptionChainStrikeList__distance",{negative:s<0,positive:s>0,neutral:s===0}),children:["(",s,"%)"]})},Ju=({assetPrice:t,strikePrices:n})=>{if(!t)return null;const a=A("OptionChainStrikeList__assetPrice",t>kt(n)&&"_last"),s=$(t),i=et(t,s<100?2:0);return e.jsx("div",{className:a,children:i})};const nt=({style:t})=>e.jsx("div",{className:"SpinnerBig",style:t,children:e.jsxs("svg",{viewBox:"0 0 100 100",children:[e.jsx("defs",{}),e.jsx("circle",{className:"SpinnerBig__circle",style:{fill:"transparent",stroke:"#fff",strokeWidth:"7px",strokeLinecap:"round"},cx:"50",cy:"50",r:"45"})]})});const bs="/sf_draft/assets/arrow-up_green-2d5f573c.svg",Ts="/sf_draft/assets/arrow-down_red-ed33cd18.svg",hs=({strikes:t,isCall:n,renderStrikeList:a})=>{const s=X("asset"),i=X("isDistanceEnabled"),o=Be(s),r=be(),l=f.useRef(null);return f.useEffect(()=>{if(r){const u=document.querySelector(".OptionChainStrikeList");l.current&&(l.current.style.paddingRight=`${u.clientWidth}px`)}else l.current.style.paddingRight&&(l.current.style.paddingRight="")},[r,i]),e.jsx("div",{className:"OptionChainTable__wrapper",children:e.jsxs("div",{className:"OptionChainTable",children:[e.jsx(ec,{isCall:n}),e.jsxs("div",{className:"OptionChainTable__scrollable",ref:l,children:[e.jsx(tc,{}),e.jsx(nc,{strikes:t,isCall:n,assetPrice:o})]}),r&&a()]})})},ec=({isCall:t})=>{const n=be(),[a]=Ae().chosenDateState,s=we(a,"d MMM yy"),i=()=>e.jsxs("div",{className:"OptionChainTable__cell-content",children:[t?"Calls":"Puts",e.jsx("img",{src:t?bs:Ts,alt:t?"Arrow up":"Arrow down"})]});return e.jsxs("div",{className:A("OptionChainTable__cell _title _main-title",t?"positive":"negative"),children:[i(),n&&e.jsx("span",{className:"text-white",children:s})]})},tc=()=>e.jsxs("div",{className:"OptionChainTable__head",children:[e.jsxs("div",{className:"OptionChainTable__head-group",children:[e.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),e.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"IV Bid"}),e.jsx("div",{className:"OptionChainTable__cell _title _head positive",children:"Bid"})]}),e.jsxs("div",{className:"OptionChainTable__head-group",children:[e.jsx("div",{className:"OptionChainTable__cell _title _head muted_light",children:"Size"}),e.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"IV Ask"}),e.jsx("div",{className:"OptionChainTable__cell _title _head negative",children:"Ask"})]})]}),nc=({strikes:t,isCall:n,assetPrice:a})=>{const s=Un(),[,i]=s.isModalOpenState,o=$n(t),r=u=>{const p=Kt(u,n),c=Qu(t[p]);return o.map(d=>{const y=`${d}_${u}`,m=In(n,d,a),h=c.filter(j=>j.strike===d);if(!h.length)return l(y,m);const T=h.reduce((j,P)=>{const R=j.premiumData.inUSDC,w=P.premiumData.inUSDC;if(u){if(w<R)return P}else if(w>R)return P;return j},h[0]),b=h.reduce((j,P)=>j+(P.liquidity??0n),0n),g=b?te(b,1):J(),_=Ha(T,a).formatted,v=pe(()=>et(T.premiumData.inUSDC),!T.premiumData);return l(y,m,{size:g,IV:_,price:v},()=>{const[,j]=s.isCallState,[,P]=s.isLongState,[,R]=s.strikePriceState;j(n),P(u),R(d),i(!0)})})},l=(u,p,c,d=()=>{})=>{const y=!c;return e.jsxs("button",{className:A("OptionChainTable__strikes-item",p&&"_ITM"),disabled:y,onClick:d,children:[e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.size)??J()}),e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.IV)??J()}),e.jsx("div",{className:"OptionChainTable__strikes-item-cell OptionChainTable__cell",children:(c==null?void 0:c.price)??J()})]},u)};return e.jsxs("div",{className:"OptionChainTable__strikes",children:[e.jsx("div",{className:"OptionChainTable__strikes-long",children:r(!1)}),e.jsx("div",{className:"OptionChainTable__strikes-short",children:r(!0)})]})};const ac=()=>{const t=X("asset"),n=X("isDistanceEnabled"),[a]=Ae().chosenDateState,s=Ln(t,a),i=!a||!s,o=be();if(!i&&!$n(s).length)return e.jsx("div",{className:"OptionChainOptions",children:e.jsx(Ke,{children:"No Liquidity"})});const l=()=>e.jsx(zu,{asset:t,chosenDate:a,strikes:s,isDistanceEnabled:n});return lt(e.jsxs("div",{className:"OptionChainOptions",children:[e.jsx(sc,{asset:t,strikes:s,renderStrikeList:l,isDistanceEnabled:n}),!o&&l(),e.jsx(ic,{asset:t,strikes:s,renderStrikeList:l,isDistanceEnabled:n})]}),i,e.jsx(nt,{style:{margin:"50px auto 70px"}}))},sc=({strikes:t,renderStrikeList:n})=>e.jsx(hs,{strikes:t,renderStrikeList:n,isCall:!0}),ic=({strikes:t,renderStrikeList:n})=>e.jsx(hs,{strikes:t,renderStrikeList:n,isCall:!1}),rc=()=>e.jsxs("div",{className:"OptionChainDashboard App-box",children:[e.jsx(Yu,{}),e.jsx(ac,{})]});const Hn=({oppositeLabels:t,isOn:n,setIsOn:a})=>e.jsxs("div",{className:"Switcher",children:[e.jsx("button",{className:A("Switcher__button","positive",n&&"chosen"),onClick:()=>a(!0),children:t[0]}),e.jsx("button",{className:A("Switcher__button","negative",!n&&"chosen"),onClick:()=>a(!1),children:t[1]})]});const oc=({isCall:t,setIsCall:n})=>{const a=[e.jsxs("div",{className:"CallPutController__label",children:[e.jsx("img",{src:bs,alt:"arrow up"}),"Call"]}),e.jsxs("div",{className:"CallPutController__label",children:[e.jsx("img",{src:Ts,alt:"arrow down"}),"Put"]})];return e.jsx(zt,{className:"CallPutController",title:"Strategy",children:e.jsx(Hn,{oppositeLabels:a,isOn:t,setIsOn:n})})};const lc=({strikePrices:t,chosenStrikePrice:n,setChosenStrikePrice:a,asset:s,isCall:i})=>{f.useEffect(()=>{t.find(p=>p===n)||a(null)},[t]);const o=Be(s),r=t.map(u=>{const p=In(i,u,o);return{value:u,label:e.jsx("div",{className:A("StrikeController__item",p&&"_ITM"),children:e.jsx("span",{children:`$${Ze(u)}`})})}}),l=e.jsx("img",{src:xa,alt:"graph icon"});return e.jsx(zt,{title:"Strike",className:"StrikeController",children:e.jsx(fe,{className:"Selector_thin-options",placeholder:"Choose Strike",options:r,value:r.find(u=>u.value===n),onChange:u=>{a(u.value)},iconNode:l},t)})};const uc=({contentType:t,market:n})=>{const a={Hegic:e.jsx(cc,{contentType:t})};return e.jsx("div",{className:"MarketInfoTooltip",children:a[n]})},cc=({contentType:t})=>{const n=()=>e.jsxs("div",{children:[e.jsxs("ul",{children:[e.jsx("li",{children:"You can't close your position if your option is OTM (Out of the money)"}),e.jsx("li",{children:"You can exercise only the Intrinsic Value of your option (the difference between the strike price and the settlement price)"})]}),e.jsxs("div",{className:"MarketInfoTooltip__important-note",children:["You must exercise your ",e.jsx("br",{}),"option before the expiration date; otherwise, it will expire worthless."]})]}),a=()=>e.jsx("div",{children:"Zero fees 🔥"}),s=()=>e.jsx("div",{children:"The payoff for both call and put options is in USDC.e"});return e.jsx(pc,{Overall:n(),Fees:a(),PayoffAsset:s(),contentType:t})},pc=({Overall:t,Fees:n,PayoffAsset:a,contentType:s})=>({"2Market":t,Fees:n,"Payoff Asset":a})[s],dc=({marketStrikeData:t})=>{const{market:n}=t,a=Qt[n].circled,s=["2Market","Fees","Payoff Asset"];return e.jsxs("div",{className:"Brief MarketBrief",children:[e.jsx("div",{className:"Brief__icon",children:e.jsx("img",{src:a,alt:n})}),s.map(i=>{const o=ua(e.jsx(uc,{market:n,contentType:i}));return e.jsx("div",{className:"MarketBrief__tooltip-trigger","data-tooltip-id":"Tooltip_MarketInfo","data-tooltip-html":o,children:e.jsx("span",{className:"tip",children:i})},i)})]})},yc=({isLong:t,setIsLong:n})=>e.jsx(Hn,{oppositeLabels:["Buy","Sell"],isOn:t,setIsOn:n}),ct=f.createContext(null),mc=()=>{var j;const[t]=Ae().chosenDateState,[n,a]=X("isModalOpenState"),s=X("asset"),i=X("strikePrice"),o=X("isCall"),r=X("isLong"),l=be(),u=G(),p=f.useState({}),c=f.useState(null),d=f.useState(Z(u,JSON.parse(localStorage.getItem("payment-token"))??"ETH")),[y]=d;f.useEffect(()=>{localStorage.setItem("payment-token",JSON.stringify(y.symbol))},[y]);const m=Ln(s,t),h=Kt(r,o),T=Ku((m==null?void 0:m[h])??{}),b=(j=m==null?void 0:m[h])==null?void 0:j[i],g=f.useState([]),_=f.useState(!1),C={amountsState:p,availableMarkets:b,errorMarketsState:g,areStrikesLoading:!m,isCostLoadingState:_};return e.jsx(ct.Provider,{value:C,children:e.jsxs(Se,{className:A("OptionChainModal",l&&"_scrollable"),isOpen:n,setIsOpen:a,children:[e.jsx(fc,{strikePrices:T}),e.jsx(he,{}),e.jsx(bc,{availableMarkets:b,strikePrices:T}),e.jsx(vc,{}),e.jsx(Cc,{paymentTokenState:d,youPayState:c})]})})},fc=({strikePrices:t})=>{const[n,a]=Ae().chosenDateState,{areStrikesLoading:s}=f.useContext(ct),[i,o]=X("assetState"),[r,l]=X("strikePriceState"),[u,p]=X("isCallState");return e.jsxs("div",{className:"OptionChainModal__controllers",children:[e.jsx(oc,{isCall:u,setIsCall:p}),e.jsx(fs,{chosenDate:n,setChosenDate:a}),pe(()=>e.jsx(lc,{strikePrices:t,chosenStrikePrice:r,setChosenStrikePrice:l,asset:i,isCall:u}),s),e.jsx(On,{asset:i,setAsset:o})]})},bc=({availableMarkets:t,strikePrices:n})=>{const[a,s]=X("isLongState"),{areStrikesLoading:i}=f.useContext(ct);return e.jsxs("div",{className:"OptionChainModal__markets",children:[e.jsx(Tc,{isLong:a,setIsLong:s}),lt(e.jsx(hc,{availableMarkets:t,isLong:a,strikePrices:n}),i,e.jsx(nt,{}))]})},Tc=({isLong:t,setIsLong:n})=>e.jsxs("div",{className:"OptionChainModal__markets-header",children:[e.jsxs("h1",{className:"OptionChainModal__markets-title",children:[t?"Buy":"Sell"," Options"]}),e.jsx("div",{className:"OptionChainModal__markets-long-controller",children:e.jsx(yc,{isLong:t,setIsLong:n})})]}),hc=({availableMarkets:t,isLong:n,strikePrices:a})=>{const s=X("asset"),i=Be(s);return e.jsx("div",{className:"OptionChainModal__markets-table-overflow",children:e.jsxs("table",{className:"OptionChainModal__markets-table",cellPadding:0,cellSpacing:0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Instrument"}),e.jsx("th",{children:"Available size"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"IV"}),e.jsxs("th",{children:["Amount to ",n?"buy":"sell"]})]})}),e.jsx("tbody",{children:t?t.map(o=>e.jsx(gc,{marketStrikeData:o,assetPrice:i},o.market)):e.jsx(xc,{strikePrices:a})})]})})},gc=({marketStrikeData:t,assetPrice:n})=>{const{market:a,premiumData:s,priceForAmount:i,liquidity:o}=t,r=et(i??s.inUSDC),l=o?Ze(o,1):J("Will be available soon",!0),u=Ha(t,n).formatted;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(dc,{marketStrikeData:t})}),e.jsx("td",{children:l}),e.jsx("td",{children:r}),e.jsx("td",{children:u}),e.jsx("td",{children:e.jsx(_c,{marketStrikeData:t})})]},a)},xc=({strikePrices:t})=>{const n=t.length?"Choose strike to view available markets":"No Liquidity";return e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"_no-liquidity",children:e.jsx(Ke,{fontSize:15,children:n})})})},_c=({marketStrikeData:t})=>{const{market:n,liquidity:a}=t,s=Ae().chosenDateState,i=X("strikePrice"),o=X("isCall"),r=X("isLong"),l=X("isModalOpen"),{amountsState:u,errorMarketsState:p}=f.useContext(ct),[c,d]=u,[y]=p,[m,h]=f.useState("");f.useEffect(()=>{c[n]=m?Q(m):0n,d({...c})},[m]),f.useEffect(()=>{h(""),d({})},[o,r,s,i,l]);const T=!!y.find(v=>v===n),b=T&&c[n]>oe(.1)?"Try reducing your size":"",{isComingSoon:g}=t,_=g?`${r?"Buying":"Selling"} ${n} options will be available soon`:"";return e.jsx("div",{className:"OptionChainModal__amount-input","data-tooltip-id":g&&"Tooltip_bottom","data-tooltip-content":_,children:e.jsx(qt,{className:A("OptionChainModal__markets-table-input"),hasError:T,errorMsg:b,value:m,setValue:h,maxValue:a?$(a):void 0,placeholder:"0",isDisabled:g})})},vc=()=>{const t=$e(),[n,a]=t.swapSlippageState;return e.jsxs("div",{className:"OptionChainModal__details",children:[e.jsx("div",{className:"OptionChainModal__details-title",children:"Details"}),e.jsx("div",{className:"OptionChainModal__details-slippage-input",children:e.jsx(Fn,{slippage:n,setSlippage:a})})]})},Cc=({paymentTokenState:t,youPayState:n})=>{const a=X("isCall"),s=X("isLong"),i=X("strikePrice"),[o]=Ae().chosenDateState,[r]=$e().swapSlippageState,{amountsState:l,availableMarkets:u,errorMarketsState:p,isCostLoadingState:c}=f.useContext(ct),[d]=l,[y,m]=p,[h,T]=n,[b,g]=c,[_]=t,v=E=>{m([...y,E])},C=E=>{m(y.filter(S=>S!==E))},j=()=>{m([])},P=()=>{u.forEach(E=>{E.priceForAmount=null})},R=()=>{T(null),P(),j()},w=async(E=!1)=>{if(!u||ln(d)){R();return}const S=gs(h,b);g(!0);const O=u.map(async N=>{const{market:M}=N,{calcPremium:x}=N.utils,k=d[M];if(!k)return N.priceForAmount=null,S?new Promise(async q=>{await x(oe(.1)).catch(),setTimeout(()=>{N.priceForAmount=null,q()},1700)}):0n;const D=await x(k);return D?(E&&(N.priceForAmount=ot(D.inUSDC,k)),C(M),D):(v(M),N.priceForAmount=null,0n)}).filter(N=>N),L=(await Promise.all(O)).filter(N=>N),I=L.reduce((N,M)=>N+M.inUSDC,0n);T(ln(d)?null:{inUSDC:I,decomposition:[...L]}),g(!1)};return De(()=>{w(!0)},Ie,[d,u]),f.useEffect(()=>{w()},[r]),f.useEffect(()=>{ln(d)&&R()},[h]),f.useEffect(()=>{T(null),m([])},[a,s,o,i]),e.jsxs("div",{className:"OptionChainModal__payment-panel",children:[e.jsx(rs,{paymentTokenState:t,youPayState:n,isCostLoading:b}),e.jsx(Mc,{youPay:h,isCostLoading:b,paymentToken:_})]})},Mc=({youPay:t,isCostLoading:n,paymentToken:a})=>{const s=G(),{isConnected:i}=ne(),{connectWallet:o}=Rt(),r=X("isLong"),l=X("isCall"),[,u]=X("isModalOpenState"),{availableMarkets:p,amountsState:c,errorMarketsState:d,areStrikesLoading:y}=f.useContext(ct),[m]=c,[h,T]=f.useState(null),[b]=d,[g,_]=f.useState(!1),[v,C]=f.useState(!1),j=Je(s,"Exchanger"),P=ut((a==null?void 0:a.symbol)??"ETH",j,(t==null?void 0:t.inPaymentToken)??0n,_),w=ls(`${r?"Long":"Short"} ${l?"Call":"Put"}`,h,[],t,tt,{setIsLoading:C,closeModal:()=>u(!1)});f.useEffect(()=>{if(p){const I=[];for(const N in m){const M=m[N];if(M){const x=p.find(k=>k.market===N);I.push({...x,amount:M})}}T(I)}},[m,p]);const E=gs(t,n);f.useEffect(()=>{E?_(void 0):t?t.inUSDC===0n?_(!1):P.check():_(!1)},[t,n]);const S=()=>{if(!i)return!1;if(y||E||H(g)||!(a!=null&&a.balance))return Pe;if(v)return g?"Submitting...":`Approving ${a.symbol}...`;if(!p)return"Empty strike";if(b.length)return"Invalid input";const N=Object.values(m).every(x=>!x);if(!t||t.inUSDC===0n||N)return"Enter amount";const M=a.balance.inDefaultDecimals;if(M&&M<t.inPaymentToken)return"Insufficient balance"},O=()=>{if(!i)return"Connect Wallet";const I=S();return I||(g?`${r?"Buy":"Sell"} options`:`Approve ${me(t.inPaymentToken,a.isStable)} ${a.symbol}`)},L=()=>{if(!i){o();return}if(!g){P.approve(C,P.check);return}w()};return e.jsx(z,{isDisabled:S(),onClick:L,children:O()})},gs=(t,n)=>n||t&&H(t.inPaymentToken),ln=t=>Object.values(t).every(n=>!n),Sc=()=>{const t=cs();return e.jsx(Uu,{children:e.jsxs("div",{className:"OptionChain",children:[e.jsx(rc,{}),e.jsx(mc,{}),e.jsx(ds,{positions:t})]})})};const xs=f.createContext(null),Ac=({children:t})=>{const n=Dc();return e.jsx(xs.Provider,{value:n,children:t})},wc=()=>{const{isConnected:t,userAddress:n}=ne(),a=G(),s=se(a,"MarginTrading"),{data:i,error:o}=Ue(t&&[n,"useMarginAccounts"],async()=>{const r=await jc(a,n),l=[],u=[],p=await kc(s);return r.forEach(d=>{const y={id:d,ratioCoeffs:p},m=s.callStatic.calculateMarginAccountValue(d).then(b=>{const g=ie(BigInt(b),Cn);y.balance=g}).catch(console.log),h=s.callStatic.getMarginAccountRatio(d).then(b=>{const g=ie(BigInt(b),5);y.ratio=g}).catch(console.log),T=Promise.all([m,h]).then(()=>l.push(y)).catch(console.log);u.push(T)}),await Promise.all(u),l.sort((d,y)=>d.id<y.id?-1:1)});return o?(console.log(o),null):i},jc=async(t,n)=>{const a=se(t,"MarginAccountManager");return(await bl(a,n)).map(o=>o.args.tokenId.toBigInt())},kc=async t=>{const[n,a]=await Promise.all([t.redCoeff(),t.yellowCoeff()]).then(s=>s.map(i=>ie(BigInt(i),5)));return{red:n,yellow:a}},ze=()=>{const{isConnected:t}=ne();return t?f.useContext(xs):null},Dc=()=>{const t=wc(),n=je("MarginAccount_selected-id",-1n,{serializer:l=>JSON.stringify(Number(l)),deserializer:l=>BigInt(JSON.parse(l))}),[a,s]=n,[i,o]=f.useState(!0);f.useEffect(()=>{const l=t==null?void 0:t.find(c=>c.id===a),u=t==null?void 0:t.length;u&&!l&&s(t[0].id),!H(t)&&(o(!1),u||s(-1n))},[t,a]);const r={accounts:t,selectedAccountIdState:n,isLoading:i,utils:{}};return Ec(r),r},Ec=t=>(Object.keys(ia).forEach(n=>{const a=ia[n];t.utils[n]=a.bind(t)}),t),ia={getSelectedAccount:function(){return this.accounts?this.accounts.find(n=>n.id===this.selectedAccountIdState[0]):null}},Ct=()=>{const t=ze();if(!t)return;const n=t.selectedAccountIdState[0];if(n!==-1n)return n},Ic=()=>{const t=ze();if(!t)return null;const n=t.utils.getSelectedAccount();return n?n.ratioCoeffs:null};const Pc="/sf_draft/assets/confirm_white-d15a05bc.svg";const _s=f.createContext(null),Nc=({children:t})=>{const n=Bc();return e.jsx(_s.Provider,{value:n,children:t})},Zt=()=>f.useContext(_s),Bc=()=>{const t=G();pa();const n=f.useState(!1),a=f.useState(!1),s=f.useState(!1),i=f.useState(!1),[,o]=n,[,r]=a,[,l]=s,[,u]=i;return{isIntroModalOpenState:n,isCreateModalOpenState:a,isWelcomeModalOpenState:s,isCreatingState:i,actions:{openIntro:()=>{o(!0)},skipIntro:()=>{o(!1),r(!0)},createAccount:async T=>{const b=ke(t,"MarginAccountManager");await Ee(t,b.createMarginAccount,[],g=>{try{let _=g.events[0].args.tokenId.toString();return _.length===1&&(_=`0${_}`),`Margin Account #${_} created.`}catch(_){return console.log(_),"Margin Account created."}},u,T)},goToWelcomeModal:()=>{r(!1),l(!0)},startTrading:()=>{l(!1)}}}},Rc="Create new margin account",Jt=({label:t})=>{const n=ze(),a=Zt(),{isConnected:s}=ne(),{connectWallet:i}=Rt(),{isCreatingState:o}=a,[r]=o,{openIntro:l,createAccount:u}=a.actions,p=()=>{var d;(d=n==null?void 0:n.accounts)!=null&&d.length?u():l()},c=()=>r?"Creating...":t??Rc;return s?e.jsx(e.Fragment,{children:e.jsx(z,{className:"CreateMarginAccountBtn",type:"stroke",isDisabled:r,onClick:p,children:c()})}):e.jsx(z,{className:"ConnectWalletBtn",onClick:i,children:"Connect wallet"})};const Ce={getPoolsTokens:Lc,formatRatio:Oc,getRatioClass:Fc,queryRatioAfterPositionOpen:Uc,queryRatioAfterDeposit:$c,queryRatioAfterWithdraw:Hc,queryRatioAfterRepay:Wc};function Lc(t){return _e.map(a=>Z(t,a))}function Oc(t){return`${Math.floor($(t*100n))}%`}function Fc(t,n){const{red:a,yellow:s}=n;return t<a?"_low":t<s?"_medium":"_high"}async function Uc(t,n,a,s){const i=await en(t,s,a);return tn(n.balance+i,n.debt+i)}async function $c(t,n,a,s){const i=await en(t,s,a);return tn(n.balance+i,n.debt)}async function Hc(t,n,a,s){const i=await en(t,s,a);return tn(n.balance-i,n.debt)}async function Wc(t,n,a,s){const i=await en(t,s,a);return tn(n.balance-i,n.debt-i)}const en=async(t,n,a)=>{let s=a;const i=Z(t,"USDC");return n.address!==i.address&&(s=await se(t,"ModularSwapRouter").callStatic.calculatePositionValue(n.address,i.address,a).then(BigInt).then(r=>ie(r,i.decimals)).catch(console.log)),s},tn=(t,n)=>n==0n?bn:ot(t,n),vs=()=>e.jsx("svg",{width:"15",height:"10",viewBox:"0 0 15 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{id:"icon-eternity",children:e.jsx("path",{id:"Vector",d:"M14.9777 4.8961C14.8355 3.68253 14.0771 2.69856 12.9554 2.23937C11.7704 1.76378 10.4433 2.00978 9.51113 2.86255L8.0102 4.22372L8.76856 4.9125L10.1589 3.63333C10.8225 3.02655 11.7546 2.86255 12.6078 3.19055C13.3819 3.50214 13.9033 4.19092 13.9981 5.0109C14.0139 5.12569 14.0139 5.24049 14.0139 5.35529C14.0139 5.47009 13.9981 5.58488 13.9981 5.69968C13.9033 6.53606 13.3819 7.20844 12.6078 7.52003C11.7704 7.84802 10.8541 7.68403 10.1905 7.11004C10.1747 7.09364 10.1747 7.09364 10.1589 7.07724L5.92471 3.25614L5.49813 2.86255C4.55017 2.00978 3.23884 1.76378 2.0381 2.23937C0.932154 2.69856 0.157992 3.68253 0.0315984 4.8961C0.0157992 5.0601 0 5.20769 0 5.37169C0 5.51928 0.0157992 5.68328 0.0315984 5.83088C0.173791 7.04444 0.932154 8.04482 2.0539 8.48761C3.23884 8.96319 4.56597 8.7172 5.51393 7.86442L6.99905 6.50326L6.24069 5.83088L4.85036 7.09364C4.18679 7.70043 3.25464 7.86442 2.40148 7.53643C1.62732 7.22484 1.10594 6.55246 1.01115 5.71608C0.995351 5.60128 0.995351 5.48649 0.995351 5.37169C0.995351 5.25689 1.01115 5.12569 1.01115 5.0273C1.10594 4.20732 1.62732 3.51854 2.40148 3.20695C2.68587 3.09215 2.98605 3.04295 3.27044 3.04295C3.83921 3.04295 4.40798 3.25614 4.83456 3.64973L5.26114 4.04332L9.46373 7.86442L9.49533 7.88082C10.1115 8.45481 10.9015 8.75 11.7072 8.75C12.118 8.75 12.5446 8.668 12.9396 8.50401C14.0613 8.06122 14.8197 7.06084 14.9619 5.84728C14.9777 5.69968 14.9935 5.53568 14.9935 5.38809C15.0093 5.20769 14.9935 5.0601 14.9777 4.8961Z",fill:"white"})})}),bt=({ratio:t,className:n})=>{const a=Ic();if(!a||H(t))return e.jsx(ye,{});const s=Ce.getRatioClass(t,a),i=t>=bn?e.jsx(vs,{}):Ce.formatRatio(t);return e.jsx("div",{className:A("MarginRatio",s,n),children:i})},Cs=({isCreateButtonIncluded:t,isSmall:n})=>{const a=ze();if(a===null)return null;const{accounts:s,selectedAccountIdState:i,isLoading:o}=a,[r,l]=i;if(o)return e.jsx(ye,{});const u=s.map(p=>{const c=p.id===r;return{value:p.id,label:e.jsx(qc,{account:p,isSelected:c})}});return t&&u.push({value:null,label:e.jsx(Jt,{label:"Create new account"}),isDisabled:!0}),e.jsx(fe,{className:A("MarginAccountSelector",t&&"_with-create-btn",n&&"_small"),isDisabled:u.length<=1,options:u,defaultValue:r,onChange:p=>{l(p.value)}},r)},qc=({account:t,isSelected:n})=>{const a=G();if(!t)return e.jsx(ye,{});const{id:s,balance:i,ratio:o}=t,r=s<10n?`0${String(s)}`:String(s),l=te(i,0),p=`https://arbiscan.io/nft/${Je(a,"MarginAccountManager")}/${String(s)}`;return e.jsxs("div",{className:"MarginAccountSelector__option",children:[e.jsxs("div",{className:"MarginAccountSelector__option-head",children:[e.jsxs("div",{className:"MarginAccountSelector__option-id",children:[r,e.jsx("a",{href:p,rel:"noreferrer",target:"_blank",onClick:c=>c.stopPropagation(),onMouseDown:c=>{n&&c.stopPropagation()},children:e.jsx("img",{src:ma,alt:"link"})})]}),e.jsx(z,{className:"MarginAccountSelector__option-button",type:"micro",children:n?e.jsx("img",{src:Pc,alt:"v"}):"Select"})]}),e.jsx(he,{marginValue:10}),e.jsx("div",{className:"MarginAccountSelector__option-body",children:e.jsxs("div",{className:"MarginAccountSelector__option-stats",children:[e.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Balance"}),e.jsx("div",{className:"info-row__value MarginAccountSelector__option-balance",children:e.jsx(K,{isHlight:!0,children:l})})]}),e.jsxs("div",{className:"MarginAccountSelector__option-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Margin Level"}),e.jsx(bt,{className:"info-row__value MarginAccountSelector__option-ratio",ratio:o})]})]})})]})};const nn=t=>{const n=as(t),a={};return n.forEach(s=>{a[s.symbol]=s}),a};const an=({amountStr:t,setAmountStr:n,chosenTokenSymb:a,setChosenTokenSymb:s,tokens:i,maxValueOverride:o=void 0})=>{const r=i.map(y=>({value:y.symbol,label:e.jsx(K,{symbol:y.symbol,isHlight:!0,children:y.symbol})})),l=ro(i),u=nn(i),p=(o==null?void 0:o[a])??u[a].value,c=me(p,l[a].isStable),d=e.jsx(K,{symbol:a,isHlight:!0,children:c});return e.jsxs("div",{className:"TokenAmountInput",children:[e.jsx("div",{className:"TokenAmountInput__title",children:"Amount"}),e.jsxs("div",{className:"TokenAmountInput__content",children:[e.jsx(qt,{value:t,setValue:n,maxValue:p,maxValueDisplayed:d,placeholder:"0"}),e.jsx(fe,{options:r,defaultValue:a,onChange:y=>{n(""),s(y.value)}})]})]})},sn={repay:Vc,deposit:Gc,withdraw:Yc};function Vc(t,n,a,s,i,o=void 0){const r=ke(t,"MarginTrading"),l=Fe(a,s.decimals),u=$t(a);Ee(t,r.repay,[n,s.address,l],{text:`${u} ${s.symbol} were repayed.`,node:e.jsx(_t,{value:u,symbol:s.symbol,children:"were repayed."})},i,o)}function Gc(t,n,a,s,i,o){const r=ke(t,"MarginTrading"),l=ke(t,"MarginOneClick"),u=Fe(a,s.decimals),p=$t(a);Ee(t,s.isETH?l.provideETH:r.provideERC20,s.isETH?[n,{value:u}]:[n,s.address,u],{text:`${p} ${s.symbol} were deposited to your margin account.`,node:e.jsx(_t,{value:p,symbol:s.symbol,children:"were deposited to your margin account."})},i,o)}function Yc(t,n,a,s,i,o){const r=ke(t,"MarginTrading"),l=Fe(a,s.decimals),u=$t(a);Ee(t,r.withdrawERC20,[n,s.address,l],{text:`${u} ${s.symbol} were withdrawn.`,node:e.jsx(_t,{value:u,symbol:s.symbol,children:"were withdrawn."})},i,o)}const Kc=()=>{const t=G(),n=Zt(),{isCreateModalOpenState:a,isCreatingState:s}=n,{createAccount:i,goToWelcomeModal:o}=n.actions,[r,l]=a,[u]=s,p=[{name:"Create",title:"Create Account",content:e.jsx(Qc,{createAccount:i,isCreating:u,callback:()=>d("Enable")})},{name:"Enable",title:"Enable One-Click Trading",content:e.jsx(zc,{callback:()=>d("Deposit")})},{name:"Deposit",content:e.jsx(Xc,{callback:o})}],[c,d]=f.useState(p[0].name),y={};p.forEach(h=>{h.isActive=c===h.name,y[h.name]=h});const m=Ct();return f.useEffect(()=>{if(H(m))return;const h=se(t,"MarginAccountManager"),T=Je(t,"MarginOneClick");h.isApprovedOrOwner(T,m).then(b=>{b||(d("Enable"),l(!0))})},[m]),e.jsxs(Se,{className:"MarginAccountCreateModal",isOpen:r,setIsOpen:l,children:[e.jsx("h1",{className:"MarginAccountCreateModal__title",children:y[c].title??y[c].name}),e.jsx(os,{stagesArr:p}),y[c].content]})},Qc=({createAccount:t,isCreating:n,callback:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Welcome to Sharwa! Follow these simple steps to start using our unique trading products. First, create a margin account. The whole process will take less than 60 seconds!"}),e.jsx(z,{className:"MarginAccountCreateModal__button",onClick:()=>t(a),isDisabled:n,children:n?"Creating...":"Create Margin account"})]}),zc=({callback:t})=>{const n=G(),a=Ct(),[s,i]=f.useState(!1),o=()=>{i(!0);const u=ke(n,"MarginAccountManager"),p=Je(n,"MarginOneClick");Ee(n,u.approve,[p,a],"One-Click Trading enabled.",i,t)},r=()=>{if(H(a))return Pe;if(s)return"Enabling..."},l=()=>{const u=r();return u||"Enable One-Click Trading"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"To streamline your experience, enable One-Click Trading to reduce the number of transactions you need to sign."}),e.jsx(z,{className:"MarginAccountCreateModal__button",isGreen:!0,isDisabled:!!r(),onClick:o,children:l()})]})},Xc=({callback:t})=>{const[n,a]=f.useState(""),s=G(),i=Ce.getPoolsTokens(s),[o,r]=f.useState("USDC"),u=nn(i)[o],p=Ct(),[c,d]=f.useState(void 0),[y,m]=f.useState(!1),h=Je(s,"MarginAccount"),T=ut(o,h,Q(n),d);f.useEffect(()=>{d(void 0)},[n]),De(()=>{d(void 0),T.check()},Ie,[n]);const b=()=>n===""?"Enter amount":n==="0"?"Insufficient amount":Q(n)>u.value?"Insufficient balance":H(c)?Pe:y?c?"Depositing...":"Approving...":null,g=()=>{const C=b();return C||(c?"Deposit":"Approve")},_=()=>{m(!0),T.approve(m,()=>{d(void 0),T.check()})},v=()=>{if(!c)_();else{const C=Q(n);sn.deposit(s,p,C,u,m,t)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountCreateModal__text text-inline",children:"Now, deposit your tokens into your margin account. Remember, when you trade on Sharwa, only the tokens in your margin account are at risk. If your margin account is undergoing liquidation, only the assets in this account are affected."}),e.jsx(he,{marginValue:15}),e.jsx(an,{amountStr:n,setAmountStr:a,chosenTokenSymb:o,setChosenTokenSymb:r,tokens:i}),e.jsx(z,{className:"MarginAccountCreateModal__button",isDisabled:!!b(),isGreen:!b()&&!c,onClick:v,children:g()})]})};const Zc="/sf_draft/assets/uniswap-leverage-6599cd28.svg",Jc="/sf_draft/assets/funding-rates-472fdf94.svg",ep="/sf_draft/assets/funding-rates_mobile-7ed3f26f.svg",tp="/sf_draft/assets/options-a96927ae.svg",np="/sf_draft/assets/options_mobile-63c68d57.svg",ap="/sf_draft/assets/options-profit-2b09f575.svg",sp="/sf_draft/assets/toolkits-6c59efc3.svg",ip="/sf_draft/assets/toolkits_mobile-fb7128d1.svg",rp="/sf_draft/assets/LINK_circled-d3ed9518.svg",op=()=>{const t=Zt(),{isIntroModalOpenState:n}=t,{skipIntro:a}=t.actions,[s,i]=n,[o,r]=f.useState(0),l=[e.jsx(lp,{}),e.jsx(up,{}),e.jsx(cp,{}),e.jsx(pp,{}),e.jsx(dp,{})];return f.useEffect(()=>{if(s){const u=l.length-1;o>u&&a();const p=setInterval(()=>{const c=o+1;r(c)},8*1e3);return()=>clearInterval(p)}},[s,o]),e.jsxs(Se,{className:"MarginAccountIntroModal",isOpen:s,setIsOpen:i,reset:()=>r(0),children:[e.jsx("div",{className:"MarginAccountIntroModal__content",children:l[o]}),e.jsx("button",{className:"MarginAccountIntroModal__skip-btn",onClick:a,children:"Skip introduction"}),e.jsxs("div",{className:"MarginAccountIntroModal__steps-container",children:[e.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _prev",onClick:()=>r(o-1),disabled:o===0}),e.jsx("div",{className:"MarginAccountIntroModal__steps",children:l.map((u,p)=>{const c=p<=o;return e.jsx("button",{className:A("MarginAccountIntroModal__step",c&&"_passed"),onClick:()=>r(p),children:p+1},p)})}),e.jsx("button",{className:"MarginAccountIntroModal__steps-arrow _next",onClick:()=>r(o+1)})]})]})},lp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic",children:[e.jsx("dotlottie-player",{id:"MarginAccountIntroModal__animation-1",src:"https://lottie.host/a3afd567-a7f7-4306-ba85-d1c8712283a0/PSgo2GIw16.lottie",mode:"normal",loop:!0,autoplay:!0}),e.jsx("img",{src:Zc,alt:"Uniswap illustration"})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"10x Leverage on Uniswap"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"All long and short positions are routed through Uniswap v3. Traders benefit from the deep liquidity and fair pricing of Uniswap."})]}),up=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountIntroModal__pic",children:e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:ep}),e.jsx("img",{src:Jc,alt:"Funding rates illustration"})]})}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Cheap Leverage"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Sharwa offers lower funding rates compared to traditional derivative protocols. This is because traders are supported by liquidity providers who supply up to 10x leverage, rather than trading directly against them."})]}),cp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic _options",children:[e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:np}),e.jsx("img",{src:tp,alt:"Options Scheme"})]}),e.jsx("div",{className:"_animation_glare",children:e.jsx("img",{src:ap,alt:"Glaring profit"})})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title _options",children:e.jsx("a",{href:"https://www.hegic.co/",target:"_blank",rel:"noreferrer",children:"American-Style Options"})}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Trade American-style options to effectively hedge your risks. The Margin Account uses the intrinsic value of your option positions as collateral, ensuring you won’t face liquidations, even with 10x leverage, if you’re properly hedged with options."})]}),pp=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"MarginAccountIntroModal__pic _collateral",children:e.jsxs("div",{className:"icon-group _animation_jumping-coins",children:[e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:Ca,alt:"USDC logo"})}),e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:_a,alt:"ETH logo"})}),e.jsx("div",{className:"icon-group__item",children:e.jsx("img",{src:va,alt:"WBTC logo"})})]})}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Multi-Collateral"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"The total value of all your tokens in the margin accounts is summed in USDC, allowing you to trade with up to 10x leverage without needing to sell your holdings."})]}),dp=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginAccountIntroModal__pic _toolkits",children:[e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 480px)",srcSet:ip}),e.jsx("img",{src:sp,alt:"Stop Order graph"})]}),e.jsx("div",{className:"animation-wrapper",children:e.jsx("div",{className:"_animation_glare",children:e.jsx("img",{src:rp,alt:"Chainlink Token icon"})})})]}),e.jsx("h1",{className:"MarginAccountIntroModal__title",children:"Trading Toolkits"}),e.jsx("div",{className:"MarginAccountIntroModal__text text-inline",children:"Soon, we will offer stop-market orders, trailing stop-market orders, auto delta-hedging, and personalized risk profiles for each margin account. Stay tuned!"})]});const yp="/sf_draft/assets/trading-4b0d0849.png",mp=()=>{const t=Zt(),{isWelcomeModalOpenState:n}=t,{startTrading:a}=t.actions,[s,i]=n;return e.jsxs(Se,{className:"MarginAccountWelcomeModal",isOpen:s,setIsOpen:i,children:[e.jsx("div",{className:"MarginAccountWelcomeModal__pic",children:e.jsx("img",{src:yp,alt:"Graphs illustration"})}),e.jsxs("h1",{className:"MarginAccountWelcomeModal__title",children:["You’re ready to start trading ",e.jsx("br",{}),"on Sharwa"]}),e.jsx("div",{className:"MarginAccountWelcomeModal__text text-inline",children:"Enjoy the benefits of leverage, portfolio margining and other features!"}),e.jsx(z,{className:"MarginAccountWelcomeModal__button",onClick:a,children:"Go to Trade"})]})},fp=()=>e.jsx(Ac,{children:e.jsxs(Nc,{children:[e.jsx(bp,{}),e.jsx(Tp,{})]})}),bp=()=>{var s;const t=ze(),n=Tt(),a=[{name:"Trading Terminal",to:"/margin/trading"},{name:"Margin Account",to:"/margin/account",isDisabled:!t}];return a.forEach(i=>{n.pathname.endsWith(i.to)&&(i.isActive=!0)}),e.jsxs("div",{className:"MarginPage",children:[e.jsxs("div",{className:"MarginPage__head",children:[e.jsx(Ia,{}),(s=t==null?void 0:t.accounts)!=null&&s.length?e.jsx(Cs,{isCreateButtonIncluded:!0}):""]}),e.jsx(Nt,{links:a,type:"border"}),e.jsx(ca,{})]})},Tp=()=>e.jsxs(e.Fragment,{children:[e.jsx(op,{}),e.jsx(Kc,{}),e.jsx(mp,{})]});const Ms=f.createContext(null),Ss=f.createContext(null),As=({children:t})=>{const[n,a]=gp();return e.jsx(Ms.Provider,{value:n,children:e.jsx(Ss.Provider,{value:a,children:t})})},hp=()=>f.useContext(Ms),gp=()=>{const[t,n]=f.useReducer(xp,{});return[t,n]},xp=(t,n)=>{switch(n.type){case"added":{const{asset:a,dataFrequency:s,ohlcvData:i}=n;return t[a]||(t[a]={}),t[a][s]||(t[a][s]=i),{...t}}case"reset":return{};default:throw Error(`Unknown action: ${n.type}`)}},He={SERVER_URL:"https://omni.icarus.tools",LIQUIDITY_DEPTH_PERCENTAGE_RANGE:.025,CHART_DATA_FREQUENCIES:[5*Oe*de,1*Ye*Oe*de,4*Ye*Oe*de,gt(1)],SUPERSEDING_POOLS:{}},rn={queryOhlcvData:async(t,n,a,s)=>{const i=vp(n,a,s);return ra(t,i)},queryLiquidityData:async(t,n)=>{const a=Cp(n);return ra(t,a)},getPriceData:Sp,getChartOptions:t=>{var n;return{width:(n=t.current)==null?void 0:n.clientWidth,height:400,rightPriceScale:{borderColor:_n},layout:{background:{color:Wi},textColor:pt,fontFamily:"Gantari"},grid:{vertLines:{color:Gn,style:4},horzLines:{color:Gn,style:4}},crosshair:{vertLine:{color:dt,labelBackgroundColor:Yn},horzLine:{color:dt,labelBackgroundColor:Yn}},localization:{locale:"en-US",timeFormatter:a=>{const s=a*de;return we(s,"dd MMM yyyy, h:mm a")},priceFormatter:a=>"$"+ce(a,2)},timeScale:{timeVisible:!0,tickMarkFormatter:(a,s)=>{const i=a*de;return s===2||s===1?we(i,"d MMM"):we(i,"HH:mm")}}}}},ra=async(t,n)=>{const a=_p(t),s=Mp(n);return fetch(a,s).then(i=>i.json()).catch(console.log)},_p=t=>{const n=Bt[t];if(!n)throw new Error(`Unknown chainId: ${t}`);const a=n.name.toLowerCase();return`${He.SERVER_URL}/${a}`},vp=(t,n,a,s=void 0)=>(s=s??Date.now(),{jsonrpc:"2.0",method:"cush_ohlcvTradingView",params:[t,n,s-a,s],id:0}),Cp=t=>({jsonrpc:"2.0",method:"cush_orderBook",params:[t,0,{max_orders_per_side:10,granularity_index:2}],id:1}),Mp=t=>({headers:{},body:JSON.stringify(t),method:"POST"});function Sp(t){if(!t)return null;const n=()=>{const i=Number(kt(t).close)-Number(t[0].close),o=i/Number(t[0].close)*100;return{inUSDC:ce(i,Ve),inPercentage:ce(o,Ve)}},a=()=>{const i=t.map(o=>ce(Number(o.close),Ve));return To(i)},s=()=>{const i=Number(kt(t).close);return ce(i,Ve)};return{priceChange:n(),...a(),currentPrice:s()}}const oa=He.CHART_DATA_FREQUENCIES[0],Ap=gt(31),ws=(t,n=oa,a=Ap)=>{var m;const s=hp(),i=f.useContext(Ss),[o,r]=f.useState((m=s==null?void 0:s[t])==null?void 0:m[n]),l=G(),u=se(l,"UniswapFactory"),p=vn(l,t),c=Be(t),{error:d,data:y}=Ue(c&&[l,t,n,"useOhlcvForAsset"],async()=>{const h=He.SUPERSEDING_POOLS[t]??await u.getPool(p,Ft(l),Nn),T=await rn.queryOhlcvData(l,h,n,a);if(T!=null&&T.result){const b=$(c);return T.result.candles.push({open:b,high:b,low:b,close:b,time:Date.now()}),T.result.candles.forEach(g=>{g.time=g.time/de}),T.result.candles}else return console.log((T==null?void 0:T.error)??T),null},{refreshInterval:oa,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{var h;r((h=s==null?void 0:s[t])==null?void 0:h[n])},[t,n]),f.useEffect(()=>{y&&(r(y),i({type:"added",asset:t,dataFrequency:n,ohlcvData:y}))},[y]),d?(console.log(d),null):o},wp=t=>{const n=He.CHART_DATA_FREQUENCIES[0];return ws(t,n,gt(1))},jp=()=>{const[t,n]=vt();return e.jsx(As,{children:e.jsx(kp,{asset:t,setAsset:n})})},kp=({asset:t,setAsset:n})=>{const a=wp(t),s=rn.getPriceData(a),i=Ot.map(o=>{const r=jt(o),l=jt("USDC");return{value:o,label:e.jsxs("div",{className:"Asset24hChange__selector-option",children:[e.jsxs("div",{className:"Asset24hChange__selector-option-icons",children:[e.jsx("div",{className:"Asset24hChange__selector-option-icon",children:e.jsx("img",{src:r,alt:`${o} icon`})}),e.jsx("div",{className:"Asset24hChange__selector-option-icon",children:e.jsx("img",{src:l,alt:"USDC icon"})})]}),e.jsxs("div",{className:"Asset24hChange__selector-option-name",children:[o,"/USDC"]})]})}});return e.jsxs("div",{className:"Asset24hChange",children:[e.jsx(fe,{className:"Asset24hChange__selector",options:i,defaultValue:t,onChange:o=>{n(o.value)}},t),e.jsxs("div",{className:"Asset24hChange__data",children:[e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name tip","data-tooltip-id":"CurrentPriceTooltip",children:"Current Price"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:pe(()=>Mt(s.currentPrice,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Change"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:pe(()=>e.jsx(Dp,{assetChangeData:s}),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h High"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:pe(()=>Mt(s.max,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"24h Low"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:pe(()=>Mt(s.min,0),!s)})]}),e.jsxs("div",{className:"Asset24hChange__data-item",children:[e.jsx("div",{className:"Asset24hChange__data-item-name",children:"Interest Rate"}),e.jsx("div",{className:"Asset24hChange__data-item-value",children:J()})]})]}),e.jsx(Ep,{})]})},Dp=({assetChangeData:t})=>{const{inPercentage:n}=t.priceChange,a=n>0,s=n<0,i=a?cn.positive:s?cn.negative:"",o=ht(t.priceChange.inPercentage,2,!0),r=`${i}${Math.abs(o)}%`;return e.jsx("span",{className:A({positive:a,negative:s,neutral:n===0}),children:r})},Ep=()=>e.jsx(ee,{id:"CurrentPriceTooltip",clickable:!0,children:e.jsxs("div",{className:"text-inline",children:["This price is sourced from the ",e.jsx("br",{}),"Uniswap v3 pool. Price data is ",e.jsx("br",{}),"powered by ",e.jsx("a",{href:"https://oku.trade/",target:"_blank",rel:"noreferrer",children:"Oku.Trade"})]})});const Ip=He.CHART_DATA_FREQUENCIES[0],Pp=t=>{const[n,a]=f.useState({}),s=G(),i=se(s,"UniswapFactory"),o=vn(s,t),r=Be(t),{error:l,data:u}=Ue(r&&[s,t,r,"useLiquidityDepth"],async()=>{var y;const p=He.SUPERSEDING_POOLS[t]??await i.getPool(o,Ft(s),Nn),c=await rn.queryLiquidityData(s,p);if(!c.result)throw new Error(((y=c.error)==null?void 0:y.message)??c);const d=m=>{const h=ie(BigInt(m.size),c.result.amount_decimals),T=ie(BigInt(m.price),c.result.price_decimals),b=Tr(h,T);return{...m,amount:h,price:T,totalUSDC:b}};return c.result.asks=c.result.asks.map(d),c.result.bids=c.result.bids.map(d),c.result},{refreshInterval:Ip,refreshWhenHidden:!0,revalidateOnFocus:!1});return f.useEffect(()=>{u&&(n[t]=u,a({...n}))},[u]),l?(console.log(l),null):n==null?void 0:n[t]},{LIQUIDITY_DEPTH_PERCENTAGE_RANGE:la}=He,Np=()=>{const[t]=vt(),n=Pp(t),[a,s]=f.useState(null),i=d=>{const y=d.reduce((T,b)=>T+b.amount,0n),m=d.reduce((T,b)=>T+b.totalUSDC,0n),h=ot(m,y);s({amountSum:y,totalUsdcSum:m,avgPrice:h})},o=Be(t);if(!n||!o)return e.jsx("div",{className:"LiqDepthTable App-box",children:H(n)?e.jsx(nt,{}):e.jsx(Ke,{children:"Liquidity depth fetch error"})});const r=$(o),l=r*(1+la),u=r*(1-la),p=n.asks.filter(d=>{const y=$(d.price);return y<l&&y>r}),c=n.bids.filter(d=>{const y=$(d.price);return y>u&&y<r});return e.jsxs("div",{className:"LiqDepthTable App-box",children:[e.jsxs("div",{className:"LiqDepthTable__header",children:[e.jsx("div",{className:"LiqDepthTable__header-column",children:"Price, USDC"}),e.jsxs("div",{className:"LiqDepthTable__header-column",children:["Amount, ",t]}),e.jsx("div",{className:"LiqDepthTable__header-column",children:"Total, USDC"})]}),e.jsx("div",{className:"LiqDepthTable__overflow",children:e.jsxs("div",{className:"LiqDepthTable__table",children:[e.jsx("div",{className:"LiqDepthTable__table-part _above",children:p.map((d,y)=>{const{price:m,amount:h,totalUSDC:T}=d;return e.jsxs("div",{className:"LiqDepthTable__table-row",onMouseEnter:()=>{const b=p.slice(y);i(b)},"data-tooltip-id":"LiqDepthTableTooltip",children:[e.jsx("div",{className:"LiqDepthTable__table-column",children:te(m)}),e.jsx("div",{className:"LiqDepthTable__table-column",children:te(h)}),e.jsx("div",{className:"LiqDepthTable__table-column",children:te(T)})]},m)})}),e.jsx("div",{className:"LiqDepthTable__table-last-price",children:e.jsx(K,{isHlight:!0,children:Te(ce(r,2))})}),e.jsx("div",{className:"LiqDepthTable__table-part _below",children:c.reverse().map((d,y)=>{const{price:m,amount:h,totalUSDC:T}=d;return e.jsxs("div",{className:"LiqDepthTable__table-row",onMouseEnter:()=>{const b=c.slice(y);i(b)},"data-tooltip-id":"LiqDepthTableTooltip",children:[e.jsx("div",{className:"LiqDepthTable__table-column",children:te(m)}),e.jsx("div",{className:"LiqDepthTable__table-column",children:te(h)}),e.jsx("div",{className:"LiqDepthTable__table-column",children:te(T)})]},m)})})]})}),e.jsx(Bp,{hoveredSum:a,asset:t})]})},Bp=({hoveredSum:t,asset:n})=>{if(!t)return;const a=[{name:"avgPrice",label:"Avg. Price"},{name:"amountSum",label:"Amount"},{name:"totalUsdcSum",label:"Total, USDC"}];return e.jsx(ee,{id:"LiqDepthTableTooltip",className:"LiqDepthTable__tooltip",place:"right",children:e.jsx("div",{className:"LiqDepthTable__tooltip-items",children:a.map(s=>{const{name:i,label:o}=s,r=te(t[i]);return e.jsxs("div",{className:"LiqDepthTable__tooltip-item",children:[e.jsx("div",{className:"LiqDepthTable__tooltip-item-title",children:o}),e.jsx("div",{className:"LiqDepthTable__tooltip-item-value",children:e.jsx(K,{symbol:i==="amountSum"?n:"USDC",isHlight:!0,children:r})})]},i)})})})};const Rp=({type:t,chartData:n,chartContainerRef:a,chartOptions:s,seriesOptions:i,className:o,header:r,callback:l=()=>{}})=>(f.useEffect(()=>{if(!n)return;const u=()=>{p.applyOptions({width:a.current.clientWidth})},p=Ai(a.current,s);return p[`add${Xt(t)}Series`](i).setData(n),window.addEventListener("resize",u),l(p),()=>{window.removeEventListener("resize",u),p.remove()}},[n]),e.jsxs("div",{className:A("App-box","Chart--container",`${o}--container`),children:[r&&e.jsx("div",{className:A("Chart__header",`${o}__header`),children:r}),lt(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:A("Chart",o),ref:a}),","]}),!n,e.jsx(nt,{}))]})),Lp=({chartData:t,chartContainerRef:n,chartOptions:a,seriesOptions:s=Op,className:i,header:o,callback:r=()=>{}})=>e.jsx(Rp,{type:"Candlestick",chartData:t,chartContainerRef:n,chartOptions:a,seriesOptions:s,className:i,header:o,callback:r}),Op={priceLineColor:St,downColor:re,wickDownColor:re,upColor:Le,wickUpColor:Le,borderVisible:!1},Fp=()=>{const[t]=vt();return e.jsx(As,{children:e.jsx(Up,{asset:t})})},Up=({asset:t})=>{const[n,a]=je("AssetPriceChart-dataFrequency",He.CHART_DATA_FREQUENCIES[0]),s=ws(t,n),[i,o]=f.useState(null),r=f.useRef(),l=f.useCallback(p=>{if(!p.time){o(null);return}const c=s.find(d=>d.time===p.time);o(c)},[o,s]),u=p=>{p.timeScale().applyOptions({borderColor:_n}),p.subscribeCrosshairMove(l)};return e.jsx(Lp,{className:"AssetPriceChart",header:e.jsx($p,{dataFrequency:n,setDataFrequency:a,candle:i??(s==null?void 0:s[s.length-1])}),chartData:s,chartContainerRef:r,chartOptions:rn.getChartOptions(r),callback:u})},$p=({dataFrequency:t,setDataFrequency:n,candle:a})=>e.jsxs("div",{className:"AssetPriceChart__header",children:[e.jsx(Hp,{dataFrequency:t,setDataFrequency:n}),e.jsx(Wp,{candle:a})]}),Hp=({dataFrequency:t,setDataFrequency:n})=>{const{CHART_DATA_FREQUENCIES:a}=He;return e.jsx("div",{className:"AssetPriceChart__data-frequency",children:a.map(s=>{const i=s===t,o=Vt(s),r=Math.floor(s/de/Oe),l=Math.floor(r/Ye),u=o>0?`${o}D`:l>0?`${l}h`:`${r}m`;return e.jsx(z,{className:A("AssetPriceChart__data-frequency-btn",i&&"_chosen"),type:"stroke",onClick:()=>n(s),children:u},s)})})},Wp=({candle:t})=>{const n=["open","high","low","close"];if(!t)return null;const a=t.open>t.close;return e.jsx("div",{className:"AssetPriceChart__indicators",children:n.map(s=>{const i=Te(ce(t[s],2));return e.jsxs("div",{className:"AssetPriceChart__indicators-item",children:[e.jsx("span",{className:"AssetPriceChart__indicators-item-name",children:s[0].toUpperCase()}),e.jsx("span",{className:A("AssetPriceChart__indicators-item-value",{negative:a,positive:!a}),children:i})]},s)})})};const qp="/sf_draft/assets/Pashov_Audit_Group-e5d101e4.png",js=()=>e.jsxs("a",{className:"AuditStamp",href:"https://github.com/pashov/audits/blob/master/team/pdf/SharwaFinance-security-review.pdf",target:"_blank",rel:"noreferrer",children:[e.jsx("div",{className:"AuditStamp__text",children:"Audited by"}),e.jsx("div",{className:"AuditStamp__logo",children:e.jsx("img",{src:qp,alt:"Pashov Audit Group"})})]});const Vp="/sf_draft/assets/Uniswap_circled-4e125cab.svg",We=()=>{const{isConnected:t,userAddress:n}=ne(),a=G(),s=ze(),i=Ct(),o=s==null?void 0:s.isLoading,{data:r,error:l}=Ue(t&&!o&&!H(i)&&[n,i,"useMarginAccountData"],async()=>{const u=s.utils.getSelectedAccount()??{},p={id:i,...u},c=Gp(a,i),d=Yp(a,i),y=Kp(a,i);return await Promise.all([c,d,y]).then(([m,h,T])=>{p.debt=m,p.fee=h,p.equity=(p.balance??0n)-m,p.poolsData=T}).catch(console.log),p},{refreshInterval:60*de});return!o&&(!t||H(i))?null:l?(console.log(l),null):r},Gp=async(t,n)=>{const s=await se(t,"MarginTrading").callStatic.calculateDebtWithAccruedInterest(n).catch(console.log);return ie(BigInt(s),Cn)},Yp=async(t,n)=>{if(H(n))return null;const a=_e.map(c=>pr[c]),s=_e.map(c=>vn(t,c)),i=_e.map(c=>se(t,`Pool_${c}`)),o=await Promise.all(i.map(c=>c.getDebtWithAccruedInterest(n).then(BigInt))),r=await Promise.all(i.map(c=>c.portfolioIdToDebt(n).then(BigInt))),l=o.map((c,d)=>{const y=r[d];return c-y});return(await Promise.all(l.map((c,d)=>{const y=ie(c,a[d]),m=s[d];return y>0n?Rn(t,m,y):0n}))).reduce((c,d)=>c+d,0n)},Kp=async(t,n)=>{const a={},s=se(t,"MarginAccount"),i=[];return _e.forEach(o=>{const r=Z(t,o);a[o]={token:r};const l=se(t,`Pool_${o}`);i.push(s.getErc20ByContract(n,r.address).then(BigInt).then(u=>{const p=ie(u,r.decimals);a[o].amount=p}).catch(console.log),l.interestRate().then(BigInt).then(u=>{const p=ie(u,4);a[o].interestRate=p}).catch(console.log),l.getDebtWithAccruedInterest(n).then(BigInt).then(u=>{const p=ie(u,r.decimals);a[o].debt=p}).catch(console.log))}),await Promise.all(i),a};const on=({curRatio:t,estRatio:n})=>e.jsxs("div",{className:"MarginRatioChange",children:[e.jsx(bt,{ratio:t}),n!==null&&e.jsxs(e.Fragment,{children:[e.jsx(Qp,{}),H(n)?e.jsx(ye,{}):e.jsx(bt,{ratio:n})]})]}),Qp=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:e.jsx("path",{d:"M1 3.5C0.723858 3.5 0.5 3.72386 0.5 4C0.5 4.27614 0.723858 4.5 1 4.5V3.5ZM11.3536 4.35355C11.5488 4.15829 11.5488 3.84171 11.3536 3.64645L8.17157 0.464466C7.97631 0.269204 7.65973 0.269204 7.46447 0.464466C7.2692 0.659728 7.2692 0.976311 7.46447 1.17157L10.2929 4L7.46447 6.82843C7.2692 7.02369 7.2692 7.34027 7.46447 7.53553C7.65973 7.7308 7.97631 7.7308 8.17157 7.53553L11.3536 4.35355ZM1 4.5H11V3.5H1V4.5Z",fill:"#747FA6"})}),zp=()=>{var a;const t=ze();let n;return t!=null&&t.isLoading&&(n=e.jsx(nt,{})),(t===null||!((a=t.accounts)!=null&&a.length))&&(n=e.jsx(Jt,{})),e.jsx("div",{className:"MarginTradingPanel App-box",children:n??e.jsx(Xp,{})})},Xp=()=>{const t=G(),n=We(),[a,s]=f.useState(!0),[i,o]=vt(),[r,l]=f.useState(""),[u,p]=f.useState(null),[c,d]=f.useState(null),[y,m]=je("swap-slippage",tt),[h,T]=f.useState(!1),b=Z(t,i),g=Q(r),_=Z(t,"USDC"),v=se(t,"ModularSwapRouter"),C=`calculateAmount${a?"In":"Out"}ERC20`,j=async()=>{let I,N;const M=Z(t,i),x=Q(r);if(a)N=M,I=x;else{const D=se(t,"ModularSwapRouter");N=Z(t,"USDC");const F=await D.callStatic.calculateAmountOutERC20(M.address,N.address,st(x,M)).then(BigInt);I=ta(F,N)}const k=Et(I,y);Ce.queryRatioAfterPositionOpen(t,n,k,N).then(p)},P=async()=>{d(void 0);const I=await R(),N=aa(I,y),M=ot(N,g);d(M)},R=async(I=void 0)=>{const N=st(g,b);return await v.callStatic[C](b.address,_.address,N).then(BigInt).then(x=>ta(x,_)).catch(x=>{console.log("Converting to USDC error:",x),I&&I(!1)})};f.useEffect(()=>{!r||Q(r)===0n?(p(null),d(null)):(p(void 0),d(void 0))},[r,y,a,i]),De(()=>{!r||Q(r)===0n||(j(),P())},Ie,[r,y,a,i]);const w=[{value:"market",label:"Market"},{value:"stop_market",label:"Stop Market",isDisabled:!0}],E=[{value:"ETH",label:e.jsx(K,{symbol:"ETH",isHlight:!0,children:"ETH"})},{value:"BTC",label:e.jsx(K,{symbol:"BTC",isHlight:!0,children:"BTC"})}],S=()=>{if(H(u))return Pe;if(!r)return"Enter amount";if(Q(r)===0n)return"Insufficient amount";if(u<=n.ratioCoeffs.red)return"Critical Est.Ratio";if(h)return"Submitting..."},O=()=>{const I=S();return I||`Open ${a?"Long":"Short"}`},L=async()=>{T(!0);const I=a?_:b,N=a?b:_,M=ke(t,"MarginOneClick"),x=await R(T),k=a?x:g,F=aa(a?g:x,y),q=st(k,I),Y=st(F,N);Ee(t,M.borrowSwap,[n.id,I.address,N.address,q,Y],{text:`${r} ${b.symbol} was ${a?"bought":"sold"}.`,node:e.jsxs(_t,{value:r,symbol:b.symbol,children:["was ",a?"bought":"sold","."]})},T,()=>l(""))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"MarginTradingPanel__inputs",children:[e.jsx("div",{className:"MarginTradingPanel__switcher",children:e.jsx(Hn,{isOn:a,setIsOn:s,oppositeLabels:["Long","Short"]})}),e.jsxs("div",{className:"MarginTradingPanel__input",children:[e.jsx("div",{className:"MarginTradingPanel__input-title",children:"Order Type"}),e.jsx("div",{className:"MarginTradingPanel__input-body",children:e.jsx(fe,{options:w,defaultOption:w[0]})})]}),e.jsxs("div",{className:"MarginTradingPanel__input",children:[e.jsx("div",{className:"MarginTradingPanel__input-title",children:a?"Long":"Short"}),e.jsxs("div",{className:"MarginTradingPanel__input-body",children:[e.jsx(qt,{value:r,setValue:l,placeholder:"0"}),e.jsx(fe,{className:"MarginTradingPanel__asset-selector",options:E,defaultValue:i,onChange:I=>o(I.value)},i)]})]})]}),e.jsxs("div",{className:"MarginTradingPanel__footer",children:[e.jsxs("div",{className:"MarginTradingPanel__stats",children:[e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Market"}),e.jsxs("div",{className:"MarginTradingPanel__stat-value",children:[e.jsx("img",{src:Vp,alt:"Uniswap logo"}),"UNISWAP"]})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Margin Ratio"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:e.jsx(on,{curRatio:n==null?void 0:n.ratio,estRatio:u})})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Slippage"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:e.jsx(Fn,{slippage:y,setSlippage:m,title:""})})]}),e.jsxs("div",{className:"MarginTradingPanel__stat",children:[e.jsx("div",{className:"MarginTradingPanel__stat-name",children:"Est. Entry Price"}),e.jsx("div",{className:"MarginTradingPanel__stat-value",children:pe(()=>c===null?J():e.jsx(K,{symbol:"USDC",isHlight:!0,children:me(c,!0)}),H(c))})]})]}),e.jsx(z,{className:"MarginTradingPanel__button",onClick:L,isDisabled:!!S(),children:O()})]})]})},Zp=()=>e.jsxs("div",{className:"MarginTrading",children:[e.jsx(jp,{}),e.jsx(js,{}),e.jsx(Fp,{}),e.jsx(Np,{}),e.jsx(zp,{})]});const Jp="/sf_draft/assets/pointer-7384e3ac.svg",ed=({isBrief:t})=>{const n=We(),{ratio:a,ratioCoeffs:s}=n??{},i=H(n);if(n===null)return t?e.jsx(un,{noData:!0}):null;if(i)return t?e.jsx(un,{isLoading:!0}):e.jsx(nt,{});const r=a>=bn?300:$(a*100n),l=Math.max(r-100,0)*4,u={left:`${Math.min(l,100)}%`};if(t)return e.jsx(un,{ratio:a});const p=`${Math.floor($(s.red)*100)}%`,c=`${Math.floor($(s.yellow)*100)}%`,d=e.jsx(vs,{});return e.jsxs("div",{className:"MarginLevel",children:[e.jsxs("div",{className:"MarginLevel__head",children:[e.jsx("div",{className:"MarginLevel__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),e.jsx(bt,{ratio:a})]}),e.jsxs("div",{className:"MarginLevel__indicator",children:[e.jsx("div",{className:"MarginLevel__indicator-segment _low",children:p}),e.jsx("div",{className:"MarginLevel__indicator-segment _medium",children:c}),e.jsx("div",{className:"MarginLevel__indicator-segment _high",children:d}),e.jsx("div",{className:"MarginLevel__indicator-pointer",style:u,children:e.jsx("img",{src:Jp,alt:"v"})})]}),e.jsx(ks,{})]})},un=({noData:t,isLoading:n,ratio:a})=>e.jsxs("div",{className:"MarginLevelBrief",children:[e.jsx("div",{className:"MarginLevelBrief__title tip","data-tooltip-id":"MarginLevelTooltip",children:"Margin level"}),t?J():n?e.jsx(ye,{}):e.jsx(bt,{ratio:a}),e.jsx(ks,{})]}),ks=()=>e.jsxs(ee,{id:"MarginLevelTooltip",children:["The margin level is a crucial ",e.jsx("br",{}),"indicator of your margin ",e.jsx("br",{}),"account's health. It helps ",e.jsx("br",{}),"determine how close you are ",e.jsx("br",{}),"to liquidation, which occurs if ",e.jsx("br",{}),"your margin level falls below ",e.jsx("br",{}),"105%.",e.jsx("br",{}),"To calculate the value of your ",e.jsx("br",{}),"collateral and debt, we use ",e.jsx("br",{}),"Chainlink Price Feeds."]}),td=()=>e.jsxs("div",{className:"MarginAccountInfo App-box",children:[e.jsx("h1",{className:"MarginAccountInfo__title",children:"Account Info"}),e.jsxs("div",{className:"MarginAccountInfo__accounts-list",children:[e.jsxs("div",{className:"MarginAccountInfo__chosen-account-field",children:[e.jsx("div",{className:"MarginAccountInfo__chosen-account-field-title",children:"Account ID"}),e.jsx("div",{className:"MarginAccountInfo__chosen-account-field-selector",children:e.jsx(Cs,{isSmall:!0})})]}),e.jsx(Jt,{})]}),e.jsx(he,{marginValue:20}),e.jsx(ed,{}),e.jsx(nd,{})]}),nd=()=>{const t=We(),{ratio:n,ratioCoeffs:a}=t??{};if(H(t))return null;const i={"Reduce Positions":1,"Increase Positions":0,deposit:1,repay:1,withdraw:0},o=Ce.getRatioClass(n,a),r=o==="_low",l=o==="_medium";return e.jsxs("table",{className:"MarginAccountInfo__actions-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(i).map(u=>e.jsx("th",{children:Xt(u)},u))})}),e.jsx("tbody",{children:e.jsx("tr",{children:Object.keys(i).map(u=>{const p=i[u],c=r?!1:l?p:!0;return e.jsx("td",{className:A(!c&&"_denied")},u)})})})]})};const Ds="/sf_draft/assets/re-arrow-195ed622.svg",ad=({setIsRepayModalOpen:t})=>{const n=We(),{equity:a,debt:s,balance:i,fee:o}=n??{},r=H(n),l=()=>{t(!0)};return e.jsxs("div",{className:"MarginAccountBalance App-box",children:[e.jsxs("div",{className:"MarginAccountBalance__head",children:[e.jsx("h1",{className:"MarginAccountBalance__title",children:"Account Balance"}),e.jsx("div",{className:A("MarginAccountBalance__value",!r&&"tip"),"data-tooltip-id":!r&&"MarginAccount_BalanceTooltip",children:pe(()=>e.jsx(K,{isHlight:!0,children:me(i,!0)}),r)})]}),e.jsxs("div",{className:"MarginAccountBalance__items",children:[e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name tip","data-tooltip-id":"MarginAccount_EquityTooltip",children:"Equity"}),e.jsx("div",{className:"MarginAccountBalance__item-value",children:pe(()=>e.jsx(K,{isHlight:!0,children:me(a,!0)}),r)})]}),e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name",children:"Debt"}),e.jsxs("div",{className:"MarginAccountBalance__item-value",children:[pe(()=>e.jsx(K,{isHlight:!0,children:me(s,!0)}),r),e.jsxs(z,{className:"MarginAccountBalance__item-button",type:"micro _with-icon",onClick:l,isDisabled:r||!s,children:[e.jsx("img",{src:Ds,alt:"Repay"}),"Repay"]})]})]}),e.jsxs("div",{className:"MarginAccountBalance__item",children:[e.jsx("div",{className:"MarginAccountBalance__item-name",children:"Interest & Service Fee"}),e.jsx("div",{className:"MarginAccountBalance__item-value",children:pe(()=>e.jsx(K,{isHlight:!0,children:me(o,!0)}),r)})]})]}),e.jsx(sd,{}),e.jsx(id,{})]})},sd=()=>e.jsxs(ee,{id:"MarginAccount_EquityTooltip",children:["Equity is calculated as the ",e.jsx("br",{}),"sum of your collateral, ",e.jsx("br",{}),"unrealized profits from long/",e.jsx("br",{}),"short positions, and the ",e.jsx("br",{}),"intrinsic value of American-",e.jsx("br",{}),"style options, minus your ",e.jsx("br",{}),"debt."]}),id=()=>e.jsxs(ee,{id:"MarginAccount_BalanceTooltip",children:["This is the total value of your ",e.jsx("br",{}),"margin account (your collateral + ",e.jsx("br",{}),"purchased tokens)."]});const mn="/sf_draft/assets/download-93c01438.svg",rd="/sf_draft/assets/upload-ab835e79.svg";const od=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),[o,r]=f.useState(""),[l,u]=f.useState(null),[p,c]=f.useState(!1),d=Ce.getPoolsTokens(i),y=We();f.useEffect(()=>{!o||Q(o)===0n?u(null):u(void 0)},[o]),De(()=>{!o||Q(o)===0n||m()},Ie,[o]);const m=async()=>{const v=Q(o),C=Z(i,a),j=await Ce.queryRatioAfterWithdraw(i,y,v,C);u(j)};if(!y)return null;const h=y.id,T={};Object.values(y.poolsData).forEach(v=>{T[v.token.symbol]=v.amount});const b=()=>o===""?"Enter amount":o==="0"?"Insufficient amount":H(l)?Pe:l<y.ratioCoeffs.red?"Critical Est.Ratio":p?"Withdrawing...":null,g=()=>{const v=b();return v||"Withdraw"},_=()=>{const v=Q(o),C=Z(i,a);sn.withdraw(i,h,v,C,c,()=>n(!1))};return e.jsxs(Se,{className:"MarginWithdrawModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>r(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Withdraw"}),e.jsx(an,{tokens:d,amountStr:o,setAmountStr:r,chosenTokenSymb:a,setChosenTokenSymb:s,maxValueOverride:T})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"MarginLevel"}),e.jsx("div",{className:"info-row__value",children:e.jsx(on,{curRatio:y.ratio,estRatio:l})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!b(),onClick:_,children:g()})]})]})};const ld=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),o=We(),r=o==null?void 0:o.id,[l,u]=f.useState(""),[p,c]=f.useState(null),[d,y]=f.useState(void 0),[m,h]=f.useState(!1),T=Ce.getPoolsTokens(i),b=nn(T),g=b[a],_=Je(i,"MarginAccount"),v=ut(a,_,Q(l),y);f.useEffect(()=>{!l||Q(l)===0n?c(null):(c(void 0),y(void 0))},[l]),De(()=>{y(void 0),!(!l||Q(l)===0n)&&(C(),v.check())},Ie,[l]);const C=async()=>{const S=Q(l),O=await Ce.queryRatioAfterDeposit(i,o,S,g);c(O)},j=()=>l===""?"Enter amount":l==="0"?"Insufficient amount":Q(l)>g.value?"Insufficient balance":H(d)||H(p)?Pe:m?d?"Depositting...":"Approving...":null,P=()=>{const S=j();return S||(d?"Deposit":"Approve")},R=()=>{h(!0),v.approve(h,()=>{y(void 0),v.check()})},w=()=>{const S=Q(l);sn.deposit(i,r,S,b[a],h,()=>n(!1))},E=()=>{d?w():R()};return e.jsxs(Se,{className:"MarginDepositModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>u(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Deposit"}),e.jsx(an,{tokens:T,amountStr:l,setAmountStr:u,chosenTokenSymb:a,setChosenTokenSymb:s})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"MarginLevel"}),e.jsx("div",{className:"info-row__value",children:e.jsx(on,{curRatio:o==null?void 0:o.ratio,estRatio:p})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!j(),onClick:E,children:P()})]})]})};const ud=({isOpen:t,setIsOpen:n,chosenTokenSymb:a,setChosenTokenSymb:s})=>{const i=G(),o=Ct(),[r,l]=f.useState(""),[u,p]=f.useState(void 0),[c,d]=f.useState(void 0),[y,m]=f.useState(!1),h=Ce.getPoolsTokens(i),b=nn(h)[a],g=Je(i,"MarginAccount"),_=ut(a,g,Q(r),p);f.useEffect(()=>{!r||Q(r)===0n?d(null):(d(void 0),p(void 0))},[r]),De(()=>{p(void 0),!(!r||Q(r)===0n)&&(v(),_.check())},Ie,[r]);const v=async()=>{const O=Q(r),L=await Ce.queryRatioAfterDeposit(i,C,O,b);d(L)},C=We();if(!C)return null;const j={};Object.values(C.poolsData).forEach(O=>{j[O.token.symbol]=O.debt});const P=()=>r===""?"Enter amount":r==="0"?"Insufficient amount":Q(r)>b.value?"Insufficient balance":H(u)||H(c)?Pe:y?u?"Repaying...":"Approving...":null,R=()=>{const O=P();return O||(u?"Repay":"Approve")},w=()=>{m(!0),_.approve(m,()=>{p(void 0),_.check()})},E=()=>{const O=Q(r),L=Z(i,a);sn.repay(i,o,O,L,m,()=>n(!1))},S=()=>{u?E():w()};return e.jsxs(Se,{className:"MarginRepayModal MarginPaymentModal",isOpen:t,setIsOpen:n,reset:()=>l(""),children:[e.jsxs("div",{className:"MarginPaymentModal__body",children:[e.jsx("h1",{className:"MarginPaymentModal__title",children:"Repay"}),e.jsx(an,{tokens:h,amountStr:r,setAmountStr:l,chosenTokenSymb:a,setChosenTokenSymb:s,maxValueOverride:j})]}),e.jsxs("div",{className:"MarginPaymentModal__footer",children:[e.jsx("div",{className:"MarginPaymentModal__stats",children:e.jsxs("div",{className:"MarginPaymentModal__stat info-row",children:[e.jsx("div",{className:"info-row__title",children:"Margin Level"}),e.jsx("div",{className:"info-row__value",children:e.jsx(on,{curRatio:C.ratio,estRatio:c})})]})}),e.jsx(z,{className:"MarginPaymentModal__button",isDisabled:!!P(),onClick:S,children:R()})]})]})},fn=["Amount","Interest Rate","Debt"],cd=({isRepayModalOpen:t,setIsRepayModalOpen:n})=>{const a=We(),{poolsData:s,isLoading:i}=a??{isLoading:H(a)},o=be(992),[r,l]=f.useState(!1),[u,p]=f.useState(!1),[c,d]=f.useState(_e[0]),y=(m,h)=>{switch(d(h),m){case"repay":{n(!0);break}case"deposit":{l(!0);break}case"withdraw":{p(!0);break}}};return e.jsxs("div",{className:"MarginAccountAssets App-box",children:[i?e.jsx(nt,{}):o?e.jsx(dd,{poolsData:s,openModal:y}):e.jsx(pd,{poolsData:s,openModal:y}),e.jsx(od,{isOpen:u,setIsOpen:p,chosenTokenSymb:c,setChosenTokenSymb:d}),e.jsx(ld,{isOpen:r,setIsOpen:l,chosenTokenSymb:c,setChosenTokenSymb:d}),e.jsx(ud,{isOpen:t,setIsOpen:n,chosenTokenSymb:c,setChosenTokenSymb:d})]})},pd=({poolsData:t,openModal:n})=>e.jsxs("table",{className:"MarginAccountAssets__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Asset"}),fn.map(a=>e.jsx("th",{children:a},a)),e.jsx("th",{})]})}),e.jsx("tbody",{children:_e.map(a=>{const s=t[a],i=[s.amount,s.interestRate,s.debt];return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(K,{symbol:a,isHlight:!0,children:a})}),i.map((o,r)=>{const l=fn[r],p=Is(o,l==="Interest Rate",s.token);return e.jsx("td",{children:p},l)}),e.jsx("td",{children:e.jsx("div",{className:"MarginAccountAssets__buttons",children:e.jsx(Es,{openModal:n,asset:a})})})]},a)})})]}),dd=({poolsData:t,openModal:n})=>e.jsx("div",{className:"MarginAccountAssets__mobile",children:_e.map(a=>{const s=t[a],i=[s.amount,s.interestRate,s.debt],o=a===kt(_e);return e.jsxs("div",{className:"MarginAccountAssets__mobile-item",children:[e.jsx(K,{className:"MarginAccountAssets__mobile-item-title",symbol:a,isHlight:!0,isLarge:!0,children:a}),e.jsx("div",{className:"MarginAccountAssets__mobile-item-stats",children:i.map((r,l)=>{const u=fn[l],p=l===i.length-1,d=Is(r,u==="Interest Rate",s.token);return e.jsxs(Ge.Fragment,{children:[e.jsxs("div",{className:"MarginAccountAssets__mobile-item-stat info-row",children:[e.jsx("div",{className:"info-row__title",children:u}),e.jsx("div",{className:"info-row__value",children:d})]},u),!p&&e.jsx(he,{marginValue:6})]},u)})}),e.jsx("div",{className:"MarginAccountAssets__mobile-item-buttons",children:e.jsx(Es,{openModal:n,asset:a})}),!o&&e.jsx(he,{marginValue:20})]},a)})}),Es=({openModal:t,asset:n})=>{const s=We().poolsData[n];return e.jsxs(e.Fragment,{children:[e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("repay",n),isDisabled:!s.debt,children:[e.jsx("img",{src:Ds,alt:"Repay"}),"Repay"]}),e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("deposit",n),children:[e.jsx("img",{src:mn,alt:"Deposit"}),"Deposit"]}),e.jsxs(z,{className:"MarginAccountAssets__button",type:"micro _with-icon",onClick:()=>t("withdraw",n),isDisabled:!s.amount,children:[e.jsx("img",{src:rd,alt:"Withdraw"}),"Withdraw"]})]})},Is=(t,n,a)=>{const s=n?`${Ze(t*100n)}%`:me(t,a.isStable);return n?s:e.jsx(K,{symbol:a.symbol,isHlight:!0,children:s})},yd=()=>{const t=ze(),[n,a]=f.useState(!1),{isLoading:s,accounts:i}=t??{},o=!s&&!(i!=null&&i.length);return!t||o?e.jsx("div",{className:"MarginAccount__404",children:e.jsx(Jt,{})}):e.jsxs("div",{className:"MarginAccount",children:[e.jsx(td,{}),e.jsx(ad,{setIsRepayModalOpen:a}),e.jsx(cd,{isRepayModalOpen:n,setIsRepayModalOpen:a})]})};const md=({poolAsset:t,chosenPool:n,setChosenPool:a})=>{const s=G(),i=Z(s,t),o=t===n,r=`EarnPoolRadio_${t}`,l=()=>{o||a(t)},u=()=>{l()},p=()=>{l()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:A("EarnPool","App-box",o&&"_chosen"),children:[e.jsxs("div",{className:"EarnPool__radio",children:[e.jsx("input",{id:r,type:"radio",name:"EarnPool",checked:o,onChange:l}),e.jsx("label",{htmlFor:r})]}),e.jsxs("div",{className:"EarnPool__head",children:[e.jsx("div",{className:"EarnPool__icon",children:e.jsx("img",{src:i.icon_circled,alt:`${i.name} icon`})}),e.jsxs("h1",{className:"EarnPool__title",children:[i.symbol," pool"]})]}),e.jsxs("div",{className:"EarnPool__body",children:[e.jsxs("div",{className:"EarnPool__item _action",children:[e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Total Supplied"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(K,{isHlight:!0,symbol:i.symbol,children:"100,000"})})]}),e.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",onClick:u,children:[e.jsx("img",{src:mn,alt:"Supply"}),"Supply"]})]}),e.jsxs("div",{className:"EarnPool__item _action",children:[e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Your Supplied"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(K,{isHlight:!0,symbol:i.symbol,children:"10,000"})})]}),e.jsx(he,{marginValue:0}),e.jsxs("div",{className:"EarnPool__item-stat",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Available to Withdraw"}),e.jsx("div",{className:"EarnPool__item-value",children:e.jsx(K,{isHlight:!0,symbol:i.symbol,children:"5,000"})})]}),e.jsxs(z,{className:"EarnPool__item-btn",type:"micro _with-icon",onClick:p,children:[e.jsx("img",{src:mn,alt:"Withdraw"}),"Withdraw"]})]}),e.jsxs("div",{className:"EarnPool__item",children:[e.jsx("div",{className:"EarnPool__item-name tip","data-tooltip-id":"SupplyAPYTooltip",children:"Supply APY"}),e.jsx("div",{className:"EarnPool__item-value",children:"5%"})]}),e.jsxs("div",{className:"EarnPool__item",children:[e.jsx("div",{className:"EarnPool__item-name",children:"Utilization Rate"}),e.jsx("div",{className:"EarnPool__item-value",children:"5%"})]})]})]})})},fd=()=>{const[t,n]=je("EarnPage_pool",_e[0]);return e.jsxs("div",{className:"EarnPage",children:[e.jsxs("div",{className:"EarnPage__header",children:[e.jsx("h1",{className:"EarnPage__title",children:"Earn"}),e.jsx(js,{})]}),e.jsx("div",{className:"EarnPage__pools",children:_e.map(a=>e.jsx(md,{poolAsset:a,chosenPool:t,setChosenPool:n},a))}),e.jsx(bd,{})]})},bd=()=>e.jsx(ee,{id:"SupplyAPYTooltip",children:e.jsxs("div",{children:["Supply APY refers to the ",e.jsx("br",{}),"Interest Rate that is earned ",e.jsx("br",{}),"when staking USDC"]})}),Td=()=>{const t=Tt(),n=pa();return f.useEffect(()=>{t.pathname.endsWith("options")&&n("/options/builder"),t.pathname.endsWith("margin")&&n("/margin/trading")},[t.pathname]),e.jsxs(Xs,{children:[e.jsxs(qe,{path:"/options",element:e.jsx(zr,{}),children:[e.jsx(qe,{path:"builder",element:e.jsx(Ou,{})}),e.jsx(qe,{path:"option-chain",element:e.jsx(Sc,{})})]}),e.jsxs(qe,{path:"/margin",element:e.jsx(fp,{}),children:[e.jsx(qe,{path:"trading",element:e.jsx(Zp,{})}),e.jsx(qe,{path:"account",element:e.jsx(yd,{})})]}),e.jsx(qe,{path:"/earn",element:e.jsx(fd,{})}),e.jsx(qe,{path:"*",element:e.jsx(Zs,{to:Zi,replace:!0})})]})};const hd="/sf_draft/assets/Discord-f7d998b5.svg",gd="/sf_draft/assets/Gitbook-c728118d.svg",xd="/sf_draft/assets/Github-d50e83d6.svg",_d="/sf_draft/assets/Mirror-095740c8.svg",vd="/sf_draft/assets/Dune-cc12c29c.svg",Cd="/sf_draft/assets/Twitter-5cfdd2f4.svg",Md=()=>{const t=[{name:"Discord",icon:hd,url:"https://discord.gg/5DGZ7rzSfS"},{name:"Gitbook",icon:gd,url:"https://docs.sharwa.finance/"},{name:"Github",icon:xd,url:"https://github.com/SharwaFinance"},{name:"Mirror",icon:_d,url:"https://mirror.xyz/sharwa-finance.eth"},{name:"Dune",icon:vd,url:"https://dune.com/sharwa_finance/aggregator"},{name:"Twitter",icon:Cd,url:"https://twitter.com/SharwaFinance"}];return e.jsx("footer",{className:"Footer",children:e.jsxs("div",{className:"Footer__content _container",children:[e.jsx(da,{}),e.jsx("div",{className:"Footer__smedia-items",children:t.map(n=>e.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:n.url,children:e.jsx("img",{src:n.icon,alt:`${n.name} logo`})},n.name))})]})})};const Sd=({children:t})=>e.jsx("div",{className:"GlobalStickyMessage",children:t}),Ad=({children:t})=>e.jsx(Oi,{children:e.jsx(Kr,{children:e.jsx(Lu,{children:e.jsx(zl,{children:e.jsx(So,{children:e.jsx(Ko,{children:t})})})})})}),wd=()=>e.jsxs("div",{className:"Tooltips",children:[e.jsx(ee,{id:"Tooltip_default",place:"bottom-start"}),e.jsx(ee,{id:"Tooltip_bottom",place:"bottom"}),e.jsx(ee,{id:"Tooltip_top",place:"top"}),e.jsx(ee,{id:"Tooltip_Asset",hasDelay:!1,place:"bottom"}),e.jsx(ee,{id:"Tooltip_Expiration",place:"bottom-end"}),e.jsx(ee,{id:"Tooltip_MarketInfo",place:"bottom-start"})]});function jd(){const{chain:t}=Ws(),{isConnected:n}=ne(),a=()=>e.jsxs(Ge.Fragment,{children:[e.jsx(Yi,{}),e.jsx("main",{className:"_container",children:e.jsx(Td,{})}),e.jsx(Md,{}),e.jsx(Sd,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]},n),s=()=>e.jsx(Xi,{chainId:t.id});return t!=null&&t.unsupported?s():a()}function kd(){return e.jsx(ri,{fallbackRender:null,children:e.jsxs(e.Fragment,{children:[e.jsx(Ki,{}),e.jsx(wd,{}),e.jsx(Hs,{config:Li(),children:e.jsx(Bs,{children:e.jsx(Ad,{children:e.jsx(jd,{})})})})]})})}Ps.createRoot(document.getElementById("root")).render(e.jsx(Ge.StrictMode,{children:e.jsx(kd,{})}));
